---
ms.openlocfilehash: 8c031198a1faad58ac5c5f5d5f042a1d9a35e8d5
ms.sourcegitcommit: 337bdc5a463875daf2cc6883e5a2da97d56f5000
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/24/2019
ms.locfileid: "72887750"
---
### <a name="accessibility-improvements-in-windows-forms-controls"></a>Vylepšení usnadnění v ovládacích prvcích model Windows Forms

|   |   |
|---|---|
|Podrobnosti|Model Windows Forms vylepšuje, jak funguje s technologiemi usnadnění, aby lépe podporovaly model Windows Forms zákazníky. Mezi ně patří následující změny počínaje .NET Framework 4.7.1:<ul><li>Změny pro zlepšení zobrazení v režimu Vysoký kontrast.</li><li>Změny pro zlepšení prostředí prohlížeče vlastností. Mezi vylepšení prohlížeče vlastností patří:</li><li>Lepší navigace pomocí klávesnice v různých oknech pro výběr rozevíracího seznamu.</li><li>Byla snížena nepotřebná zastavení tabulátoru.</li><li>Lepší vytváření sestav typů ovládacích prvků.</li><li>Vylepšené chování Předčítání.</li><li>Změny pro implementaci chybějících vzorů usnadnění uživatelského rozhraní v ovládacích prvcích.</li></ul>|
|Doporučení|**Jak vyjádřit nebo odhlásit tyto změny**<br>Aby aplikace mohla tyto změny využívat, musí běžet na .NET Framework 4.7.1 nebo novějším. Aplikace může tyto změny využít v jednom z následujících způsobů:<ul><li>Zkompiluje se znovu a zacílí na .NET Framework 4.7.1. Tyto změny přístupnosti jsou ve výchozím nastavení povolené v aplikacích model Windows Forms, které cílí na .NET Framework 4.7.1 nebo novějším.</li><li>Výslovný se ze starší verze chování přístupnosti přidáním následujícího [přepínače AppContext](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) do oddílu <code>&lt;runtime&gt;</code> souboru App. config a jeho nastavením na <code>false</code>, jak ukazuje následující příklad.</li></ul><pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#13;&#10;&lt;configuration&gt;&#13;&#10;&lt;startup&gt;&#13;&#10;&lt;supportedRuntime version=&quot;v4.0&quot; sku=&quot;.NETFramework,Version=v4.7&quot;/&gt;&#13;&#10;&lt;/startup&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;!-- AppContextSwitchOverrides value attribute is in the form of &#39;key1=true/false;key2=true/false  --&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.UseLegacyAccessibilityFeatures=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre><br>Aplikace, které cílí na .NET Framework 4.7.1 nebo novější a chtějí zachovat starší funkce usnadnění, se můžou přihlásit k používání starších funkcí pro usnadnění přístupu tím, že explicitně nastaví tento přepínač AppContext na <code>true</code>.<p/>Přehled automatizace uživatelského rozhraní najdete v tématu [Přehled automatizace uživatelského rozhraní](~/docs/framework/ui-automation/ui-automation-overview.md).<p/>**Přidání podpory pro vzory a vlastnosti automatizace uživatelského rozhraní**<br/>Klienti přístupnosti můžou využít nové funkce usnadnění přístupnosti WinForms pomocí běžných veřejně popsaných vzorů volání. Tyto vzory nejsou specifické pro WinForms. Například klienti přístupnosti můžou volat metodu QueryInterface na rozhraní IAccessible (MAAS) a získat tak rozhraní IServiceProvider. Pokud je toto rozhraní k dispozici, mohou klienti použít metodu QueryService pro vyžádání rozhraní IAccessibleEx. Další informace najdete v tématu [použití IAccessibleEx z klienta](https://docs.microsoft.com/windows/desktop/WinAuto/using-iaccessibleex-from-a-client). Počínaje .NET Framework 4.7.1, IServiceProvider a [IAccessibleEx](https://docs.microsoft.com/windows/desktop/WinAuto/iaccessibleex) (v případě potřeby) jsou k dispozici pro objekty usnadnění přístupnosti WinForms.<p/>.NET Framework 4.7.1 přidává podporu následujících vzorů a vlastností automatizace uživatelského rozhraní:<ul><li>Ovládací prvky <xref:System.Windows.Forms.ToolStripSplitButton> a <xref:System.Windows.Forms.ComboBox> podporují [model rozbalení a sbalení](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</li><li>Ovládací prvek <xref:System.Windows.Forms.ToolStripMenuItem> má hodnotu vlastnosti [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</li><li>Ovládací prvek <xref:System.Windows.Forms.ToolStripItem> podporuje vlastnost <xref:System.Windows.Automation.AutomationElement.NameProperty> a vzorek pro[rozbalení a sbalení](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</li><li>Ovládací prvek <xref:System.Windows.Forms.ToolStripDropDownItem> podporuje <xref:System.Windows.Forms.AccessibleEvents>, které označují StateChange a NameChange – při rozbalení nebo sbalení rozevíracího seznamu.</li><li>Ovládací prvek <xref:System.Windows.Forms.ToolStripDropDownButton> má hodnotu vlastnosti [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</li><li>Ovládací prvek <xref:System.Windows.Forms.DataGridViewCheckBoxCell> podporuje <xref:System.Windows.Automation.TogglePattern>.</li><li>Ovládací prvky <xref:System.Windows.Forms.NumericUpDown> a <xref:System.Windows.Forms.DomainUpDown> podporují vlastnost <xref:System.Windows.Automation.AutomationElement.NameProperty> a mají <xref:System.Windows.Automation.ControlType.Spinner?displayProperty=nameWithType>a [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-spinner-control-type.md) .</p></li></ul>**Vylepšení ovládacího prvku PropertyGrid**<br>.NET Framework 4.7.1 přidává k ovládacímu prvku PropertyBrowser následující vylepšení:<ul><li>Tlačítko **Podrobnosti** v chybovém dialogovém okně, které se zobrazí, když uživatel zadá nesprávnou hodnotu v ovládacím prvku <xref:System.Windows.Forms.PropertyGrid> podporuje [vzor pro rozbalení a sbalení](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md), oznámení o změně stavu a názvu a vlastnost [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) s hodnota <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</li><li>Podokno zpráva zobrazené po rozbalení tlačítka **podrobností** v chybovém dialogovém okně je nyní přístupné z klávesnice a umožňuje programu Narrator oznámit obsah chybové zprávy.</li><li><xref:System.Windows.Forms.AccessibleRole> řádků v ovládacím prvku <xref:System.Windows.Forms.PropertyGrid> se změnily z &quot;řádků&quot; na &quot;buňky&quot;. Buňka se mapuje na UIA ControlType &quot;DataItem&quot;, což umožňuje podpoře příslušných klávesových zkratek a oznámení mluveného komentáře.</li><li><xref:System.Windows.Forms.PropertyGrid> řádky ovládacího prvku, které reprezentují položky hlavičky v případě, že má ovládací prvek <xref:System.Windows.Forms.PropertyGrid> vlastnost <xref:System.Windows.Forms.PropertyGrid.PropertySort> nastavenou na <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType> má vlastnost [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) hodnotu <xref:System.Windows.Automation.ControlType.Button?displayProperty=nameWithType>.</li><li><xref:System.Windows.Forms.PropertyGrid> řádky ovládacího prvku, které reprezentují položky hlavičky, pokud má ovládací prvek <xref:System.Windows.Forms.PropertyGrid> vlastnost <xref:System.Windows.Forms.PropertyGrid.PropertySort> nastavenou na <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType> podporuje [vzorek pro rozbalení a sbalení](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</li><li>Vylepšená navigace klávesnice mezi mřížkou a panelem nástrojů nad ním Stisknutí &quot;SHIFT-TAB&quot; nyní vybere první tlačítko panelu nástrojů namísto celého panelu nástrojů.</li><li>ovládací prvky <xref:System.Windows.Forms.PropertyGrid> zobrazené v režimu Vysoký kontrast nyní vykreslí fokus kolem tlačítka panelu nástrojů, které odpovídá aktuální hodnotě vlastnosti <xref:System.Windows.Forms.PropertyGrid.PropertySort>.</li><li><xref:System.Windows.Forms.PropertyGrid> ovládací prvky zobrazené v režimu Vysoký kontrast a s vlastností <xref:System.Windows.Forms.PropertyGrid.PropertySort> nastavenou na <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType> se nyní zobrazí pozadí záhlaví kategorií ve vysoce kontrastní barvě.</li><li><xref:System.Windows.Forms.PropertyGrid> ovládací prvky lépe odlišit položky panelů nástrojů s fokusem a položkami panelu nástrojů, které označují aktuální hodnotu vlastnosti <xref:System.Windows.Forms.PropertyGrid.PropertySort>. Tato oprava se skládá z Vysoký kontrast změny a změny pro jiné scénáře než Vysoký kontrast.</li><li>ovládací prvky panelu nástrojů pro <xref:System.Windows.Forms.PropertyGrid>, které určují aktuální hodnotu vlastnosti <xref:System.Windows.Forms.PropertyGrid.PropertySort> podporují <xref:System.Windows.Automation.TogglePattern>.</li><li>Vylepšená podpora Narrator pro odlišení vybraného zarovnání ve výběru zarovnání.</li><li>Když se ve formuláři zobrazí prázdný ovládací prvek <xref:System.Windows.Forms.PropertyGrid>, zobrazí se teď fokus, kde dřív to nebylo.</p></li></ul>**Použití barev definovaných operačním systémem v motivech Vysoký kontrast**<br><ul><li>Ovládací prvky <xref:System.Windows.Forms.Button> a <xref:System.Windows.Forms.CheckBox> s jejich vlastností <xref:System.Windows.Forms.ButtonBase.FlatStyle> nastavenou na <xref:System.Windows.Forms.FlatStyle.System?displayProperty=nameWithType>, což je výchozí styl, teď v Vysoký kontrast motivu při výběru použít barvy definované OS. Dříve byly barvy textu a pozadí Nekontrastní a bylo těžké je přečíst.</li><li>Ovládací prvky <xref:System.Windows.Forms.Button>, <xref:System.Windows.Forms.CheckBox>, <xref:System.Windows.Forms.RadioButton>, <xref:System.Windows.Forms.Label>, <xref:System.Windows.Forms.LinkLabel>a <xref:System.Windows.Forms.GroupBox> s vlastností <xref:System.Windows.Forms.Control.Enabled> nastavenou na **hodnotu false** používaly šedou barvu pro vykreslení textu v vysoký kontrastch motivech, což vede k nízkému kontrastu na pozadí. Nyní tyto ovládací prvky používají &quot;zakázaný text&quot; barva definovaná operačním systémem. Tato oprava platí pro ovládací prvky s vlastností <code>FlatStyle</code> nastavenou na jinou hodnotu než <xref:System.Windows.Forms.FlatStyle.System?displayProperty=nameWithType>. Druhé ovládací prvky jsou vykreslovány operačním systémem.</li><li><xref:System.Windows.Forms.DataGridView> nyní vykreslí viditelný obdélník kolem obsahu buňky, která má aktuální fokus. Dřív to nebylo v některých Vysoký kontrast motivech vidět.</li><li><xref:System.Windows.Forms.ToolStripMenuItem> ovládací prvky s vlastností <xref:System.Windows.Forms.ToolStripMenuItem.Enabled> nastavenou na **hodnotu false** nyní používá &quot;zakázaný text&quot; barvy definované operačním systémem.</li><li><xref:System.Windows.Forms.ToolStripMenuItem> ovládací prvky s vlastností <xref:System.Windows.Forms.ToolStripMenuItem.Checked> nastavenou na **hodnotu true** nyní vykreslí značku zaškrtnutí v kontrastní barvě systému.  Dříve se barva značky zaškrtnutí nezměnila na dostatečnou a v Vysoký kontrastch motivech není viditelná.</li></ul>Poznámka: Windows 10 změnil hodnoty pro některé systémové barvy s vysokým kontrastem. Rozhraní model Windows Forms Framework vychází z rozhraní Win32. Pro dosažení nejlepšího prostředí spusťte v nejnovější verzi Windows a přihlaste se k nejnovějším změnám operačního systému přidáním souboru App. manifest do testovací aplikace a odkomentujte následující kód:<pre><code class="lang-xml">&lt;!-- Windows 10 --&gt;&#13;&#10;&lt;supportedOS Id=&quot;{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}&quot; /&gt;&#13;&#10;</code></pre><br>**Vylepšená navigace klávesnicí**<ul><li>Pokud má ovládací prvek <xref:System.Windows.Forms.ComboBox> nastavenou vlastnost <xref:System.Windows.Forms.ComboBox.DropDownStyle> na hodnotu <xref:System.Windows.Forms.ComboBoxStyle.DropDownList?displayProperty=nameWithType> a je prvním ovládacím prvkem v pořadí prvků ve formuláři, nyní zobrazí obdélník fokusu, když je nadřazený formulář otevřen pomocí klávesnice. Před touto změnou byl fokus klávesnice na tomto ovládacím prvku, ale ukazatel fokusu nebyl vykreslen.</li></ul>**Vylepšená podpora Narrator**<ul><li>Ovládací prvek <xref:System.Windows.Forms.MonthCalendar> přidal podporu pro technologie pro usnadnění přístupu pro přístup k ovládacímu prvku, včetně možnosti, aby mohl program Narrator číst hodnotu ovládacího prvku, když předtím nebylo možné.</li><li>Ovládací prvek <xref:System.Windows.Forms.CheckedListBox> nyní upozorní program Narrator, pokud byla změněna vlastnost <xref:System.Windows.Forms.CheckBox.CheckState?displayProperty=nameWithType>. Dříve se v programu Narrator nedostalo oznámení a v důsledku toho nebudou mít uživatelé informováni o tom, že byla vlastnost <xref:System.Windows.Forms.CheckBox.CheckState> aktualizována.</li><li>Ovládací prvek <xref:System.Windows.Forms.LinkLabel> změnil způsob, jakým nástroj upozorňuje text v ovládacím prvku na komentář. Dříve oznámil tento text dvakrát a čte &quot;&amp;&quot; symboly jako skutečný text, i když nejsou viditelné pro uživatele. Duplicitní text byl odebrán z oznámení Předčítání a také nepotřebné &quot;&amp;&quot; symboly.</li><li>Typy ovládacích prvků <xref:System.Windows.Forms.DataGridViewCell> nyní správně hlásí stav jen pro čtení do programu Narrator a dalších technologií pro usnadnění.</li><li>Program Narrator teď dokáže číst systémovou nabídku podřízených oken v aplikacích [více dokumentů rozhraní] ~/docs/Framework/WinForms/Advanced/Multiple-Document-Interface-MDI-Applications.MD).</li><li>Program Narrator teď může číst <xref:System.Windows.Forms.ToolStripMenuItem> ovládací prvky s vlastností <xref:System.Windows.Forms.ToolStripItem.Enabled?displayProperty=nameWithType> nastavenou na **hodnotu false**. Dříve se program Narrator nemohl soustředit na zakázané položky nabídky pro čtení obsahu.</li></ul>|
|Rozsah|Hlavní|
|Version|4.7.1|
|Typ|Změna cílení|
|Ovlivněná rozhraní API|<ul><li><xref:System.Windows.Forms.ToolStripDropDownButton.CreateAccessibilityInstance?displayProperty=nameWithType></li><li><xref:System.Windows.Forms.DomainUpDown.DomainUpDownAccessibleObject.Name?displayProperty=nameWithType></li><li>[MonthCalendar. AccessibilityObject](xref:System.Windows.Forms.Control.AccessibilityObject)</li></ul>|
