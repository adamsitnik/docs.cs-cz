---
ms.openlocfilehash: f1f37e61917e8331b06d91e6abebfe4ce3288e7c
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/23/2019
ms.locfileid: "61783204"
---
### <a name="managed-cryptography-classes-do-not-throw-a-cryptographyexception-in-fips-mode"></a><span data-ttu-id="da4b0-101">Spravované třídy šifrování nevyvolají výjimku CryptographyException v režimu FIPS</span><span class="sxs-lookup"><span data-stu-id="da4b0-101">Managed cryptography classes do not throw a CryptographyException in FIPS mode</span></span>

|   |   |
|---|---|
|<span data-ttu-id="da4b0-102">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="da4b0-102">Details</span></span>|<span data-ttu-id="da4b0-103">V rozhraní .NET Framework 4.7.2 a dřívějších verzích spravované třídy zprostředkovatele kryptografických služeb <xref:System.Security.Cryptography.SHA256Managed> vyvolat <xref:System.Security.Cryptography.CryptographicException> při kryptografické knihovny systému jsou nakonfigurované v režimu FIPS.</span><span class="sxs-lookup"><span data-stu-id="da4b0-103">In .NET Framework 4.7.2 and earlier versions, managed cryptographic provider classes such as <xref:System.Security.Cryptography.SHA256Managed> throw a <xref:System.Security.Cryptography.CryptographicException> when the system cryptographic libraries are configured in FIPS mode.</span></span> <span data-ttu-id="da4b0-104">Vyvolání těchto výjimek vzhledem k tomu, že spravovaná verze neprošel certifikaci 140-2, stejně jako blokování kryptografických algoritmů, které se nezohledňovaly schválení na základě FIPS pravidel standardu FIPS (Federal Information Processing Standards).</span><span class="sxs-lookup"><span data-stu-id="da4b0-104">These exceptions are thrown because the managed versions have not undergone FIPS (Federal Information Processing Standards) 140-2 certification, as well as to block cryptographic algorithms that were not considered to be approved based on the FIPS rules.</span></span>  <span data-ttu-id="da4b0-105">Protože několik vývojáři mají své vývojové počítače v režimu FIPS, vyvolání těchto výjimek často jenom na provozní systémy. Aplikací určených pro rozhraní .NET Framework 4,8 a novějších verzích automaticky přepnout na novější, volný zásady, tak, aby <xref:System.Security.Cryptography.CryptographicException> je již vyvolána ve výchozím nastavení v těchto případech.</span><span class="sxs-lookup"><span data-stu-id="da4b0-105">Because few developers have their development machines in FIPS mode, these exceptions are frequently thrown only on production systems.Applications that target .NET Framework 4.8 and later versions automatically switch to the newer, relaxed policy, so that a <xref:System.Security.Cryptography.CryptographicException> is no longer thrown by default in such cases.</span></span> <span data-ttu-id="da4b0-106">Místo toho spravované třídy šifrování přesměrování kryptografických operací na systémová knihovna kryptografie.</span><span class="sxs-lookup"><span data-stu-id="da4b0-106">Instead, the managed cryptography classes redirect cryptographic operations to a system cryptography library.</span></span> <span data-ttu-id="da4b0-107">Tato změna zásady účinně odstraní potenciálně matoucí rozdíl mezi produkční prostředí a prostředí pro vývojáře a zpřístupňuje nativní součásti a spravované komponenty pracovat v rámci stejné Kryptografické zásady.</span><span class="sxs-lookup"><span data-stu-id="da4b0-107">This policy change effectively removes a potentially confusing difference between developer environments and the production environments and makes native components and managed components operate under the same cryptographic policy.</span></span>|
|<span data-ttu-id="da4b0-108">Doporučení</span><span class="sxs-lookup"><span data-stu-id="da4b0-108">Suggestion</span></span>|<span data-ttu-id="da4b0-109">Pokud toto chování nežádoucí, můžete odhlásit a obnovení předchozího chování tak, která <xref:System.Security.Cryptography.CryptographicException> je vyvolána v režimu FIPS přidáním následujícího kódu [AppContextSwitchOverrides](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) nastavení konfigurace [ \<runtime >](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md) oddílu konfiguračního souboru aplikace:</span><span class="sxs-lookup"><span data-stu-id="da4b0-109">If this behavior is undesirable, you can opt out of it and restore the previous behavior so that a <xref:System.Security.Cryptography.CryptographicException> is thrown in FIPS mode by adding the following [AppContextSwitchOverrides](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) configuration setting to the [\<runtime>](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of your application configuration file:</span></span><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.UseLegacyFipsThrow=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="da4b0-110">Pokud vaše aplikace cílí na .NET Framework 4.7.2 nebo dříve, můžete také přejít k této změně přidáním následujícího kódu [AppContextSwitchOverrides](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) nastavení konfigurace [ \<runtime >](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md)oddílu konfiguračního souboru aplikace:</span><span class="sxs-lookup"><span data-stu-id="da4b0-110">If your application targets .NET Framework 4.7.2 or earlier, you can also opt in to this change by adding the following [AppContextSwitchOverrides](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) configuration setting to the [\<runtime>](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of your application configuration file:</span></span><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.UseLegacyFipsThrow=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>|
|<span data-ttu-id="da4b0-111">Rozsah</span><span class="sxs-lookup"><span data-stu-id="da4b0-111">Scope</span></span>|<span data-ttu-id="da4b0-112">Edge</span><span class="sxs-lookup"><span data-stu-id="da4b0-112">Edge</span></span>|
|<span data-ttu-id="da4b0-113">Version</span><span class="sxs-lookup"><span data-stu-id="da4b0-113">Version</span></span>|<span data-ttu-id="da4b0-114">4.8</span><span class="sxs-lookup"><span data-stu-id="da4b0-114">4.8</span></span>|
|<span data-ttu-id="da4b0-115">Type</span><span class="sxs-lookup"><span data-stu-id="da4b0-115">Type</span></span>|<span data-ttu-id="da4b0-116">Změna cílení</span><span class="sxs-lookup"><span data-stu-id="da4b0-116">Retargeting</span></span>|
|<span data-ttu-id="da4b0-117">Ovlivněná rozhraní API</span><span class="sxs-lookup"><span data-stu-id="da4b0-117">Affected APIs</span></span>|<ul><li><xref:System.Security.Cryptography.AesManaged?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.MD5Cng?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.MD5CryptoServiceProvider?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.RC2CryptoServiceProvider?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.RijndaelManaged?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.RIPEMD160Managed?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.SHA1Managed?displayProperty=nameWithType></li><li><xref:System.Security.Cryptography.SHA256Managed?displayProperty=nameWithType></li></ul>|
