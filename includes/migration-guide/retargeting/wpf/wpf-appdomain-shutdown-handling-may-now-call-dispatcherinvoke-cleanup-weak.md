---
ms.openlocfilehash: 8e75c60126abc2670053eba2c01e1fb36d1a93e8
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/23/2019
ms.locfileid: "61762552"
---
### <a name="wpf-appdomain-shutdown-handling-may-now-call-dispatcherinvoke-in-cleanup-of-weak-events"></a><span data-ttu-id="77c14-101">Zpracování ukončení domény aplikace WPF může nyní volat Dispatcher.Invoke v vyčištění slabé událostí</span><span class="sxs-lookup"><span data-stu-id="77c14-101">WPF AppDomain Shutdown Handling May Now Call Dispatcher.Invoke in Cleanup of Weak Events</span></span>

|   |   |
|---|---|
|<span data-ttu-id="77c14-102">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="77c14-102">Details</span></span>|<span data-ttu-id="77c14-103">V rozhraní .NET Framework 4.7.1 a starší verze WPF potenciálně vytváří <xref:System.Windows.Threading.Dispatcher?displayProperty=nameWithType> na finalizační podproces .NET během vypínání domény aplikace.</span><span class="sxs-lookup"><span data-stu-id="77c14-103">In .NET Framework 4.7.1 and earlier versions, WPF potentially creates a <xref:System.Windows.Threading.Dispatcher?displayProperty=nameWithType> on the .NET finalizer thread during AppDomain shutdown.</span></span>  <span data-ttu-id="77c14-104">Byl opraven v rozhraní .NET Framework 4.7.2 a novějších verzích tím, že vyčištění slabé události s ohledem na vlákno.</span><span class="sxs-lookup"><span data-stu-id="77c14-104">This was fixed in .NET Framework 4.7.2 and later versions by making the cleanup of weak events thread-aware.</span></span>  <span data-ttu-id="77c14-105">Z toho důvodu může volat WPF <xref:System.Windows.Threading.Dispatcher.Invoke%2A?displayProperty=nameWithType> dokončete proces vyčištění. V některých aplikacích tato změna finalizační metodu časování potenciálně způsobit výjimky během AppDomain nebo zpracovat vypnutí.</span><span class="sxs-lookup"><span data-stu-id="77c14-105">Due to this, WPF may call <xref:System.Windows.Threading.Dispatcher.Invoke%2A?displayProperty=nameWithType> to complete the cleanup process.In certain applications, this change in finalizer timing can potentially cause exceptions during AppDomain or process shutdown.</span></span>  <span data-ttu-id="77c14-106">To je obvykle vidět v aplikacích, které nevypínejte správně dispečerů běžící na pracovních vláken před procesu nebo ukončení domény aplikace.</span><span class="sxs-lookup"><span data-stu-id="77c14-106">This is generally seen in applications that do not correctly shut down dispatchers running on worker threads prior to process or AppDomain shutdown.</span></span>  <span data-ttu-id="77c14-107">Tyto aplikace byste měli věnovat pozornost ke správě životnosti dispečerů.</span><span class="sxs-lookup"><span data-stu-id="77c14-107">Such applications should take care to properly manage the lifetime of dispatchers.</span></span>|
|<span data-ttu-id="77c14-108">Doporučení</span><span class="sxs-lookup"><span data-stu-id="77c14-108">Suggestion</span></span>|<span data-ttu-id="77c14-109">Vývojáři v rozhraní .NET Framework 4.7.2 a novějších verzích, můžete zakázat tuto opravu mohla pomoci zmírnění (ale ne eliminovat) problémy načasování, které mohou nastat z důvodu změny vyčištění. Zakázat změnu v hodnotě vyčištění, použijte následující AppContext příznak.</span><span class="sxs-lookup"><span data-stu-id="77c14-109">In .NET Framework 4.7.2 and later versions, developers can disable this fix in order to help alleviate (but not eliminate) timing issues that may occur due to the cleanup change.To disable the change in cleanup, use the following AppContext flag.</span></span><pre><code class="lang-xml">&lt;configuration&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.MS.Internal.DoNotInvokeInWeakEventTableShutdownListener=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre>|
|<span data-ttu-id="77c14-110">Rozsah</span><span class="sxs-lookup"><span data-stu-id="77c14-110">Scope</span></span>|<span data-ttu-id="77c14-111">Edge</span><span class="sxs-lookup"><span data-stu-id="77c14-111">Edge</span></span>|
|<span data-ttu-id="77c14-112">Version</span><span class="sxs-lookup"><span data-stu-id="77c14-112">Version</span></span>|<span data-ttu-id="77c14-113">4.7.2</span><span class="sxs-lookup"><span data-stu-id="77c14-113">4.7.2</span></span>|
|<span data-ttu-id="77c14-114">Type</span><span class="sxs-lookup"><span data-stu-id="77c14-114">Type</span></span>|<span data-ttu-id="77c14-115">Změna cílení</span><span class="sxs-lookup"><span data-stu-id="77c14-115">Retargeting</span></span>|
