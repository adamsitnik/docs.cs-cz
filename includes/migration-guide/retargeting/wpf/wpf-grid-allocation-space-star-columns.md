---
ms.openlocfilehash: 1ebae379b641cbddb2a2c07a199fca057a0d5db0
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/18/2019
ms.locfileid: "59803680"
---
### <a name="wpf-grid-allocation-of-space-to-star-columns"></a><span data-ttu-id="c416b-101">Přidělení prostoru na hvězdičku sloupce mřížky WPF</span><span class="sxs-lookup"><span data-stu-id="c416b-101">WPF Grid allocation of space to star-columns</span></span>

|   |   |
|---|---|
|<span data-ttu-id="c416b-102">Podrobnosti</span><span class="sxs-lookup"><span data-stu-id="c416b-102">Details</span></span>|<span data-ttu-id="c416b-103">Od verze rozhraní .NET Framework 4.7, WPF nahrazuje algoritmus, který <xref:System.Windows.Controls.Grid> používá k přidělení místa pro \*– sloupce.</span><span class="sxs-lookup"><span data-stu-id="c416b-103">Starting with the .NET Framework 4.7, WPF replaces the algorithm that <xref:System.Windows.Controls.Grid> uses to allocate space to \*-columns.</span></span> <span data-ttu-id="c416b-104">Tato akce změní šířku skutečné přiřazená \*-sloupců v mnoha případech:</span><span class="sxs-lookup"><span data-stu-id="c416b-104">This will change the actual width assigned to \*-columns in a number of cases:</span></span><ul><li><span data-ttu-id="c416b-105">Pokud jeden nebo více \*– sloupce také mít minimální nebo maximální šířku, která přepíše proporcionální přidělení pro tento sloupec.</span><span class="sxs-lookup"><span data-stu-id="c416b-105">When one or more \*-columns also have a minimum or maximum width that overrides the proportional allocation for that column.</span></span> <span data-ttu-id="c416b-106">(Minimální šířku lze odvodit z explicitní deklarace hodnota MinWidth nebo ze implicitní minimální získané z obsahu sloupce.</span><span class="sxs-lookup"><span data-stu-id="c416b-106">(The minimum width can derive from an explicit MinWidth declaration, or from an implicit minimum obtained from the column's content.</span></span> <span data-ttu-id="c416b-107">Maximální šířka lze definovat pouze explicitně, od deklarace MaxWidth.)</span><span class="sxs-lookup"><span data-stu-id="c416b-107">The maximum width can only be defined explicitly, from a MaxWidth declaration.)</span></span></li><li><span data-ttu-id="c416b-108">Když jeden nebo více \*– sloupce deklarovat velmi velký \*– váha, větší než 10 ^ 298.</span><span class="sxs-lookup"><span data-stu-id="c416b-108">When one or more \*-columns declare an extremely large \*-weight, greater than 10^298.</span></span></li><li><span data-ttu-id="c416b-109">Když \*-vah se dostatečně neliší setkat s plovoucí desetinnou čárkou nestabilitu (přetečení, podtečení, ztrátu přesnosti).</span><span class="sxs-lookup"><span data-stu-id="c416b-109">When the \*-weights are sufficiently different to encounter floating-point instability (overflow, underflow, loss of precision).</span></span></li><li><span data-ttu-id="c416b-110">Při zaokrouhlení rozložení je povolená a efektivní DPI displeje je dostatečně vysoký.</span><span class="sxs-lookup"><span data-stu-id="c416b-110">When layout rounding is enabled, and the effective display DPI is sufficiently high.</span></span></li></ul><span data-ttu-id="c416b-111">V prvních dvou případech může být výrazně liší od těch, které vytvářených staré algoritmus; šířky vytvářených nový algoritmus v posledním případě bude rozdíl maximálně jeden nebo dva pixelů.</span><span class="sxs-lookup"><span data-stu-id="c416b-111">In the first two cases, the widths produced by the new algorithm can be significantly different from those produced by the old algorithm; in the last case, the difference will be at most one or two pixels.</span></span><p/><span data-ttu-id="c416b-112">Nový algoritmus řeší několik chyb v původní algoritmus:</span><span class="sxs-lookup"><span data-stu-id="c416b-112">The new algorithm fixes several bugs present in the old algorithm:</span></span><ol><li><span data-ttu-id="c416b-113">Celkový přidělený na sloupce může být delší než šířka mřížky.</span><span class="sxs-lookup"><span data-stu-id="c416b-113">Total allocation to columns can exceed the Grid's width.</span></span> <span data-ttu-id="c416b-114">Tato situace může nastat při přidělování místa na sloupec jehož Proporcionální sdílené složky je menší než minimální velikost.</span><span class="sxs-lookup"><span data-stu-id="c416b-114">This can occur when allocating space to a column whose proportional share is less than its minimum size.</span></span> <span data-ttu-id="c416b-115">Algoritmus přiděluje minimální velikost, takže se sníží na místo dostupné ke ostatní sloupce.</span><span class="sxs-lookup"><span data-stu-id="c416b-115">The algorithm allocates the minimum size, which decreases the space available to other columns.</span></span> <span data-ttu-id="c416b-116">Pokud neexistují žádné \*– sloupce vlevo přidělit, bude celkový přidělený bude příliš velký.</span><span class="sxs-lookup"><span data-stu-id="c416b-116">If there are no \*-columns left to allocate, the total allocation will be too large.</span></span></li><li><span data-ttu-id="c416b-117">Celkový počet přidělení může nedosahují Šířka mřížky.</span><span class="sxs-lookup"><span data-stu-id="c416b-117">Total allocation can fall short of the Grid's width.</span></span> <span data-ttu-id="c416b-118">Toto je duální problém, který chcete #1, které při přidělování na sloupec jehož Proporcionální sdílenou složku je větší než maximální velikosti, bez \*-sloupců doleva tak, aby zabíraly slack.</span><span class="sxs-lookup"><span data-stu-id="c416b-118">This is the dual problem to #1, arising when allocating to a column whose proportional share is greater than its maximum size, with no \*-columns left to take up the slack.</span></span></li><li><span data-ttu-id="c416b-119">Dvě \*-sloupců můžou získat přidělení není přímo úměrná jejich \*-váhy.</span><span class="sxs-lookup"><span data-stu-id="c416b-119">Two \*-columns can receive allocations not proportional to their \*-weights.</span></span> <span data-ttu-id="c416b-120">Toto je pouze mírnější verze z 1 / #2, vzniklé při přidělování \*-sloupců A, B a C (v uvedeném pořadí), kde B proporcionální sdílené složky v rozporu s omezením jeho min (nebo max).</span><span class="sxs-lookup"><span data-stu-id="c416b-120">This is a milder version of #1/#2, arising when allocating to \*-columns A, B, and C (in that order), where B's proportional share violates its min (or max) constraint.</span></span> <span data-ttu-id="c416b-121">Jako výše, tím se změní na místo dostupné ke sloupci C, který získá méně (nebo více) přímo úměrná přidělení, než bylo A,</span><span class="sxs-lookup"><span data-stu-id="c416b-121">As above, this changes the space available to column C, who gets less (or more) proportional allocation than A did,</span></span></li><li><span data-ttu-id="c416b-122">Sloupce s velmi váhou (&gt; 10 ^ 298) jsou všechny zacházeno, jako kdyby měly váhu 10 ^ 298.</span><span class="sxs-lookup"><span data-stu-id="c416b-122">Columns with extremely large weights (&gt; 10^298) are all treated as if they had weight 10^298.</span></span> <span data-ttu-id="c416b-123">Proporcionální rozdíly mezi nimi (a mezi sloupci s mírně nižší váhy) se neuplatňují.</span><span class="sxs-lookup"><span data-stu-id="c416b-123">Proportional differences between them (and between columns with slightly smaller weights) are not honored.</span></span></li><li><span data-ttu-id="c416b-124">Sloupce s nekonečnou váhy nejsou správně zpracovány.</span><span class="sxs-lookup"><span data-stu-id="c416b-124">Columns with infinite weights are not handled correctly.</span></span> <span data-ttu-id="c416b-125">[Ve skutečnosti nelze nastavit váhu na nekonečno, ale je toto umělá omezení.</span><span class="sxs-lookup"><span data-stu-id="c416b-125">[Actually you can't set a weight to Infinity, but this is an artificial restriction.</span></span> <span data-ttu-id="c416b-126">Kód přidělení se snažil to zpracovat ho, ale, že úlohu chybná.]</span><span class="sxs-lookup"><span data-stu-id="c416b-126">The allocation code was trying to handle it, but doing a bad job.]</span></span></li><li><span data-ttu-id="c416b-127">Několik menších problémů při předcházení přetečení, podtečení, ztráty přesnosti a podobné problémy s plovoucí desetinnou čárkou.</span><span class="sxs-lookup"><span data-stu-id="c416b-127">Several minor problems while avoiding overflow, underflow, loss of precision and similar floating-point issues.</span></span></li><li><span data-ttu-id="c416b-128">Úpravy při zaokrouhlení rozložení jsou nesprávné na dostatečně vysoké rozlišení DPI.</span><span class="sxs-lookup"><span data-stu-id="c416b-128">Adjustments for layout rounding are incorrect at sufficiently high DPI.</span></span></li></ol><span data-ttu-id="c416b-129">Nový algoritmus generuje výsledky, které splňují následující kritéria:</span><span class="sxs-lookup"><span data-stu-id="c416b-129">The new algorithm produces results that meet the following criteria:</span></span><p/><span data-ttu-id="c416b-130">A.</span><span class="sxs-lookup"><span data-stu-id="c416b-130">A.</span></span> <span data-ttu-id="c416b-131">Skutečné šířka přiřazeno \*– sloupec není nikdy menší než minimální šířku ani větší než maximální šířku.</span><span class="sxs-lookup"><span data-stu-id="c416b-131">The actual width assigned to a \*-column is never less than its minimum width nor greater than its maximum width.</span></span><br/><span data-ttu-id="c416b-132">B.</span><span class="sxs-lookup"><span data-stu-id="c416b-132">B.</span></span> <span data-ttu-id="c416b-133">Každý <em>– sloupec, který není přiřazen minimální nebo maximální šířka se přiřadí přímo úměrná šířku jeho <em>-váhu. Abychom byli přesní, pokud jsou deklarovány dva sloupce s šířkou x</em> a y</em> , a pokud ani jedno z těchto sloupců obdrží minimální nebo maximální šířku, skutečné šířku v a w přiřazená sloupce, které jsou ve stejném poměru: v / w == x a y.</span><span class="sxs-lookup"><span data-stu-id="c416b-133">Each <em>-column that is not assigned its minimum or maximum width is assigned a width proportional to its <em>-weight. To be precise, if two columns are declared with width x</em> and y</em> respectively, and if neither column receives its minimum or maximum width, the actual widths v and w assigned to the columns are in the same proportion: v / w == x / y.</span></span><br/><span data-ttu-id="c416b-134">C.</span><span class="sxs-lookup"><span data-stu-id="c416b-134">C.</span></span> <span data-ttu-id="c416b-135">Celková šířka přidělené &quot;proporcionální&quot; \*– sloupce je rovna volné místo dostupné po přidělení omezených sloupců (pevně daná, auto, a \*– sloupce, které jsou přiděleny jejich šířka argumenty min a max).</span><span class="sxs-lookup"><span data-stu-id="c416b-135">The total width allocated to &quot;proportional&quot; \*-columns is equal to the space available after allocating to the constrained columns (fixed, auto, and \*-columns that are allocated their min or max width).</span></span> <span data-ttu-id="c416b-136">To může být nula, pokud součet minimální šířku přesahuje mřížky je k dispozici šířku.</span><span class="sxs-lookup"><span data-stu-id="c416b-136">This might be zero, for instance if the sum of the minimum widths exceeds the Grid's available width.</span></span><br/><span data-ttu-id="c416b-137">D.</span><span class="sxs-lookup"><span data-stu-id="c416b-137">D.</span></span> <span data-ttu-id="c416b-138">Tyto příkazy mají být interpretovány s ohledem na &quot;ideální&quot; rozložení.</span><span class="sxs-lookup"><span data-stu-id="c416b-138">All these statements are to be interpreted with respect to the &quot;ideal&quot; layout.</span></span> <span data-ttu-id="c416b-139">Při zaokrouhlení rozložení je v platnosti, skutečné šířky se může lišit od ideální šířky o co jeden pixel.</span><span class="sxs-lookup"><span data-stu-id="c416b-139">When layout rounding is in effect, the actual widths can differ from the ideal widths by as much as one pixel.</span></span><br/><span data-ttu-id="c416b-140">Staré algoritmus dodržet (A), ale nepovedlo případném dalším sdílení dodržovat jiných kritérií v případech uvedených výše.</span><span class="sxs-lookup"><span data-stu-id="c416b-140">The old algorithm honored (A) but failed to honor the other criteria in the cases outlined above.</span></span><p/><span data-ttu-id="c416b-141">Všechno, co říkají o sloupce a šířku v tomto článku se vztahuje také na řádky a výšky.</span><span class="sxs-lookup"><span data-stu-id="c416b-141">Everything said about columns and widths in this article applies as well to rows and heights.</span></span>|
|<span data-ttu-id="c416b-142">Doporučení</span><span class="sxs-lookup"><span data-stu-id="c416b-142">Suggestion</span></span>|<span data-ttu-id="c416b-143">Ve výchozím nastavení aplikace, která cílová verze rozhraní .NET Framework počínaje .NET Framework 4.7 se zobrazí nový algoritmus při aplikace, která cílového rozhraní .NET Framework 4.6.2 nebo starší verze se zobrazí původní algoritmus.</span><span class="sxs-lookup"><span data-stu-id="c416b-143">By default, apps that target versions of the .NET Framework starting with the .NET Framework 4.7 will see the new algorithm, while apps that target the .NET Framework 4.6.2 or earlier versions will see the old algorithm.</span></span><p/><span data-ttu-id="c416b-144">Výchozí hodnotu přepsat, použijte následující nastavení:</span><span class="sxs-lookup"><span data-stu-id="c416b-144">To override the default, use the following configuration setting:</span></span><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="c416b-145">Hodnota <code>true</code> vybere původní algoritmus <code>false</code> vybere nový algoritmus.</span><span class="sxs-lookup"><span data-stu-id="c416b-145">The value <code>true</code> selects the old algorithm, <code>false</code> selects the new algorithm.</span></span>|
|<span data-ttu-id="c416b-146">Rozsah</span><span class="sxs-lookup"><span data-stu-id="c416b-146">Scope</span></span>|<span data-ttu-id="c416b-147">Vedlejší</span><span class="sxs-lookup"><span data-stu-id="c416b-147">Minor</span></span>|
|<span data-ttu-id="c416b-148">Version</span><span class="sxs-lookup"><span data-stu-id="c416b-148">Version</span></span>|<span data-ttu-id="c416b-149">4.7</span><span class="sxs-lookup"><span data-stu-id="c416b-149">4.7</span></span>|
|<span data-ttu-id="c416b-150">Type</span><span class="sxs-lookup"><span data-stu-id="c416b-150">Type</span></span>|<span data-ttu-id="c416b-151">Změna cílení</span><span class="sxs-lookup"><span data-stu-id="c416b-151">Retargeting</span></span>|
