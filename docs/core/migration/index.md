---
title: Migrace .NET Core ze služby Project. JSON
description: Naučte se migrovat starší projekt .NET Core pomocí Project. JSON.
ms.date: 07/19/2017
ms.custom: seodec18
ms.openlocfilehash: 6334f06a998054cfaf766654dda59d87f5d23ed8
ms.sourcegitcommit: 6f28b709592503d27077b16fff2e2eacca569992
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/28/2019
ms.locfileid: "70105310"
---
# <a name="migrating-net-core-projects-from-projectjson"></a><span data-ttu-id="4615d-103">Migrace projektů .NET Core ze služby Project. JSON</span><span class="sxs-lookup"><span data-stu-id="4615d-103">Migrating .NET Core projects from project.json</span></span>

<span data-ttu-id="4615d-104">Tento dokument se zabývá scénáři migrace pro projekty .NET Core a přechází do těchto tří scénářů migrace:</span><span class="sxs-lookup"><span data-stu-id="4615d-104">This document will cover migration scenarios for .NET Core projects and will go over the following three migration scenarios:</span></span>

1. [<span data-ttu-id="4615d-105">Migrace z platného nejnovějšího schématu *Project. JSON* na *csproj*</span><span class="sxs-lookup"><span data-stu-id="4615d-105">Migration from a valid latest schema of *project.json* to *csproj*</span></span>](#migration-from-projectjson-to-csproj)
2. [<span data-ttu-id="4615d-106">Migrace z DNX do csproj</span><span class="sxs-lookup"><span data-stu-id="4615d-106">Migration from DNX to csproj</span></span>](#migration-from-dnx-to-csproj)
3. [<span data-ttu-id="4615d-107">Migrace z RC3 a předchozích projektů .NET Core csproj do konečného formátu</span><span class="sxs-lookup"><span data-stu-id="4615d-107">Migration from RC3 and previous .NET Core csproj projects to the final format</span></span>](#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj)

<span data-ttu-id="4615d-108">Tento dokument se vztahuje pouze na starší projekty .NET Core, které stále používají Project. JSON.</span><span class="sxs-lookup"><span data-stu-id="4615d-108">This document is only applicable to older .NET Core projects that still use project.json.</span></span> <span data-ttu-id="4615d-109">Neplatí pro migraci z .NET Framework do .NET Core.</span><span class="sxs-lookup"><span data-stu-id="4615d-109">It is not applicable for migrating from .NET Framework to .NET Core.</span></span>

## <a name="migration-from-projectjson-to-csproj"></a><span data-ttu-id="4615d-110">Migrace z Project. JSON na csproj</span><span class="sxs-lookup"><span data-stu-id="4615d-110">Migration from project.json to csproj</span></span>

<span data-ttu-id="4615d-111">Migraci z *Project. JSON* na *. csproj* lze provést pomocí jedné z následujících metod:</span><span class="sxs-lookup"><span data-stu-id="4615d-111">Migration from *project.json* to *.csproj* can be done using one of the following methods:</span></span>

- [<span data-ttu-id="4615d-112">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="4615d-112">Visual Studio 2017</span></span>](#visual-studio-2017)
- [<span data-ttu-id="4615d-113">Nástroj příkazového řádku dotnet pro migraci</span><span class="sxs-lookup"><span data-stu-id="4615d-113">dotnet migrate command-line tool</span></span>](#dotnet-migrate)

<span data-ttu-id="4615d-114">Obě metody používají stejný základní modul pro migraci projektů, takže výsledky budou stejné pro obě.</span><span class="sxs-lookup"><span data-stu-id="4615d-114">Both methods use the same underlying engine to migrate the projects, so the results will be the same for both.</span></span> <span data-ttu-id="4615d-115">Ve většině případů jedním z těchto dvou způsobů, jak migrovat soubor *Project. JSON* na *csproj* , je jediná věc, kterou potřebujete, a není nutné provádět žádné další ruční úpravy souboru projektu.</span><span class="sxs-lookup"><span data-stu-id="4615d-115">In most cases, using one of these two ways to migrate the *project.json* to *csproj* is the only thing that is needed and no further manual editing of the project file is necessary.</span></span> <span data-ttu-id="4615d-116">Výsledný soubor *. csproj* bude pojmenován stejně jako obsahující název adresáře.</span><span class="sxs-lookup"><span data-stu-id="4615d-116">The resulting *.csproj* file will be named the same as the containing directory name.</span></span>

### <a name="visual-studio-2017"></a><span data-ttu-id="4615d-117">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="4615d-117">Visual Studio 2017</span></span>

<span data-ttu-id="4615d-118">Po otevření souboru *. xproj* nebo souboru řešení, který odkazuje na soubory *. xproj* , se zobrazí dialogové okno **jednosměrného upgradu** .</span><span class="sxs-lookup"><span data-stu-id="4615d-118">When you open a *.xproj* file or a solution file which references *.xproj* files, the **One-way upgrade** dialog appears.</span></span> <span data-ttu-id="4615d-119">V dialogovém okně se zobrazí projekty, které mají být migrovány.</span><span class="sxs-lookup"><span data-stu-id="4615d-119">The dialog displays the projects to be migrated.</span></span>
<span data-ttu-id="4615d-120">Pokud otevřete soubor řešení, budou v seznamu uvedeny všechny projekty zadané v souboru řešení.</span><span class="sxs-lookup"><span data-stu-id="4615d-120">If you open a solution file, all the projects specified in the solution file will be listed.</span></span> <span data-ttu-id="4615d-121">Zkontrolujte seznam projektů, které chcete migrovat, a vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="4615d-121">Review the list of projects to be migrated and select **OK**.</span></span>

![Dialog s jednosměrným upgradem zobrazující seznam projektů, které se mají migrovat](media/one-way-upgrade.jpg)

<span data-ttu-id="4615d-123">Visual Studio automaticky migruje vybrané projekty.</span><span class="sxs-lookup"><span data-stu-id="4615d-123">Visual Studio will migrate the projects chosen automatically.</span></span> <span data-ttu-id="4615d-124">Pokud při migraci řešení nezvolíte možnost všechny projekty, zobrazí se stejné dialogové okno s výzvou k upgradu zbývajících projektů z tohoto řešení.</span><span class="sxs-lookup"><span data-stu-id="4615d-124">When migrating a solution, if you don't choose all projects, the same dialog will appear asking you to upgrade the remaining projects from that solution.</span></span> <span data-ttu-id="4615d-125">Po dokončení migrace projektu můžete zobrazit a upravit jeho obsah tak, že kliknete pravým tlačítkem myši na projekt v okně **Průzkumník řešení** a **vyberete \<upravit název projektu >. csproj**.</span><span class="sxs-lookup"><span data-stu-id="4615d-125">After the project is migrated, you can see and modify its contents by right-clicking the project in the **Solution Explorer** window and selecting **Edit \<project name>.csproj**.</span></span>

<span data-ttu-id="4615d-126">Migrované soubory (*Project. JSON*, *Global. JSON*, *. xproj* a soubor řešení) se přesunou do složky *zálohy* .</span><span class="sxs-lookup"><span data-stu-id="4615d-126">Files that were migrated (*project.json*, *global.json*, *.xproj* and solution file) will be moved to a *Backup* folder.</span></span> <span data-ttu-id="4615d-127">Soubor řešení, který se migruje, se upgraduje na Visual Studio 2017 a nebudete moct otevřít tento soubor řešení v předchozích verzích sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4615d-127">The solution file that is migrated will be upgraded to Visual Studio 2017 and you won't be able to open that solution file in previous versions of Visual Studio.</span></span>
<span data-ttu-id="4615d-128">Soubor s názvem *UpgradeLog. htm* je také uložen a automaticky otevřen, který obsahuje sestavu migrace.</span><span class="sxs-lookup"><span data-stu-id="4615d-128">A file named *UpgradeLog.htm* is also saved and automatically opened that contains a migration report.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4615d-129">Nové nástroje nejsou v aplikaci Visual Studio 2015 k dispozici, takže nemůžete migrovat projekty pomocí této verze sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4615d-129">The new tooling is not available in Visual Studio 2015, so you cannot migrate your projects using that version of Visual Studio.</span></span>

### <a name="dotnet-migrate"></a><span data-ttu-id="4615d-130">dotnet migrate</span><span class="sxs-lookup"><span data-stu-id="4615d-130">dotnet migrate</span></span>

<span data-ttu-id="4615d-131">Ve scénáři příkazového řádku můžete použít [`dotnet migrate`](../tools/dotnet-migrate.md) příkaz.</span><span class="sxs-lookup"><span data-stu-id="4615d-131">In the command-line scenario, you can use the [`dotnet migrate`](../tools/dotnet-migrate.md) command.</span></span> <span data-ttu-id="4615d-132">Migruje projekt, řešení nebo sadu složek v tomto pořadí v závislosti na tom, které z nich byly nalezeny.</span><span class="sxs-lookup"><span data-stu-id="4615d-132">It will migrate a project, a solution or a set of folders in that order, depending on which ones were found.</span></span>
<span data-ttu-id="4615d-133">Při migraci projektu se migruje projekt a všechny jeho závislosti.</span><span class="sxs-lookup"><span data-stu-id="4615d-133">When you migrate a project, the project and all its dependencies are migrated.</span></span>

<span data-ttu-id="4615d-134">Migrované soubory (*Project. JSON*, *Global. JSON* a *. xproj*) se přesunou do složky *zálohy* .</span><span class="sxs-lookup"><span data-stu-id="4615d-134">Files that were migrated (*project.json*, *global.json* and *.xproj*) will be moved to a *backup* folder.</span></span>

> [!NOTE]
> <span data-ttu-id="4615d-135">Pokud používáte Visual Studio Code, `dotnet migrate` příkaz nebude upravovat soubory specifické pro Visual Studio Code, jako je. `tasks.json`</span><span class="sxs-lookup"><span data-stu-id="4615d-135">If you are using Visual Studio Code, the `dotnet migrate` command will not modify Visual Studio Code-specific files such as `tasks.json`.</span></span> <span data-ttu-id="4615d-136">Tyto soubory je třeba změnit ručně.</span><span class="sxs-lookup"><span data-stu-id="4615d-136">These files need to be changed manually.</span></span>
> <span data-ttu-id="4615d-137">To platí také v případě, že používáte Project Ryder nebo jakýkoli Editor nebo integrované vývojové prostředí (IDE) jiné než Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4615d-137">This is also true if you are using Project Ryder or any editor or Integrated Development Environment (IDE) other than Visual Studio.</span></span>

<span data-ttu-id="4615d-138">Prohlédněte si [mapování mezi vlastnostmi Project. JSON a csproj](../tools/project-json-to-csproj.md) pro porovnání formátů Project. JSON a csproj.</span><span class="sxs-lookup"><span data-stu-id="4615d-138">See [A mapping between project.json and csproj properties](../tools/project-json-to-csproj.md) for a comparison of project.json and csproj formats.</span></span>

### <a name="common-issues"></a><span data-ttu-id="4615d-139">Běžné problémy</span><span class="sxs-lookup"><span data-stu-id="4615d-139">Common issues</span></span>

- <span data-ttu-id="4615d-140">Pokud se zobrazí chyba: "Nebyl nalezen žádný spustitelný soubor, který by odpovídal příkazu dotnet – migrace":</span><span class="sxs-lookup"><span data-stu-id="4615d-140">If you get an error: "No executable found matching command dotnet-migrate":</span></span>

<span data-ttu-id="4615d-141">Spusťte `dotnet --version` , abyste viděli verzi, kterou používáte.</span><span class="sxs-lookup"><span data-stu-id="4615d-141">Run `dotnet --version` to see which version you are using.</span></span> <span data-ttu-id="4615d-142">[`dotnet migrate`](../tools/dotnet-migrate.md)vyžaduje .NET Core CLI RC3 nebo vyšší.</span><span class="sxs-lookup"><span data-stu-id="4615d-142">[`dotnet migrate`](../tools/dotnet-migrate.md) requires .NET Core CLI RC3 or higher.</span></span>
<span data-ttu-id="4615d-143">Tato chyba se zobrazí, pokud máte globální soubor *. JSON* v aktuálním nebo nadřazeném adresáři a `sdk` verze je nastavená na starší verzi.</span><span class="sxs-lookup"><span data-stu-id="4615d-143">You’ll get this error if you have a *global.json* file in the current or parent directory and the `sdk` version is set to an older version.</span></span>

## <a name="migration-from-dnx-to-csproj"></a><span data-ttu-id="4615d-144">Migrace z DNX do csproj</span><span class="sxs-lookup"><span data-stu-id="4615d-144">Migration from DNX to csproj</span></span>

<span data-ttu-id="4615d-145">Pokud stále používáte DNX pro vývoj v .NET Core, proces migrace by se měl provádět ve dvou fázích:</span><span class="sxs-lookup"><span data-stu-id="4615d-145">If you are still using DNX for .NET Core development, your migration process should be done in two stages:</span></span>

1. <span data-ttu-id="4615d-146">Použijte [stávající pokyny k migraci DNX](from-dnx.md) k migraci z DNX na rozhraní PŘÍKAZového řádku s povoleným formátem JSON pro Project.</span><span class="sxs-lookup"><span data-stu-id="4615d-146">Use the [existing DNX migration guidance](from-dnx.md) to migrate from DNX to project-json enabled CLI.</span></span>
2. <span data-ttu-id="4615d-147">Postupujte podle kroků z předchozí části a migrujte z *Project. JSON* na *. csproj*.</span><span class="sxs-lookup"><span data-stu-id="4615d-147">Follow the steps from the previous section to migrate from *project.json* to *.csproj*.</span></span>  

> [!NOTE]
> <span data-ttu-id="4615d-148">DNX se oficiálně zastaralá během vydání verze Preview 1 .NET Core CLI.</span><span class="sxs-lookup"><span data-stu-id="4615d-148">DNX has become officially deprecated during the Preview 1 release of the .NET Core CLI.</span></span>

## <a name="migration-from-earlier-net-core-csproj-formats-to-rtm-csproj"></a><span data-ttu-id="4615d-149">Migrace z dřívějších formátů .NET Core csproj do RTM csproj</span><span class="sxs-lookup"><span data-stu-id="4615d-149">Migration from earlier .NET Core csproj formats to RTM csproj</span></span>

<span data-ttu-id="4615d-150">Formát .NET Core csproj se mění a vyvíjí u každé nové předběžné verze nástrojů.</span><span class="sxs-lookup"><span data-stu-id="4615d-150">The .NET Core csproj format has been changing and evolving with each new pre-release version of the tooling.</span></span> <span data-ttu-id="4615d-151">Neexistuje žádný nástroj, který by migrovali soubor projektu z dřívějších verzí sady csproj na nejnovější, takže je nutné ručně upravit soubor projektu.</span><span class="sxs-lookup"><span data-stu-id="4615d-151">There is no tool that will migrate your project file from earlier versions of csproj to the latest, so you need to manually edit the project file.</span></span> <span data-ttu-id="4615d-152">Skutečný postup závisí na verzi souboru projektu, který migrujete.</span><span class="sxs-lookup"><span data-stu-id="4615d-152">The actual steps depend on the version of the project file you are migrating.</span></span> <span data-ttu-id="4615d-153">Níže jsou uvedeny pokyny, které je třeba vzít v úvahu v závislosti na změnách, ke kterým došlo mezi verzemi:</span><span class="sxs-lookup"><span data-stu-id="4615d-153">The following is some guidance to consider based on the changes that happened between versions:</span></span>

- <span data-ttu-id="4615d-154">Odeberte vlastnost verze nástrojů z `<Project>` elementu, pokud existuje.</span><span class="sxs-lookup"><span data-stu-id="4615d-154">Remove the tools version property from the `<Project>` element, if it exists.</span></span>
- <span data-ttu-id="4615d-155">Z elementu odeberte obor názvů`xmlns`XML (). `<Project>`</span><span class="sxs-lookup"><span data-stu-id="4615d-155">Remove the XML namespace (`xmlns`) from the `<Project>` element.</span></span>
- <span data-ttu-id="4615d-156">Pokud neexistuje, `Sdk` přidejte atribut `<Project>` do prvku a nastavte jej na `Microsoft.NET.Sdk` nebo `Microsoft.NET.Sdk.Web`.</span><span class="sxs-lookup"><span data-stu-id="4615d-156">If it doesn't exist, add the `Sdk` attribute to the `<Project>` element and set it to `Microsoft.NET.Sdk` or `Microsoft.NET.Sdk.Web`.</span></span> <span data-ttu-id="4615d-157">Tento atribut určuje, že projekt používá sadu SDK, která má být použita.</span><span class="sxs-lookup"><span data-stu-id="4615d-157">This attribute specifies that the project uses the SDK to be used.</span></span> <span data-ttu-id="4615d-158">`Microsoft.NET.Sdk.Web`se používá pro webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="4615d-158">`Microsoft.NET.Sdk.Web` is used for web apps.</span></span>
- <span data-ttu-id="4615d-159">Odeberte příkazy `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` a z horní a dolní části projektu. `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />`</span><span class="sxs-lookup"><span data-stu-id="4615d-159">Remove the `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` and `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` statements from the top and bottom of the project.</span></span> <span data-ttu-id="4615d-160">Tyto příkazy import jsou odvozeny v sadě SDK, takže není nutné, aby byly v projektu.</span><span class="sxs-lookup"><span data-stu-id="4615d-160">These import statements are implied by the SDK, so there is no need for them to be in the project.</span></span>
- <span data-ttu-id="4615d-161">Pokud máte `Microsoft.NETCore.App` projekt nebo `NETStandard.Library` `<PackageReference>` položky, měli byste je odebrat.</span><span class="sxs-lookup"><span data-stu-id="4615d-161">If you have `Microsoft.NETCore.App` or `NETStandard.Library` `<PackageReference>` items in your project, you should remove them.</span></span> <span data-ttu-id="4615d-162">Tyto odkazy na balíčky jsou [odvozeny v sadě SDK](https://aka.ms/sdkimplicitrefs).</span><span class="sxs-lookup"><span data-stu-id="4615d-162">These package references are [implied by the SDK](https://aka.ms/sdkimplicitrefs).</span></span>
- <span data-ttu-id="4615d-163">`Microsoft.NET.Sdk` Odeberte`<PackageReference>` element, pokud existuje.</span><span class="sxs-lookup"><span data-stu-id="4615d-163">Remove the `Microsoft.NET.Sdk` `<PackageReference>` element, if it exists.</span></span> <span data-ttu-id="4615d-164">Odkaz na sadu SDK přichází prostřednictvím `Sdk` atributu `<Project>` elementu.</span><span class="sxs-lookup"><span data-stu-id="4615d-164">The SDK reference comes through the `Sdk` attribute on the `<Project>` element.</span></span>
- <span data-ttu-id="4615d-165">Odeberte [globy](https://en.wikipedia.org/wiki/Glob_(programming)) , které jsou [zahrnuté v sadě SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span><span class="sxs-lookup"><span data-stu-id="4615d-165">Remove the [globs](https://en.wikipedia.org/wiki/Glob_(programming)) that are [implied by the SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span></span> <span data-ttu-id="4615d-166">Ponecháním těchto globy ve vašem projektu dojde k chybě při sestavování, protože položky kompilace budou duplikovány.</span><span class="sxs-lookup"><span data-stu-id="4615d-166">Leaving these globs in your project will cause an error on build because compile items will be duplicated.</span></span>

<span data-ttu-id="4615d-167">Po provedení těchto kroků by váš projekt měl být plně kompatibilní s formátem RTM .NET Core csproj.</span><span class="sxs-lookup"><span data-stu-id="4615d-167">After these steps your project should be fully compatible with the RTM .NET Core csproj format.</span></span>

<span data-ttu-id="4615d-168">Příklady před a po migraci ze starého formátu csproj na nový najdete v článku [aktualizace nástrojů pro vylepšení sady Visual Studio 2017 RC – .NET Core](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) na blogu .NET.</span><span class="sxs-lookup"><span data-stu-id="4615d-168">For examples of before and after the migration from old csproj format to the new one, see the [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) article on the .NET blog.</span></span>

## <a name="see-also"></a><span data-ttu-id="4615d-169">Viz také:</span><span class="sxs-lookup"><span data-stu-id="4615d-169">See also</span></span>

- [<span data-ttu-id="4615d-170">Přenos, migrace a Upgrade projektů sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="4615d-170">Port, Migrate, and Upgrade Visual Studio Projects</span></span>](/visualstudio/porting/port-migrate-and-upgrade-visual-studio-projects)
