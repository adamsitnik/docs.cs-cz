---
title: Aktivace instance
ms.date: 03/30/2017
ms.assetid: 134c3f70-5d4e-46d0-9d49-469a6643edd8
ms.openlocfilehash: 41dfc076bdee72c2f4d0c781c6588caa927c740e
ms.sourcegitcommit: 160a88c8087b0e63606e6e35f9bd57fa5f69c168
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/09/2019
ms.locfileid: "57703397"
---
# <a name="instance-activation"></a><span data-ttu-id="0ae99-102">Aktivace instance</span><span class="sxs-lookup"><span data-stu-id="0ae99-102">Instance Activation</span></span>
<span data-ttu-id="0ae99-103">Store Instance pracovního postupu SQL spouští interní úlohy, která pravidelně probudí a instance pracovních postupů spustitelných nebo aktivovatelné zjistí databáze trvalosti.</span><span class="sxs-lookup"><span data-stu-id="0ae99-103">The SQL Workflow Instance Store runs an internal task that periodically wakes up and detects runnable or activatable workflow instances in the persistence database.</span></span> <span data-ttu-id="0ae99-104">Pokud najde instance pracovního postupu spustitelný, upozorní hostitele pracovního postupu, které podporují aktivaci instance.</span><span class="sxs-lookup"><span data-stu-id="0ae99-104">If it finds a runnable workflow instance, it notifies the workflow host that is capable of activating the instance.</span></span> <span data-ttu-id="0ae99-105">Pokud v úložišti instancí najde instanci aktivovatelné pracovního postupu, upozorní obecný hostitele, který aktivuje hostitele pracovního postupu, která pak spustí instanci pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="0ae99-105">If the instance store finds an activatable workflow instance, it notifies a generic host that activates a workflow host, which in turn runs the workflow instance.</span></span> <span data-ttu-id="0ae99-106">Následující části v tomto tématu popisují proces aktivace instance podrobně.</span><span class="sxs-lookup"><span data-stu-id="0ae99-106">The following sections in this topic explain the instance activation process in detail.</span></span>  
  
## <a name="RunnableSection"></a> <span data-ttu-id="0ae99-107">Zjišťování a aktivace spustitelné instance pracovního postupu</span><span class="sxs-lookup"><span data-stu-id="0ae99-107">Detecting and Activating Runnable Workflow Instances</span></span>  
 <span data-ttu-id="0ae99-108">Store Instance pracovního postupu SQL bude považovat za instanci pracovního postupu *spustitelných* Pokud instance není v pozastaveném stavu nebo stavu dokončení a splňuje následující podmínky:</span><span class="sxs-lookup"><span data-stu-id="0ae99-108">The SQL Workflow Instance Store considers a workflow instance *runnable* if the instance is not in the suspended state or the completed state and satisfies the following conditions:</span></span>  
  
-   <span data-ttu-id="0ae99-109">Instance odemknut a má čekajícího časovače, kterému vypršela platnost.</span><span class="sxs-lookup"><span data-stu-id="0ae99-109">The instance is unlocked and has a pending timer that has expired.</span></span>  
  
-   <span data-ttu-id="0ae99-110">Instance má vypršela platnost zámku na něj.</span><span class="sxs-lookup"><span data-stu-id="0ae99-110">The instance has an expired lock on it.</span></span>  
  
-   <span data-ttu-id="0ae99-111">Instance je odemknutá a že má stav **zpracování**.</span><span class="sxs-lookup"><span data-stu-id="0ae99-111">The instance is unlocked and its status is **Executing**.</span></span>  
  
 <span data-ttu-id="0ae99-112">Vyvolá Store Instance pracovního postupu SQL <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> když najde spustitelné instanci.</span><span class="sxs-lookup"><span data-stu-id="0ae99-112">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> when it finds a runnable instance.</span></span> <span data-ttu-id="0ae99-113">Potom úložiště SqlWorkflowInstanceStore zastaví monitorování až <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> se volá jednou ve storu.</span><span class="sxs-lookup"><span data-stu-id="0ae99-113">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="0ae99-114">Hostitele pracovního postupu, který má přihlášený(á) k odběru <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> a dokáže načítání instance, spustí <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> proti úložiště instance k načtení instance do paměti.</span><span class="sxs-lookup"><span data-stu-id="0ae99-114">A workflow host that has subscribed for the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> and capable of loading the instance executes the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> against the instance store to load the instance into memory.</span></span> <span data-ttu-id="0ae99-115">Hostitel pracovního postupu se považuje za podporující načítání instance pracovního postupu, pokud mají vlastnosti metadat o hostiteli a instance **WorkflowServiceType** nastavena na stejnou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="0ae99-115">A workflow host is considered capable of loading a workflow instance if the host and the instance have metadata property **WorkflowServiceType** set to the same value.</span></span>  
  
## <a name="detecting-and-activating-activatable-workflow-instances"></a><span data-ttu-id="0ae99-116">Zjišťování a aktivace instance aktivovatelné pracovních postupů</span><span class="sxs-lookup"><span data-stu-id="0ae99-116">Detecting and Activating Activatable Workflow Instances</span></span>  
 <span data-ttu-id="0ae99-117">Instance pracovního postupu se považuje za *aktivovatelné* Pokud instance je spustitelný a neexistuje žádné hostitele pracovního postupu, který podporuje načítání instance běží v počítači.</span><span class="sxs-lookup"><span data-stu-id="0ae99-117">A workflow instance is considered *activatable* if the instance is runnable and there is no workflow host that is capable of loading the instance is running on the computer.</span></span> <span data-ttu-id="0ae99-118">Definice instance spustitelných pracovního postupu naleznete v tématu zjištění a aktivace spustitelných instancí pracovního postupu výše.</span><span class="sxs-lookup"><span data-stu-id="0ae99-118">See Detecting and Activating Runnable Workflow Instances above for the definition of a runnable workflow instance.</span></span>  
  
 <span data-ttu-id="0ae99-119">Vyvolá Store Instance pracovního postupu SQL <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> při instance pracovního postupu aktivovatelné najde v databázi.</span><span class="sxs-lookup"><span data-stu-id="0ae99-119">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> when it finds an activatable workflow instance in the database.</span></span> <span data-ttu-id="0ae99-120">Potom úložiště SqlWorkflowInstanceStore zastaví monitorování až <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> se volá jednou ve storu.</span><span class="sxs-lookup"><span data-stu-id="0ae99-120">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="0ae99-121">Při obecné hostitele, který má přihlášený(á) k odběru <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> přijímá události, je spuštěn <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> proti v úložišti instancí k získání aktivační parametry potřebné pro vytvoření hostitele pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="0ae99-121">When a generic host that has subscribed for the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> receives the event, it executes the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> against the instance store to obtain activation parameters required to create a workflow host.</span></span> <span data-ttu-id="0ae99-122">Obecný hostitel používá tyto aktivační parametry k vytvoření hostitele pracovního postupu, která pak načte a spustí instanci spustitelných služby.</span><span class="sxs-lookup"><span data-stu-id="0ae99-122">The generic host uses these activation parameters to create a workflow host, which in turn loads and runs the runnable service instance.</span></span>  
  
## <a name="generic-hosts"></a><span data-ttu-id="0ae99-123">Obecný hostitele</span><span class="sxs-lookup"><span data-stu-id="0ae99-123">Generic Hosts</span></span>  
 <span data-ttu-id="0ae99-124">Obecný hostitel je hostitel s hodnotou vlastnosti metadat **WorkflowServiceType** pro obecný hostitele je nastavena na **WorkflowServiceType.Any** k označení, že dokáže zpracovat jakýkoli typ pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="0ae99-124">A generic host is a host with the value of the metadata property **WorkflowServiceType** for generic hosts is set to **WorkflowServiceType.Any** to indicate that it can handle any workflow type.</span></span> <span data-ttu-id="0ae99-125">Obecný hostitele má XName parametr s názvem **ActivationType**.</span><span class="sxs-lookup"><span data-stu-id="0ae99-125">A generic host has an XName parameter named **ActivationType**.</span></span>  
  
 <span data-ttu-id="0ae99-126">V současné době Store Instance pracovního postupu SQL podporuje obecné hostitele s hodnotou ActivationType parametrem nastaveným na **WAS**.</span><span class="sxs-lookup"><span data-stu-id="0ae99-126">Currently, the SQL Workflow Instance Store supports generic hosts with value of the ActivationType parameter set to **WAS**.</span></span> <span data-ttu-id="0ae99-127">Pokud ActivationType není nastaven na služba WAS, vyvolá Store Instance pracovního postupu SQL <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span><span class="sxs-lookup"><span data-stu-id="0ae99-127">If the ActivationType is not set to WAS, the SQL Workflow Instance Store throws an <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span></span> <span data-ttu-id="0ae99-128">Služba správy pracovního postupu, který se dodává s [!INCLUDE[dublin](../../../includes/dublin-md.md)] je obecný hostitele, který má typ aktivace nastavený na **WAS**.</span><span class="sxs-lookup"><span data-stu-id="0ae99-128">The Workflow Management Service that ships with the [!INCLUDE[dublin](../../../includes/dublin-md.md)] is a generic host that has the activation type set to **WAS**.</span></span>  
  
 <span data-ttu-id="0ae99-129">Pro aktivaci WAS obecný hostitel vyžaduje sadu parametrů aktivace pro odvození adresu koncového bodu, ve kterém můžete aktivovat nové hostitele.</span><span class="sxs-lookup"><span data-stu-id="0ae99-129">For WAS activation, a generic host requires a set of activation parameters to derive the endpoint address at which new hosts can be activated.</span></span> <span data-ttu-id="0ae99-130">Parametry aktivace pro aktivaci WAS jsou název lokality, cesta k aplikaci vzhledem k webu a cestu ke službě vzhledem k aplikaci.</span><span class="sxs-lookup"><span data-stu-id="0ae99-130">The activation parameters for WAS activation are name of the site, path to the application relative to the site, and path to the service relative to the application.</span></span> <span data-ttu-id="0ae99-131">Store Instance pracovního postupu SQL ukládá tyto parametry aktivace během provádění <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>.</span><span class="sxs-lookup"><span data-stu-id="0ae99-131">The SQL Workflow Instance Store stores these activation parameters during the execution of the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>.</span></span>  
  
## <a name="runnable-instances-detection-period"></a><span data-ttu-id="0ae99-132">Interval detekce spustitelných instancí</span><span class="sxs-lookup"><span data-stu-id="0ae99-132">Runnable Instances Detection Period</span></span>  
 <span data-ttu-id="0ae99-133">**Období zjišťování spustitelných instancí** vlastnost Store Instance pracovního postupu SQL určuje časové období, po jejímž uplynutí Store Instance pracovního postupu SQL spustí úlohu detekce zjistit žádné spustitelné nebo aktivovatelné pracovního postupu instance databáze stálost po dokončení předchozího cyklu zjišťování.</span><span class="sxs-lookup"><span data-stu-id="0ae99-133">The **Runnable Instances Detection Period** property of the SQL Workflow Instance Store specifies the time period after which the SQL Workflow Instance Store runs a detection task to detect any runnable or activatable workflow instances in the persistence database after the previous detection cycle.</span></span> <span data-ttu-id="0ae99-134">Zobrazit [období zjišťování spustitelných instancí](runnable-instances-detection-period.md) podrobné informace o této vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="0ae99-134">See [Runnable Instances Detection Period](runnable-instances-detection-period.md) for more details on this property.</span></span>
