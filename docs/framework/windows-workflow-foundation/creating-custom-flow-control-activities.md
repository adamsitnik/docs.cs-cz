---
title: Vytváření vlastních aktivit řízení toku
ms.date: 03/30/2017
ms.assetid: 27f409f6-2d1d-4cfb-9765-93eb2ad667d5
ms.openlocfilehash: 8e7d4caad197631509fe80a5b5a08eff4d228c1c
ms.sourcegitcommit: 005980b14629dfc193ff6cdc040800bc75e0a5a5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/14/2019
ms.locfileid: "70989720"
---
# <a name="creating-custom-flow-control-activities"></a><span data-ttu-id="c4f2f-102">Vytváření vlastních aktivit řízení toku</span><span class="sxs-lookup"><span data-stu-id="c4f2f-102">Creating custom flow control activities</span></span>
<span data-ttu-id="c4f2f-103">.NET Framework obsahuje různé aktivity řízení toku, které fungují podobně jako abstraktní programové struktury (například <xref:System.Activities.Statements.Flowchart>) nebo standardní programovací příkazy ( <xref:System.Activities.Statements.If>například).</span><span class="sxs-lookup"><span data-stu-id="c4f2f-103">The .NET Framework contains a variety of flow-control activities that function similarly to abstract programming structures (such as <xref:System.Activities.Statements.Flowchart>)   or to standard programming statements (such as <xref:System.Activities.Statements.If>).</span></span> <span data-ttu-id="c4f2f-104">Toto téma popisuje architekturu jednoho z ukázkových projektů, [které nepatří do obecného příkazu foreach](./samples/non-generic-foreach.md).</span><span class="sxs-lookup"><span data-stu-id="c4f2f-104">This topic discusses the architecture of one of the sample projects, [Non-Generic ForEach](./samples/non-generic-foreach.md).</span></span>  
  
## <a name="creating-the-custom-class"></a><span data-ttu-id="c4f2f-105">Vytvoření vlastní třídy</span><span class="sxs-lookup"><span data-stu-id="c4f2f-105">Creating the custom class</span></span>  
 <span data-ttu-id="c4f2f-106">Vzhledem k tomu, že neobecná třída foreach bude potřebovat naplánovat podřízené aktivity, bude nutné odvozovat z <xref:System.Activities.NativeActivity>, protože aktivity odvozené z <xref:System.Workflow.Activities.CodeActivity> nemají tuto funkci.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-106">Since the Non-Generic ForEach class will need to schedule child activities, it will need to derive from <xref:System.Activities.NativeActivity>, since activities that derive from <xref:System.Workflow.Activities.CodeActivity> do not have this functionality.</span></span>  
  
```csharp  
public sealed class ForEach : NativeActivity  
{
}
```  
  
 <span data-ttu-id="c4f2f-107">Vlastní třída vyžaduje několik členů, aby ukládala data používaná aktivitou a poskytovala funkcionalitu pro provádění podřízených aktivit aktivity.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-107">The custom class requires several members to store data being used by the activity, and to provide functionality to execute the activity’s child activities.</span></span> <span data-ttu-id="c4f2f-108">Mezi tyto členy patří:</span><span class="sxs-lookup"><span data-stu-id="c4f2f-108">These members include:</span></span>  
  
- <span data-ttu-id="c4f2f-109">`valueEnumerator`: <xref:System.Activities.Variable%601> Typ<xref:System.Collections.IEnumerator> , který se používá k iteraci v kolekci položek, není veřejný.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-109">`valueEnumerator`: The non-public <xref:System.Activities.Variable%601> of type <xref:System.Collections.IEnumerator> used to iterate over the collection of items.</span></span> <span data-ttu-id="c4f2f-110">Tento člen je typu <xref:System.Activities.Variable%601> , protože se používá interně v aktivitě, nikoli argument nebo veřejnou vlastnost, která by se použila v případě, že by tento objekt měl mít původ mimo aktivitu.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-110">This member is of type <xref:System.Activities.Variable%601> because it is used internally in the activity, rather than an argument or public property, which would be used if this object were to have an origin outside the activity.</span></span>  
  
- <span data-ttu-id="c4f2f-111">`OnChildComplete`: Veřejná <xref:System.Activities.CompletionCallback> vlastnost, která se spustí, když každý podřízený uzel dokončí provádění.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-111">`OnChildComplete`: The public <xref:System.Activities.CompletionCallback> property that executes when each child completes execution.</span></span> <span data-ttu-id="c4f2f-112">Tento člen je definován jako vlastnost CLR, protože jeho hodnota se nemění pro různé instance aktivity.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-112">This member is defined as a CLR property, since its value will not change for different instances of the activity.</span></span>  
  
- <span data-ttu-id="c4f2f-113">`Values`: Kolekce vstupů použitých pro iterace podřízené aktivity.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-113">`Values`: The collection of inputs used for the iterations of the child activity.</span></span> <span data-ttu-id="c4f2f-114">Tento člen je typu <xref:System.Activities.InArgument%601>, protože počátek dat je mimo aktivitu, ale během provádění aktivity se neočekává, že se v obsahu kolekce mění.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-114">This member is of type <xref:System.Activities.InArgument%601>, since the origin of the data is outside the activity, but the contents of the collection is not expected to change during the execution of the activity.</span></span> <span data-ttu-id="c4f2f-115">Pokud aktivita potřebuje funkci ke změně obsahu této kolekce v době, kdy byla aktivita spuštěná (pro přidání nebo odebrání aktivit), bude tento člen definovaný jako <xref:System.Activities.ActivityAction>, který by se pak vyhodnotil pokaždé, když bylo k němu přístup, aby byla pro aktivitu k dispozici změny.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-115">If the activity needed the functionality to change the contents of this collection while the activity was executing (to add or remove activities, for instance), this member would have been defined as an <xref:System.Activities.ActivityAction>, which then would have been evaluated every time it was accessed, so that changes would be available to the activity.</span></span>  
  
- <span data-ttu-id="c4f2f-116">`Body`: Tento člen definuje aktivitu, která má být provedena pro každou položku v `Values` kolekci.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-116">`Body`: This member defines the activity to be executed for each item in the `Values` collection.</span></span> <span data-ttu-id="c4f2f-117">Tento člen je definován jako <xref:System.Activities.ActivityAction> , aby byl vyhodnocen při každém jeho použití.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-117">This member is defined as an <xref:System.Activities.ActivityAction> so that it is evaluated every time it is accessed.</span></span>  
  
- <span data-ttu-id="c4f2f-118">`Execute`: Tato metoda používá `InternalExecute` `OnForEachComplete`neveřejné členy k naplánování spuštění a přiřazení obslužné rutiny dokončení podřízené aktivity definované v těle člena. `GetStateAndExecute`</span><span class="sxs-lookup"><span data-stu-id="c4f2f-118">`Execute`: This method uses the `InternalExecute`, `OnForEachComplete`, and `GetStateAndExecute` non-public members to schedule the execution and assign the completion handler of the child activity defined in the Body member.</span></span>  
  
- <span data-ttu-id="c4f2f-119">`CacheMetadata`: Tento člen poskytuje modul runtime s informacemi, které potřebuje k provedení aktivity.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-119">`CacheMetadata`: This member provides the runtime with the information it needs to execute the activity.</span></span> <span data-ttu-id="c4f2f-120">Ve výchozím nastavení bude `CacheMetadata` metoda aktivity informovat modul runtime všech veřejných členů aktivity, ale vzhledem k tomu, že tato aktivita používá pro některé funkce soukromé členy, musí informovat modul runtime své existence, aby mohl modul runtime vědět ihned.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-120">By default, an activity’s `CacheMetadata` method will inform the runtime of all public members of the activity, but since this activity uses private members for some functionality, it needs to inform the runtime of their existence so that the runtime can be aware of them.</span></span> <span data-ttu-id="c4f2f-121">V tomto případě `CacheMetadata` je funkce přepsána tak, aby byl `valueEnumerator` k soukromému členu umožněn pøístup.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-121">In this case, the `CacheMetadata` function is overridden so that the private `valueEnumerator` member can be accessed.</span></span> <span data-ttu-id="c4f2f-122">Tento člen také vytvoří argument pro hodnoty aktivity tak, aby je bylo možné předat do aktivity během provádění.</span><span class="sxs-lookup"><span data-stu-id="c4f2f-122">This member also creates an argument for the values for the activity so that they can be passed in to the activity during execution.</span></span>
