---
title: Používání delegátů aktivit
ms.date: 03/30/2017
ms.assetid: e33cf876-8979-440b-9b23-4a12d1139960
ms.openlocfilehash: 38b99446e38551a9954228eaa3682e2e81753ddb
ms.sourcegitcommit: 160a88c8087b0e63606e6e35f9bd57fa5f69c168
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/09/2019
ms.locfileid: "57707531"
---
# <a name="using-activity-delegates"></a><span data-ttu-id="fb1be-102">Používání delegátů aktivit</span><span class="sxs-lookup"><span data-stu-id="fb1be-102">Using Activity Delegates</span></span>
<span data-ttu-id="fb1be-103">Delegátů aktivit umožňují autorům aktivity vystavit zpětná volání s konkrétní podpisy, které mohou uživatelé aktivity zadat na základě aktivity obslužné rutiny.</span><span class="sxs-lookup"><span data-stu-id="fb1be-103">Activity delegates enable activity authors to expose callbacks with specific signatures, for which users of the activity can provide activity-based handlers.</span></span> <span data-ttu-id="fb1be-104">K dispozici jsou dva typy delegátů aktivit: <xref:System.Activities.ActivityAction%601> se používá k definování delegátů aktivit, které nemají návratovou hodnotu a <xref:System.Activities.ActivityFunc%601> se používá k definování delegátů aktivit, které nemají návratovou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="fb1be-104">Two types of activity delegates are available: <xref:System.Activities.ActivityAction%601> is used to define activity delegates that do not have a return value, and <xref:System.Activities.ActivityFunc%601> is used to define activity delegates that do have a return value.</span></span>  
  
 <span data-ttu-id="fb1be-105">Delegátů aktivit jsou užitečné v situacích, kdy podřízené aktivity musí být omezeny s tím, že některé podpis.</span><span class="sxs-lookup"><span data-stu-id="fb1be-105">Activity delegates are useful in scenarios where a child activity must be constrained to having a certain signature.</span></span> <span data-ttu-id="fb1be-106">Například <xref:System.Activities.Statements.While> aktivita může obsahovat libovolný typ podřízené aktivity bez omezení, ale text <xref:System.Activities.Statements.ForEach%601> aktivita je <xref:System.Activities.ActivityAction%601>a podřízenou aktivitu, takže v konečném důsledku je spuštěn <xref:System.Activities.Statements.ForEach%601> musí mít <xref:System.Activities.InArgument%601> , který je stejného typu jako objekty její členové kolekce, která <xref:System.Activities.Statements.ForEach%601> vytvoří výčet.</span><span class="sxs-lookup"><span data-stu-id="fb1be-106">For example, a <xref:System.Activities.Statements.While> activity can contain any type of child activity with no constraints, but the body of a <xref:System.Activities.Statements.ForEach%601> activity is an <xref:System.Activities.ActivityAction%601>, and the child activity that is ultimately executed by <xref:System.Activities.Statements.ForEach%601> must have an <xref:System.Activities.InArgument%601> that is the same type of the members of the collection that the <xref:System.Activities.Statements.ForEach%601> enumerates.</span></span>  
  
## <a name="using-activityaction"></a><span data-ttu-id="fb1be-107">Pomocí ActivityAction</span><span class="sxs-lookup"><span data-stu-id="fb1be-107">Using ActivityAction</span></span>  
 <span data-ttu-id="fb1be-108">Několik [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] aktivity pomocí aktivity akce, jako <xref:System.Activities.Statements.Catch> aktivity a <xref:System.Activities.Statements.ForEach%601> aktivity.</span><span class="sxs-lookup"><span data-stu-id="fb1be-108">Several [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] activities use activity actions, such as the <xref:System.Activities.Statements.Catch> activity and the <xref:System.Activities.Statements.ForEach%601> activity.</span></span> <span data-ttu-id="fb1be-109">V obou případech představuje akci aktivity umístění Určuje, kde Autor pracovního postupu aktivity k poskytování požadované chování při vytváření pracovního postupu pomocí jedné z těchto činností.</span><span class="sxs-lookup"><span data-stu-id="fb1be-109">In each case, the activity action represents a location where the workflow author specifies an activity to provide the desired behavior when composing a workflow using one of these activities.</span></span> <span data-ttu-id="fb1be-110">V následujícím příkladu <xref:System.Activities.Statements.ForEach%601> aktivita se používá k zobrazení textu v okně konzoly.</span><span class="sxs-lookup"><span data-stu-id="fb1be-110">In the following example, a <xref:System.Activities.Statements.ForEach%601> activity is used to display text to the console window.</span></span> <span data-ttu-id="fb1be-111">Text <xref:System.Activities.Statements.ForEach%601> je určen pomocí <xref:System.Activities.ActivityAction%601> , který odpovídá vašemu typu <xref:System.Activities.Statements.ForEach%601> což je řetězec.</span><span class="sxs-lookup"><span data-stu-id="fb1be-111">The body of the <xref:System.Activities.Statements.ForEach%601> is specified by using an <xref:System.Activities.ActivityAction%601> that matches the type of the <xref:System.Activities.Statements.ForEach%601> which is string.</span></span> <span data-ttu-id="fb1be-112"><xref:System.Activities.Statements.WriteLine> Aktivity podle <xref:System.Activities.ActivityDelegate.Handler%2A> má jeho <xref:System.Activities.Statements.WriteLine.Text%2A> argument je vázán na řetězcové hodnoty v kolekci, která <xref:System.Activities.Statements.ForEach%601> aktivit iterace.</span><span class="sxs-lookup"><span data-stu-id="fb1be-112">The <xref:System.Activities.Statements.WriteLine> activity specified in the <xref:System.Activities.ActivityDelegate.Handler%2A> has its <xref:System.Activities.Statements.WriteLine.Text%2A> argument bound to the string values in the collection that the <xref:System.Activities.Statements.ForEach%601> activity iterates.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#6](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#6)]  
  
 <span data-ttu-id="fb1be-113">ActionArgument se používá tok jednotlivých položek v kolekci, která se WriteLine.</span><span class="sxs-lookup"><span data-stu-id="fb1be-113">The actionArgument is used to flow the individual items in the collection to the WriteLine.</span></span> <span data-ttu-id="fb1be-114">Když uživatel vyvolá pracovní postup, se zobrazí následující výstup do konzoly.</span><span class="sxs-lookup"><span data-stu-id="fb1be-114">When the workflow is invoked, the following output is displayed to the console.</span></span>  
 ``` 
 HelloWorld.
 ```  
<span data-ttu-id="fb1be-115">Příklady v tomto tématu pomocí syntaxe inicializace objektu.</span><span class="sxs-lookup"><span data-stu-id="fb1be-115">The examples in this topic use object initialization syntax.</span></span> <span data-ttu-id="fb1be-116">Syntaxe inicializace objektu může být užitečný způsob, jak vytvořit definice pracovního postupu v kódu, protože obsahuje hierarchické zobrazení aktivity v pracovním postupu a znázorňuje vztah mezi aktivitami.</span><span class="sxs-lookup"><span data-stu-id="fb1be-116">Object initialization syntax can be a useful way to create workflow definitions in code because it provides a hierarchical view of the activities in the workflow and shows the relationship between the activities.</span></span> <span data-ttu-id="fb1be-117">Neexistuje žádný požadavek na pomocí syntaxe inicializace objektu při programově vytvářet pracovní postupy.</span><span class="sxs-lookup"><span data-stu-id="fb1be-117">There is no requirement to use object initialization syntax when you programmatically create workflows.</span></span> <span data-ttu-id="fb1be-118">Následující příklad je funkčně srovnatelný s předchozím příkladu.</span><span class="sxs-lookup"><span data-stu-id="fb1be-118">The following example is functionally equivalent to the previous example.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#7](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#7)]  
  
 <span data-ttu-id="fb1be-119">Další informace o inicializátory objektů najdete v tématu [jak: Inicializace objektů bez volání konstruktoru (C# Průvodce programováním)](https://go.microsoft.com/fwlink/?LinkId=161015) a [jak: Deklarace objektu pomocí inicializátoru objektu](https://go.microsoft.com/fwlink/?LinkId=161016).</span><span class="sxs-lookup"><span data-stu-id="fb1be-119">For more information about object initializers, see [How to: Initialize Objects without Calling a Constructor (C# Programming Guide)](https://go.microsoft.com/fwlink/?LinkId=161015) and [How to: Declare an Object by Using an Object Initializer](https://go.microsoft.com/fwlink/?LinkId=161016).</span></span>  
  
 <span data-ttu-id="fb1be-120">V následujícím příkladu <xref:System.Activities.Statements.TryCatch> aktivita se používá v pracovním postupu.</span><span class="sxs-lookup"><span data-stu-id="fb1be-120">In the following example, a <xref:System.Activities.Statements.TryCatch> activity is used in a workflow.</span></span> <span data-ttu-id="fb1be-121"><xref:System.ApplicationException> Je vyvolána tímto pracovním postupem a zařizuje služba <xref:System.Activities.Statements.Catch%601> aktivity.</span><span class="sxs-lookup"><span data-stu-id="fb1be-121">An <xref:System.ApplicationException> is thrown by the workflow, and is handled by a <xref:System.Activities.Statements.Catch%601> activity.</span></span> <span data-ttu-id="fb1be-122">Obslužná rutina pro <xref:System.Activities.Statements.Catch%601> je aktivita akce aktivity <xref:System.Activities.Statements.WriteLine> aktivity a podrobnosti o výjimce se prochází přes pomocí `ex` <xref:System.Activities.DelegateInArgument%601>.</span><span class="sxs-lookup"><span data-stu-id="fb1be-122">The handler for the <xref:System.Activities.Statements.Catch%601> activity's activity action is a <xref:System.Activities.Statements.WriteLine> activity, and the exception detail is flowed through to it using the `ex` <xref:System.Activities.DelegateInArgument%601>.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#33](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#33)]  
  
 <span data-ttu-id="fb1be-123">Při vytváření vlastní aktivitu, která definuje <xref:System.Activities.ActivityAction%601>, použijte <xref:System.Activities.Statements.InvokeAction%601> modelování volání, která <xref:System.Activities.ActivityAction%601>.</span><span class="sxs-lookup"><span data-stu-id="fb1be-123">When creating a custom activity that defines an <xref:System.Activities.ActivityAction%601>, use an <xref:System.Activities.Statements.InvokeAction%601> to model the invocation of that <xref:System.Activities.ActivityAction%601>.</span></span> <span data-ttu-id="fb1be-124">V tomto příkladu vlastní `WriteLineWithNotification` aktivity je definována.</span><span class="sxs-lookup"><span data-stu-id="fb1be-124">In this example, a custom `WriteLineWithNotification` activity is defined.</span></span> <span data-ttu-id="fb1be-125">Tato aktivita se skládá z <xref:System.Activities.Statements.Sequence> , která obsahuje <xref:System.Activities.Statements.WriteLine> aktivity za nímž následuje <xref:System.Activities.Statements.InvokeAction%601> , která vyvolává <xref:System.Activities.ActivityAction%601> , která přijímá jeden argument řetězec.</span><span class="sxs-lookup"><span data-stu-id="fb1be-125">This activity is composed of a <xref:System.Activities.Statements.Sequence> that contains a <xref:System.Activities.Statements.WriteLine> activity followed by an <xref:System.Activities.Statements.InvokeAction%601> that invokes an <xref:System.Activities.ActivityAction%601> that takes one string argument.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#1](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#1)]  
  
 <span data-ttu-id="fb1be-126">Při vytvoření pracovního postupu pomocí `WriteLineWithNotification` aktivity, Autor pracovní postup určuje požadované vlastní logiku v akci aktivity <xref:System.Activities.ActivityDelegate.Handler%2A>.</span><span class="sxs-lookup"><span data-stu-id="fb1be-126">When a workflow is created by using the `WriteLineWithNotification` activity, the workflow author specifies the desired custom logic in the activity action’s <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span> <span data-ttu-id="fb1be-127">V tomto příkladu se vytvoří pracovní postup, které používají `WriteLineWithNotification` aktivitu a <xref:System.Activities.Statements.WriteLine> aktivita se používá jako <xref:System.Activities.ActivityDelegate.Handler%2A>.</span><span class="sxs-lookup"><span data-stu-id="fb1be-127">In this example, a workflow is created that use the `WriteLineWithNotification` activity, and a <xref:System.Activities.Statements.WriteLine> activity is used as the <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#2](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#2)]  
  
 <span data-ttu-id="fb1be-128">Existuje několik obecných verzí <xref:System.Activities.Statements.InvokeAction%601> a <xref:System.Activities.ActivityAction%601> k dispozici pro předávání jeden nebo více argumentů.</span><span class="sxs-lookup"><span data-stu-id="fb1be-128">There are multiple generic versions of <xref:System.Activities.Statements.InvokeAction%601> and <xref:System.Activities.ActivityAction%601> provided for passing one or more arguments.</span></span>  
  
## <a name="using-activityfunc"></a><span data-ttu-id="fb1be-129">Pomocí activityfunc musí</span><span class="sxs-lookup"><span data-stu-id="fb1be-129">Using ActivityFunc</span></span>  
 <span data-ttu-id="fb1be-130"><xref:System.Activities.ActivityAction%601> je užitečné, pokud neexistuje žádná hodnota výsledků z aktivity, a <xref:System.Activities.ActivityFunc%601> se používá, když je výsledná hodnota se vrátí.</span><span class="sxs-lookup"><span data-stu-id="fb1be-130"><xref:System.Activities.ActivityAction%601> is useful when there is no result value from the activity, and <xref:System.Activities.ActivityFunc%601> is used when a result value is returned.</span></span> <span data-ttu-id="fb1be-131">Při vytváření vlastní aktivitu, která definuje <xref:System.Activities.ActivityFunc%601>, použijte <xref:System.Activities.Expressions.InvokeFunc%601> modelování volání, která <xref:System.Activities.ActivityFunc%601>.</span><span class="sxs-lookup"><span data-stu-id="fb1be-131">When creating a custom activity that defines an <xref:System.Activities.ActivityFunc%601>, use an <xref:System.Activities.Expressions.InvokeFunc%601> to model the invocation of that <xref:System.Activities.ActivityFunc%601>.</span></span> <span data-ttu-id="fb1be-132">V následujícím příkladu `WriteFillerText` aktivity je definována.</span><span class="sxs-lookup"><span data-stu-id="fb1be-132">In the following example, a `WriteFillerText` activity is defined.</span></span> <span data-ttu-id="fb1be-133">Slouží k poskytování přednastavené text <xref:System.Activities.Expressions.InvokeFunc%601> je zadán, který přebírá celočíselný argument a vrátí výsledek řetězce.</span><span class="sxs-lookup"><span data-stu-id="fb1be-133">To supply the filler text, an <xref:System.Activities.Expressions.InvokeFunc%601> is specified that takes an integer argument and has a string result.</span></span> <span data-ttu-id="fb1be-134">Jakmile se načítá přednastavené text, se zobrazí pomocí konzoly <xref:System.Activities.Statements.WriteLine> aktivity.</span><span class="sxs-lookup"><span data-stu-id="fb1be-134">Once the filler text is retrieved, it is displayed to the console using a <xref:System.Activities.Statements.WriteLine> activity.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#3](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#3)]  
  
 <span data-ttu-id="fb1be-135">Zadat text, aktivita musí být použita, která přijímá jeden `int` argument a vrátí výsledek řetězce.</span><span class="sxs-lookup"><span data-stu-id="fb1be-135">To supply the text, an activity must be used that takes one `int` argument and has a string result.</span></span> <span data-ttu-id="fb1be-136">Tento příklad ukazuje `TextGenerator` aktivitu, která splňuje tyto požadavky.</span><span class="sxs-lookup"><span data-stu-id="fb1be-136">This example shows a `TextGenerator` activity that meets these requirements.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#4](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#4)]  
  
 <span data-ttu-id="fb1be-137">Použít `TextGenerator` aktivitu `WriteFillerText` aktivity, je zadat jako <xref:System.Activities.ActivityDelegate.Handler%2A>.</span><span class="sxs-lookup"><span data-stu-id="fb1be-137">To use the `TextGenerator` activity with the `WriteFillerText` activity, specify it as the <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span>  
  
 [!code-csharp[CFX_ActivityExample#5](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#5)]
