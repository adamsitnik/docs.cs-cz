---
title: Jak běhové prostředí vyhledává sestavení
ms.date: 03/30/2017
helpviewer_keywords:
- app.config files, assembly locations
- deploying applications [.NET Framework], assembly locations
- application configuration files, locating assemblies
- .NET Framework application deployment, locating assemblies
- locating assemblies
- assemblies [.NET Framework], location
ms.assetid: 772ac6f4-64d2-4cfb-92fd-58096dcd6c34
author: mairaw
ms.author: mairaw
ms.openlocfilehash: 250e1764084ba3f7750867f2eea89e87cc7239eb
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/23/2019
ms.locfileid: "61873168"
---
# <a name="how-the-runtime-locates-assemblies"></a><span data-ttu-id="4b1e6-102">Jak běhové prostředí vyhledává sestavení</span><span class="sxs-lookup"><span data-stu-id="4b1e6-102">How the Runtime Locates Assemblies</span></span>
<span data-ttu-id="4b1e6-103">Pokud chcete úspěšně nasadit aplikaci rozhraní .NET Framework, musíte pochopit, jak modul common language runtime vyhledává a vazby k sestavením, které tvoří vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-103">To successfully deploy your .NET Framework application, you must understand how the common language runtime locates and binds to the assemblies that make up your application.</span></span> <span data-ttu-id="4b1e6-104">Ve výchozím nastavení modul runtime pokusí vytvořit vazbu s přesnou verzi sestavení, na kterou byla aplikace vytvořena s.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-104">By default, the runtime attempts to bind with the exact version of an assembly that the application was built with.</span></span> <span data-ttu-id="4b1e6-105">Toto výchozí chování můžete přepsat pomocí nastavení konfiguračního souboru.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-105">This default behavior can be overridden by configuration file settings.</span></span>  
  
 <span data-ttu-id="4b1e6-106">Modul common language runtime provádí několik kroků při pokusu o nalezení sestavení a přeložit odkaz na sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-106">The common language runtime performs a number of steps when attempting to locate an assembly and resolve an assembly reference.</span></span> <span data-ttu-id="4b1e6-107">Každý krok je vysvětlené v následujících částech.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-107">Each step is explained in the following sections.</span></span> <span data-ttu-id="4b1e6-108">Zjišťování termín se často používá při popisu, jak modul runtime vyhledává sestavení; odkazuje na sadu heuristik používaná k nalezení sestavení na základě jeho názvu a jazykovou verzi.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-108">The term probing is often used when describing how the runtime locates assemblies; it refers to the set of heuristics used to locate the assembly based on its name and culture.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4b1e6-109">V souboru protokolu pomocí můžete zobrazit informace o vazbě [Assembly Binding Log Viewer (Fuslogvw.exe)](../../../docs/framework/tools/fuslogvw-exe-assembly-binding-log-viewer.md), které je součástí [!INCLUDE[winsdklong](../../../includes/winsdklong-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4b1e6-109">You can view binding information in the log file using the [Assembly Binding Log Viewer (Fuslogvw.exe)](../../../docs/framework/tools/fuslogvw-exe-assembly-binding-log-viewer.md), which is included in the [!INCLUDE[winsdklong](../../../includes/winsdklong-md.md)].</span></span>  
  
## <a name="initiating-the-bind"></a><span data-ttu-id="4b1e6-110">Zahajuje se vazba</span><span class="sxs-lookup"><span data-stu-id="4b1e6-110">Initiating the Bind</span></span>  
 <span data-ttu-id="4b1e6-111">Proces vyhledávání a vytvoření vazby na sestavení začíná, když modul runtime pokusí přeložit odkaz na jiné sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-111">The process of locating and binding to an assembly begins when the runtime attempts to resolve a reference to another assembly.</span></span> <span data-ttu-id="4b1e6-112">Tento odkaz může být statická nebo dynamická.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-112">This reference can be either static or dynamic.</span></span> <span data-ttu-id="4b1e6-113">Záznamy kompilátoru statické odkazy v metadatech sestavení manifestu v okamžiku sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-113">The compiler records static references in the assembly manifest's metadata at build time.</span></span> <span data-ttu-id="4b1e6-114">Dynamické odkazy jsou vytvořeny v reálném čase v důsledku volání různých metod, jako například <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-114">Dynamic references are constructed on the fly as a result of calling various methods, such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="4b1e6-115">Preferovaný způsob, jak odkazovat na sestavení, je použití úplné informace, včetně názvu sestavení, verzi, jazykovou verzi a token veřejného klíče (pokud existuje).</span><span class="sxs-lookup"><span data-stu-id="4b1e6-115">The preferred way to reference an assembly is to use a full reference, including the assembly name, version, culture, and public key token (if one exists).</span></span> <span data-ttu-id="4b1e6-116">Modul runtime používá tyto informace k nalezení sestavení, následující kroky popsané dále v této části.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-116">The runtime uses this information to locate the assembly, following the steps described later in this section.</span></span> <span data-ttu-id="4b1e6-117">Modul runtime používá stejný postup řešení bez ohledu na to, zda je odkaz pro statické nebo dynamické sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-117">The runtime uses the same resolution process regardless of whether the reference is for a static or dynamic assembly.</span></span>  
  
 <span data-ttu-id="4b1e6-118">Dynamické odkaz na sestavení můžete provést také tím, že poskytuje volání metody s pouze částečná informace o sestavení, např. Zadejte pouze název sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-118">You can also make a dynamic reference to an assembly by providing the calling method with only partial information about the assembly, such as specifying only the assembly name.</span></span> <span data-ttu-id="4b1e6-119">V tomto případě pouze adresáře aplikace se hledá sestavení a žádná další kontrola vyvolá.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-119">In this case, only the application directory is searched for the assembly, and no other checking occurs.</span></span> <span data-ttu-id="4b1e6-120">Provedete částečný odkaz pomocí různých metod pro načtení sestavení, jako <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> nebo <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-120">You make a partial reference using any of the various methods for loading assemblies such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> or <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="4b1e6-121">A konečně, dokážete dynamické referenční pomocí metody, jako <xref:System.Reflection.Assembly.Load*?displayProperty=nameWithType> a poskytují jenom částečné informace; potom kvalifikovat pomocí odkazu [ \<qualifyassembly – >](../../../docs/framework/configure-apps/file-schema/runtime/qualifyassembly-element.md) prvek v aplikaci konfigurační soubor.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-121">Finally, you can make a dynamic reference using a method such as <xref:System.Reflection.Assembly.Load*?displayProperty=nameWithType> and provide only partial information; you then qualify the reference using the [\<qualifyAssembly>](../../../docs/framework/configure-apps/file-schema/runtime/qualifyassembly-element.md) element in the application configuration file.</span></span> <span data-ttu-id="4b1e6-122">Tento prvek umožňuje poskytnout úplné referenční informace (název, verzi, jazykovou verzi a pokud je k dispozici, token veřejného klíče) v konfiguračním souboru aplikace místo v kódu.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-122">This element allows you to provide the full reference information (name, version, culture and, if applicable, the public key token) in your application configuration file instead of in your code.</span></span> <span data-ttu-id="4b1e6-123">Pokud byste chtěli k plnému určení odkaz na sestavení mimo adresář aplikace, nebo pokud chcete odkazovat na sestavení v globální mezipaměti sestavení, ale chtěli jsme v pohodlí zadáte úplný přehled v použijete tento postup konfigurační soubor místo v kódu.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-123">You would use this technique if you wanted to fully qualify a reference to an assembly outside the application directory, or if you wanted to reference an assembly in the global assembly cache but you wanted the convenience of specifying the full reference in the configuration file instead of in your code.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4b1e6-124">Tento typ částečný odkaz neměli použít se sestaveními, která jsou sdílena mezi několika aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-124">This type of partial reference should not be used with assemblies that are shared among several applications.</span></span> <span data-ttu-id="4b1e6-125">Protože nastavení konfigurace se použijí na aplikace a ne na sestavení, sdílené sestavení pomocí tohoto typu částečný odkaz by vyžadovaly každou aplikaci pomocí sdílené sestavení má oprávněným informace v souboru konfigurace.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-125">Because configuration settings are applied per application and not per assembly, a shared assembly using this type of partial reference would require each application using the shared assembly to have the qualifying information in its configuration file.</span></span>  
  
 <span data-ttu-id="4b1e6-126">Modul runtime používá následující kroky pro odkaz na sestavení:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-126">The runtime uses the following steps to resolve an assembly reference:</span></span>  
  
1. <span data-ttu-id="4b1e6-127">[Určuje verzi sestavení správné](#step1) prozkoumáním použít konfigurační soubory, včetně konfiguračního souboru aplikace, soubor zásad vydavatele a konfigurační soubor počítače.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-127">[Determines the correct assembly version](#step1) by examining applicable configuration files, including the application configuration file, publisher policy file, and machine configuration file.</span></span> <span data-ttu-id="4b1e6-128">Pokud konfigurační soubor se nachází na vzdáleném počítači, musíte modul runtime vyhledat a stáhnout konfigurační soubor aplikace nejprve.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-128">If the configuration file is located on a remote machine, the runtime must locate and download the application configuration file first.</span></span>  
  
2. <span data-ttu-id="4b1e6-129">[Kontroluje, zda název sestavení bylo svázáno se před](#step2) a pokud ano, pomocí dříve načteného sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-129">[Checks whether the assembly name has been bound to before](#step2) and, if so, uses the previously loaded assembly.</span></span> <span data-ttu-id="4b1e6-130">Předchozí požadavek na načtení sestavení se nezdařilo, pokud je žádost úspěšná okamžitě bez pokusu o načtení sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-130">If a previous request to load the assembly failed, the request is failed immediately without attempting to load the assembly.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="4b1e6-131">Ukládání do mezipaměti selhání vazby sestavení je v rozhraní .NET Framework verze 2.0 nová.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-131">The caching of assembly binding failures is new in the .NET Framework version 2.0.</span></span>  
  
3. <span data-ttu-id="4b1e6-132">[Zkontroluje globální mezipaměti sestavení](#step3).</span><span class="sxs-lookup"><span data-stu-id="4b1e6-132">[Checks the global assembly cache](#step3).</span></span> <span data-ttu-id="4b1e6-133">Pokud je sestavení nalezeno existuje, modul runtime používá toto sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-133">If the assembly is found there, the runtime uses this assembly.</span></span>  
  
4. <span data-ttu-id="4b1e6-134">[Sondy pro sestavení](#step4) pomocí následujících kroků:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-134">[Probes for the assembly](#step4) using the following steps:</span></span>  
  
    1. <span data-ttu-id="4b1e6-135">Pokud zásady Konfigurace a vydavatel nemají vliv na původní odkaz a pokud vazba byla vytvořena pomocí <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> metody, modul runtime vyhledává pomocné parametry umístění.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-135">If configuration and publisher policy do not affect the original reference and if the bind request was created using the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method, the runtime checks for location hints.</span></span>  
  
    2. <span data-ttu-id="4b1e6-136">Pokud je v konfiguračních souborech základ kódu, modul runtime kontroluje jenom toto umístění.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-136">If a codebase is found in the configuration files, the runtime checks only this location.</span></span> <span data-ttu-id="4b1e6-137">Pokud tento test selže, modul runtime určuje, že požadavek na vytvoření vazby se nezdařilo a dojde k žádné další zjišťování.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-137">If this probe fails, the runtime determines that the binding request failed and no other probing occurs.</span></span>  
  
    3. <span data-ttu-id="4b1e6-138">Sondy pro sestavení pomocí heuristické metody popsané v [testování části](#step4).</span><span class="sxs-lookup"><span data-stu-id="4b1e6-138">Probes for the assembly using the heuristics described in the [probing section](#step4).</span></span> <span data-ttu-id="4b1e6-139">Pokud sestavení není nalezen po zjišťování, modul runtime požádá o Instalační služby systému Windows k poskytování sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-139">If the assembly is not found after probing, the runtime requests the Windows Installer to provide the assembly.</span></span> <span data-ttu-id="4b1e6-140">To slouží jako funkce nainstalovat na vyžádání.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-140">This acts as an install-on-demand feature.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="4b1e6-141">Neexistuje žádná verze kontrolují sestavení bez silných názvů ani nespouští kontrolu za modulu runtime v globální mezipaměti sestavení pro sestavení bez silných názvů.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-141">There is no version checking for assemblies without strong names, nor does the runtime check in the global assembly cache for assemblies without strong names.</span></span>  
  
<a name="step1"></a>   
## <a name="step-1-examining-the-configuration-files"></a><span data-ttu-id="4b1e6-142">Krok 1: Kontrola konfiguračních souborů</span><span class="sxs-lookup"><span data-stu-id="4b1e6-142">Step 1: Examining the Configuration Files</span></span>  
 <span data-ttu-id="4b1e6-143">Chování vazby sestavení je možné nakonfigurovat na různých úrovních podle tři soubory XML:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-143">Assembly binding behavior can be configured at different levels based on three XML files:</span></span>  
  
- <span data-ttu-id="4b1e6-144">Konfigurační soubor aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-144">Application configuration file.</span></span>  
  
- <span data-ttu-id="4b1e6-145">Soubor zásad vydavatele.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-145">Publisher policy file.</span></span>  
  
- <span data-ttu-id="4b1e6-146">Konfigurační soubor počítače.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-146">Machine configuration file.</span></span>  
  
 <span data-ttu-id="4b1e6-147">Tyto soubory postupujte podle stejné syntaxe a poskytují informace, jako je přesměrování, umístění kódu, vazby a vazby režimy pro konkrétní sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-147">These files follow the same syntax and provide information such as binding redirects, the location of code, and binding modes for particular assemblies.</span></span> <span data-ttu-id="4b1e6-148">Každý konfigurační soubor může obsahovat [ \<assemblyBinding > element](../../../docs/framework/configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) , který přesměruje proces vytváření vazby.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-148">Each configuration file can contain an [\<assemblyBinding> element](../../../docs/framework/configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) that redirects the binding process.</span></span> <span data-ttu-id="4b1e6-149">Podřízených elementů [ \<assemblyBinding > element](../../../docs/framework/configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) zahrnout [ \<dependentAssembly > element](../../../docs/framework/configure-apps/file-schema/runtime/dependentassembly-element.md).</span><span class="sxs-lookup"><span data-stu-id="4b1e6-149">The child elements of the [\<assemblyBinding> element](../../../docs/framework/configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) include the [\<dependentAssembly> element](../../../docs/framework/configure-apps/file-schema/runtime/dependentassembly-element.md).</span></span> <span data-ttu-id="4b1e6-150">Podřízené objekty daného [ \<dependentAssembly > element](../../../docs/framework/configure-apps/file-schema/runtime/dependentassembly-element.md) zahrnout [ \<assemblyIdentity > element](/visualstudio/deployment/assemblyidentity-element-clickonce-deployment), [ \<bindingRedirect > Element](../../../docs/framework/configure-apps/file-schema/runtime/bindingredirect-element.md)a [ \<codeBase > element](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md).</span><span class="sxs-lookup"><span data-stu-id="4b1e6-150">The children of [\<dependentAssembly> element](../../../docs/framework/configure-apps/file-schema/runtime/dependentassembly-element.md) include the [\<assemblyIdentity> element](/visualstudio/deployment/assemblyidentity-element-clickonce-deployment), the [\<bindingRedirect> element](../../../docs/framework/configure-apps/file-schema/runtime/bindingredirect-element.md), and the [\<codeBase> element](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4b1e6-151">Informace o konfiguraci najdete v souborech konfigurace na tři; Ne všechny prvky jsou platné v všechny konfigurační soubory.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-151">Configuration information can be found in the three configuration files; not all elements are valid in all configuration files.</span></span> <span data-ttu-id="4b1e6-152">Například vazby režimu a privátní cesta informace lze pouze v konfiguračním souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-152">For example, binding mode and private path information can only be in the application configuration file.</span></span> <span data-ttu-id="4b1e6-153">Úplný seznam informace, které jsou obsaženy v jednotlivých souborech, naleznete v tématu [konfigurace aplikací pomocí konfiguračními soubory](../../../docs/framework/configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="4b1e6-153">For a complete list of the information that is contained in each file, see [Configuring Apps by Using Configuration Files](../../../docs/framework/configure-apps/index.md).</span></span>  
  
### <a name="application-configuration-file"></a><span data-ttu-id="4b1e6-154">Konfigurační soubor aplikace</span><span class="sxs-lookup"><span data-stu-id="4b1e6-154">Application Configuration File</span></span>  
 <span data-ttu-id="4b1e6-155">Modul common language runtime nejprve ověří konfigurační soubor aplikace pro informace, které přepíše informací o verzi uložených v manifestu volajícího sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-155">First, the common language runtime checks the application configuration file for information that overrides the version information stored in the calling assembly's manifest.</span></span> <span data-ttu-id="4b1e6-156">Konfigurační soubor aplikace je možné nasadit s aplikací, ale není potřeba pro spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-156">The application configuration file can be deployed with an application, but is not required for application execution.</span></span> <span data-ttu-id="4b1e6-157">Obvykle je téměř okamžité načítání tohoto souboru, ale v situacích, kde základ cesty aplikace je na vzdáleném počítači, například ve scénáři založeného na webu Internet Explorer konfigurační soubor je nutné stáhnout.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-157">Usually the retrieval of this file is almost instantaneous, but in situations where the application base is on a remote computer, such as in an Internet Explorer Web-based scenario, the configuration file must be downloaded.</span></span>  
  
 <span data-ttu-id="4b1e6-158">Konfigurační soubor aplikace pro spustitelné soubory klienta, se nachází ve stejném adresáři jako spustitelný soubor aplikace a má stejný základní název jako spustitelný soubor s příponou .config.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-158">For client executables, the application configuration file resides in the same directory as the application's executable and has the same base name as the executable with a .config extension.</span></span> <span data-ttu-id="4b1e6-159">Například konfigurační soubor pro C:\Program Files\Myapp\Myapp.exe je C:\Program Files\Myapp\Myapp.exe.config. Ve scénáři založené na prohlížeči, musíte použít soubor HTML  **\<odkaz >** element explicitně odkazovat na konfigurační soubor.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-159">For example, the configuration file for C:\Program Files\Myapp\Myapp.exe is C:\Program Files\Myapp\Myapp.exe.config. In a browser-based scenario, the HTML file must use the **\<link>** element to explicitly point to the configuration file.</span></span>  
  
 <span data-ttu-id="4b1e6-160">Následující kód nabízí jednoduchý příklad konfiguračního souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-160">The following code provides a simple example of an application configuration file.</span></span> <span data-ttu-id="4b1e6-161">V tomto příkladu přidá <xref:System.Diagnostics.TextWriterTraceListener> k <xref:System.Diagnostics.Debug.Listeners%2A> kolekci, aby záznam informace o ladění do souboru.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-161">This example adds a <xref:System.Diagnostics.TextWriterTraceListener> to the <xref:System.Diagnostics.Debug.Listeners%2A> collection to enable recording debug information to a file.</span></span>  
  
```xml  
<configuration>  
   <system.diagnostics>  
      <trace useGlobalLock="false" autoflush="true" indentsize="0">  
         <listeners>  
            <add name="myListener" type="System.Diagnostics.TextWriterTraceListener, system version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" initializeData="c:\myListener.log" />  
         </listeners>  
      </trace>  
   </system.diagnostics>  
</configuration>  
```  
  
### <a name="publisher-policy-file"></a><span data-ttu-id="4b1e6-162">Soubor zásad vydavatele</span><span class="sxs-lookup"><span data-stu-id="4b1e6-162">Publisher Policy File</span></span>  
 <span data-ttu-id="4b1e6-163">Za druhé modul runtime zkoumá soubor zásad vydavatele, pokud existuje.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-163">Second, the runtime examines the publisher policy file, if one exists.</span></span> <span data-ttu-id="4b1e6-164">Soubory zásad vydavatele se distribuují komponenty vydavatelem jako oprava nebo aktualizace sdílené komponenty.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-164">Publisher policy files are distributed by a component publisher as a fix or update to a shared component.</span></span> <span data-ttu-id="4b1e6-165">Tyto soubory obsahují informace o kompatibilitě vydané vydavatele Sdílená komponenta, která přesměruje odkaz na sestavení na novou verzi.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-165">These files contain compatibility information issued by the publisher of the shared component that directs an assembly reference to a new version.</span></span> <span data-ttu-id="4b1e6-166">Na rozdíl od aplikace a konfigurační soubory soubory zásad vydavatele jsou součástí vlastní sestavení, musí být instalována v globální mezipaměti sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-166">Unlike application and machine configuration files, publisher policy files are contained in their own assembly that must be installed in the global assembly cache.</span></span>  
  
 <span data-ttu-id="4b1e6-167">Následuje příklad konfiguračního souboru zásad vydavatele:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-167">The following is an example of a Publisher Policy configuration file:</span></span>  
  
```xml  
<configuration>  
    <runtime>  
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">  
  
            <dependentAssembly>  
                <assemblyIdentity name="asm6" publicKeyToken="c0305c36380ba429" />   
                <bindingRedirect oldVersion="3.0.0.0" newVersion="2.0.0.0"/>    
            </dependentAssembly>  
  
        </assemblyBinding>  
    </runtime>  
</configuration>  
```  
  
 <span data-ttu-id="4b1e6-168">K vytvoření sestavení, můžete použít [Al.exe (Linker sestavení)](../../../docs/framework/tools/al-exe-assembly-linker.md) nástroj pomocí příkazu, jako je následující:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-168">To create an assembly, you can use the [Al.exe (Assembly Linker)](../../../docs/framework/tools/al-exe-assembly-linker.md) tool with a command such as the following:</span></span>  
  
```  
Al.exe /link:asm6.exe.config /out:policy.3.0.asm6.dll /keyfile: compatkey.dat /v:3.0.0.0  
```  
  
 <span data-ttu-id="4b1e6-169">`compatkey.dat` je soubor klíče se silným názvem.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-169">`compatkey.dat` is a strong-name key file.</span></span> <span data-ttu-id="4b1e6-170">Tento příkaz vytvoří sestavení se silným názvem, který můžete umístit v globální mezipaměti sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-170">This command creates a strong-named assembly you can place in the global assembly cache.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4b1e6-171">Zásady vydavatele ovlivňuje všechny aplikace, které používají sdílené komponenty.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-171">Publisher policy affects all applications that use a shared component.</span></span>  
  
 <span data-ttu-id="4b1e6-172">Konfigurační soubor zásad vydavatele přepíše informace o verzi, která pochází z aplikace (to znamená z manifestu sestavení nebo z konfiguračního souboru aplikace).</span><span class="sxs-lookup"><span data-stu-id="4b1e6-172">The publisher policy configuration file overrides version information that comes from the application (that is, from the assembly manifest or from the application configuration file).</span></span> <span data-ttu-id="4b1e6-173">Pokud není žádný příkaz k přesměrování verze určená v manifestu sestavení konfiguračního souboru aplikace, soubor zásad vydavatele přepsání verze určená v manifestu sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-173">If there is no statement in the application configuration file to redirect the version specified in the assembly manifest, the publisher policy file overrides the version specified in the assembly manifest.</span></span> <span data-ttu-id="4b1e6-174">Ale pokud je příkaz přesměrování konfiguračního souboru aplikace, zásady vydavatele přepíše tuto verzi než verze zadaná v manifestu.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-174">However, if there is a redirecting statement in the application configuration file, publisher policy overrides that version rather than the one specified in the manifest.</span></span>  
  
 <span data-ttu-id="4b1e6-175">Soubor zásad vydavatele se používá při aktualizaci sdílené komponenty a nová verze Sdílená komponenta by neexistoval, použije všemi aplikacemi pomocí této součásti.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-175">A publisher policy file is used when a shared component is updated and the new version of the shared component should be picked up by all applications using that component.</span></span> <span data-ttu-id="4b1e6-176">Nastavení v souboru zásad vydavatele přepsat nastavení konfiguračního souboru aplikace, pokud konfigurační soubor aplikace vynucuje Nouzový režim.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-176">The settings in the publisher policy file override settings in the application configuration file, unless the application configuration file enforces safe mode.</span></span>  
  
#### <a name="safe-mode"></a><span data-ttu-id="4b1e6-177">Nouzový režim</span><span class="sxs-lookup"><span data-stu-id="4b1e6-177">Safe Mode</span></span>  
 <span data-ttu-id="4b1e6-178">Soubory zásad vydavatele jsou obvykle nainstalován jako součást aktualizace service pack nebo program.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-178">Publisher policy files are usually explicitly installed as part of a service pack or program update.</span></span> <span data-ttu-id="4b1e6-179">Pokud je jakýkoli problém s upgradovaný sdílené komponenty, můžete ignorovat přepsání souboru zásad vydavatele pomocí nouzového režimu.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-179">If there is any problem with the upgraded shared component, you can ignore the overrides in the publisher policy file using safe mode.</span></span> <span data-ttu-id="4b1e6-180">Nouzový režim je určeno  **\<publisherPolicy použít = "Ano**&#124;**žádné" / >** element nachází pouze v konfiguračním souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-180">Safe mode is determined by the **\<publisherPolicy apply="yes**&#124;**no"/>** element, located only in the application configuration file.</span></span> <span data-ttu-id="4b1e6-181">Určuje, zda informace o konfiguraci zásad vydavatele by měl být odebrány proces vytváření vazby.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-181">It specifies whether the publisher policy configuration information should be removed from the binding process.</span></span>  
  
 <span data-ttu-id="4b1e6-182">Nouzový režim můžete nastavit pro celou aplikaci nebo pro vybrané sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-182">Safe mode can be set for the entire application or for selected assemblies.</span></span> <span data-ttu-id="4b1e6-183">To znamená vypněte tuto zásadu pro všechna sestavení, které aplikaci tvoří nebo ho zapnout pro některá sestavení, ale ne pro jiné.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-183">That is, you can turn off the policy for all assemblies that make up the application, or turn it on for some assemblies but not others.</span></span> <span data-ttu-id="4b1e6-184">Chcete-li použít k sestavení, které tvoří aplikaci zásad vydavatele, nastavte  **\<použít publisherPolicy\=žádné / >** a zadejte sestavení, které chcete mít vliv na použití \< **dependentAssembly**> element.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-184">To selectively apply publisher policy to assemblies that make up an application, set **\<publisherPolicy apply\=no/>** and specify which assemblies you want to be affected using the \<**dependentAssembly**> element.</span></span> <span data-ttu-id="4b1e6-185">Chcete-li použít zásady vydavatele pro všechna sestavení, které aplikaci tvoří, nastavte  **\<použít publisherPolicy\=žádné / >** bez prvků závislého sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-185">To apply publisher policy to all assemblies that make up the application, set **\<publisherPolicy apply\=no/>** with no dependent assembly elements.</span></span> <span data-ttu-id="4b1e6-186">Další informace o konfiguraci najdete v tématu [konfigurace aplikací pomocí konfiguračních souborů](../../../docs/framework/configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="4b1e6-186">For more about configuration, see [Configuring Apps by using Configuration Files](../../../docs/framework/configure-apps/index.md).</span></span>  
  
### <a name="machine-configuration-file"></a><span data-ttu-id="4b1e6-187">Konfigurační soubor počítače</span><span class="sxs-lookup"><span data-stu-id="4b1e6-187">Machine Configuration File</span></span>  
 <span data-ttu-id="4b1e6-188">Třetí modul runtime zkoumá konfiguračního souboru počítače.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-188">Third, the runtime examines the machine configuration file.</span></span> <span data-ttu-id="4b1e6-189">Tento soubor s názvem souboru Machine.config, je umístěn v podadresáři konfigurace kořenového adresáře, kde je nainstalován modul runtime v místním počítači.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-189">This file, called Machine.config, resides on the local computer in the Config subdirectory of the root directory where the runtime is installed.</span></span> <span data-ttu-id="4b1e6-190">Tento soubor umožňuje správci zadat omezení vazeb sestavení, která jsou vzhledem k tomuto počítači.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-190">This file can be used by administrators to specify assembly binding restrictions that are local to that computer.</span></span> <span data-ttu-id="4b1e6-191">Nastavení v konfiguračním souboru počítače přednost před všechny ostatní nastavení konfigurace. Nicméně to neznamená, že všechna nastavení konfigurace by měl být umístěny v tomto souboru.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-191">The settings in the machine configuration file take precedence over all other configuration settings; however, this does not mean that all configuration settings should be put in this file.</span></span> <span data-ttu-id="4b1e6-192">Verze Určuje soubor zásad, který správce je finální a nemůže být přepsána.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-192">The version determined by the administrator policy file is final, and cannot be overridden.</span></span> <span data-ttu-id="4b1e6-193">Přepsání zadaná v souboru Machine.config ovlivňují všechny aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-193">Overrides specified in the Machine.config file affect all applications.</span></span> <span data-ttu-id="4b1e6-194">Další informace o konfiguračních souborech najdete v tématu [konfigurace aplikací pomocí konfiguračních souborů](../../../docs/framework/configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="4b1e6-194">For more information about configuration files, see [Configuring Apps by using Configuration Files](../../../docs/framework/configure-apps/index.md).</span></span>  
  
<a name="step2"></a>   
## <a name="step-2-checking-for-previously-referenced-assemblies"></a><span data-ttu-id="4b1e6-195">Krok 2: Kontrola dříve odkazovaných sestavení</span><span class="sxs-lookup"><span data-stu-id="4b1e6-195">Step 2: Checking for Previously Referenced Assemblies</span></span>  
 <span data-ttu-id="4b1e6-196">Pokud požadovaná sestavení se požaduje také v předchozích volání, používá modul common language runtime sestavení, který je již načten.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-196">If the requested assembly has also been requested in previous calls, the common language runtime uses the assembly that is already loaded.</span></span> <span data-ttu-id="4b1e6-197">To může mít důsledky, při pojmenování sestavení, které tvoří aplikaci.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-197">This can have ramifications when naming assemblies that make up an application.</span></span> <span data-ttu-id="4b1e6-198">Další informace o vytváření názvů sestavení naleznete v tématu [názvy sestavení](../../../docs/framework/app-domains/assembly-names.md).</span><span class="sxs-lookup"><span data-stu-id="4b1e6-198">For more information about naming assemblies, see [Assembly Names](../../../docs/framework/app-domains/assembly-names.md).</span></span>  
  
 <span data-ttu-id="4b1e6-199">Pokud předchozí žádost o sestavení se nezdařilo, odeslání dalších žádostí o sestavení se nepodařilo okamžitě bez pokusu o načtení sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-199">If a previous request for the assembly failed, subsequent requests for the assembly are failed immediately without attempting to load the assembly.</span></span> <span data-ttu-id="4b1e6-200">Od verze rozhraní .NET Framework verze 2.0, selhání vazby sestavení jsou uložené v mezipaměti, a informace uložené v mezipaměti se používá k určení, jestli se má pokus o načtení sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-200">Starting with the .NET Framework version 2.0, assembly binding failures are cached, and the cached information is used to determine whether to attempt to load the assembly.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4b1e6-201">Pokud chcete vrátit k chování rozhraní .NET Framework verze 1.0 a 1.1, který do mezipaměti selhání vazby, zahrňte [ \<disablecachingbindingfailures – > Element](../../../docs/framework/configure-apps/file-schema/runtime/disablecachingbindingfailures-element.md) v konfiguračním souboru.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-201">To revert to the behavior of the .NET Framework versions 1.0 and 1.1, which did not cache binding failures, include the [\<disableCachingBindingFailures> Element](../../../docs/framework/configure-apps/file-schema/runtime/disablecachingbindingfailures-element.md) in your configuration file.</span></span>  
  
<a name="step3"></a>   
## <a name="step-3-checking-the-global-assembly-cache"></a><span data-ttu-id="4b1e6-202">Krok 3: Kontrola globální mezipaměti sestavení</span><span class="sxs-lookup"><span data-stu-id="4b1e6-202">Step 3: Checking the Global Assembly Cache</span></span>  
 <span data-ttu-id="4b1e6-203">Pro sestavení se silným názvem pokračuje proces vytváření vazby vyhledáváním v globální mezipaměti sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-203">For strong-named assemblies, the binding process continues by looking in the global assembly cache.</span></span> <span data-ttu-id="4b1e6-204">Globální mezipaměti sestavení obsahuje sestavení, které lze použít více aplikacemi v počítači.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-204">The global assembly cache stores assemblies that can be used by several applications on a computer.</span></span> <span data-ttu-id="4b1e6-205">Všechna sestavení v globální mezipaměti sestavení musí mít silné názvy.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-205">All assemblies in the global assembly cache must have strong names.</span></span>  
  
<a name="step4"></a>   
## <a name="step-4-locating-the-assembly-through-codebases-or-probing"></a><span data-ttu-id="4b1e6-206">Krok 4: Vyhledání sestavení prostřednictvím základů kódu nebo zjišťování</span><span class="sxs-lookup"><span data-stu-id="4b1e6-206">Step 4: Locating the Assembly through Codebases or Probing</span></span>  
 <span data-ttu-id="4b1e6-207">Po verzi správné sestavení podle informací uvedených v odkazu na volajícího sestavení a v konfiguračních souborech a po jeho kontrole v globální mezipaměti sestavení (pouze pro sestavení se silným názvem), CLR modul runtime pokusí se najít sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-207">After the correct assembly version has been determined by using the information in the calling assembly's reference and in the configuration files, and after it has checked in the global assembly cache (only for strong-named assemblies), the common language runtime attempts to find the assembly.</span></span> <span data-ttu-id="4b1e6-208">Proces vyhledávání sestavení zahrnuje následující kroky:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-208">The process of locating an assembly involves the following steps:</span></span>  
  
1. <span data-ttu-id="4b1e6-209">Pokud [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) je nalezen element v konfiguračním souboru aplikace, modul runtime zkontroluje, zda zadané umístění.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-209">If a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element is found in the application configuration file, the runtime checks the specified location.</span></span> <span data-ttu-id="4b1e6-210">Pokud se najde shoda, toto sestavení se používá a bez testování dochází.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-210">If a match is found, that assembly is used and no probing occurs.</span></span> <span data-ttu-id="4b1e6-211">Pokud sestavení není nalezen existuje, selže požadavek na vytvoření vazby.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-211">If the assembly is not found there, the binding request fails.</span></span>  
  
2. <span data-ttu-id="4b1e6-212">Modul runtime se pak sondy pro odkazované sestavení pomocí pravidel specifikovaných později v této části.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-212">The runtime then probes for the referenced assembly using the rules specified later in this section.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4b1e6-213">Pokud máte více verzí sestavení v adresáři a chcete odkazovat na konkrétní verzi sestavení, je nutné použít [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu namísto `privatePath` atribut [ \<zjišťování >](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) elementu.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-213">If you have multiple versions of an assembly in a directory and you want to reference a particular version of that assembly, you must use the [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element instead of the `privatePath` attribute of the [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element.</span></span> <span data-ttu-id="4b1e6-214">Pokud používáte [ \<zjišťování >](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) elementu, modul runtime zastaví zjišťování poprvé vyhledá sestavení, která odpovídá názvu jednoduché sestavení odkazuje, ať už jde o správný shoda nebo ne.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-214">If you use the [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element, the runtime stops probing the first time it finds an assembly that matches the simple assembly name referenced, whether it is a correct match or not.</span></span> <span data-ttu-id="4b1e6-215">Pokud je správná shoda, použije se toto sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-215">If it is a correct match, that assembly is used.</span></span> <span data-ttu-id="4b1e6-216">Pokud není správná shoda, zjišťování zastaví a vazba se nezdaří.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-216">If it is not a correct match, probing stops and binding fails.</span></span>  
  
### <a name="locating-the-assembly-through-codebases"></a><span data-ttu-id="4b1e6-217">Vyhledání sestavení prostřednictvím základů kódu</span><span class="sxs-lookup"><span data-stu-id="4b1e6-217">Locating the Assembly through Codebases</span></span>  
 <span data-ttu-id="4b1e6-218">Základ kódu informace lze zadat pomocí [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element v konfiguračním souboru.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-218">Codebase information can be provided by using a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element in a configuration file.</span></span> <span data-ttu-id="4b1e6-219">Tento základ kódu je vždy zaškrtnuto předtím, než se pokusí sběr dat pro odkazované sestavení modulu runtime.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-219">This codebase is always checked before the runtime attempts to probe for the referenced assembly.</span></span> <span data-ttu-id="4b1e6-220">Pokud soubor zásad vydavatele obsahující přesměrování finální verze také obsahuje [ \<základu kódu >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu, který [ \<základu kódu >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element je ten, který se používá.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-220">If a publisher policy file containing the final version redirect also contains a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element, that [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element is the one that is used.</span></span> <span data-ttu-id="4b1e6-221">Například, pokud Určuje konfigurační soubor aplikace [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) také určuje element a soubor zásad vydavatele, který přepisuje informace o aplikaci [ \< codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu, [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element v souboru zásad vydavatele se používá.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-221">For example, if your application configuration file specifies a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element, and a publisher policy file that is overriding the application information also specifies a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element, the [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element in the publisher policy file is used.</span></span>  
  
 <span data-ttu-id="4b1e6-222">Pokud není nalezena žádná shoda v místě určeném [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu vazby žádost selže a jsou přesměrováni žádné další kroky.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-222">If no match is found at the location specified by the [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element, the bind request fails and no further steps are taken.</span></span> <span data-ttu-id="4b1e6-223">Pokud modul runtime určuje, že sestavení by odpovídalo kritériím volajícího sestavení, použije se toto sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-223">If the runtime determines that an assembly matches the calling assembly's criteria, it uses that assembly.</span></span> <span data-ttu-id="4b1e6-224">Když soubor zadaný pomocí dané [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu je načtena, modul runtime zkontroluje, abyste měli jistotu, že název, verzi, jazykovou verzi a veřejnému klíči odpovídat volající sestavení je odkazovat.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-224">When the file specified by the given [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element is loaded, the runtime checks to make sure that the name, version, culture, and public key match the calling assembly's reference.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4b1e6-225">Odkazovaná sestavení mimo kořenový adresář aplikace musí mít silné názvy a musí být instalována v globální mezipaměti sestavení nebo zadat pomocí [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-225">Referenced assemblies outside the application's root directory must have strong names and must either be installed in the global assembly cache or specified using the [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element.</span></span>  
  
### <a name="locating-the-assembly-through-probing"></a><span data-ttu-id="4b1e6-226">Vyhledání sestavení prostřednictvím zjišťování</span><span class="sxs-lookup"><span data-stu-id="4b1e6-226">Locating the Assembly through Probing</span></span>  
 <span data-ttu-id="4b1e6-227">Pokud neexistuje žádné [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) prvku v konfiguračním souboru aplikace, modul runtime sondy pro sestavení s využitím čtyř kritéria:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-227">If there is no [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element in the application configuration file, the runtime probes for the assembly using four criteria:</span></span>  
  
- <span data-ttu-id="4b1e6-228">Základ cesty aplikace, což je kořenový adresář, ve kterém se aplikace zpracovává.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-228">Application base, which is the root location where the application is being executed.</span></span>  
  
- <span data-ttu-id="4b1e6-229">Jazyková verze, která je atribut culture sestavení, na kterou se odkazuje.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-229">Culture, which is the culture attribute of the assembly being referenced.</span></span>  
  
- <span data-ttu-id="4b1e6-230">Název, který je název odkazovaného sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-230">Name, which is the name of the referenced assembly.</span></span>  
  
- <span data-ttu-id="4b1e6-231">`privatePath` Atribut [ \<zjišťování >](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) prvku, který představuje uživatelem definovaný seznam podadresářů kořenový adresář.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-231">The `privatePath` attribute of the [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element, which is the user-defined list of subdirectories under the root location.</span></span> <span data-ttu-id="4b1e6-232">Toto umístění se dá nastavit v konfiguračním souboru aplikace a pomocí spravovaného kódu <xref:System.AppDomainSetup.PrivateBinPath?displayProperty=nameWithType> vlastnost pro doménu aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-232">This location can be specified in the application configuration file and in managed code using the <xref:System.AppDomainSetup.PrivateBinPath?displayProperty=nameWithType> property for an application domain.</span></span> <span data-ttu-id="4b1e6-233">Pokud zadaný ve spravovaném kódu, spravovaný kód `privatePath` je zjišťován nejprve, za nímž následuje cestě zadané v konfiguračním souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-233">When specified in managed code, the managed code `privatePath` is probed first, followed by the path specified in the application configuration file.</span></span>  
  
#### <a name="probing-the-application-base-and-culture-directories"></a><span data-ttu-id="4b1e6-234">Zjišťování základ cesty aplikace a jazykové verze adresáře</span><span class="sxs-lookup"><span data-stu-id="4b1e6-234">Probing the Application Base and Culture Directories</span></span>  
 <span data-ttu-id="4b1e6-235">Modul runtime vždy začíná zjišťování v základním vaší aplikace, který může být adresa URL nebo kořenového adresáře aplikace v počítači.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-235">The runtime always begins probing in the application's base, which can be either a URL or the application's root directory on a computer.</span></span> <span data-ttu-id="4b1e6-236">Pokud má odkazované sestavení nebyl nalezen v základ cesty aplikace a je k dispozici žádné informace o jazykové verzi, modul runtime vyhledá všechny podadresáře, s názvem sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-236">If the referenced assembly is not found in the application base and no culture information is provided, the runtime searches any subdirectories with the assembly name.</span></span> <span data-ttu-id="4b1e6-237">Adresáře otestovaná patří:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-237">The directories probed include:</span></span>  
  
 <span data-ttu-id="4b1e6-238">[základ cesty aplikace] / [název sestavení] .dll</span><span class="sxs-lookup"><span data-stu-id="4b1e6-238">[application base] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="4b1e6-239">[základ cesty aplikace] / [název sestavení] / [název sestavení] .dll</span><span class="sxs-lookup"><span data-stu-id="4b1e6-239">[application base] / [assembly name] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="4b1e6-240">Pokud informace o jazykové verzi je zadaný pro odkazované sestavení, vystavovány jsou pouze následující adresáře:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-240">If culture information is specified for the referenced assembly, only the following directories are probed:</span></span>  
  
 <span data-ttu-id="4b1e6-241">[základ cesty aplikace] / [culture] / [název sestavení] .dll</span><span class="sxs-lookup"><span data-stu-id="4b1e6-241">[application base] / [culture] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="4b1e6-242">[základ cesty aplikace] / [culture] / [název sestavení] / [název sestavení] .dll</span><span class="sxs-lookup"><span data-stu-id="4b1e6-242">[application base] / [culture] / [assembly name] / [assembly name].dll</span></span>  
  
#### <a name="probing-with-the-privatepath-attribute"></a><span data-ttu-id="4b1e6-243">Testování s privatePath atribut</span><span class="sxs-lookup"><span data-stu-id="4b1e6-243">Probing with the privatePath Attribute</span></span>  
 <span data-ttu-id="4b1e6-244">Kromě podadresáře jazykovou verzi a podadresářů pro odkazované sestavení s názvem, modul runtime také sondy adresáře určené pomocí `privatePath` atribut [ \<zjišťování >](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) elementu.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-244">In addition to the culture subdirectories and the subdirectories named for the referenced assembly, the runtime also probes directories specified using the `privatePath` attribute of the [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element.</span></span> <span data-ttu-id="4b1e6-245">Adresáře určené pomocí `privatePath` atribut musí být podadresáře kořenového adresáře aplikace.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-245">The directories specified using the `privatePath` attribute must be subdirectories of the application's root directory.</span></span> <span data-ttu-id="4b1e6-246">Adresáře otestovaná se liší v závislosti na tom, zda informace o jazykové verzi je součástí žádosti o odkazovaném sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-246">The directories probed vary depending on whether culture information is included in the referenced assembly request.</span></span>  
  
 <span data-ttu-id="4b1e6-247">Modul runtime zastaví zjišťování prvním vyhledá sestavení, která odpovídá názvu jednoduché sestavení odkazuje, ať už jde o správný shoda nebo ne.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-247">The runtime stops probing the first time it finds an assembly that matches the simple assembly name referenced, whether it is a correct match or not.</span></span> <span data-ttu-id="4b1e6-248">Pokud je správná shoda, použije se toto sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-248">If it is a correct match, that assembly is used.</span></span> <span data-ttu-id="4b1e6-249">Pokud není správná shoda, zjišťování zastaví a vazba se nezdaří.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-249">If it is not a correct match, probing stops and binding fails.</span></span>  
  
 <span data-ttu-id="4b1e6-250">Pokud je zahrnuto jazykovou verzi, jsou otestovaná následující adresáře:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-250">If culture is included, the following directories are probed:</span></span>  
  
 <span data-ttu-id="4b1e6-251">[základ cesty aplikace] / [cesta] / [culture] / [název sestavení] .dll</span><span class="sxs-lookup"><span data-stu-id="4b1e6-251">[application base] / [binpath] / [culture] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="4b1e6-252">[základ cesty aplikace] / [cesta] / [culture] / [název sestavení] / [název sestavení] .dll</span><span class="sxs-lookup"><span data-stu-id="4b1e6-252">[application base] / [binpath] / [culture] / [assembly name] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="4b1e6-253">Pokud se informace o jazykové verzi neuvedete, jsou otestovaná následující adresáře:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-253">If culture information is not included, the following directories are probed:</span></span>  
  
 <span data-ttu-id="4b1e6-254">[základ cesty aplikace] / [cesta] / [název sestavení] .dll</span><span class="sxs-lookup"><span data-stu-id="4b1e6-254">[application base] / [binpath] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="4b1e6-255">[základ cesty aplikace] / [cesta] / [název sestavení] / [název sestavení] .dll</span><span class="sxs-lookup"><span data-stu-id="4b1e6-255">[application base] / [binpath] / [assembly name] / [assembly name].dll</span></span>  
  
#### <a name="probing-examples"></a><span data-ttu-id="4b1e6-256">Zjišťování příklady</span><span class="sxs-lookup"><span data-stu-id="4b1e6-256">Probing Examples</span></span>  
 <span data-ttu-id="4b1e6-257">Daný následující informace:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-257">Given the following information:</span></span>  
  
- <span data-ttu-id="4b1e6-258">Název odkazovaného sestavení: myAssembly</span><span class="sxs-lookup"><span data-stu-id="4b1e6-258">Referenced assembly name: myAssembly</span></span>  
  
- <span data-ttu-id="4b1e6-259">Kořenový adresář aplikace: `http://www.code.microsoft.com`</span><span class="sxs-lookup"><span data-stu-id="4b1e6-259">Application root directory: `http://www.code.microsoft.com`</span></span>  
  
- <span data-ttu-id="4b1e6-260">[\<zjišťování >](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) určuje element v konfiguračním souboru: bin</span><span class="sxs-lookup"><span data-stu-id="4b1e6-260">[\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element in configuration file specifies: bin</span></span>  
  
- <span data-ttu-id="4b1e6-261">Jazyková verze: Německo</span><span class="sxs-lookup"><span data-stu-id="4b1e6-261">Culture: de</span></span>  
  
 <span data-ttu-id="4b1e6-262">Modul runtime sondy následující adresy URL:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-262">The runtime probes the following URLs:</span></span>  
  
 `http://www.code.microsoft.com/de/myAssembly.dll`
  
 `http://www.code.microsoft.com/de/myAssembly/myAssembly.dll`
  
 `http://www.code.microsoft.com/bin/de/myAssembly.dll`
  
 `http://www.code.microsoft.com/bin/de/myAssembly/myAssembly.dll`
  
##### <a name="multiple-assemblies-with-the-same-name"></a><span data-ttu-id="4b1e6-263">Více sestavení se stejným názvem</span><span class="sxs-lookup"><span data-stu-id="4b1e6-263">Multiple Assemblies with the Same Name</span></span>  
 <span data-ttu-id="4b1e6-264">Následující příklad ukazuje postup při konfiguraci několika sestavení se stejným názvem.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-264">The following example shows how to configure multiple assemblies with the same name.</span></span>  
  
```xml  
<dependentAssembly>  
   <assemblyIdentity name="Server" publicKeyToken="c0305c36380ba429" />   
   <codeBase version="1.0.0.0" href="v1/Server.dll" />  
   <codeBase version="2.0.0.0" href="v2/Server.dll" />  
</dependentAssembly>  
```  
  
#### <a name="other-locations-probed"></a><span data-ttu-id="4b1e6-265">Jiné umístění otestovaná</span><span class="sxs-lookup"><span data-stu-id="4b1e6-265">Other Locations Probed</span></span>  
 <span data-ttu-id="4b1e6-266">Umístění sestavení můžete také určit pomocí aktuálního kontextu vazby.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-266">Assembly location can also be determined using the current binding context.</span></span> <span data-ttu-id="4b1e6-267">Této chybě nejčastěji dochází při <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> metodu použít a ve scénářích vzájemné spolupráce COM.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-267">This most often occurs when the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method is used and in COM interop scenarios.</span></span> <span data-ttu-id="4b1e6-268">Pokud sestavení využívá <xref:System.Reflection.Assembly.LoadFrom%2A> metoda odkazovat na jiné sestavení volajícího sestavení umístění se považuje za nápovědu o tom, kde najít odkazované sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-268">If an assembly uses the <xref:System.Reflection.Assembly.LoadFrom%2A> method to reference another assembly, the calling assembly's location is considered to be a hint about where to find the referenced assembly.</span></span> <span data-ttu-id="4b1e6-269">Pokud se najde shoda, je načteno sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-269">If a match is found, that assembly is loaded.</span></span> <span data-ttu-id="4b1e6-270">Pokud není nalezena žádná shoda, modul runtime pokračuje s jeho sémantiku hledání a následně se dotazuje Instalační služby systému Windows k poskytování sestavení.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-270">If no match is found, the runtime continues with its search semantics and then queries the Windows Installer to provide the assembly.</span></span> <span data-ttu-id="4b1e6-271">Pokud žádné sestavení za předpokladu, který odpovídá požadavek na vytvoření vazby, je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-271">If no assembly is provided that matches the binding request, an exception is thrown.</span></span> <span data-ttu-id="4b1e6-272">Tato výjimka je <xref:System.TypeLoadException> ve spravovaném kódu, pokud bylo odkazováno typ, nebo <xref:System.IO.FileNotFoundException> Pokud načítání sestavení nebyl nalezen.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-272">This exception is a <xref:System.TypeLoadException> in managed code if a type was referenced, or a <xref:System.IO.FileNotFoundException> if an assembly being loaded was not found.</span></span>  
  
 <span data-ttu-id="4b1e6-273">Například pokud Assembly1 odkazuje Assembly2 a Assembly1 byl stažen z `http://www.code.microsoft.com/utils`, že umístění je považován za nápovědu o tom, kde najít Assembly2.dll.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-273">For example, if Assembly1 references Assembly2 and Assembly1 was downloaded from `http://www.code.microsoft.com/utils`, that location is considered to be a hint about where to find Assembly2.dll.</span></span> <span data-ttu-id="4b1e6-274">Modul runtime a testů pro sestavení v `http://www.code.microsoft.com/utils/Assembly2.dll` a `http://www.code.microsoft.com/utils/Assembly2/Assembly2.dll`.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-274">The runtime then probes for the assembly in `http://www.code.microsoft.com/utils/Assembly2.dll` and `http://www.code.microsoft.com/utils/Assembly2/Assembly2.dll`.</span></span> <span data-ttu-id="4b1e6-275">Pokud Assembly2 nebyl v některém z těchto míst, dotáže se modul runtime Instalační služby systému Windows.</span><span class="sxs-lookup"><span data-stu-id="4b1e6-275">If Assembly2 is not found at either of those locations, the runtime queries the Windows Installer.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4b1e6-276">Viz také:</span><span class="sxs-lookup"><span data-stu-id="4b1e6-276">See also</span></span>

- [<span data-ttu-id="4b1e6-277">Doporučené postupy pro načtení sestavení</span><span class="sxs-lookup"><span data-stu-id="4b1e6-277">Best Practices for Assembly Loading</span></span>](../../../docs/framework/deployment/best-practices-for-assembly-loading.md)
- [<span data-ttu-id="4b1e6-278">Nasazení</span><span class="sxs-lookup"><span data-stu-id="4b1e6-278">Deployment</span></span>](../../../docs/framework/deployment/index.md)
