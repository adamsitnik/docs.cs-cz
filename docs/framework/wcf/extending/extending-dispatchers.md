---
title: Rozšíření dispečerů
ms.date: 03/30/2017
helpviewer_keywords:
- dispatcher extensions [WCF]
ms.assetid: d0ad15ac-fa12-4f27-80e8-7ac2271e5985
ms.openlocfilehash: 4eb96eaf409fd34e9b10a469ed31fbbe18ebac5e
ms.sourcegitcommit: 581ab03291e91983459e56e40ea8d97b5189227e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/27/2019
ms.locfileid: "70045996"
---
# <a name="extending-dispatchers"></a><span data-ttu-id="de026-102">Rozšíření dispečerů</span><span class="sxs-lookup"><span data-stu-id="de026-102">Extending Dispatchers</span></span>
<span data-ttu-id="de026-103">Odesílatelé jsou odpovědni za příjem příchozích zpráv ze základních kanálů, jejich překlad na vyvolání metod v kódu aplikace a odeslání výsledků zpět volajícímu.</span><span class="sxs-lookup"><span data-stu-id="de026-103">Dispatchers are responsible for pulling incoming messages out of the underlying channels, translating them into method invocations in application code, and sending the results back to the caller.</span></span> <span data-ttu-id="de026-104">Rozšíření dispečera umožňují upravit toto zpracování.</span><span class="sxs-lookup"><span data-stu-id="de026-104">Dispatcher extensions allow you to modify this processing.</span></span>  <span data-ttu-id="de026-105">Můžete implementovat zprávy nebo inspektory parametrů, které kontrolují nebo mění obsah zpráv nebo parametrů.</span><span class="sxs-lookup"><span data-stu-id="de026-105">You can implement message or parameter inspectors that inspect or modify the contents of messages or parameters.</span></span>  <span data-ttu-id="de026-106">Můžete změnit způsob, jakým jsou zprávy směrovány na operace, nebo poskytovat jiné funkce.</span><span class="sxs-lookup"><span data-stu-id="de026-106">You can change the way messages are routed to operations or provide some other functionality.</span></span>

<span data-ttu-id="de026-107">Toto téma popisuje, jak použít <xref:System.ServiceModel.Dispatcher.DispatchRuntime> třídy a <xref:System.ServiceModel.Dispatcher.DispatchOperation> v aplikaci služby Windows Communication Foundation (WCF) pro úpravu výchozího chování dispečera nebo zachycení nebo změny zpráv, parametrů nebo vrácení. hodnoty před nebo po odeslání nebo jejich načtení z vrstvy kanálu.</span><span class="sxs-lookup"><span data-stu-id="de026-107">This topic describes how to use the <xref:System.ServiceModel.Dispatcher.DispatchRuntime> and <xref:System.ServiceModel.Dispatcher.DispatchOperation> classes in a Windows Communication Foundation (WCF) service application to modify the default execution behavior of a dispatcher or to intercept or modify messages, parameters, or return values prior to or subsequent to sending or retrieving them from the channel layer.</span></span> <span data-ttu-id="de026-108">Další informace o ekvivalentním zpracování zpráv modulu runtime klienta najdete v tématu [rozšíření klientů](../../../../docs/framework/wcf/extending/extending-clients.md).</span><span class="sxs-lookup"><span data-stu-id="de026-108">For more information about the equivalent client runtime message processing, see [Extending Clients](../../../../docs/framework/wcf/extending/extending-clients.md).</span></span> <span data-ttu-id="de026-109">Pro pochopení role, kterou <xref:System.ServiceModel.IExtensibleObject%601> typy hrají při přístupu ke sdílenému stavu mezi různými objekty vlastního nastavení modulu runtime, se podívejte na téma [rozšiřitelné objekty](../../../../docs/framework/wcf/extending/extensible-objects.md).</span><span class="sxs-lookup"><span data-stu-id="de026-109">To understand the role that <xref:System.ServiceModel.IExtensibleObject%601> types play in accessing shared state between various runtime customization objects, see [Extensible Objects](../../../../docs/framework/wcf/extending/extensible-objects.md).</span></span>

## <a name="dispatchers"></a><span data-ttu-id="de026-110">Dispečery</span><span class="sxs-lookup"><span data-stu-id="de026-110">Dispatchers</span></span>

<span data-ttu-id="de026-111">Vrstva modelu služby provádí převod mezi programovacím modelem vývojáře a základní výměnou zpráv, která se běžně označuje jako vrstva kanálu.</span><span class="sxs-lookup"><span data-stu-id="de026-111">The service model layer performs the conversion between the developer’s programming model and the underlying message exchange, commonly called the channel layer.</span></span> <span data-ttu-id="de026-112">V rámci WCF jsou odeslané kanály kanálu a koncového<xref:System.ServiceModel.Dispatcher.ChannelDispatcher> bodu <xref:System.ServiceModel.Dispatcher.EndpointDispatcher>(a v uvedeném pořadí) komponenty služby zodpovědné za příjem nových kanálů, přijímání zpráv, odesílání a volání operací a zpracování odpovědí.</span><span class="sxs-lookup"><span data-stu-id="de026-112">In WCF the channel and endpoint dispatchers (<xref:System.ServiceModel.Dispatcher.ChannelDispatcher> and <xref:System.ServiceModel.Dispatcher.EndpointDispatcher>, respectively) are the service components responsible for accepting new channels, receiving messages, operation dispatch and invocation, and response processing.</span></span> <span data-ttu-id="de026-113">Objekty dispečera jsou objekty přijímače, ale implementace kontraktu zpětného volání v duplexních službách také zveřejňují své objekty dispečera pro kontrolu, úpravy nebo rozšíření.</span><span class="sxs-lookup"><span data-stu-id="de026-113">Dispatcher objects are receiver objects, but callback contract implementations in duplex services also expose their dispatcher objects for inspection, modification, or extension.</span></span>

<span data-ttu-id="de026-114">Dispečer kanálu (a doprovodný <xref:System.ServiceModel.Channels.IChannelListener>nástroj) vyžádá zprávy z kanálu identifikátor a předá zprávy příslušnému odesilateli koncových bodů.</span><span class="sxs-lookup"><span data-stu-id="de026-114">The channel dispatcher (and companion <xref:System.ServiceModel.Channels.IChannelListener>) pulls messages out of the underling channel and passes the messages to their respective endpoint dispatchers.</span></span> <span data-ttu-id="de026-115">Každý dispečer koncového bodu <xref:System.ServiceModel.Dispatcher.DispatchRuntime> má a směruje zprávy na příslušné <xref:System.ServiceModel.Dispatcher.DispatchOperation>, což zodpovídá za volání metody, která implementuje operaci.</span><span class="sxs-lookup"><span data-stu-id="de026-115">Each endpoint dispatcher has a <xref:System.ServiceModel.Dispatcher.DispatchRuntime> that routes messages to the appropriate <xref:System.ServiceModel.Dispatcher.DispatchOperation>, which is responsible for calling the method that implements the operation.</span></span> <span data-ttu-id="de026-116">Různé volitelné a požadované třídy rozšíření jsou vyvolány způsobem.</span><span class="sxs-lookup"><span data-stu-id="de026-116">Various optional and required extension classes are invoked along the way.</span></span> <span data-ttu-id="de026-117">V tomto tématu se dozvíte, jak se tyto části vejdou dohromady, a jak můžete upravit vlastnosti a zapojit vlastní kód v nástroji, aby se rozšířily základní funkce.</span><span class="sxs-lookup"><span data-stu-id="de026-117">This topic explains how these pieces fit together, and how you might modify properties and plug your own code in to extend the base functionality.</span></span>

<span data-ttu-id="de026-118">Vlastnosti dispečera a upravené objekty přizpůsobení jsou vloženy pomocí objektů služby, koncového bodu, kontraktu nebo chování operací.</span><span class="sxs-lookup"><span data-stu-id="de026-118">Dispatcher properties and modified customization objects are inserted by using service, endpoint, contract, or operation behavior objects.</span></span> <span data-ttu-id="de026-119">Toto téma nepopisuje použití chování.</span><span class="sxs-lookup"><span data-stu-id="de026-119">This topic does not describe how to use behaviors.</span></span> <span data-ttu-id="de026-120">Další informace o typech použitých pro vložení úprav dispečera najdete v tématu [Konfigurace a rozšíření modulu runtime s chováním](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md).</span><span class="sxs-lookup"><span data-stu-id="de026-120">For more information about the types used to insert dispatcher modifications, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md).</span></span>

<span data-ttu-id="de026-121">Následující obrázek poskytuje podrobný pohled na položky architektury v rámci služby.</span><span class="sxs-lookup"><span data-stu-id="de026-121">The following graphic provides a high-level view of the architectural items in a service.</span></span>

<span data-ttu-id="de026-122">![Běhová architektura Dispatch](../../../../docs/framework/wcf/extending/media/wcfc-dispatchruntimearchc.gif "wcfc_DispatchRuntimeArchc")</span><span class="sxs-lookup"><span data-stu-id="de026-122">![The dispatch runtime architecture](../../../../docs/framework/wcf/extending/media/wcfc-dispatchruntimearchc.gif "wcfc_DispatchRuntimeArchc")</span></span>

### <a name="channel-dispatchers"></a><span data-ttu-id="de026-123">Odesílání kanálů</span><span class="sxs-lookup"><span data-stu-id="de026-123">Channel Dispatchers</span></span>

<span data-ttu-id="de026-124"><xref:System.ServiceModel.Channels.IChannelListener> Vytvoří se <xref:System.ServiceModel.Dispatcher.ChannelDispatcher> objekt pro přidružení k konkrétnímu identifikátoru URI (označovanému jako identifikátor URI naslouchání) s instancí služby.</span><span class="sxs-lookup"><span data-stu-id="de026-124">A <xref:System.ServiceModel.Dispatcher.ChannelDispatcher> object is created to associate an <xref:System.ServiceModel.Channels.IChannelListener> at a particular URI (called a listen URI) with an instance of a service.</span></span> <span data-ttu-id="de026-125">Každý <xref:System.ServiceModel.ServiceHost> objekt může mít mnoho <xref:System.ServiceModel.Dispatcher.ChannelDispatcher> objektů, z nichž každý je přidružen pouze k jednomu identifikátoru URI naslouchacího procesu a naslouchání.</span><span class="sxs-lookup"><span data-stu-id="de026-125">Each <xref:System.ServiceModel.ServiceHost> object can have many <xref:System.ServiceModel.Dispatcher.ChannelDispatcher> objects, each associated with only one listener and listen URI.</span></span> <span data-ttu-id="de026-126">Když se přijme zpráva, <xref:System.ServiceModel.Dispatcher.ChannelDispatcher> dotazuje každý z přidružených <xref:System.ServiceModel.Dispatcher.EndpointDispatcher> objektů na to, jestli koncový bod může zprávu přijmout, a pošle zprávu na tu, kterou může.</span><span class="sxs-lookup"><span data-stu-id="de026-126">When a message arrives, the <xref:System.ServiceModel.Dispatcher.ChannelDispatcher> queries each of the associated <xref:System.ServiceModel.Dispatcher.EndpointDispatcher> objects whether the endpoint can accept the message, and passes the message to the one that can.</span></span>

<span data-ttu-id="de026-127">Všechny vlastnosti, které řídí dobu života a chování relace kanálu, jsou k dispozici pro kontrolu a úpravy <xref:System.ServiceModel.Dispatcher.ChannelDispatcher> objektu.</span><span class="sxs-lookup"><span data-stu-id="de026-127">All properties that control the lifetime and behavior of a channel session are available for inspection or modification on the <xref:System.ServiceModel.Dispatcher.ChannelDispatcher> object.</span></span> <span data-ttu-id="de026-128">Patří sem vlastní Inicializátory kanálů, naslouchací proces kanálu, hostitel, přidružený <xref:System.ServiceModel.InstanceContext>a tak dále.</span><span class="sxs-lookup"><span data-stu-id="de026-128">These include custom channel initializers, the channel listener, the host, the associated <xref:System.ServiceModel.InstanceContext>, and so on.</span></span>

### <a name="endpoint-dispatchers"></a><span data-ttu-id="de026-129">Expedice koncových bodů</span><span class="sxs-lookup"><span data-stu-id="de026-129">Endpoint Dispatchers</span></span>

<span data-ttu-id="de026-130">Objekt je zodpovědný za zpracování zpráv <xref:System.ServiceModel.Dispatcher.ChannelDispatcher> z a v případě, že cílová adresa zprávy odpovídá <xref:System.ServiceModel.Dispatcher.EndpointDispatcher.AddressFilter%2A> <xref:System.ServiceModel.Dispatcher.EndpointDispatcher.ContractFilter%2A> vlastnosti a akce zprávy se shoduje s vlastností. <xref:System.ServiceModel.Dispatcher.EndpointDispatcher></span><span class="sxs-lookup"><span data-stu-id="de026-130">The <xref:System.ServiceModel.Dispatcher.EndpointDispatcher> object is responsible for processing messages from a <xref:System.ServiceModel.Dispatcher.ChannelDispatcher> when the destination address of a message matches the <xref:System.ServiceModel.Dispatcher.EndpointDispatcher.AddressFilter%2A> and the message action matches the <xref:System.ServiceModel.Dispatcher.EndpointDispatcher.ContractFilter%2A> property.</span></span> <span data-ttu-id="de026-131">Pokud dva <xref:System.ServiceModel.Dispatcher.EndpointDispatcher> objekty mohou přijmout zprávu <xref:System.ServiceModel.Dispatcher.EndpointDispatcher.FilterPriority%2A> , hodnota vlastnosti Určuje koncový bod s vyšší prioritou.</span><span class="sxs-lookup"><span data-stu-id="de026-131">If two <xref:System.ServiceModel.Dispatcher.EndpointDispatcher> objects can accept a message, the <xref:System.ServiceModel.Dispatcher.EndpointDispatcher.FilterPriority%2A> property value determines the higher priority endpoint.</span></span>

<span data-ttu-id="de026-132">Použijte k získání dvou hlavních bodů rozšíření modelu služby <xref:System.ServiceModel.Dispatcher.DispatchRuntime> – třídy a <xref:System.ServiceModel.Dispatcher.DispatchOperation> –, které lze použít k přizpůsobení zpracování dispečera. <xref:System.ServiceModel.Dispatcher.EndpointDispatcher></span><span class="sxs-lookup"><span data-stu-id="de026-132">Use the <xref:System.ServiceModel.Dispatcher.EndpointDispatcher> to acquire the two main service model extension points – the <xref:System.ServiceModel.Dispatcher.DispatchRuntime> and <xref:System.ServiceModel.Dispatcher.DispatchOperation> classes – that you can use to customize the processing of the dispatcher.</span></span> <span data-ttu-id="de026-133"><xref:System.ServiceModel.Dispatcher.DispatchRuntime> Třída umožňuje uživatelům zachytit a rozšíření dispečera v oboru kontraktu (tj. pro všechny zprávy ve smlouvě).</span><span class="sxs-lookup"><span data-stu-id="de026-133">The <xref:System.ServiceModel.Dispatcher.DispatchRuntime> class allows users to intercept and extend the dispatcher at the contract scope (that is, for all messages in a contract).</span></span> <span data-ttu-id="de026-134"><xref:System.ServiceModel.Dispatcher.DispatchOperation> Třída umožňuje uživatelům zachytit a rozšíření dispečera v oboru operace (tj. pro všechny zprávy v operaci).</span><span class="sxs-lookup"><span data-stu-id="de026-134">The <xref:System.ServiceModel.Dispatcher.DispatchOperation> class allows users to intercept and extend the dispatcher at an operation scope (that is, for all messages in an operation).</span></span>

## <a name="scenarios"></a><span data-ttu-id="de026-135">Scénáře</span><span class="sxs-lookup"><span data-stu-id="de026-135">Scenarios</span></span>

<span data-ttu-id="de026-136">K dispozici je několik důvodů pro rozšiřování dispečera:</span><span class="sxs-lookup"><span data-stu-id="de026-136">There a number of reasons to extend the dispatcher:</span></span>

- <span data-ttu-id="de026-137">Vlastní ověření zprávy</span><span class="sxs-lookup"><span data-stu-id="de026-137">Custom Message Validation.</span></span> <span data-ttu-id="de026-138">Uživatelé mohou vyhovět, že je zpráva platná pro určité schéma.</span><span class="sxs-lookup"><span data-stu-id="de026-138">Users can enforce that a message is valid for a certain schema.</span></span> <span data-ttu-id="de026-139">To se dá udělat implementací rozhraní pro zachycování zpráv.</span><span class="sxs-lookup"><span data-stu-id="de026-139">This can be done by implementing the message interceptor interfaces.</span></span> <span data-ttu-id="de026-140">Příklad naleznete v tématu [inspektoři zpráv](../../../../docs/framework/wcf/samples/message-inspectors.md).</span><span class="sxs-lookup"><span data-stu-id="de026-140">For an example, see [Message Inspectors](../../../../docs/framework/wcf/samples/message-inspectors.md).</span></span>

- <span data-ttu-id="de026-141">Vlastní protokolování zpráv.</span><span class="sxs-lookup"><span data-stu-id="de026-141">Custom Message Logging.</span></span> <span data-ttu-id="de026-142">Uživatelé mohou kontrolovat a protokolovat některé sady zpráv aplikace, které jsou spouštěny prostřednictvím koncového bodu.</span><span class="sxs-lookup"><span data-stu-id="de026-142">Users can inspect and log some set of application messages that flow through an endpoint.</span></span> <span data-ttu-id="de026-143">Můžete to také provést pomocí rozhraní pro zachycování zpráv.</span><span class="sxs-lookup"><span data-stu-id="de026-143">This can also be accomplished with the message interceptor interfaces.</span></span>

- <span data-ttu-id="de026-144">Vlastní transformace zpráv</span><span class="sxs-lookup"><span data-stu-id="de026-144">Custom Message Transformations.</span></span> <span data-ttu-id="de026-145">Uživatelé mohou použít určité transformace na zprávu v modulu runtime (například pro správu verzí).</span><span class="sxs-lookup"><span data-stu-id="de026-145">Users can apply certain transformations to the message in the runtime (for example, for versioning).</span></span> <span data-ttu-id="de026-146">To se dá provést znovu s rozhraními pro zachycování zpráv.</span><span class="sxs-lookup"><span data-stu-id="de026-146">This can be accomplished, again, with the message interceptor interfaces.</span></span>

- <span data-ttu-id="de026-147">Vlastní datový model.</span><span class="sxs-lookup"><span data-stu-id="de026-147">Custom Data Model.</span></span> <span data-ttu-id="de026-148">Uživatelé mohou mít model serializace dat jiný než podporované ve výchozím nastavení ve službě WCF (konkrétně <xref:System.Runtime.Serialization.DataContractSerializer?displayProperty=nameWithType>, <xref:System.Xml.Serialization.XmlSerializer?displayProperty=nameWithType>, a nezpracované zprávy).</span><span class="sxs-lookup"><span data-stu-id="de026-148">Users can have a data serialization model other than those supported by default in WCF (namely, <xref:System.Runtime.Serialization.DataContractSerializer?displayProperty=nameWithType>, <xref:System.Xml.Serialization.XmlSerializer?displayProperty=nameWithType>, and raw messages).</span></span> <span data-ttu-id="de026-149">To lze provést implementací rozhraní formátovacích zpráv.</span><span class="sxs-lookup"><span data-stu-id="de026-149">This can be done by implement the message formatter interfaces.</span></span> <span data-ttu-id="de026-150">Příklad naleznete v tématu [formátovací modul operací a selektor operací](../../../../docs/framework/wcf/samples/operation-formatter-and-operation-selector.md).</span><span class="sxs-lookup"><span data-stu-id="de026-150">For an example, see [Operation Formatter and Operation Selector](../../../../docs/framework/wcf/samples/operation-formatter-and-operation-selector.md).</span></span>

- <span data-ttu-id="de026-151">Ověřování vlastního parametru.</span><span class="sxs-lookup"><span data-stu-id="de026-151">Custom Parameter Validation.</span></span> <span data-ttu-id="de026-152">Uživatelé můžou vyhovět tomu, že typové parametry jsou platné (na rozdíl od XML).</span><span class="sxs-lookup"><span data-stu-id="de026-152">Users can enforce that typed parameters are valid (as opposed to XML).</span></span> <span data-ttu-id="de026-153">To lze provést pomocí rozhraní Inspector pro parametry.</span><span class="sxs-lookup"><span data-stu-id="de026-153">This can be done using the parameter inspector interfaces.</span></span>

- <span data-ttu-id="de026-154">Odesílání vlastních operací.</span><span class="sxs-lookup"><span data-stu-id="de026-154">Custom Operation Dispatching.</span></span> <span data-ttu-id="de026-155">Uživatelé mohou implementovat odesílání na něco jiného než akce – například u prvku tělo nebo na vlastní vlastnost zprávy.</span><span class="sxs-lookup"><span data-stu-id="de026-155">Users can implement dispatching on something other than action – for example, on the body element, or on a custom message property.</span></span> <span data-ttu-id="de026-156">To lze provést pomocí <xref:System.ServiceModel.Dispatcher.IDispatchOperationSelector> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="de026-156">This can be done using the <xref:System.ServiceModel.Dispatcher.IDispatchOperationSelector> interface.</span></span> <span data-ttu-id="de026-157">Příklad naleznete v tématu [formátovací modul operací a selektor operací](../../../../docs/framework/wcf/samples/operation-formatter-and-operation-selector.md).</span><span class="sxs-lookup"><span data-stu-id="de026-157">For an example, see [Operation Formatter and Operation Selector](../../../../docs/framework/wcf/samples/operation-formatter-and-operation-selector.md).</span></span>

- <span data-ttu-id="de026-158">Sdružování objektů.</span><span class="sxs-lookup"><span data-stu-id="de026-158">Object Pooling.</span></span> <span data-ttu-id="de026-159">Uživatelé můžou místo přidělení nového pro každé volání vytvořit fond instancí.</span><span class="sxs-lookup"><span data-stu-id="de026-159">Users can pool instances rather than allocating a new one for every call.</span></span> <span data-ttu-id="de026-160">To lze implementovat pomocí rozhraní poskytovatele instancí.</span><span class="sxs-lookup"><span data-stu-id="de026-160">This can be implemented using the instance provider interfaces.</span></span> <span data-ttu-id="de026-161">Příklad najdete v tématu [sdružování](../../../../docs/framework/wcf/samples/pooling.md).</span><span class="sxs-lookup"><span data-stu-id="de026-161">For an example, see [Pooling](../../../../docs/framework/wcf/samples/pooling.md).</span></span>

- <span data-ttu-id="de026-162">Leasing instance.</span><span class="sxs-lookup"><span data-stu-id="de026-162">Instance Leasing.</span></span> <span data-ttu-id="de026-163">Uživatelé můžou implementovat způsob zapůjčení pro dobu života instance, podobně jako u .NET Framework vzdálené komunikace.</span><span class="sxs-lookup"><span data-stu-id="de026-163">Users can implement a leasing pattern for instance lifetime, similar to that of .NET Framework Remoting.</span></span> <span data-ttu-id="de026-164">To lze provést pomocí rozhraní pro životní dobu kontextu instance.</span><span class="sxs-lookup"><span data-stu-id="de026-164">This can be done using the instance context lifetime interfaces.</span></span>

- <span data-ttu-id="de026-165">Vlastní zpracování chyb.</span><span class="sxs-lookup"><span data-stu-id="de026-165">Custom Error Handling.</span></span> <span data-ttu-id="de026-166">Uživatelé můžou řídit, jak se zpracovávají místní chyby, a jak se chyby sdělují klientům zpátky.</span><span class="sxs-lookup"><span data-stu-id="de026-166">Users can control how both local errors are processed and how faults are communicated back to clients.</span></span> <span data-ttu-id="de026-167">To lze implementovat pomocí <xref:System.ServiceModel.Dispatcher.IErrorHandler> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="de026-167">This can be implemented using the <xref:System.ServiceModel.Dispatcher.IErrorHandler> interfaces.</span></span>

- <span data-ttu-id="de026-168">Vlastní autorizační chování.</span><span class="sxs-lookup"><span data-stu-id="de026-168">Custom Authorization Behaviors.</span></span> <span data-ttu-id="de026-169">Uživatelé můžou implementovat vlastní řízení přístupu tím, že rozšíří pracovní části kontraktu nebo operace a přidají kontroly zabezpečení na základě tokenů přítomných ve zprávě.</span><span class="sxs-lookup"><span data-stu-id="de026-169">Users can implement custom access control by extending the Contract or Operation run-time pieces and adding security checks based upon the tokens present in the message.</span></span> <span data-ttu-id="de026-170">To lze provést buď pomocí rozhraní zachytávací zprávy, nebo parametrů.</span><span class="sxs-lookup"><span data-stu-id="de026-170">This can be accomplished using either the message interceptor or parameter interceptor interfaces.</span></span> <span data-ttu-id="de026-171">Příklady najdete v tématu [rozšiřitelnost zabezpečení](../../../../docs/framework/wcf/samples/security-extensibility.md).</span><span class="sxs-lookup"><span data-stu-id="de026-171">For examples, see [Security Extensibility](../../../../docs/framework/wcf/samples/security-extensibility.md).</span></span>

  > [!CAUTION]
  > <span data-ttu-id="de026-172">Vzhledem k tomu, že změna vlastností zabezpečení má potenciál narušit zabezpečení aplikací WCF, důrazně doporučujeme, abyste před nasazením provedli úpravy související se zabezpečením a důkladně se otestovali.</span><span class="sxs-lookup"><span data-stu-id="de026-172">Because altering security properties has the potential to compromise the security of WCF applications, it is strongly recommended that you undertake security-related modifications with care and test thoroughly prior to deployment.</span></span>

- <span data-ttu-id="de026-173">Vlastní validátory runtime služby WCF.</span><span class="sxs-lookup"><span data-stu-id="de026-173">Custom WCF Runtime Validators.</span></span> <span data-ttu-id="de026-174">Můžete nainstalovat vlastní validátory, které prozkoumají služby, kontrakty a vazby, aby vynutily zásady na podnikové úrovni vzhledem k aplikacím WCF.</span><span class="sxs-lookup"><span data-stu-id="de026-174">You can install custom validators that examine services, contracts, and bindings to enforce enterprise-level policies with respect to WCF applications.</span></span> <span data-ttu-id="de026-175">(Například viz [How to: Zamčení koncových bodů v](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md)podniku.)</span><span class="sxs-lookup"><span data-stu-id="de026-175">(For example, see [How to: Lock Down Endpoints in the Enterprise](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).)</span></span>

### <a name="using-the-dispatchruntime-class"></a><span data-ttu-id="de026-176">Použití třídy DispatchRuntime</span><span class="sxs-lookup"><span data-stu-id="de026-176">Using the DispatchRuntime Class</span></span>

<span data-ttu-id="de026-177"><xref:System.ServiceModel.Dispatcher.DispatchRuntime> Třídu můžete použít buď k úpravě výchozího chování služby nebo jednotlivého koncového bodu, nebo k vložení objektů, které implementují vlastní úpravy jednoho nebo obou následujících procesů služby (nebo procesů klienta v případě duplexního klienta):</span><span class="sxs-lookup"><span data-stu-id="de026-177">Use the <xref:System.ServiceModel.Dispatcher.DispatchRuntime> class either to modify the default behavior of a service or individual endpoint, or to insert objects that implement custom modifications to one or both of the following service processes (or client processes in the case of a duplex client):</span></span>

- <span data-ttu-id="de026-178">Transformace příchozích zpráv do objektů a uvolnění těchto objektů jako vyvolání metod u objektu služby.</span><span class="sxs-lookup"><span data-stu-id="de026-178">The transformation of incoming messages into objects and releasing those objects as method invocations on a service object.</span></span>

- <span data-ttu-id="de026-179">Transformace objektů přijatých z odpovědi na vyvolání operace služby do odchozích zpráv.</span><span class="sxs-lookup"><span data-stu-id="de026-179">The transformation of objects received from the response to a service operation invocation into outbound messages.</span></span>

<span data-ttu-id="de026-180"><xref:System.ServiceModel.Dispatcher.DispatchRuntime> Umožňuje zachytit a zvětšit kanál nebo dispečera koncového bodu pro všechny zprávy v rámci konkrétní smlouvy, a to i v případě, že zpráva není rozpoznána.</span><span class="sxs-lookup"><span data-stu-id="de026-180">The <xref:System.ServiceModel.Dispatcher.DispatchRuntime> enables you to intercept and extend the channel or endpoint dispatcher for all messages across a particular contract, even when a message is not recognized.</span></span> <span data-ttu-id="de026-181">Když zpráva dorazí, že se neshoduje s žádnou deklarovanou v kontraktu, je odeslána na operaci vrácenou <xref:System.ServiceModel.Dispatcher.DispatchRuntime.UnhandledDispatchOperation%2A> vlastností.</span><span class="sxs-lookup"><span data-stu-id="de026-181">When a message arrives that does not match any declared in the contract it is dispatched to the operation returned by the <xref:System.ServiceModel.Dispatcher.DispatchRuntime.UnhandledDispatchOperation%2A> property.</span></span> <span data-ttu-id="de026-182">Chcete-li zachytit nebo roztáhnout ve všech zprávách pro konkrétní operaci, <xref:System.ServiceModel.Dispatcher.DispatchOperation> Přečtěte si třídu.</span><span class="sxs-lookup"><span data-stu-id="de026-182">To intercept or extend across all messages for a particular operation, see the <xref:System.ServiceModel.Dispatcher.DispatchOperation> class.</span></span>

<span data-ttu-id="de026-183">Existují čtyři hlavní oblasti rozšiřitelnosti dispečera vystavené <xref:System.ServiceModel.Dispatcher.DispatchRuntime> třídou:</span><span class="sxs-lookup"><span data-stu-id="de026-183">There are four main areas of dispatcher extensibility exposed by the <xref:System.ServiceModel.Dispatcher.DispatchRuntime> class:</span></span>

1. <span data-ttu-id="de026-184">Komponenty kanálu používají vlastnosti <xref:System.ServiceModel.Dispatcher.DispatchRuntime> a přidružených dispečerů kanálů vrácených <xref:System.ServiceModel.Dispatcher.DispatchRuntime.ChannelDispatcher%2A> vlastností k přizpůsobení způsobu, jakým dispečer kanálu akceptuje a uzavírá kanály.</span><span class="sxs-lookup"><span data-stu-id="de026-184">Channel components use the properties of the <xref:System.ServiceModel.Dispatcher.DispatchRuntime> and those of the associated channel dispatcher returned by the <xref:System.ServiceModel.Dispatcher.DispatchRuntime.ChannelDispatcher%2A> property to customize how the channel dispatcher accepts and closes channels.</span></span> <span data-ttu-id="de026-185">Tato kategorie zahrnuje <xref:System.ServiceModel.Dispatcher.ChannelDispatcher.ChannelInitializers%2A> vlastnosti a <xref:System.ServiceModel.Dispatcher.DispatchRuntime.InputSessionShutdownHandlers%2A> .</span><span class="sxs-lookup"><span data-stu-id="de026-185">This category includes the <xref:System.ServiceModel.Dispatcher.ChannelDispatcher.ChannelInitializers%2A> and <xref:System.ServiceModel.Dispatcher.DispatchRuntime.InputSessionShutdownHandlers%2A> properties.</span></span>

2. <span data-ttu-id="de026-186">Součásti zpráv jsou přizpůsobené pro každou zpracovávanou zprávu.</span><span class="sxs-lookup"><span data-stu-id="de026-186">Message components are customized for each message processed.</span></span> <span data-ttu-id="de026-187">Tato <xref:System.ServiceModel.Dispatcher.DispatchRuntime.MessageInspectors%2A>kategorie zahrnuje <xref:System.ServiceModel.Dispatcher.DispatchRuntime.OperationSelector%2A> vlastnosti<xref:System.ServiceModel.Dispatcher.ChannelDispatcher.ErrorHandlers%2A> ,, <xref:System.ServiceModel.Dispatcher.DispatchRuntime.Operations%2A>a.</span><span class="sxs-lookup"><span data-stu-id="de026-187">This category includes the <xref:System.ServiceModel.Dispatcher.DispatchRuntime.MessageInspectors%2A>, <xref:System.ServiceModel.Dispatcher.DispatchRuntime.OperationSelector%2A>, <xref:System.ServiceModel.Dispatcher.DispatchRuntime.Operations%2A>, and the <xref:System.ServiceModel.Dispatcher.ChannelDispatcher.ErrorHandlers%2A> properties.</span></span>

3. <span data-ttu-id="de026-188">Komponenty instancí přizpůsobují vytváření, životnost a odstraňování instancí typu služby.</span><span class="sxs-lookup"><span data-stu-id="de026-188">Instance components customize the creation, lifetime, and disposal of instances of the service type.</span></span> <span data-ttu-id="de026-189">Další informace o životních cyklech objektů služby naleznete v <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> tématu vlastnost.</span><span class="sxs-lookup"><span data-stu-id="de026-189">For more information about service object lifetimes, see the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> property.</span></span> <span data-ttu-id="de026-190">Tato kategorie zahrnuje <xref:System.ServiceModel.Dispatcher.DispatchRuntime.InstanceContextInitializers%2A> <xref:System.ServiceModel.Dispatcher.DispatchRuntime.InstanceProvider%2A> a vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="de026-190">This category includes the <xref:System.ServiceModel.Dispatcher.DispatchRuntime.InstanceContextInitializers%2A> and the <xref:System.ServiceModel.Dispatcher.DispatchRuntime.InstanceProvider%2A> properties.</span></span>

4. <span data-ttu-id="de026-191">Součásti související se zabezpečením mohou používat následující vlastnosti:</span><span class="sxs-lookup"><span data-stu-id="de026-191">Security-related components can use the following properties:</span></span>

    - <span data-ttu-id="de026-192"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.SecurityAuditLogLocation%2A>indikuje, kde se zapisují události auditu.</span><span class="sxs-lookup"><span data-stu-id="de026-192"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.SecurityAuditLogLocation%2A> indicates where audit events are written.</span></span>

    - <span data-ttu-id="de026-193"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.ImpersonateCallerForAllOperations%2A>Určuje, zda se služba pokusí o zosobnění s použitím pověření poskytnutých příchozí zprávou.</span><span class="sxs-lookup"><span data-stu-id="de026-193"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.ImpersonateCallerForAllOperations%2A> controls whether the service attempts to impersonate using the credentials provided by the incoming message.</span></span>

    - <span data-ttu-id="de026-194"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.MessageAuthenticationAuditLevel%2A>Určuje, zda jsou události úspěšného ověření zprávy zapisovány do protokolu událostí <xref:System.ServiceModel.Dispatcher.DispatchRuntime.SecurityAuditLogLocation%2A>určeného parametrem.</span><span class="sxs-lookup"><span data-stu-id="de026-194"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.MessageAuthenticationAuditLevel%2A> controls whether successful message authentication events are written to the event log specified by <xref:System.ServiceModel.Dispatcher.DispatchRuntime.SecurityAuditLogLocation%2A>.</span></span>

    - <span data-ttu-id="de026-195"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.PrincipalPermissionMode%2A>Určuje, <xref:System.Threading.Thread.CurrentPrincipal%2A> jak je nastavena vlastnost.</span><span class="sxs-lookup"><span data-stu-id="de026-195"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.PrincipalPermissionMode%2A> controls how the <xref:System.Threading.Thread.CurrentPrincipal%2A> property is set.</span></span>

    - <span data-ttu-id="de026-196"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.ServiceAuthorizationAuditLevel%2A>Určuje způsob, jakým se provádí auditování událostí autorizace.</span><span class="sxs-lookup"><span data-stu-id="de026-196"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.ServiceAuthorizationAuditLevel%2A> specifies how the auditing of authorization events is performed.</span></span>

    - <span data-ttu-id="de026-197"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.SuppressAuditFailure%2A>Určuje, zda se mají potlačit nekritické výjimky, ke kterým dojde během procesu protokolování.</span><span class="sxs-lookup"><span data-stu-id="de026-197"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.SuppressAuditFailure%2A> specifies whether to suppress non-critical exceptions that occur during the logging process.</span></span>

<span data-ttu-id="de026-198">Vlastní objekty rozšíření se obvykle přiřazují k <xref:System.ServiceModel.Dispatcher.DispatchRuntime> vlastnosti nebo vložené do kolekce chování služby (objekt, který implementuje <xref:System.ServiceModel.Description.IServiceBehavior>), chování kontraktu (objekt, který implementuje <xref:System.ServiceModel.Description.IContractBehavior>), nebo koncový bod. chování (objekt, který implementuje <xref:System.ServiceModel.Description.IEndpointBehavior>).</span><span class="sxs-lookup"><span data-stu-id="de026-198">Typically, custom extension objects are assigned to a <xref:System.ServiceModel.Dispatcher.DispatchRuntime> property or inserted into a collection by a service behavior (an object that implements <xref:System.ServiceModel.Description.IServiceBehavior>), a contract behavior (an object that implements <xref:System.ServiceModel.Description.IContractBehavior>), or an endpoint behavior (an object that implements <xref:System.ServiceModel.Description.IEndpointBehavior>).</span></span> <span data-ttu-id="de026-199">Pak se objekt chování při instalaci přidá do příslušné kolekce chování buď programově, nebo implementací vlastního <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> objektu, aby bylo možné chování vložit pomocí konfiguračního souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="de026-199">Then the installing behavior object is added to the appropriate collection of behaviors either programmatically or by implementing a custom <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> object to enable the behavior to be inserted using an application configuration file.</span></span>

<span data-ttu-id="de026-200">Duplexní klienti (klienti, kteří implementují kontrakt zpětného volání určené duplexovou službou) <xref:System.ServiceModel.Dispatcher.DispatchRuntime> mají také objekt, ke kterému lze <xref:System.ServiceModel.Dispatcher.ClientRuntime.CallbackDispatchRuntime%2A> přistupovat pomocí vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="de026-200">Duplex clients (clients that implement a callback contract specified by a duplex service) also have a <xref:System.ServiceModel.Dispatcher.DispatchRuntime> object that can be accessed using the <xref:System.ServiceModel.Dispatcher.ClientRuntime.CallbackDispatchRuntime%2A> property.</span></span>

### <a name="using-the-dispatchoperation-class"></a><span data-ttu-id="de026-201">Použití třídy DispatchOperation</span><span class="sxs-lookup"><span data-stu-id="de026-201">Using the DispatchOperation Class</span></span>

<span data-ttu-id="de026-202"><xref:System.ServiceModel.Dispatcher.DispatchOperation> Třída je umístění pro úpravy v době běhu a místo vložení pro vlastní rozšíření, která jsou vymezena pouze pro jednu operaci služby.</span><span class="sxs-lookup"><span data-stu-id="de026-202">The <xref:System.ServiceModel.Dispatcher.DispatchOperation> class is the location for run-time modifications and the insertion point for custom extensions that are scoped to only one service operation.</span></span> <span data-ttu-id="de026-203">(Chcete-li upravit chování služby za běhu pro všechny zprávy ve kontraktu, použijte <xref:System.ServiceModel.Dispatcher.DispatchRuntime> třídu.)</span><span class="sxs-lookup"><span data-stu-id="de026-203">(To modify service run-time behavior for all messages in a contract, use the <xref:System.ServiceModel.Dispatcher.DispatchRuntime> class.)</span></span>

<span data-ttu-id="de026-204">Nainstalujte <xref:System.ServiceModel.Dispatcher.DispatchOperation> změny pomocí objektu vlastního chování služby.</span><span class="sxs-lookup"><span data-stu-id="de026-204">Install <xref:System.ServiceModel.Dispatcher.DispatchOperation> modifications using a custom service behavior object.</span></span>

<span data-ttu-id="de026-205"><xref:System.ServiceModel.Dispatcher.DispatchRuntime.Operations%2A> Pomocí vlastnosti<xref:System.ServiceModel.Dispatcher.DispatchOperation> vyhledejte objekt, který představuje konkrétní operaci služby.</span><span class="sxs-lookup"><span data-stu-id="de026-205">Use the <xref:System.ServiceModel.Dispatcher.DispatchRuntime.Operations%2A> property to locate the <xref:System.ServiceModel.Dispatcher.DispatchOperation> object that represents a particular service operation.</span></span>

<span data-ttu-id="de026-206">Následující vlastnosti řídí spuštění za běhu na úrovni operace:</span><span class="sxs-lookup"><span data-stu-id="de026-206">The following properties control runtime execution at the operation level:</span></span>

- <span data-ttu-id="de026-207"><xref:System.ServiceModel.Dispatcher.DispatchOperation.Action%2A>Vlastnosti, <xref:System.ServiceModel.Dispatcher.DispatchOperation.ReplyAction%2A>, ,<xref:System.ServiceModel.Dispatcher.DispatchOperation.FaultContractInfos%2A>, a<xref:System.ServiceModel.Dispatcher.DispatchOperation.Name%2A>získávají příslušné hodnoty pro operaci. <xref:System.ServiceModel.Dispatcher.DispatchOperation.IsTerminating%2A> <xref:System.ServiceModel.Dispatcher.DispatchOperation.IsOneWay%2A></span><span class="sxs-lookup"><span data-stu-id="de026-207">The <xref:System.ServiceModel.Dispatcher.DispatchOperation.Action%2A>, <xref:System.ServiceModel.Dispatcher.DispatchOperation.ReplyAction%2A>, <xref:System.ServiceModel.Dispatcher.DispatchOperation.FaultContractInfos%2A>, <xref:System.ServiceModel.Dispatcher.DispatchOperation.IsOneWay%2A>, <xref:System.ServiceModel.Dispatcher.DispatchOperation.IsTerminating%2A>, and <xref:System.ServiceModel.Dispatcher.DispatchOperation.Name%2A> properties obtain the respective values for the operation.</span></span>

- <span data-ttu-id="de026-208"><xref:System.ServiceModel.Dispatcher.DispatchOperation.TransactionAutoComplete%2A> A<xref:System.ServiceModel.Dispatcher.DispatchOperation.TransactionRequired%2A> určení chování transakce.</span><span class="sxs-lookup"><span data-stu-id="de026-208">The <xref:System.ServiceModel.Dispatcher.DispatchOperation.TransactionAutoComplete%2A> and <xref:System.ServiceModel.Dispatcher.DispatchOperation.TransactionRequired%2A> specify transaction behavior.</span></span>

- <span data-ttu-id="de026-209">Vlastnosti <xref:System.ServiceModel.Dispatcher.DispatchOperation.ReleaseInstanceBeforeCall%2A> <xref:System.ServiceModel.InstanceContext>a <xref:System.ServiceModel.Dispatcher.DispatchOperation.ReleaseInstanceAfterCall%2A> určují dobu života uživatelem definovaného objektu služby relativně k.</span><span class="sxs-lookup"><span data-stu-id="de026-209">The <xref:System.ServiceModel.Dispatcher.DispatchOperation.ReleaseInstanceBeforeCall%2A> and <xref:System.ServiceModel.Dispatcher.DispatchOperation.ReleaseInstanceAfterCall%2A> properties control the lifetime of the user-defined service object relative to the <xref:System.ServiceModel.InstanceContext>.</span></span>

- <span data-ttu-id="de026-210">Vlastnosti, <xref:System.ServiceModel.Dispatcher.DispatchOperation.SerializeReply%2A>a umožňují explicitní kontrolu nad převodem zpráv na objekty a objekty na zprávy. <xref:System.ServiceModel.Dispatcher.DispatchOperation.DeserializeRequest%2A> <xref:System.ServiceModel.Dispatcher.DispatchOperation.Formatter%2A></span><span class="sxs-lookup"><span data-stu-id="de026-210">The <xref:System.ServiceModel.Dispatcher.DispatchOperation.DeserializeRequest%2A>, <xref:System.ServiceModel.Dispatcher.DispatchOperation.SerializeReply%2A>, and the <xref:System.ServiceModel.Dispatcher.DispatchOperation.Formatter%2A> properties enable explicit control over the conversion from messages to objects and objects to messages.</span></span>

- <span data-ttu-id="de026-211"><xref:System.ServiceModel.Dispatcher.DispatchOperation.Impersonation%2A> Vlastnost určuje úroveň zosobnění operace.</span><span class="sxs-lookup"><span data-stu-id="de026-211">The <xref:System.ServiceModel.Dispatcher.DispatchOperation.Impersonation%2A> property specifies the operation impersonation level.</span></span>

- <span data-ttu-id="de026-212"><xref:System.ServiceModel.Dispatcher.DispatchOperation.CallContextInitializers%2A> Vlastnost vloží rozšíření vlastního kontextu volání pro danou operaci.</span><span class="sxs-lookup"><span data-stu-id="de026-212">The <xref:System.ServiceModel.Dispatcher.DispatchOperation.CallContextInitializers%2A> property inserts custom call context extensions for the operation.</span></span>

- <span data-ttu-id="de026-213">Vlastnost <xref:System.ServiceModel.Dispatcher.DispatchOperation.AutoDisposeParameters%2A> určuje, kdy jsou zničeny objekty parametrů.</span><span class="sxs-lookup"><span data-stu-id="de026-213">The <xref:System.ServiceModel.Dispatcher.DispatchOperation.AutoDisposeParameters%2A> property controls when parameter objects are destroyed.</span></span>

- <span data-ttu-id="de026-214"><xref:System.ServiceModel.Dispatcher.DispatchOperation.Invoker%2A> Vlastnost pro vložení vlastního objektu původce</span><span class="sxs-lookup"><span data-stu-id="de026-214">The <xref:System.ServiceModel.Dispatcher.DispatchOperation.Invoker%2A> property to insert a custom invoker object.</span></span>

- <span data-ttu-id="de026-215"><xref:System.ServiceModel.Dispatcher.DispatchOperation.ParameterInspectors%2A> Vlastnost umožňuje vložit vlastní inspektor parametrů, který můžete použít ke kontrole a úpravám parametrů a vrácených hodnot.</span><span class="sxs-lookup"><span data-stu-id="de026-215">The <xref:System.ServiceModel.Dispatcher.DispatchOperation.ParameterInspectors%2A> property enables you to insert a custom parameter inspector that you can use to inspect or modify parameters and return values.</span></span>

## <a name="see-also"></a><span data-ttu-id="de026-216">Viz také:</span><span class="sxs-lookup"><span data-stu-id="de026-216">See also</span></span>

- <xref:System.ServiceModel.Dispatcher.DispatchRuntime>
- <xref:System.ServiceModel.Dispatcher.DispatchOperation>
- [<span data-ttu-id="de026-217">Postupy: Kontrola a úprava zpráv ve službě</span><span class="sxs-lookup"><span data-stu-id="de026-217">How to: Inspect and Modify Messages on the Service</span></span>](../../../../docs/framework/wcf/extending/how-to-inspect-and-modify-messages-on-the-service.md)
- [<span data-ttu-id="de026-218">Postupy: Kontrola nebo úprava parametrů</span><span class="sxs-lookup"><span data-stu-id="de026-218">How to: Inspect or Modify Parameters</span></span>](../../../../docs/framework/wcf/extending/how-to-inspect-or-modify-parameters.md)
- [<span data-ttu-id="de026-219">Postupy: Zamčení koncových bodů v podniku</span><span class="sxs-lookup"><span data-stu-id="de026-219">How to: Lock Down Endpoints in the Enterprise</span></span>](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md)
