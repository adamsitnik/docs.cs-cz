---
title: 'Postupy: Export kontrolních výrazů vlastních zásad'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 99030386-43b0-4f7b-866d-17ea307f5cbd
ms.openlocfilehash: 0fe97e381bea19458df50e1eb94f2027a6a95d4e
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/23/2019
ms.locfileid: "54721266"
---
# <a name="how-to-export-custom-policy-assertions"></a><span data-ttu-id="c1af6-102">Postupy: Export kontrolních výrazů vlastních zásad</span><span class="sxs-lookup"><span data-stu-id="c1af6-102">How to: Export Custom Policy Assertions</span></span>
<span data-ttu-id="c1af6-103">Kontrolní výrazy zásad popisují funkce a požadavky koncového bodu služby.</span><span class="sxs-lookup"><span data-stu-id="c1af6-103">Policy assertions describe the capabilities and requirements of a service endpoint.</span></span> <span data-ttu-id="c1af6-104">Aplikace služby můžete použít kontrolních výrazů vlastních zásad v metadata služby pro komunikaci koncový bod, informace o přizpůsobení vazby nebo smlouvy do klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="c1af6-104">Service applications can use custom policy assertions in service metadata to communicate endpoint, binding or contract customization information to the client application.</span></span> <span data-ttu-id="c1af6-105">Export kontrolních výrazů ve výrazech zásad připojena v vazby WSDL na koncový bod, operace nebo zprávy témata, v závislosti na možnosti nebo požadavky, které komunikují se můžete použít Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="c1af6-105">You can use Windows Communication Foundation (WCF) to export assertions in policy expressions attached in WSDL bindings at the endpoint, operation, or message subjects, depending upon the capabilities or requirements you are communicating.</span></span>  
  
 <span data-ttu-id="c1af6-106">Kontrolních výrazů vlastních zásad jsou exportovány implementací <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> na rozhraní <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> a buď vložení elementu vazby přímo do vazby koncového bodu služby nebo si zaregistrujte ve vaší aplikaci prvku vazby konfigurační soubor.</span><span class="sxs-lookup"><span data-stu-id="c1af6-106">Custom policy assertions are exported by implementing the <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> interface on a <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> and either inserting the binding element directly into the binding of the service endpoint or by registering the binding element in your application configuration file.</span></span> <span data-ttu-id="c1af6-107">Implementace export zásad by měl přidat vaše vlastní zásady pro kontrolní výraz jako <xref:System.Xml.XmlElement?displayProperty=nameWithType> instance na příslušné <xref:System.ServiceModel.Description.PolicyAssertionCollection?displayProperty=nameWithType> na <xref:System.ServiceModel.Description.PolicyConversionContext?displayProperty=nameWithType> předán <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> – metoda.</span><span class="sxs-lookup"><span data-stu-id="c1af6-107">Your policy export implementation should add your custom policy assertion as a <xref:System.Xml.XmlElement?displayProperty=nameWithType> instance to the appropriate <xref:System.ServiceModel.Description.PolicyAssertionCollection?displayProperty=nameWithType> on the <xref:System.ServiceModel.Description.PolicyConversionContext?displayProperty=nameWithType> passed into the <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> method.</span></span>  
  
 <span data-ttu-id="c1af6-108">Kromě toho je nutné zkontrolovat <xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A> vlastnost <xref:System.ServiceModel.Description.WsdlExporter> třídy a export zásad vnořených výrazů a atributů framework zásad v správný obor názvů na základě zadané verze zásad.</span><span class="sxs-lookup"><span data-stu-id="c1af6-108">In addition you must check the <xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A> property of the <xref:System.ServiceModel.Description.WsdlExporter> class and export nested policy expressions and policy framework attributes in the correct namespace based on the policy version specified.</span></span>  
  
 <span data-ttu-id="c1af6-109">Import kontrolních výrazů vlastních zásad, najdete v článku <xref:System.ServiceModel.Description.IPolicyImportExtension?displayProperty=nameWithType> a [jak: Import kontrolních výrazů vlastních zásad](../../../../docs/framework/wcf/extending/how-to-import-custom-policy-assertions.md).</span><span class="sxs-lookup"><span data-stu-id="c1af6-109">To import custom policy assertions, see <xref:System.ServiceModel.Description.IPolicyImportExtension?displayProperty=nameWithType> and [How to: Import Custom Policy Assertions](../../../../docs/framework/wcf/extending/how-to-import-custom-policy-assertions.md).</span></span>  
  
### <a name="to-export-custom-policy-assertions"></a><span data-ttu-id="c1af6-110">Export kontrolních výrazů vlastních zásad</span><span class="sxs-lookup"><span data-stu-id="c1af6-110">To export custom policy assertions</span></span>  
  
1.  <span data-ttu-id="c1af6-111">Implementace <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> na rozhraní <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c1af6-111">Implement the <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> interface on a <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType>.</span></span> <span data-ttu-id="c1af6-112">Následující příklad kódu ukazuje implementaci kontrolní výraz vlastní zásady na úrovni vazby.</span><span class="sxs-lookup"><span data-stu-id="c1af6-112">The following code example shows the implementation of a custom policy assertion at the binding level.</span></span>  
  
     [!code-csharp[CustomPolicySample#14](../../../../samples/snippets/csharp/VS_Snippets_CFX/custompolicysample/cs/policyexporter.cs#14)]
     [!code-vb[CustomPolicySample#14](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/custompolicysample/vb/policyexporter.vb#14)]  
  
2.  <span data-ttu-id="c1af6-113">Vložte element vazby do koncového bodu vazba buď programově, nebo pomocí konfiguračního souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="c1af6-113">Insert the binding element into the endpoint binding either programmatically or using an application configuration file.</span></span> <span data-ttu-id="c1af6-114">Podívejte se na následující postupy.</span><span class="sxs-lookup"><span data-stu-id="c1af6-114">See the following procedures.</span></span>  
  
### <a name="to-insert-a-binding-element-using-an-application-configuration-file"></a><span data-ttu-id="c1af6-115">Chcete-li vložit prvek vazby, který je používán konfigurační soubor aplikace</span><span class="sxs-lookup"><span data-stu-id="c1af6-115">To insert a binding element using an application configuration file</span></span>  
  
1.  <span data-ttu-id="c1af6-116">Implementace <xref:System.ServiceModel.Configuration.BindingElementExtensionElement?displayProperty=nameWithType> pro element vazby vaše vlastní zásady pro kontrolní výraz.</span><span class="sxs-lookup"><span data-stu-id="c1af6-116">Implement <xref:System.ServiceModel.Configuration.BindingElementExtensionElement?displayProperty=nameWithType> for your custom policy assertion binding element.</span></span>  
  
2.  <span data-ttu-id="c1af6-117">Přidat do souboru pomocí konfigurace rozšíření elementu vazby [ \<bindingElementExtensions >](../../../../docs/framework/configure-apps/file-schema/wcf/bindingelementextensions.md) elementu.</span><span class="sxs-lookup"><span data-stu-id="c1af6-117">Add the binding element extension to the configuration file using the [\<bindingElementExtensions>](../../../../docs/framework/configure-apps/file-schema/wcf/bindingelementextensions.md) element.</span></span>  
  
3.  <span data-ttu-id="c1af6-118">Vytvoření vlastní vazby pomocí <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c1af6-118">Build a custom binding using the <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType>.</span></span>  
  
### <a name="to-insert-a-binding-element-programmatically"></a><span data-ttu-id="c1af6-119">Chcete-li vložit element vazby prostřednictvím kódu programu</span><span class="sxs-lookup"><span data-stu-id="c1af6-119">To insert a binding element programmatically</span></span>  
  
1.  <span data-ttu-id="c1af6-120">Vytvořte nový <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> a přidejte ji tak <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c1af6-120">Create a new <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> and add it to a <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType>.</span></span>  
  
2.  <span data-ttu-id="c1af6-121">Přidáte vlastní vazbu z kroku 1.</span><span class="sxs-lookup"><span data-stu-id="c1af6-121">Add the custom binding from step 1.</span></span> <span data-ttu-id="c1af6-122">Nový koncový bod a přidejte tento nový koncový bod služby <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType> voláním <xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A> metoda.</span><span class="sxs-lookup"><span data-stu-id="c1af6-122">to a new endpoint and add that new service endpoint to the <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType> by calling the <xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A> method.</span></span>  
  
3.  <span data-ttu-id="c1af6-123">Otevřít <xref:System.ServiceModel.ServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="c1af6-123">Open the <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="c1af6-124">Následující příklad kódu ukazuje vytvoření vlastní vazby a programové vkládání elementů vazby.</span><span class="sxs-lookup"><span data-stu-id="c1af6-124">The following code example shows the creation of a custom binding and the programmatic insertion of binding elements.</span></span>  
  
     [!code-csharp[s_imperative#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_imperative/cs/service.cs#1)]
     [!code-vb[s_imperative#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_imperative/vb/service.vb#1)]  
  
## <a name="see-also"></a><span data-ttu-id="c1af6-125">Viz také:</span><span class="sxs-lookup"><span data-stu-id="c1af6-125">See also</span></span>
- <xref:System.ServiceModel.Description.IPolicyImportExtension>
- <xref:System.ServiceModel.Description.IPolicyExportExtension>
- [<span data-ttu-id="c1af6-126">Postupy: Import kontrolních výrazů vlastních zásad</span><span class="sxs-lookup"><span data-stu-id="c1af6-126">How to: Import Custom Policy Assertions</span></span>](../../../../docs/framework/wcf/extending/how-to-import-custom-policy-assertions.md)
