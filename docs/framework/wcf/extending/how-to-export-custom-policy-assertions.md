---
title: 'Postupy: Export kontrolních výrazů vlastních zásad'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 99030386-43b0-4f7b-866d-17ea307f5cbd
ms.openlocfilehash: 992133ff9922e36b00683f4f48db88e1c2b91c1d
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/07/2019
ms.locfileid: "70795664"
---
# <a name="how-to-export-custom-policy-assertions"></a><span data-ttu-id="a9952-102">Postupy: Export kontrolních výrazů vlastních zásad</span><span class="sxs-lookup"><span data-stu-id="a9952-102">How to: Export Custom Policy Assertions</span></span>
<span data-ttu-id="a9952-103">Kontrolní výrazy zásad popisují možnosti a požadavky koncového bodu služby.</span><span class="sxs-lookup"><span data-stu-id="a9952-103">Policy assertions describe the capabilities and requirements of a service endpoint.</span></span> <span data-ttu-id="a9952-104">Aplikace služby můžou použít vlastní kontrolní výrazy zásad v metadatech služby ke komunikaci koncových bodů, vazeb nebo informací o přizpůsobení smlouvy pro klientskou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="a9952-104">Service applications can use custom policy assertions in service metadata to communicate endpoint, binding or contract customization information to the client application.</span></span> <span data-ttu-id="a9952-105">Pomocí Windows Communication Foundation (WCF) můžete exportovat kontrolní výrazy ve výrazech zásad připojených v rámci vazeb WSDL v závislosti na tom, jaké možnosti nebo požadavky komunikujete.</span><span class="sxs-lookup"><span data-stu-id="a9952-105">You can use Windows Communication Foundation (WCF) to export assertions in policy expressions attached in WSDL bindings at the endpoint, operation, or message subjects, depending upon the capabilities or requirements you are communicating.</span></span>  
  
 <span data-ttu-id="a9952-106">Vlastní kontrolní výrazy zásad jsou exportovány implementací <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> rozhraní <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> v a a buď vložení elementu vazby přímo do vazby koncového bodu služby, nebo registrací elementu vazby v aplikaci. konfigurační soubor.</span><span class="sxs-lookup"><span data-stu-id="a9952-106">Custom policy assertions are exported by implementing the <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> interface on a <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> and either inserting the binding element directly into the binding of the service endpoint or by registering the binding element in your application configuration file.</span></span> <span data-ttu-id="a9952-107">Implementace exportu zásad by měla přidat kontrolní <xref:System.Xml.XmlElement?displayProperty=nameWithType> výraz vlastní zásady jako instanci do příslušné <xref:System.ServiceModel.Description.PolicyAssertionCollection?displayProperty=nameWithType> <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> metody v <xref:System.ServiceModel.Description.PolicyConversionContext?displayProperty=nameWithType> předané metodě.</span><span class="sxs-lookup"><span data-stu-id="a9952-107">Your policy export implementation should add your custom policy assertion as a <xref:System.Xml.XmlElement?displayProperty=nameWithType> instance to the appropriate <xref:System.ServiceModel.Description.PolicyAssertionCollection?displayProperty=nameWithType> on the <xref:System.ServiceModel.Description.PolicyConversionContext?displayProperty=nameWithType> passed into the <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> method.</span></span>  
  
 <span data-ttu-id="a9952-108">Kromě toho musíte zaškrtnout <xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A> vlastnost <xref:System.ServiceModel.Description.WsdlExporter> třídy a exportovat vnořené výrazy zásad a atributy architektury zásad do správného oboru názvů na základě zadané verze zásad.</span><span class="sxs-lookup"><span data-stu-id="a9952-108">In addition you must check the <xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A> property of the <xref:System.ServiceModel.Description.WsdlExporter> class and export nested policy expressions and policy framework attributes in the correct namespace based on the policy version specified.</span></span>  
  
 <span data-ttu-id="a9952-109">Chcete-li importovat vlastní kontrolní výrazy zásad <xref:System.ServiceModel.Description.IPolicyImportExtension?displayProperty=nameWithType> , [Přečtěte si téma a postupy: Importujte vlastní kontrolní výrazy](how-to-import-custom-policy-assertions.md)zásad.</span><span class="sxs-lookup"><span data-stu-id="a9952-109">To import custom policy assertions, see <xref:System.ServiceModel.Description.IPolicyImportExtension?displayProperty=nameWithType> and [How to: Import Custom Policy Assertions](how-to-import-custom-policy-assertions.md).</span></span>  
  
### <a name="to-export-custom-policy-assertions"></a><span data-ttu-id="a9952-110">Export kontrolních výrazů vlastních zásad</span><span class="sxs-lookup"><span data-stu-id="a9952-110">To export custom policy assertions</span></span>  
  
1. <span data-ttu-id="a9952-111">Implementujte <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType>rozhraní na. <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="a9952-111">Implement the <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> interface on a <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType>.</span></span> <span data-ttu-id="a9952-112">Následující příklad kódu ukazuje implementaci kontrolního výrazu vlastní zásady na úrovni vazby.</span><span class="sxs-lookup"><span data-stu-id="a9952-112">The following code example shows the implementation of a custom policy assertion at the binding level.</span></span>  
  
     [!code-csharp[CustomPolicySample#14](../../../../samples/snippets/csharp/VS_Snippets_CFX/custompolicysample/cs/policyexporter.cs#14)]
     [!code-vb[CustomPolicySample#14](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/custompolicysample/vb/policyexporter.vb#14)]  
  
2. <span data-ttu-id="a9952-113">Vložte prvek vazby do vazby koncového bodu buď prostřednictvím kódu programu, nebo pomocí konfiguračního souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="a9952-113">Insert the binding element into the endpoint binding either programmatically or using an application configuration file.</span></span> <span data-ttu-id="a9952-114">Projděte si následující postupy.</span><span class="sxs-lookup"><span data-stu-id="a9952-114">See the following procedures.</span></span>  
  
### <a name="to-insert-a-binding-element-using-an-application-configuration-file"></a><span data-ttu-id="a9952-115">Vložení elementu vazby pomocí konfiguračního souboru aplikace</span><span class="sxs-lookup"><span data-stu-id="a9952-115">To insert a binding element using an application configuration file</span></span>  
  
1. <span data-ttu-id="a9952-116">Implementujte <xref:System.ServiceModel.Configuration.BindingElementExtensionElement?displayProperty=nameWithType> pro vlastní element vazby kontrolního výrazu.</span><span class="sxs-lookup"><span data-stu-id="a9952-116">Implement <xref:System.ServiceModel.Configuration.BindingElementExtensionElement?displayProperty=nameWithType> for your custom policy assertion binding element.</span></span>  
  
2. <span data-ttu-id="a9952-117">Přidejte rozšíření elementu vazby do konfiguračního souboru pomocí [ \<elementu bindingElementExtensions >](../../configure-apps/file-schema/wcf/bindingelementextensions.md) .</span><span class="sxs-lookup"><span data-stu-id="a9952-117">Add the binding element extension to the configuration file using the [\<bindingElementExtensions>](../../configure-apps/file-schema/wcf/bindingelementextensions.md) element.</span></span>  
  
3. <span data-ttu-id="a9952-118">Vytvořte vlastní vazbu pomocí <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a9952-118">Build a custom binding using the <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType>.</span></span>  
  
### <a name="to-insert-a-binding-element-programmatically"></a><span data-ttu-id="a9952-119">Postup pro vložení elementu vazby prostřednictvím kódu programu</span><span class="sxs-lookup"><span data-stu-id="a9952-119">To insert a binding element programmatically</span></span>  
  
1. <span data-ttu-id="a9952-120">Vytvořte nový <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> a přidejte ho <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType>do.</span><span class="sxs-lookup"><span data-stu-id="a9952-120">Create a new <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> and add it to a <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType>.</span></span>  
  
2. <span data-ttu-id="a9952-121">Přidejte vlastní vazbu z kroku 1.</span><span class="sxs-lookup"><span data-stu-id="a9952-121">Add the custom binding from step 1.</span></span> <span data-ttu-id="a9952-122">do nového koncového bodu a přidat tento nový koncový bod služby <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType> k rozhraní <xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A> voláním metody.</span><span class="sxs-lookup"><span data-stu-id="a9952-122">to a new endpoint and add that new service endpoint to the <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType> by calling the <xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A> method.</span></span>  
  
3. <span data-ttu-id="a9952-123"><xref:System.ServiceModel.ServiceHost>Otevřete.</span><span class="sxs-lookup"><span data-stu-id="a9952-123">Open the <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="a9952-124">Následující příklad kódu ukazuje vytvoření vlastní vazby a programové vložení prvků vazby.</span><span class="sxs-lookup"><span data-stu-id="a9952-124">The following code example shows the creation of a custom binding and the programmatic insertion of binding elements.</span></span>  
  
     [!code-csharp[s_imperative#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_imperative/cs/service.cs#1)]
     [!code-vb[s_imperative#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_imperative/vb/service.vb#1)]  
  
## <a name="see-also"></a><span data-ttu-id="a9952-125">Viz také:</span><span class="sxs-lookup"><span data-stu-id="a9952-125">See also</span></span>

- <xref:System.ServiceModel.Description.IPolicyImportExtension>
- <xref:System.ServiceModel.Description.IPolicyExportExtension>
- [<span data-ttu-id="a9952-126">Postupy: Import kontrolních výrazů vlastních zásad</span><span class="sxs-lookup"><span data-stu-id="a9952-126">How to: Import Custom Policy Assertions</span></span>](how-to-import-custom-policy-assertions.md)
