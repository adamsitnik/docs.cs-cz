---
title: Přehled modelu kanálu
ms.date: 03/30/2017
helpviewer_keywords:
- channel model [WCF]
ms.assetid: 07a81e11-3911-4632-90d2-cca99825b5bd
ms.openlocfilehash: 362a7392d9dbaedb1942280a6c3b6c8f2139afe5
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/07/2019
ms.locfileid: "70795886"
---
# <a name="channel-model-overview"></a><span data-ttu-id="f7161-102">Přehled modelu kanálu</span><span class="sxs-lookup"><span data-stu-id="f7161-102">Channel Model Overview</span></span>
<span data-ttu-id="f7161-103">Zásobník kanálů Windows Communication Foundation (WCF) je Vícevrstvá komunikační sada s jedním nebo více kanály, které zpracovávají zprávy.</span><span class="sxs-lookup"><span data-stu-id="f7161-103">The Windows Communication Foundation (WCF) channel stack is a layered communication stack with one or more channels that process messages.</span></span> <span data-ttu-id="f7161-104">V dolní části zásobníku je transportní kanál zodpovědný za přizpůsobení zásobníku kanálu k základnímu přenosu (například TCP, HTTP, SMTP a dalších typů přenosů).</span><span class="sxs-lookup"><span data-stu-id="f7161-104">At the bottom of the stack is a transport channel that is responsible for adapting the channel stack to the underlying transport (for example, TCP, HTTP, SMTP and other types of transport.).</span></span> <span data-ttu-id="f7161-105">Kanály poskytují model programování nízké úrovně pro odesílání a příjem zpráv.</span><span class="sxs-lookup"><span data-stu-id="f7161-105">Channels provide a low-level programming model for sending and receiving messages.</span></span> <span data-ttu-id="f7161-106">Tento programovací model spoléhá na několik rozhraní a dalších typů, které jsou souhrnně označovány jako model kanálu WCF.</span><span class="sxs-lookup"><span data-stu-id="f7161-106">This programming model relies on several interfaces and other types collectively known as the WCF channel model.</span></span> <span data-ttu-id="f7161-107">Toto téma popisuje obrazce kanálů, konstrukci základního naslouchacího procesu kanálu (u služby) a továrny kanálů (na klientovi).</span><span class="sxs-lookup"><span data-stu-id="f7161-107">This topic discusses channel shapes, the construction of a basic channel listener (on the service) and channel factory (on the client).</span></span>  
  
## <a name="channel-stack"></a><span data-ttu-id="f7161-108">Zásobník kanálů</span><span class="sxs-lookup"><span data-stu-id="f7161-108">Channel Stack</span></span>  
 <span data-ttu-id="f7161-109">Koncové body WCF komunikují s World pomocí komunikačního zásobníku označovaného jako zásobník kanálů.</span><span class="sxs-lookup"><span data-stu-id="f7161-109">WCF endpoints communicate with the world using a communication stack called the channel stack.</span></span> <span data-ttu-id="f7161-110">Následující diagram porovnává zásobník kanálů s jinými komunikačními zásobníky, například TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="f7161-110">The following diagram compares the channel stack with other communication stacks, for example TCP/IP.</span></span>  
  
 <span data-ttu-id="f7161-111">![Channel Model](./media/wcfc-channelstackhighlevelc.gif "wcfc_ChannelStackHighLevelc")</span><span class="sxs-lookup"><span data-stu-id="f7161-111">![Channel Model](./media/wcfc-channelstackhighlevelc.gif "wcfc_ChannelStackHighLevelc")</span></span>  
  
 <span data-ttu-id="f7161-112">Nejprve podobnosti: V obou případech jsou v každé vrstvě zásobníku k dispozici některé abstrakce světa pod touto vrstvou a zpřístupnění této abstrakce pouze vrstvě přímo nad ní.</span><span class="sxs-lookup"><span data-stu-id="f7161-112">First, the similarities: In both cases, each layer of the stack provides some abstraction of the world below that layer and exposed that abstraction only to the layer directly above it.</span></span> <span data-ttu-id="f7161-113">Každá vrstva používá abstrakci pouze vrstvy přímo pod ní.</span><span class="sxs-lookup"><span data-stu-id="f7161-113">Each layer uses the abstraction of only the layer directly below it.</span></span> <span data-ttu-id="f7161-114">V obou případech také při komunikaci dvou zásobníků komunikuje každá vrstva s odpovídající vrstvou v druhém zásobníku, například vrstva IP komunikuje s vrstvou IP adresy a vrstvou TCP s vrstvou TCP atd.</span><span class="sxs-lookup"><span data-stu-id="f7161-114">Also in both cases, when two stacks communicate, each layer communicates with the corresponding layer in the other stack, for example, the IP layer communicates with the IP layer and the TCP layer with the TCP layer, and so on.</span></span>  
  
 <span data-ttu-id="f7161-115">Teď rozdíly: I když byl zásobník TCP navržený tak, aby poskytoval abstrakci fyzické sítě, zásobník kanálů je navržený tak, aby poskytoval abstrakci nejen toho, jak je zpráva doručena, to znamená přenos, ale i další funkce, jako je například zpráva, co je ve zprávě. protokol se používá ke komunikaci, včetně přenosu, ale mnohem víc.</span><span class="sxs-lookup"><span data-stu-id="f7161-115">Now, the differences: While the TCP stack was designed to provide an abstraction of the physical network, the channel stack is designed to provide an abstraction of not only how the message is delivered, that is, the transport, but also other features such as what is in the message or what protocol is used for communication, including the transport but much more than that.</span></span> <span data-ttu-id="f7161-116">Například element s vazbou spolehlivé relace je součástí zásobníku kanálů, ale není pod přenosem nebo samotným přenosem.</span><span class="sxs-lookup"><span data-stu-id="f7161-116">For example, reliable session binding element is part of the channel stack but is not below the transport or the transport itself.</span></span> <span data-ttu-id="f7161-117">Tato abstrakce se dosahuje tím, že vyžaduje spodní kanál v zásobníku, aby se přizpůsobila architektura zásobníku kanálu a pak se spoléhá na další kanály v zásobníku, aby se poskytovaly komunikační funkce, jako je třeba spolehlivost. záruky a zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="f7161-117">This abstraction is achieved by requiring the bottom channel in the stack to adapt the underlying transport protocol to the channel stack architecture and then relying on channels further up in the stack to provide communication features such as reliability guarantees and security.</span></span>  
  
 <span data-ttu-id="f7161-118">Zprávy proudí prostřednictvím komunikačního zásobníku <xref:System.ServiceModel.Channels.Message> jako objekty.</span><span class="sxs-lookup"><span data-stu-id="f7161-118">Messages flow through the communication stack as <xref:System.ServiceModel.Channels.Message> objects.</span></span> <span data-ttu-id="f7161-119">Jak je znázorněno na obrázku výše, Spodní kanál se nazývá transportní kanál.</span><span class="sxs-lookup"><span data-stu-id="f7161-119">As shown in figure above, the bottom channel is called a transport channel.</span></span> <span data-ttu-id="f7161-120">Je to kanál, který zodpovídá za odesílání a příjem zpráv z jiných stran.</span><span class="sxs-lookup"><span data-stu-id="f7161-120">It is the channel that is responsible for sending and receiving messages to and from other parties.</span></span> <span data-ttu-id="f7161-121">To zahrnuje zodpovědnost <xref:System.ServiceModel.Channels.Message> proti transformaci objektu do formátu používaného ke komunikaci s ostatními stranami a z něj.</span><span class="sxs-lookup"><span data-stu-id="f7161-121">This includes the responsibility of transforming the <xref:System.ServiceModel.Channels.Message> object to and from the format used to communicate with other parties.</span></span> <span data-ttu-id="f7161-122">Nad transportním kanálem může být každý z nich zodpovědný libovolný počet kanálů protokolu, jako je například spolehlivý záruka na doručení.</span><span class="sxs-lookup"><span data-stu-id="f7161-122">Above the transport channel there can be any number of protocol channels each responsible for providing a communication function such as reliable delivery guarantees.</span></span> <span data-ttu-id="f7161-123">Kanály protokolu fungují na zprávy, které je procházejí v podobě <xref:System.ServiceModel.Channels.Message> objektu.</span><span class="sxs-lookup"><span data-stu-id="f7161-123">Protocol channels operate on messages flowing through them in the form of the <xref:System.ServiceModel.Channels.Message> object.</span></span> <span data-ttu-id="f7161-124">Obvykle buď transformují zprávu, například přidáním záhlaví nebo šifrováním těla, nebo odesílají a přijímají vlastní zprávy řídicího protokolu, například potvrzení o doručení.</span><span class="sxs-lookup"><span data-stu-id="f7161-124">They typically either transform the message, for example, by adding headers or encrypting the body, or send and receive their own protocol control messages, for example, receipt acknowledgments.</span></span>  
  
## <a name="channel-shapes"></a><span data-ttu-id="f7161-125">Obrazce kanálu</span><span class="sxs-lookup"><span data-stu-id="f7161-125">Channel Shapes</span></span>  
 <span data-ttu-id="f7161-126">Každý kanál implementuje jedno nebo více rozhraní označovaných jako rozhraní obrazce kanálu nebo obrazce kanálů.</span><span class="sxs-lookup"><span data-stu-id="f7161-126">Each channel implements one or more interfaces known as channel shape interfaces or channel shapes.</span></span> <span data-ttu-id="f7161-127">Tyto obrazce kanálů poskytují metody zaměřené na komunikaci, jako je například odeslání a přijetí nebo vyžádání a odpověď na to, že kanál implementuje a uživatel volání kanálu.</span><span class="sxs-lookup"><span data-stu-id="f7161-127">Those channel shapes provide the communication-oriented methods such as send and receive or request and reply that the channel implements and the user of the channel calls.</span></span> <span data-ttu-id="f7161-128">Na základu obrazců kanálu je <xref:System.ServiceModel.Channels.IChannel> rozhraní, což je rozhraní, které `GetProperty` \<poskytuje metodu T >, která je určená jako vrstvený mechanismus pro přístup k libovolným funkcím vystaveným kanály v zásobníku.</span><span class="sxs-lookup"><span data-stu-id="f7161-128">At the base of the channel shapes is the <xref:System.ServiceModel.Channels.IChannel> interface, which is an interface that provides a `GetProperty`\<T> method intended as a layered mechanism to access arbitrary features exposed by channels in the stack.</span></span> <span data-ttu-id="f7161-129">Pět obrazců kanálu, které rozšiřuje <xref:System.ServiceModel.Channels.IChannel> :</span><span class="sxs-lookup"><span data-stu-id="f7161-129">The five channel shapes that extend <xref:System.ServiceModel.Channels.IChannel> are:</span></span>  
  
- <xref:System.ServiceModel.Channels.IInputChannel>  
  
- <xref:System.ServiceModel.Channels.IOutputChannel>  
  
- <xref:System.ServiceModel.Channels.IRequestChannel>  
  
- <xref:System.ServiceModel.Channels.IReplyChannel>  
  
- <xref:System.ServiceModel.Channels.IDuplexChannel>  
  
 <span data-ttu-id="f7161-130">Každý z těchto tvarů má navíc ekvivalent, který rozšiřuje <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> na relace podpory.</span><span class="sxs-lookup"><span data-stu-id="f7161-130">Further, each of these shapes has an equivalent that extends <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> to support sessions.</span></span> <span data-ttu-id="f7161-131">Toto jsou:</span><span class="sxs-lookup"><span data-stu-id="f7161-131">These are:</span></span>  
  
- <xref:System.ServiceModel.Channels.IInputSessionChannel>  
  
- <xref:System.ServiceModel.Channels.IOutputSessionChannel>  
  
- <xref:System.ServiceModel.Channels.IRequestSessionChannel>  
  
- <xref:System.ServiceModel.Channels.IReplySessionChannel>  
  
- <xref:System.ServiceModel.Channels.IDuplexSessionChannel>  
  
 <span data-ttu-id="f7161-132">Obrazce kanálu jsou vzorované po některých základních vzorech výměny zpráv podporovaných existujícími transportními protokoly.</span><span class="sxs-lookup"><span data-stu-id="f7161-132">The channel shapes are patterned after some of the fundamental message exchange patterns supported by existing transport protocols.</span></span> <span data-ttu-id="f7161-133">Například jednosměrné zasílání zpráv <xref:System.ServiceModel.Channels.IInputChannel> odpovídá <xref:System.ServiceModel.Channels.IOutputChannel> <xref:System.ServiceModel.Channels.IRequestChannel> / <xref:System.ServiceModel.Channels.IDuplexChannel> páru, požadavek-odpověď odpovídá dvojicímaobousměrněduplexníkomunikaciodpovídá<xref:System.ServiceModel.Channels.IReplyChannel> / (která rozšiřuje obě <xref:System.ServiceModel.Channels.IInputChannel> <xref:System.ServiceModel.Channels.IOutputChannel>i).</span><span class="sxs-lookup"><span data-stu-id="f7161-133">For example, one-way messaging corresponds to an <xref:System.ServiceModel.Channels.IInputChannel>/<xref:System.ServiceModel.Channels.IOutputChannel> pair, request-reply corresponds to <xref:System.ServiceModel.Channels.IRequestChannel>/<xref:System.ServiceModel.Channels.IReplyChannel> pairs and two-way duplex communications corresponds to <xref:System.ServiceModel.Channels.IDuplexChannel> (which extends both <xref:System.ServiceModel.Channels.IInputChannel> and <xref:System.ServiceModel.Channels.IOutputChannel>).</span></span>  
  
## <a name="programming-with-the-channel-stack"></a><span data-ttu-id="f7161-134">Programování se zásobníkem kanálů</span><span class="sxs-lookup"><span data-stu-id="f7161-134">Programming with the Channel Stack</span></span>  
 <span data-ttu-id="f7161-135">Zásobníky kanálů se většinou vytvářejí pomocí modelu továrny, ve kterém vazba vytváří zásobník kanálů.</span><span class="sxs-lookup"><span data-stu-id="f7161-135">Channel stacks are typically created using a factory pattern where a binding creates the channel stack.</span></span> <span data-ttu-id="f7161-136">Na straně odeslání je použita vazba k sestavení a <xref:System.ServiceModel.ChannelFactory>, který zase sestaví zásobník kanálu a vrátí odkaz na horní kanál v zásobníku.</span><span class="sxs-lookup"><span data-stu-id="f7161-136">On the send side, a binding is used to build a <xref:System.ServiceModel.ChannelFactory>, which in turn builds a channel stack and returns a reference to the top channel in the stack.</span></span> <span data-ttu-id="f7161-137">Aplikace pak může tento kanál použít k posílání zpráv.</span><span class="sxs-lookup"><span data-stu-id="f7161-137">The application can then use this channel to send messages.</span></span> <span data-ttu-id="f7161-138">Další informace najdete v tématu [programování na úrovni kanálu klienta](client-channel-level-programming.md).</span><span class="sxs-lookup"><span data-stu-id="f7161-138">For more information, see [Client Channel-Level Programming](client-channel-level-programming.md).</span></span>  
  
 <span data-ttu-id="f7161-139">Na straně příjmu se používá vazba k sestavení <xref:System.ServiceModel.Channels.IChannelListener>a, která naslouchá příchozím zprávám.</span><span class="sxs-lookup"><span data-stu-id="f7161-139">On the receive side a binding is used to build a <xref:System.ServiceModel.Channels.IChannelListener>, which listens for incoming messages.</span></span> <span data-ttu-id="f7161-140"><xref:System.ServiceModel.Channels.IChannelListener> Poskytuje zprávy pro naslouchající aplikace vytvořením zásobníků kanálů a předáním odkazu na aplikaci do nejvyššího kanálu.</span><span class="sxs-lookup"><span data-stu-id="f7161-140">The <xref:System.ServiceModel.Channels.IChannelListener> provides messages to the listening application by creating channel stacks and handing the application reference to the top channel.</span></span> <span data-ttu-id="f7161-141">Aplikace pak použije tento kanál pro příjem příchozích zpráv.</span><span class="sxs-lookup"><span data-stu-id="f7161-141">The application then uses this channel to receive incoming messages.</span></span> <span data-ttu-id="f7161-142">Další informace najdete v tématu [programování na úrovni kanálu služby](service-channel-level-programming.md).</span><span class="sxs-lookup"><span data-stu-id="f7161-142">For more information, see [Service Channel-Level Programming](service-channel-level-programming.md).</span></span>  
  
## <a name="the-channel-object-model"></a><span data-ttu-id="f7161-143">Objektový model kanálu</span><span class="sxs-lookup"><span data-stu-id="f7161-143">The Channel Object Model</span></span>  
 <span data-ttu-id="f7161-144">Objektový model kanálu je základní sada rozhraní vyžadovaných k implementaci kanálů, naslouchací procesy kanálu a objekty pro vytváření kanálů.</span><span class="sxs-lookup"><span data-stu-id="f7161-144">The channel object model is the core set of interfaces required to implement channels, channel listeners and channel factories.</span></span> <span data-ttu-id="f7161-145">K dispozici jsou také některé základní třídy, které pomáhají při vlastních implementacích.</span><span class="sxs-lookup"><span data-stu-id="f7161-145">There are also some base classes provided to assist in custom implementations.</span></span>  
  
 <span data-ttu-id="f7161-146">Naslouchací procesy kanálu jsou zodpovědné za naslouchání příchozích zpráv a jejich doručování do vrstvy výše přes kanály vytvořené naslouchacím kanálem kanálu.</span><span class="sxs-lookup"><span data-stu-id="f7161-146">Channel listeners are responsible for listening for incoming messages, then delivering them to the layer above through channels created by the channel listener.</span></span>  
  
 <span data-ttu-id="f7161-147">Továrny kanálů jsou zodpovědné za vytváření kanálů používaných pro posílání zpráv a pro zavření všech kanálů, které vytvořily, když je objekt factory kanálu uzavřený.</span><span class="sxs-lookup"><span data-stu-id="f7161-147">Channel factories are responsible for creating channels that are used for sending messages and for closing all channels they created when the channel factory is closed.</span></span>  
  
 <span data-ttu-id="f7161-148"><xref:System.ServiceModel.ICommunicationObject>je základní rozhraní, které definuje základní Stavový počítač, který implementují všechny objekty komunikace.</span><span class="sxs-lookup"><span data-stu-id="f7161-148"><xref:System.ServiceModel.ICommunicationObject> is the core interface that defines the basic state machine that all communication objects implement.</span></span> <span data-ttu-id="f7161-149"><xref:System.ServiceModel.Channels.CommunicationObject>poskytuje implementaci tohoto základního rozhraní, které mohou jiné třídy kanálů odvodit z spíše než opakované implementace rozhraní.</span><span class="sxs-lookup"><span data-stu-id="f7161-149"><xref:System.ServiceModel.Channels.CommunicationObject> provides an implementation of this core interface that other channel classes can derive from rather than re-implementing the interface.</span></span> <span data-ttu-id="f7161-150">To ale není povinné: vlastní kanál může implementovat <xref:System.ServiceModel.ICommunicationObject> přímo a Nedědit z. <xref:System.ServiceModel.Channels.CommunicationObject></span><span class="sxs-lookup"><span data-stu-id="f7161-150">However, this is not required: a custom channel can implement <xref:System.ServiceModel.ICommunicationObject> directly and not inherit from <xref:System.ServiceModel.Channels.CommunicationObject>.</span></span> <span data-ttu-id="f7161-151">Žádná z tříd na obrázku 3 není považována za součást modelu kanálu; jsou pomocníky k dispozici pro vlastní implementátory kanálů, kteří chtějí vytvářet kanály.</span><span class="sxs-lookup"><span data-stu-id="f7161-151">None of the classes in Figure 3 are considered part of the channel model; they are helpers available to custom channel implementers who want to build channels.</span></span>  
  
 <span data-ttu-id="f7161-152">![Model kanálu](./media/wcfc-wcfcchannelsigure3omumtreec.gif "wcfc_WCFCChannelsigure3OMUMTreec")</span><span class="sxs-lookup"><span data-stu-id="f7161-152">![Channel model](./media/wcfc-wcfcchannelsigure3omumtreec.gif "wcfc_WCFCChannelsigure3OMUMTreec")</span></span>  
  
 <span data-ttu-id="f7161-153">Následující témata popisují model objektu kanálu a také různé vývojové oblasti, které vám pomůžou vytvářet vlastní kanály.</span><span class="sxs-lookup"><span data-stu-id="f7161-153">The following topics describe the channel object model as well as various development areas that help build custom channels.</span></span>  
  
|<span data-ttu-id="f7161-154">Téma</span><span class="sxs-lookup"><span data-stu-id="f7161-154">Topic</span></span>|<span data-ttu-id="f7161-155">Popis</span><span class="sxs-lookup"><span data-stu-id="f7161-155">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="f7161-156">Službám Naslouchací procesy kanálu a kanály</span><span class="sxs-lookup"><span data-stu-id="f7161-156">Service: Channel Listeners and Channels</span></span>](service-channel-listeners-and-channels.md)|<span data-ttu-id="f7161-157">Popisuje naslouchací procesy kanálu, které naslouchají příchozím kanálům v aplikaci služby.</span><span class="sxs-lookup"><span data-stu-id="f7161-157">Describes channel listeners, which listen for incoming channels in a service application.</span></span>|  
|[<span data-ttu-id="f7161-158">Služba Továrny kanálů a kanály</span><span class="sxs-lookup"><span data-stu-id="f7161-158">Client: Channel Factories and Channels</span></span>](client-channel-factories-and-channels.md)|<span data-ttu-id="f7161-159">Popisuje továrny kanálů, které vytvářejí kanály pro připojení k aplikaci služby.</span><span class="sxs-lookup"><span data-stu-id="f7161-159">Describes channel factories, which create channels to connect to a service application.</span></span>|  
|[<span data-ttu-id="f7161-160">Principy změn stavů</span><span class="sxs-lookup"><span data-stu-id="f7161-160">Understanding State Changes</span></span>](understanding-state-changes.md)|<span data-ttu-id="f7161-161">Popisuje, jak <xref:System.ServiceModel.ICommunicationObject?displayProperty=nameWithType> se stav modelů rozhraní mění v kanálech.</span><span class="sxs-lookup"><span data-stu-id="f7161-161">Describes how the <xref:System.ServiceModel.ICommunicationObject?displayProperty=nameWithType> interface models state changes in channels.</span></span>|  
|[<span data-ttu-id="f7161-162">Výběr vzoru výměny zpráv</span><span class="sxs-lookup"><span data-stu-id="f7161-162">Choosing a Message Exchange Pattern</span></span>](choosing-a-message-exchange-pattern.md)|<span data-ttu-id="f7161-163">Popisuje šest základních vzorů výměny zpráv, které kanály můžou podporovat.</span><span class="sxs-lookup"><span data-stu-id="f7161-163">Describes the six basic message exchange patterns that channels can support.</span></span>|  
|[<span data-ttu-id="f7161-164">Zpracování výjimek a chyb</span><span class="sxs-lookup"><span data-stu-id="f7161-164">Handling Exceptions and Faults</span></span>](handling-exceptions-and-faults.md)|<span data-ttu-id="f7161-165">Popisuje způsob zpracování chyb a výjimek ve vlastních kanálech.</span><span class="sxs-lookup"><span data-stu-id="f7161-165">Describes how to handle faults and exceptions in custom channels.</span></span>|  
|[<span data-ttu-id="f7161-166">Konfigurace a podpora metadat</span><span class="sxs-lookup"><span data-stu-id="f7161-166">Configuration and Metadata Support</span></span>](configuration-and-metadata-support.md)|<span data-ttu-id="f7161-167">Popisuje, jak podporovat použití vlastních kanálů z modelu aplikace a jak exportovat a importovat metadata pomocí vazeb a elementů vazby.</span><span class="sxs-lookup"><span data-stu-id="f7161-167">Describes how to support the use of custom channels from the application model and how to export and import metadata using bindings and binding elements.</span></span>|
