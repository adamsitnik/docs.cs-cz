---
title: Vytváření uživatelem definovaných vazeb
ms.date: 03/30/2017
helpviewer_keywords:
- user-defined bindings [WCF]
ms.assetid: c4960675-d701-4bc9-b400-36a752fdd08b
ms.openlocfilehash: 3b5feb0da86e11485fa7ca1c474a69002c8d43ff
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/07/2019
ms.locfileid: "70797238"
---
# <a name="creating-user-defined-bindings"></a><span data-ttu-id="dcc6a-102">Vytváření uživatelem definovaných vazeb</span><span class="sxs-lookup"><span data-stu-id="dcc6a-102">Creating User-Defined Bindings</span></span>
<span data-ttu-id="dcc6a-103">Existuje několik způsobů, jak vytvořit vazby, které nejsou poskytovány systémem:</span><span class="sxs-lookup"><span data-stu-id="dcc6a-103">There are several ways to create bindings not provided by the system:</span></span>  
  
- <span data-ttu-id="dcc6a-104">Vytvořte vlastní vazbu na základě <xref:System.ServiceModel.Channels.CustomBinding> třídy, což je kontejner, který vyplníte prvky vazby.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-104">Create a custom binding, based on the <xref:System.ServiceModel.Channels.CustomBinding> class, which is a container that you fill with binding elements.</span></span> <span data-ttu-id="dcc6a-105">Vlastní vazba je pak přidána do koncového bodu služby.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-105">The custom binding is then added to a service endpoint.</span></span> <span data-ttu-id="dcc6a-106">Vlastní vazbu můžete vytvořit buď programově, nebo v konfiguračním souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-106">You can create the custom binding either programmatically or in an application configuration file.</span></span> <span data-ttu-id="dcc6a-107">Chcete-li použít prvek vazby z konfiguračního souboru aplikace, prvek vazby musí být rozšířen <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-107">To use a binding element from an application configuration file, the binding element must extend <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span></span> <span data-ttu-id="dcc6a-108">Další informace o vlastních vazbách naleznete v tématu [Custom Bindings](custom-bindings.md) and <xref:System.ServiceModel.Channels.CustomBinding>.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-108">For more information about custom bindings, see [Custom Bindings](custom-bindings.md) and <xref:System.ServiceModel.Channels.CustomBinding>.</span></span>  
  
- <span data-ttu-id="dcc6a-109">Můžete vytvořit třídu, která je odvozena ze standardní vazby.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-109">You can create a class that derives from a standard binding.</span></span> <span data-ttu-id="dcc6a-110">Například můžete odvodit třídu z <xref:System.ServiceModel.WSHttpBinding> metody a přepsat <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> metodu pro získání prvků vazby a vložení vlastního prvku vazby nebo určení konkrétní hodnoty pro zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-110">For example, you can derive a class from <xref:System.ServiceModel.WSHttpBinding> and override <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> method to obtain the binding elements and insert a custom binding element or establish a particular value for security.</span></span>  
  
- <span data-ttu-id="dcc6a-111">Můžete vytvořit nový <xref:System.ServiceModel.Channels.Binding> typ pro úplné řízení celé implementace vazby.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-111">You can create a new <xref:System.ServiceModel.Channels.Binding> type to completely control the entire binding implementation.</span></span>  
  
## <a name="the-order-of-binding-elements"></a><span data-ttu-id="dcc6a-112">Pořadí prvků vazby</span><span class="sxs-lookup"><span data-stu-id="dcc6a-112">The Order of Binding Elements</span></span>  
 <span data-ttu-id="dcc6a-113">Každý prvek vazby představuje krok zpracování při posílání nebo přijímání zpráv.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-113">Each binding element represents a processing step when sending or receiving messages.</span></span> <span data-ttu-id="dcc6a-114">V době běhu vytvoří vazby elementy vytváření kanálů a posluchačů potřebných pro vytváření odchozích a příchozích zásobníků kanálů.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-114">At runtime, binding elements create the channels and listeners necessary to build outgoing and incoming channel stacks.</span></span>  
  
 <span data-ttu-id="dcc6a-115">Existují tři hlavní typy elementů vazby: Prvky vazby protokolu, kódování elementů vazby a elementy vazby přenosu.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-115">There are three main types of binding elements: Protocol Binding Elements, Encoding Binding Elements and Transport Binding Elements.</span></span>  
  
 <span data-ttu-id="dcc6a-116">Prvky vazby protokolu – tyto prvky reprezentují kroky zpracování vyšší úrovně, které fungují na zprávách.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-116">Protocol Binding Elements – These elements represent higher-level processing steps that act on messages.</span></span> <span data-ttu-id="dcc6a-117">Kanály a naslouchací procesy vytvořené těmito prvky vazby můžou přidat, odebrat nebo upravit obsah zprávy.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-117">Channels and listeners created by these binding elements can add, remove, or modify the message content.</span></span> <span data-ttu-id="dcc6a-118">Daná vazba může mít libovolný počet elementů vazby protokolu, z <xref:System.ServiceModel.Channels.BindingElement>nichž každá dědí.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-118">A given binding may have an arbitrary number of protocol binding elements, each inheriting from <xref:System.ServiceModel.Channels.BindingElement>.</span></span> <span data-ttu-id="dcc6a-119">Windows Communication Foundation (WCF) obsahuje několik elementů vazby protokolu, včetně <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>a.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-119">Windows Communication Foundation (WCF) includes several protocol binding elements, including the <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> and the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.</span></span>  
  
 <span data-ttu-id="dcc6a-120">Kódování elementu vazby – tyto prvky reprezentují transformace mezi zprávou a kódování připravené pro přenos na lince.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-120">Encoding Binding Element – These elements represent transformations between a message and an encoding ready for transmission on the wire.</span></span> <span data-ttu-id="dcc6a-121">Typické vazby WCF obsahují přesně jeden element vazby kódování.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-121">Typical WCF bindings include exactly one encoding binding element.</span></span> <span data-ttu-id="dcc6a-122">Příklady prvků pro kódování vazby zahrnují <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, a <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-122">Examples of encoding binding elements include the <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, and the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span></span> <span data-ttu-id="dcc6a-123">Pokud pro vazbu není zadán element vazby kódování, je použito výchozí kódování.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-123">If an encoding binding element is not specified for a binding, a default encoding is used.</span></span> <span data-ttu-id="dcc6a-124">Výchozím nastavením je text v případě, že je přenos HTTP a binární.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-124">The default is text when the transport is HTTP and binary otherwise.</span></span>  
  
 <span data-ttu-id="dcc6a-125">Element vazby přenosu – tyto prvky reprezentují přenos zprávy kódování na transportním protokolu.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-125">Transport Binding Element – These elements represent the transmission of an encoding message on a transport protocol.</span></span> <span data-ttu-id="dcc6a-126">Typické vazby WCF obsahují přesně jeden element transportních vazeb, který dědí <xref:System.ServiceModel.Channels.TransportBindingElement>z.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-126">Typical WCF bindings include exactly one transport binding element, which inherits from <xref:System.ServiceModel.Channels.TransportBindingElement>.</span></span> <span data-ttu-id="dcc6a-127">Příklady elementů vazby přenosu zahrnují <xref:System.ServiceModel.Channels.TcpTransportBindingElement> <xref:System.ServiceModel.Channels.HttpTransportBindingElement>, a <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-127">Examples of transport binding elements include the <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, the <xref:System.ServiceModel.Channels.HttpTransportBindingElement>, and the <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span></span>  
  
 <span data-ttu-id="dcc6a-128">Při vytváření nových vazeb je důležité pořadí přidaných prvků vazby.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-128">When creating new bindings, the order of the added binding elements is important.</span></span> <span data-ttu-id="dcc6a-129">Vždy přidat prvky vazby v následujícím pořadí:</span><span class="sxs-lookup"><span data-stu-id="dcc6a-129">Always add binding elements in the following order:</span></span>  
  
|<span data-ttu-id="dcc6a-130">Vrstva</span><span class="sxs-lookup"><span data-stu-id="dcc6a-130">Layer</span></span>|<span data-ttu-id="dcc6a-131">Možnosti</span><span class="sxs-lookup"><span data-stu-id="dcc6a-131">Options</span></span>|<span data-ttu-id="dcc6a-132">Požadováno</span><span class="sxs-lookup"><span data-stu-id="dcc6a-132">Required</span></span>|  
|-----------|-------------|--------------|  
|<span data-ttu-id="dcc6a-133">Tok transakce</span><span class="sxs-lookup"><span data-stu-id="dcc6a-133">Transaction Flow</span></span>|<xref:System.ServiceModel.Channels.TransactionFlowBindingElement?displayProperty=nameWithType>|<span data-ttu-id="dcc6a-134">Ne</span><span class="sxs-lookup"><span data-stu-id="dcc6a-134">No</span></span>|  
|<span data-ttu-id="dcc6a-135">Spolehlivost</span><span class="sxs-lookup"><span data-stu-id="dcc6a-135">Reliability</span></span>|<xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType>|<span data-ttu-id="dcc6a-136">Ne</span><span class="sxs-lookup"><span data-stu-id="dcc6a-136">No</span></span>|  
|<span data-ttu-id="dcc6a-137">Zabezpečení</span><span class="sxs-lookup"><span data-stu-id="dcc6a-137">Security</span></span>|<xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType>|<span data-ttu-id="dcc6a-138">Ne</span><span class="sxs-lookup"><span data-stu-id="dcc6a-138">No</span></span>|  
|<span data-ttu-id="dcc6a-139">Složený Duplex</span><span class="sxs-lookup"><span data-stu-id="dcc6a-139">Composite Duplex</span></span>|<xref:System.ServiceModel.Channels.CompositeDuplexBindingElement?displayProperty=nameWithType>|<span data-ttu-id="dcc6a-140">Ne</span><span class="sxs-lookup"><span data-stu-id="dcc6a-140">No</span></span>|  
|<span data-ttu-id="dcc6a-141">Kódování</span><span class="sxs-lookup"><span data-stu-id="dcc6a-141">Encoding</span></span>|<span data-ttu-id="dcc6a-142">Text, binární, MTOM, vlastní</span><span class="sxs-lookup"><span data-stu-id="dcc6a-142">Text, Binary, MTOM, Custom</span></span>|<span data-ttu-id="dcc6a-143">Ano\*</span><span class="sxs-lookup"><span data-stu-id="dcc6a-143">Yes\*</span></span>|  
|<span data-ttu-id="dcc6a-144">Přepravu</span><span class="sxs-lookup"><span data-stu-id="dcc6a-144">Transport</span></span>|<span data-ttu-id="dcc6a-145">TCP, pojmenované kanály, HTTP, HTTPS, MSMQ, vlastní</span><span class="sxs-lookup"><span data-stu-id="dcc6a-145">TCP, Named Pipes, HTTP, HTTPS, MSMQ, Custom</span></span>|<span data-ttu-id="dcc6a-146">Ano</span><span class="sxs-lookup"><span data-stu-id="dcc6a-146">Yes</span></span>|  
  
<span data-ttu-id="dcc6a-147">\*Vzhledem k tomu, že pro každou vazbu je vyžadováno kódování, pokud není zadáno kódování, WCF přidá pro vás výchozí kódování.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-147">\*Because an encoding is required for each binding, if an encoding is not specified, WCF adds a default encoding for you.</span></span> <span data-ttu-id="dcc6a-148">Výchozí hodnota je text/XML pro přenosy HTTP a HTTPS a binární soubor v opačném případě.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-148">The default is Text/XML for the HTTP and HTTPS transports, and Binary otherwise.</span></span>  
  
## <a name="creating-a-new-binding-element"></a><span data-ttu-id="dcc6a-149">Vytvoření nového elementu vazby</span><span class="sxs-lookup"><span data-stu-id="dcc6a-149">Creating a new Binding Element</span></span>  
 <span data-ttu-id="dcc6a-150">Kromě typů odvozených z <xref:System.ServiceModel.Channels.BindingElement> těch poskytovaných službou WCF můžete vytvořit vlastní prvky vazby.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-150">In addition to the types derived from <xref:System.ServiceModel.Channels.BindingElement> that are provided by WCF, you can create your own binding elements.</span></span> <span data-ttu-id="dcc6a-151">To vám umožní přizpůsobit způsob vytvoření zásobníku vazeb a komponenty, které ji najdou, vytvořením vlastní <xref:System.ServiceModel.Channels.BindingElement> , který může být složený z jiných typů poskytovaných systémem v zásobníku.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-151">This lets you customize the way the stack of bindings is created and the components that go in it by creating your own <xref:System.ServiceModel.Channels.BindingElement> that can be composed with the other system-provided types in the stack.</span></span>  
  
 <span data-ttu-id="dcc6a-152">Například Pokud implementujete `LoggingBindingElement` , který poskytuje možnost zaprotokolovat zprávu do databáze, musíte ji umístit nad transportní kanál v zásobníku kanálů.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-152">For example, if you implement a `LoggingBindingElement` that provides the ability to log the message to a database, you must place it above a transport channel in the channel stack.</span></span> <span data-ttu-id="dcc6a-153">V tomto případě aplikace vytvoří vlastní vazbu, která se skládá `LoggingBindingElement` s `TcpTransportBindingElement`, jako v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-153">In this case, the application creates a custom binding that composed the `LoggingBindingElement` with `TcpTransportBindingElement`, as in the following example.</span></span>  
  
```csharp  
Binding customBinding = new CustomBinding(  
  new LoggingBindingElement(),   
  new TcpTransportBindingElement()  
);  
```  
  
 <span data-ttu-id="dcc6a-154">Způsob psaní nového elementu vazby závisí na jeho přesné funkci.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-154">How you write your new binding element depends on its exact functionality.</span></span> <span data-ttu-id="dcc6a-155">Jedna z ukázek, [přenos: Protokol](../samples/transport-udp.md)UDP poskytuje podrobný popis implementace jednoho druhu elementu vazby.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-155">One of the samples, [Transport: UDP](../samples/transport-udp.md), provides a detailed description of how to implement one kind of binding element.</span></span>  
  
## <a name="creating-a-new-binding"></a><span data-ttu-id="dcc6a-156">Vytvoření nové vazby</span><span class="sxs-lookup"><span data-stu-id="dcc6a-156">Creating a New Binding</span></span>  
 <span data-ttu-id="dcc6a-157">Uživatelsky vytvořený prvek vazby lze použít dvěma způsoby.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-157">A user-created binding element can be used in two ways.</span></span> <span data-ttu-id="dcc6a-158">Předchozí část ilustruje první způsob: prostřednictvím vlastní vazby.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-158">The previous section illustrates the first way: through a custom binding.</span></span> <span data-ttu-id="dcc6a-159">Vlastní vazba umožňuje uživateli vytvořit vlastní vazbu založenou na libovolné sadě prvků vazby, včetně uživatelem vytvořených.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-159">A custom binding allows the user to create their own binding based on an arbitrary set of binding elements, including user-created ones.</span></span>  
  
 <span data-ttu-id="dcc6a-160">Pokud použijete vazbu ve více než jedné aplikaci, vytvoříte vlastní vazbu a rozšíříte <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-160">If you use the binding in more than one application, create your own binding and extend the <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="dcc6a-161">Tím se vyhnete ručnímu vytváření vlastních vazeb pokaždé, když ji chcete použít.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-161">This avoids manually creating a custom binding every time you want to use it.</span></span> <span data-ttu-id="dcc6a-162">Uživatelsky definovaná vazba umožňuje definovat chování vazby a zahrnout uživatelsky definované prvky vazby.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-162">A user-defined binding allows you to define the binding’s behavior and include user-defined binding elements.</span></span> <span data-ttu-id="dcc6a-163">A je *předem zabalená*: nemusíte znovu sestavovat vazbu pokaždé, když ji použijete.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-163">And it is *pre-packaged*: you do not have to rebuild the binding every time you use it.</span></span>  
  
 <span data-ttu-id="dcc6a-164">Alespoň uživatelsky definovaná vazba musí implementovat <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> metodu <xref:System.ServiceModel.Channels.Binding.Scheme%2A> a vlastnost.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-164">At a minimum, a user-defined binding must implement the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
 <span data-ttu-id="dcc6a-165">Metoda vrátí nový <xref:System.ServiceModel.Channels.BindingElementCollection> , který obsahuje prvky vazby pro vazbu. <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A></span><span class="sxs-lookup"><span data-stu-id="dcc6a-165">The <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method returns a new <xref:System.ServiceModel.Channels.BindingElementCollection> that contains the binding elements for the binding.</span></span> <span data-ttu-id="dcc6a-166">Kolekce je seřazena a měla by nejprve obsahovat prvky vazby protokolu, za kterými následuje element vazby kódování následovaný elementem vazby přenosu.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-166">The collection is ordered, and should contain the protocol binding elements first, followed by the encoding binding element, followed by the transport binding element.</span></span> <span data-ttu-id="dcc6a-167">Při použití elementů vazby poskytovaných systémem, musíte dodržovat pravidla řazení elementů vazby zadaná ve [vlastních vazbách](custom-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="dcc6a-167">When using the WCF system-provided binding elements, you must follow the binding element ordering rules specified in [Custom Bindings](custom-bindings.md).</span></span> <span data-ttu-id="dcc6a-168">Tato kolekce nikdy nesmí odkazovat na objekty odkazované v uživatelsky definované třídě vazby; v důsledku toho musí autoři vazby navracet `Clone()` <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>pro každé volání metody. <xref:System.ServiceModel.Channels.BindingElementCollection></span><span class="sxs-lookup"><span data-stu-id="dcc6a-168">This collection should never reference objects referenced within the user-defined binding class; consequently, binding authors must return a `Clone()` of the <xref:System.ServiceModel.Channels.BindingElementCollection> on each call to <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span></span>  
  
 <span data-ttu-id="dcc6a-169"><xref:System.ServiceModel.Channels.Binding.Scheme%2A> Vlastnost představuje schéma identifikátoru URI pro transportní protokol používaný pro vazbu.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-169">The <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property represents the URI scheme for the transport protocol in use on the binding.</span></span> <span data-ttu-id="dcc6a-170">Například *WSHttpBinding* a *NetTcpBinding* vrátí "http" a "NET. TCP" ze svých příslušných <xref:System.ServiceModel.Channels.Binding.Scheme%2A> vlastností.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-170">For example, the *WSHttpBinding* and the *NetTcpBinding* return "http" and "net.tcp" from their respective <xref:System.ServiceModel.Channels.Binding.Scheme%2A> properties.</span></span>  
  
 <span data-ttu-id="dcc6a-171">Úplný seznam volitelných metod a vlastností pro uživatelsky definované vazby naleznete v tématu <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-171">For a complete list of optional methods and properties for user-defined bindings, see <xref:System.ServiceModel.Channels.Binding>.</span></span>  
  
### <a name="example"></a><span data-ttu-id="dcc6a-172">Příklad</span><span class="sxs-lookup"><span data-stu-id="dcc6a-172">Example</span></span>  
 <span data-ttu-id="dcc6a-173">Tento příklad implementuje vazbu profilu v `SampleProfileUdpBinding`, která je odvozena <xref:System.ServiceModel.Channels.Binding>z.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-173">This example implements profile binding in `SampleProfileUdpBinding`, which derives from <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="dcc6a-174">`TextMessageEncodingBindingElement` `UdpTransportBindingElement` `ReliableSessionBindingElement` `CompositeDuplexBindingElement`Obsahuje až čtyři prvky vazby v rámci něj: jeden uživatelem vytvořený a tři systémy:,, a. `SampleProfileUdpBinding`</span><span class="sxs-lookup"><span data-stu-id="dcc6a-174">The `SampleProfileUdpBinding` contains up to four binding elements within it: one user-created `UdpTransportBindingElement`; and three system-provided: `TextMessageEncodingBindingElement`, `CompositeDuplexBindingElement`, and `ReliableSessionBindingElement`.</span></span>  
  
```csharp
public override BindingElementCollection CreateBindingElements()  
{     
    BindingElementCollection bindingElements = new BindingElementCollection();  
    if (ReliableSessionEnabled)  
    {  
        bindingElements.Add(session);  
        bindingElements.Add(compositeDuplex);  
    }  
    bindingElements.Add(encoding);  
    bindingElements.Add(transport);  
    return bindingElements.Clone();  
}  
```  
  
## <a name="security-restrictions-with-duplex-contracts"></a><span data-ttu-id="dcc6a-175">Omezení zabezpečení u duplexních smluv</span><span class="sxs-lookup"><span data-stu-id="dcc6a-175">Security Restrictions with Duplex Contracts</span></span>  
 <span data-ttu-id="dcc6a-176">Ne všechny prvky vazby jsou vzájemně kompatibilní.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-176">Not all binding elements are compatible with each other.</span></span> <span data-ttu-id="dcc6a-177">Konkrétně existují určitá omezení pro prvky vazby zabezpečení při použití se duplexní kontrakty.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-177">In particular, there are some restrictions on security binding elements when used with duplex contracts.</span></span>  
  
### <a name="one-shot-security"></a><span data-ttu-id="dcc6a-178">Zabezpečení jedním Snímekm</span><span class="sxs-lookup"><span data-stu-id="dcc6a-178">One-Shot Security</span></span>  
 <span data-ttu-id="dcc6a-179">Můžete implementovat "jednorázové" zabezpečení, kde jsou všechna nezbytná bezpečnostní pověření posílána v jedné zprávě `negotiateServiceCredential` nastavením atributu \<> konfiguračního elementu pro zprávu na `false`.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-179">You can implement "one-shot" security, where all the necessary security credentials are sent in a single message, by setting the `negotiateServiceCredential` attribute of the \<message> configuration element to `false`.</span></span>  
  
 <span data-ttu-id="dcc6a-180">Jednorázové ověřování nefunguje u duplexních smluv.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-180">One-shot authentication does not work with duplex contracts.</span></span>  
  
 <span data-ttu-id="dcc6a-181">U kontraktů požadavek-odpověď funguje jednorázové ověřování pouze v případě, že zásobník vazby pod prvkem vazby zabezpečení podporuje vytváření <xref:System.ServiceModel.Channels.IRequestChannel> instancí <xref:System.ServiceModel.Channels.IRequestSessionChannel> nebo instancí.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-181">For Request-Reply contracts, one-shot authentication works only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="dcc6a-182">U jednosměrných smluv funguje jednorázové ověřování, pokud zásobník vazby pod prvkem vazby zabezpečení <xref:System.ServiceModel.Channels.IRequestChannel>podporuje vytváření instancí <xref:System.ServiceModel.Channels.IOutputChannel> , <xref:System.ServiceModel.Channels.IRequestSessionChannel>nebo <xref:System.ServiceModel.Channels.IOutputSessionChannel> .</span><span class="sxs-lookup"><span data-stu-id="dcc6a-182">For one-way contracts, one-shot authentication works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> or <xref:System.ServiceModel.Channels.IOutputSessionChannel> instances.</span></span>  
  
### <a name="cookie-mode-security-context-tokens"></a><span data-ttu-id="dcc6a-183">Tokeny kontextu zabezpečení v režimu souborů cookie</span><span class="sxs-lookup"><span data-stu-id="dcc6a-183">Cookie-mode Security Context Tokens</span></span>  
 <span data-ttu-id="dcc6a-184">Tokeny kontextu zabezpečení režimu souborů cookie nelze použít u duplexních kontraktů.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-184">Cookie mode security context tokens cannot be used with duplex contracts.</span></span>  
  
 <span data-ttu-id="dcc6a-185">U kontraktů požadavek-odpověď, tokeny kontextu zabezpečení v režimu souborů cookie fungují pouze v případě, že zásobník vazby pod prvkem <xref:System.ServiceModel.Channels.IRequestChannel> vazby <xref:System.ServiceModel.Channels.IRequestSessionChannel> zabezpečení podporuje vytváření instancí nebo instancí.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-185">For Request-Reply contracts, cookie-mode security context tokens work only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="dcc6a-186">U jednosměrných smluv funguje tokeny kontextu zabezpečení v režimu souborů cookie, pokud zásobník vazeb pod prvkem vazby zabezpečení podporuje vytváření <xref:System.ServiceModel.Channels.IRequestChannel> instancí nebo <xref:System.ServiceModel.Channels.IRequestSessionChannel> instancí.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-186">For one-way contracts, cookie-mode security context tokens works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
### <a name="session-mode-security-context-tokens"></a><span data-ttu-id="dcc6a-187">Tokeny kontextu zabezpečení v režimu relace</span><span class="sxs-lookup"><span data-stu-id="dcc6a-187">Session-mode Security Context Tokens</span></span>  
 <span data-ttu-id="dcc6a-188">Režim relace SCT funguje pro duplexní kontrakty, pokud zásobník vazby pod prvkem vazby zabezpečení podporuje <xref:System.ServiceModel.Channels.IDuplexChannel> vytváření <xref:System.ServiceModel.Channels.IDuplexSessionChannel> instancí nebo instancí.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-188">Session mode SCT works for duplex contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel> or <xref:System.ServiceModel.Channels.IDuplexSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="dcc6a-189">Režim relace SCT funguje pro kontrakty požadavek-odpověď, pokud zásobník vazby pod prvkem vazby zabezpečení podporuje vytváření <xref:System.ServiceModel.Channels.IDuplexChannel>instancí <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> , <xref:System.ServiceModel.Channels.IRequestSessionChannel>nebo.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-189">Session mode SCT works for Request-Reply contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel>, instances.</span></span>  
  
 <span data-ttu-id="dcc6a-190">Režim relace SCT funguje pro jednosměrné kontrakty, pokud zásobník vazby pod prvkem <xref:System.ServiceModel.Channels.IDuplexChannel>vazby zabezpečení podporuje vytváření instancí <xref:System.ServiceModel.Channels.IRequestChannel> , <xref:System.ServiceModel.Channels.IDuplexSessionChannel>nebo <xref:System.ServiceModel.Channels.IRequestSessionChannel> .</span><span class="sxs-lookup"><span data-stu-id="dcc6a-190">Session mode SCT works for 1-way contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
## <a name="deriving-from-a-standard-binding"></a><span data-ttu-id="dcc6a-191">Odvození ze standardní vazby</span><span class="sxs-lookup"><span data-stu-id="dcc6a-191">Deriving from a Standard Binding</span></span>  
 <span data-ttu-id="dcc6a-192">Místo vytvoření zcela nové třídy vazby je možné, že budete moci zvětšit jednu ze stávajících vazeb poskytovaných systémem.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-192">Instead of creating an entirely new binding class, it may be possible for you to extend one of the existing system-provided bindings.</span></span> <span data-ttu-id="dcc6a-193">Podobně jako v předchozím případě je nutné přepsat <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> metodu <xref:System.ServiceModel.Channels.Binding.Scheme%2A> a vlastnost.</span><span class="sxs-lookup"><span data-stu-id="dcc6a-193">Much like the preceding case, you must override the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dcc6a-194">Viz také:</span><span class="sxs-lookup"><span data-stu-id="dcc6a-194">See also</span></span>

- <xref:System.ServiceModel.Channels.Binding>
- [<span data-ttu-id="dcc6a-195">Vlastní vazby</span><span class="sxs-lookup"><span data-stu-id="dcc6a-195">Custom Bindings</span></span>](custom-bindings.md)
