---
title: Náhrady kontraktů dat
ms.date: 03/30/2017
helpviewer_keywords:
- data contracts [WCF], surrogates
ms.assetid: 8c31134c-46c5-4ed7-94af-bab0ac0dfce5
ms.openlocfilehash: cc0772cbb35f7c149af7eac04239d7349fa79f27
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/07/2019
ms.locfileid: "70797198"
---
# <a name="data-contract-surrogates"></a><span data-ttu-id="abf8d-102">Náhrady kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="abf8d-102">Data Contract Surrogates</span></span>
<span data-ttu-id="abf8d-103">*Náhrada* kontraktu dat je pokročilou funkcí založenou na modelu kontraktu dat.</span><span class="sxs-lookup"><span data-stu-id="abf8d-103">The data contract *surrogate* is an advanced feature built upon the Data Contract model.</span></span> <span data-ttu-id="abf8d-104">Tato funkce je navržena pro použití pro vlastní nastavení a nahrazování typů v situacích, kdy uživatelé chtějí změnit způsob, jakým je typ serializovaný, deserializovaný nebo projektový do metadat.</span><span class="sxs-lookup"><span data-stu-id="abf8d-104">This feature is designed to be used for type customization and substitution in situations where users want to change how a type is serialized, deserialized or projected into metadata.</span></span> <span data-ttu-id="abf8d-105">Některé scénáře, kde je možné použít náhradní údaje, jsou v případě, že se kontrakt dat pro typ nezadal, pole a vlastnosti nejsou označeny <xref:System.Runtime.Serialization.DataMemberAttribute> atributem nebo uživatelé, kteří chtějí dynamicky vytvářet variace schémat.</span><span class="sxs-lookup"><span data-stu-id="abf8d-105">Some scenarios where a surrogate may be used is when a data contract has not been specified for the type, fields and properties are not marked with the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute or users wish to dynamically create schema variations.</span></span>  
  
 <span data-ttu-id="abf8d-106">Serializace a deserializace se dokončí s náhradou kontraktu <xref:System.Runtime.Serialization.DataContractSerializer> dat při použití k převodu z .NET Framework do vhodného formátu, jako je například XML.</span><span class="sxs-lookup"><span data-stu-id="abf8d-106">Serialization and deserialization are accomplished with the data contract surrogate when using <xref:System.Runtime.Serialization.DataContractSerializer> to convert from .NET Framework to a suitable format, such as XML.</span></span> <span data-ttu-id="abf8d-107">Náhradu za kontrakt dat lze také použít ke změně metadat exportovaných pro typy při vytváření reprezentace metadat, jako jsou například dokumenty schématu XML (XSD).</span><span class="sxs-lookup"><span data-stu-id="abf8d-107">Data contract surrogate can also be used to modify the metadata exported for types, when producing metadata representations such as XML Schema Documents (XSD).</span></span> <span data-ttu-id="abf8d-108">Při importu je kód vytvořen z metadat a v tomto případě lze použít náhradní číslo pro přizpůsobení vygenerovaného kódu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-108">Upon import, code is created from metadata and the surrogate can be used in this case to customize the generated code as well.</span></span>  
  
## <a name="how-the-surrogate-works"></a><span data-ttu-id="abf8d-109">Jak náhradní funguje</span><span class="sxs-lookup"><span data-stu-id="abf8d-109">How the Surrogate Works</span></span>  
 <span data-ttu-id="abf8d-110">Náhradní funguje tak, že namapuje jeden typ ("původní" typ) na jiný typ ("typ" "" "".</span><span class="sxs-lookup"><span data-stu-id="abf8d-110">A surrogate works by mapping one type (the "original" type) to another type (the "surrogated" type).</span></span> <span data-ttu-id="abf8d-111">Následující příklad ukazuje původní typ `Inventory` a nový typ náhrady. `InventorySurrogated`</span><span class="sxs-lookup"><span data-stu-id="abf8d-111">The following example shows the original type `Inventory` and a new surrogate `InventorySurrogated` type.</span></span> <span data-ttu-id="abf8d-112">Typ `Inventory` není serializovatelný, `InventorySurrogated` ale typ je:</span><span class="sxs-lookup"><span data-stu-id="abf8d-112">The `Inventory` type is not serializable but the `InventorySurrogated` type is:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#1)]  
  
 <span data-ttu-id="abf8d-113">Vzhledem k tomu, že se kontrakt dat pro tuto třídu nedefinoval, převeďte třídu na náhradní třídu s kontraktem dat.</span><span class="sxs-lookup"><span data-stu-id="abf8d-113">Because a data contract has not been defined for this class, convert the class to a surrogate class with a data contract.</span></span> <span data-ttu-id="abf8d-114">V následujícím příkladu je uvedena třída s zástupnou třídou:</span><span class="sxs-lookup"><span data-stu-id="abf8d-114">The surrogated class is shown in the following example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#2)]  
  
## <a name="implementing-the-idatacontractsurrogate"></a><span data-ttu-id="abf8d-115">Implementace rozhraní IDataContractSurrogate</span><span class="sxs-lookup"><span data-stu-id="abf8d-115">Implementing the IDataContractSurrogate</span></span>  
 <span data-ttu-id="abf8d-116">Chcete-li použít náhradní smlouvu o data, <xref:System.Runtime.Serialization.IDataContractSurrogate> implementujte rozhraní.</span><span class="sxs-lookup"><span data-stu-id="abf8d-116">To use the data contract surrogate, implement the <xref:System.Runtime.Serialization.IDataContractSurrogate> interface.</span></span>  
  
 <span data-ttu-id="abf8d-117">Následuje přehled každé metody <xref:System.Runtime.Serialization.IDataContractSurrogate> s možnou implementací.</span><span class="sxs-lookup"><span data-stu-id="abf8d-117">The following is an overview of each method of <xref:System.Runtime.Serialization.IDataContractSurrogate> with a possible implementation.</span></span>  
  
### <a name="getdatacontracttype"></a><span data-ttu-id="abf8d-118">GetDataContractType</span><span class="sxs-lookup"><span data-stu-id="abf8d-118">GetDataContractType</span></span>  
 <span data-ttu-id="abf8d-119"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> Metoda mapuje jeden typ na jiný.</span><span class="sxs-lookup"><span data-stu-id="abf8d-119">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method maps one type to another.</span></span> <span data-ttu-id="abf8d-120">Tato metoda je vyžadována pro serializaci, deserializaci, import a export.</span><span class="sxs-lookup"><span data-stu-id="abf8d-120">This method is required for serialization, deserialization, import, and export.</span></span>  
  
 <span data-ttu-id="abf8d-121">První úkol definuje, které typy budou namapovány na jiné typy.</span><span class="sxs-lookup"><span data-stu-id="abf8d-121">The first task is defining what types will be mapped to other types.</span></span> <span data-ttu-id="abf8d-122">Příklad:</span><span class="sxs-lookup"><span data-stu-id="abf8d-122">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#3)]  
  
- <span data-ttu-id="abf8d-123">U serializace je mapování vrácené touto metodou následně použito k transformaci původní instance na náhradní instanci voláním <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="abf8d-123">On serialization, the mapping returned by this method is subsequently used to transform the original instance to a surrogated instance by calling the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method.</span></span>  
  
- <span data-ttu-id="abf8d-124">V případě deserializace je mapování vracené touto metodou použito serializátorem k deserializaci do instance náhradního typu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-124">On deserialization, the mapping returned by this method is used by the serializer to deserialize into an instance of the surrogate type.</span></span> <span data-ttu-id="abf8d-125">Následně volá <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> transformaci náhradní instance do instance původního typu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-125">It subsequently calls <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> to transform the surrogated instance into an instance of the original type.</span></span>  
  
- <span data-ttu-id="abf8d-126">Při exportu se typ náhrady vrácený touto metodou projeví pro získání kontraktu dat, který se má použít pro generování metadat.</span><span class="sxs-lookup"><span data-stu-id="abf8d-126">On export, the surrogate type returned by this method is reflected to get the data contract to use for generating metadata.</span></span>  
  
- <span data-ttu-id="abf8d-127">Při importu se počáteční typ změní na typ náhrady, který se odráží k získání kontraktu dat, který se má použít pro účely, jako je například odkazování na podporu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-127">On import, the initial type is changed to a surrogate type that is reflected to get the data contract to use for purposes like referencing support.</span></span>  
  
 <span data-ttu-id="abf8d-128"><xref:System.Type> Parametr je typ objektu, který je serializován, je deserializovaný, importovaný nebo exportovaný.</span><span class="sxs-lookup"><span data-stu-id="abf8d-128">The <xref:System.Type> parameter is the type of the object that is being serialized, deserialized, imported, or exported.</span></span> <span data-ttu-id="abf8d-129"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> Metoda musí vracet vstupní typ, pokud náhrada nezpracovává typ.</span><span class="sxs-lookup"><span data-stu-id="abf8d-129">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method must return the input type if the surrogate does not handle the type.</span></span> <span data-ttu-id="abf8d-130">Jinak vraťte odpovídající typ s náhradami.</span><span class="sxs-lookup"><span data-stu-id="abf8d-130">Otherwise, return the appropriate surrogated type.</span></span> <span data-ttu-id="abf8d-131">Pokud existuje několik náhradních typů, lze v této metodě definovat mnoho mapování.</span><span class="sxs-lookup"><span data-stu-id="abf8d-131">If several surrogate types exist, numerous mappings can be defined in this method.</span></span>  
  
 <span data-ttu-id="abf8d-132">Metoda není volána pro předdefinované primitivy kontraktu dat, <xref:System.Int32> například nebo <xref:System.String>. <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A></span><span class="sxs-lookup"><span data-stu-id="abf8d-132">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method is not called for built-in data contract primitives, such as <xref:System.Int32> or <xref:System.String>.</span></span> <span data-ttu-id="abf8d-133">Pro jiné typy, jako jsou pole, uživatelsky definované typy a další datové struktury, bude tato metoda volána pro každý typ.</span><span class="sxs-lookup"><span data-stu-id="abf8d-133">For other types, such as arrays, user-defined types, and other data structures, this method will be called for each type.</span></span>  
  
 <span data-ttu-id="abf8d-134">V předchozím příkladu metoda kontroluje, zda je `type` parametr a `Inventory` srovnatelný.</span><span class="sxs-lookup"><span data-stu-id="abf8d-134">In the previous example, the method checks if the `type` parameter and `Inventory` are comparable.</span></span> <span data-ttu-id="abf8d-135">Pokud ano, metoda ho mapuje na `InventorySurrogated`.</span><span class="sxs-lookup"><span data-stu-id="abf8d-135">If so, the method maps it to `InventorySurrogated`.</span></span> <span data-ttu-id="abf8d-136">Při každém volání serializace, deserializace, import schématu nebo exportu schématu je tato funkce volána jako první, aby bylo zjištěno mapování mezi typy.</span><span class="sxs-lookup"><span data-stu-id="abf8d-136">Whenever a serialization, deserialization, import schema, or export schema is called, this function is called first to determine the mapping between types.</span></span>  
  
### <a name="getobjecttoserialize-method"></a><span data-ttu-id="abf8d-137">Metoda GetObjectToSerialize</span><span class="sxs-lookup"><span data-stu-id="abf8d-137">GetObjectToSerialize Method</span></span>  
 <span data-ttu-id="abf8d-138"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> Metoda převede původní instanci typu na instanci náhradního typu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-138">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method converts the original type instance to the surrogated type instance.</span></span> <span data-ttu-id="abf8d-139">Metoda je vyžadována pro serializaci.</span><span class="sxs-lookup"><span data-stu-id="abf8d-139">The method is required for serialization.</span></span>  
  
 <span data-ttu-id="abf8d-140">Dalším krokem je definovat způsob, jakým budou fyzická data namapována z původní instance na náhradu tím, že implementuje <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> metodu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-140">The next step is to define the way the physical data will be mapped from the original instance to the surrogate by implementing the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method.</span></span> <span data-ttu-id="abf8d-141">Příklad:</span><span class="sxs-lookup"><span data-stu-id="abf8d-141">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#4)]  
  
 <span data-ttu-id="abf8d-142">Metoda <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> je volána, když je objekt serializován.</span><span class="sxs-lookup"><span data-stu-id="abf8d-142">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method is called when an object is serialized.</span></span> <span data-ttu-id="abf8d-143">Tato metoda přenáší data z původního typu na pole v typu s náhradami.</span><span class="sxs-lookup"><span data-stu-id="abf8d-143">This method transfers data from the original type to the fields of the surrogated type.</span></span> <span data-ttu-id="abf8d-144">Pole mohou být přímo namapována na náhradní pole nebo manipulace s původními daty mohou být uloženy v náhradních.</span><span class="sxs-lookup"><span data-stu-id="abf8d-144">Fields can be directly mapped to surrogate fields, or manipulations of the original data may be stored in the surrogate.</span></span> <span data-ttu-id="abf8d-145">Mezi možná použití patří: přímo mapování polí, provádění operací s daty, která se mají Uložit do zástupných polí nebo ukládání XML původního typu do pole s příponou.</span><span class="sxs-lookup"><span data-stu-id="abf8d-145">Some possible uses include: directly mapping the fields, performing operations on the data to be stored in the surrogated fields, or storing the XML of the original type in the surrogated field.</span></span>  
  
 <span data-ttu-id="abf8d-146">`targetType` Parametr odkazuje na deklarovaný typ člena.</span><span class="sxs-lookup"><span data-stu-id="abf8d-146">The `targetType` parameter refers to the declared type of the member.</span></span> <span data-ttu-id="abf8d-147">Tento parametr je nahrazený typ vrácený <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> metodou.</span><span class="sxs-lookup"><span data-stu-id="abf8d-147">This parameter is the surrogated type returned by the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method.</span></span> <span data-ttu-id="abf8d-148">Serializátor neuplatňuje, že vrácený objekt je možné přiřadit tomuto typu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-148">The serializer does not enforce that the object returned is assignable to this type.</span></span> <span data-ttu-id="abf8d-149">`obj` Parametr je objekt, který se má serializovat, a v případě potřeby se převede na jeho náhradní hodnotu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-149">The `obj` parameter is the object to serialize, and will be converted to its surrogate if necessary.</span></span> <span data-ttu-id="abf8d-150">Tato metoda musí vracet vstupní objekt, pokud ho zástupný objekt nezpracovává.</span><span class="sxs-lookup"><span data-stu-id="abf8d-150">This method must return the input object if the surrogated does not handle the object.</span></span> <span data-ttu-id="abf8d-151">V opačném případě bude vrácen nový objekt náhrady.</span><span class="sxs-lookup"><span data-stu-id="abf8d-151">Otherwise, the new surrogate object will be returned.</span></span> <span data-ttu-id="abf8d-152">Náhrada není volána, pokud je objekt null.</span><span class="sxs-lookup"><span data-stu-id="abf8d-152">The surrogate is not called if the object is null.</span></span> <span data-ttu-id="abf8d-153">V rámci této metody lze definovat řadu náhradních mapování pro různé instance.</span><span class="sxs-lookup"><span data-stu-id="abf8d-153">Numerous surrogate mappings for different instances may be defined within this method.</span></span>  
  
 <span data-ttu-id="abf8d-154">Při vytváření <xref:System.Runtime.Serialization.DataContractSerializer>můžete dát pokyn, aby zachoval odkazy na objekty.</span><span class="sxs-lookup"><span data-stu-id="abf8d-154">When creating a <xref:System.Runtime.Serialization.DataContractSerializer>, you can instruct it to preserve object references.</span></span> <span data-ttu-id="abf8d-155">(Další informace naleznete v tématu [serializace a deserializace](../feature-details/serialization-and-deserialization.md).) To se provádí nastavením `preserveObjectReferences` parametru v jeho konstruktoru na. `true`</span><span class="sxs-lookup"><span data-stu-id="abf8d-155">(For more information, see [Serialization and Deserialization](../feature-details/serialization-and-deserialization.md).) This is done by setting the `preserveObjectReferences` parameter in its constructor to `true`.</span></span> <span data-ttu-id="abf8d-156">V takovém případě je náhrada pro objekt volána pouze jednou, protože všechny následné serializace pouze zapisují odkaz do datového proudu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-156">In that case, the surrogate is called only once for an object since all subsequent serializations just write the reference into the stream.</span></span> <span data-ttu-id="abf8d-157">Pokud `preserveObjectReferences` je nastaveno na `false`, pak je náhrada volána pokaždé, když dojde k výskytu instance.</span><span class="sxs-lookup"><span data-stu-id="abf8d-157">If `preserveObjectReferences` is set to `false`, then the surrogate is called every time an instance is encountered.</span></span>  
  
 <span data-ttu-id="abf8d-158">Pokud se typ serializované instance liší od deklarovaného typu, informace o typu jsou zapsány do datového proudu, například, `xsi:type` aby bylo možné instanci deserializovat na druhém konci.</span><span class="sxs-lookup"><span data-stu-id="abf8d-158">If the type of the instance serialized differs from the declared type, type information is written into the stream, for example, `xsi:type` to allow the instance to be deserialized at the other end.</span></span> <span data-ttu-id="abf8d-159">K tomuto procesu dochází, pokud je objekt zástupný nebo nikoli.</span><span class="sxs-lookup"><span data-stu-id="abf8d-159">This process occurs whether the object is surrogated or not.</span></span>  
  
 <span data-ttu-id="abf8d-160">Výše uvedený příklad převede data `Inventory` instance na. `InventorySurrogated`</span><span class="sxs-lookup"><span data-stu-id="abf8d-160">The example above converts the data of the `Inventory` instance to that of `InventorySurrogated`.</span></span> <span data-ttu-id="abf8d-161">Kontroluje typ objektu a provádí nezbytné manipulace pro převod na typ s náhradami.</span><span class="sxs-lookup"><span data-stu-id="abf8d-161">It checks the type of the object and performs the necessary manipulations to convert to the surrogated type.</span></span> <span data-ttu-id="abf8d-162">V tomto případě jsou pole `Inventory` třídy přímo zkopírována `InventorySurrogated` do polí třídy.</span><span class="sxs-lookup"><span data-stu-id="abf8d-162">In this case, the fields of the `Inventory` class are directly copied over to the `InventorySurrogated` class fields.</span></span>  
  
### <a name="getdeserializedobject-method"></a><span data-ttu-id="abf8d-163">Metoda GetDeserializedObject</span><span class="sxs-lookup"><span data-stu-id="abf8d-163">GetDeserializedObject Method</span></span>  
 <span data-ttu-id="abf8d-164"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> Metoda převede instanci náhradního typu na původní instanci typu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-164">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> method converts the surrogated type instance to the original type instance.</span></span> <span data-ttu-id="abf8d-165">Vyžaduje se pro deserializaci.</span><span class="sxs-lookup"><span data-stu-id="abf8d-165">It is required for deserialization.</span></span>  
  
 <span data-ttu-id="abf8d-166">Dalším úkolem je definovat způsob, jakým budou fyzická data z náhradní instance namapována na původní.</span><span class="sxs-lookup"><span data-stu-id="abf8d-166">The next task is to define the way the physical data will be mapped from the surrogate instance to the original.</span></span> <span data-ttu-id="abf8d-167">Příklad:</span><span class="sxs-lookup"><span data-stu-id="abf8d-167">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#5)]  
  
 <span data-ttu-id="abf8d-168">Tato metoda je volána pouze během deserializace objektu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-168">This method is called only during the deserialization of an object.</span></span> <span data-ttu-id="abf8d-169">Poskytuje mapování reverzních dat pro deserializaci z typu náhrady zpátky na původní typ.</span><span class="sxs-lookup"><span data-stu-id="abf8d-169">It provides reverse data mapping for the deserialization from the surrogate type back to its original type.</span></span> <span data-ttu-id="abf8d-170">Podobně jako u metody můžou některé možné účely použít k přímé výměně dat polí, provádění operací s daty a ukládání dat XML. `GetObjectToSerialize`</span><span class="sxs-lookup"><span data-stu-id="abf8d-170">Similar to the `GetObjectToSerialize` method, some possible uses may be to directly exchange field data, perform operations on the data, and store XML data.</span></span> <span data-ttu-id="abf8d-171">Při deserializaci nemusíte vždycky získávat přesné hodnoty dat z původní kvůli manipulaci v převodu dat.</span><span class="sxs-lookup"><span data-stu-id="abf8d-171">When  deserializing, you may not always obtain the exact data values from original due to manipulations in the data conversion.</span></span>  
  
 <span data-ttu-id="abf8d-172">`targetType` Parametr odkazuje na deklarovaný typ člena.</span><span class="sxs-lookup"><span data-stu-id="abf8d-172">The `targetType` parameter refers to the declared type of the member.</span></span> <span data-ttu-id="abf8d-173">Tento parametr je nahrazený typ vrácený `GetDataContractType` metodou.</span><span class="sxs-lookup"><span data-stu-id="abf8d-173">This parameter is the surrogated type returned by the `GetDataContractType` method.</span></span> <span data-ttu-id="abf8d-174">`obj` Parametr odkazuje na objekt, který byl deserializován.</span><span class="sxs-lookup"><span data-stu-id="abf8d-174">The `obj` parameter refers to the object that has been deserialized.</span></span> <span data-ttu-id="abf8d-175">Objekt lze převést zpět na původní typ, pokud je náhradní.</span><span class="sxs-lookup"><span data-stu-id="abf8d-175">The object can be converted back to its original type if it is surrogated.</span></span> <span data-ttu-id="abf8d-176">Tato metoda vrátí vstupní objekt, pokud náhrada nezpracovává objekt.</span><span class="sxs-lookup"><span data-stu-id="abf8d-176">This method returns the input object if the surrogate does not handle the object.</span></span> <span data-ttu-id="abf8d-177">V opačném případě se deserializovaný objekt vrátí po dokončení jeho převodu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-177">Otherwise, the deserialized object will be returned once its conversion has been completed.</span></span> <span data-ttu-id="abf8d-178">Pokud existuje několik náhradních typů, můžete pro každý typ a převod zadat převod dat z náhradní na primární typ.</span><span class="sxs-lookup"><span data-stu-id="abf8d-178">If several surrogate types exist, you may provide data conversion from surrogate to primary type for each by indicating each type and its conversion.</span></span>  
  
 <span data-ttu-id="abf8d-179">Při vrácení objektu se tabulky interních objektů aktualizují pomocí objektu vráceného touto náhradou.</span><span class="sxs-lookup"><span data-stu-id="abf8d-179">When returning an object, the internal object tables are updated with the object returned by this surrogate.</span></span> <span data-ttu-id="abf8d-180">Jakékoli následné odkazy na instanci získají náhradní instanci z tabulek objektů.</span><span class="sxs-lookup"><span data-stu-id="abf8d-180">Any subsequent references to an instance will obtain the surrogated instance from the object tables.</span></span>  
  
 <span data-ttu-id="abf8d-181">Předchozí příklad převede objekty typu `InventorySurrogated` zpět na počáteční typ. `Inventory`</span><span class="sxs-lookup"><span data-stu-id="abf8d-181">The previous example converts objects of type `InventorySurrogated` back to the initial type `Inventory`.</span></span> <span data-ttu-id="abf8d-182">V tomto případě se data přímo přenesou zpátky z `InventorySurrogated` do příslušných polí v. `Inventory`</span><span class="sxs-lookup"><span data-stu-id="abf8d-182">In this case, data is directly transferred back from `InventorySurrogated` to its corresponding fields in `Inventory`.</span></span> <span data-ttu-id="abf8d-183">Vzhledem k tomu, že neexistují žádná manipulace s daty, budou každé pole členů obsahovat stejné hodnoty jako před serializací.</span><span class="sxs-lookup"><span data-stu-id="abf8d-183">Because there are no data manipulations, the each of the member fields will contain the same values as before the serialization.</span></span>  
  
### <a name="getcustomdatatoexport-method"></a><span data-ttu-id="abf8d-184">Metoda GetCustomDataToExport</span><span class="sxs-lookup"><span data-stu-id="abf8d-184">GetCustomDataToExport Method</span></span>  
 <span data-ttu-id="abf8d-185">Při exportu schématu <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A> je metoda volitelná.</span><span class="sxs-lookup"><span data-stu-id="abf8d-185">When exporting a schema, the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A> method is optional.</span></span> <span data-ttu-id="abf8d-186">Slouží k vložení dalších dat nebo nápověd do exportovaného schématu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-186">It is used to insert additional data or hints into the exported schema.</span></span> <span data-ttu-id="abf8d-187">Další data lze vložit na úrovni člena nebo typu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-187">Additional data can be inserted at the member level or type level.</span></span> <span data-ttu-id="abf8d-188">Příklad:</span><span class="sxs-lookup"><span data-stu-id="abf8d-188">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#6)]  
  
 <span data-ttu-id="abf8d-189">Tato metoda (se dvěma přetíženími) umožňuje zahrnutí dalších informací do metadat buď na úrovni člena, nebo typu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-189">This method (with two overloads) enables the inclusion of extra information into the metadata either at the member or type level.</span></span> <span data-ttu-id="abf8d-190">Je možné zahrnout nápovědu týkající se toho, zda je člen veřejný nebo privátní, a komentáře, které by byly zachovány během exportu a importu schématu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-190">It is possible to include hints about whether a member is public or private, and comments which would be preserved throughout the export and import of the schema.</span></span> <span data-ttu-id="abf8d-191">Tyto informace by byly ztraceny bez této metody.</span><span class="sxs-lookup"><span data-stu-id="abf8d-191">Such information would be lost without this method.</span></span> <span data-ttu-id="abf8d-192">Tato metoda nezpůsobí vložení ani odstranění členů nebo typů, ale místo toho přidá další data do schémat na obou těchto úrovních.</span><span class="sxs-lookup"><span data-stu-id="abf8d-192">This method does not cause the insertion or deletion of members or types, but rather adds additional data to the schemas at either of these levels.</span></span>  
  
 <span data-ttu-id="abf8d-193">Metoda je přetížena a může mít `Type` buď (`clrtype` parametr), nebo <xref:System.Reflection.MemberInfo> (`memberInfo` parametr).</span><span class="sxs-lookup"><span data-stu-id="abf8d-193">The method is overloaded and can take either a `Type` (`clrtype` parameter) or <xref:System.Reflection.MemberInfo> (`memberInfo` parameter).</span></span> <span data-ttu-id="abf8d-194">Druhý parametr je vždy typu `Type` (`dataContractType` parametr).</span><span class="sxs-lookup"><span data-stu-id="abf8d-194">The second parameter is always a `Type` (`dataContractType` parameter).</span></span> <span data-ttu-id="abf8d-195">Tato metoda je volána pro každý člen a typ náhradního `dataContractType` typu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-195">This method is called for every member and type of the surrogated `dataContractType` type.</span></span>  
  
 <span data-ttu-id="abf8d-196">Jedno z těchto přetížení musí vracet buď `null` nebo serializovatelný objekt.</span><span class="sxs-lookup"><span data-stu-id="abf8d-196">Either of these overloads must return either `null` or a serializable object.</span></span> <span data-ttu-id="abf8d-197">Objekt, který nemá hodnotu null, bude serializován jako anotace do exportovaného schématu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-197">A non-null object will be serialized as annotation into the exported schema.</span></span> <span data-ttu-id="abf8d-198">Pro přetížení jsou všechny typy, které jsou exportovány do schématu, odesílány do této metody v prvním parametru spolu s nahrazeným typem `dataContractType` jako parametr. `Type`</span><span class="sxs-lookup"><span data-stu-id="abf8d-198">For the `Type` overload, each type that is exported to schema is sent to this method in the first parameter along with the surrogated type as the `dataContractType` parameter.</span></span> <span data-ttu-id="abf8d-199">Pro přetížení odesílá každý člen, který je exportován do schématu, své informace `memberInfo` jako parametr s nahrazeným typem ve druhém parametru. `MemberInfo`</span><span class="sxs-lookup"><span data-stu-id="abf8d-199">For the `MemberInfo` overload, each member that is exported to schema sends its information as the `memberInfo` parameter with the surrogated type in the second parameter.</span></span>  
  
#### <a name="getcustomdatatoexport-method-type-type"></a><span data-ttu-id="abf8d-200">GetCustomDataToExport – metoda (Type, Type)</span><span class="sxs-lookup"><span data-stu-id="abf8d-200">GetCustomDataToExport Method (Type, Type)</span></span>  
 <span data-ttu-id="abf8d-201"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Type%2CSystem.Type%29?displayProperty=nameWithType> Metoda je volána během exportu schématu pro každou definici typu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-201">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Type%2CSystem.Type%29?displayProperty=nameWithType> method is called during schema export for every type definition.</span></span> <span data-ttu-id="abf8d-202">Metoda přidává informace k typům v rámci schématu při exportu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-202">The method adds information to the types within the schema when exporting.</span></span> <span data-ttu-id="abf8d-203">Každý definovaný typ je odeslán této metodě k určení, zda existují další data, která je třeba zahrnout do schématu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-203">Each type defined is sent to this method to determine whether there is any additional data that needs to be included in the schema.</span></span>  
  
#### <a name="getcustomdatatoexport-method-memberinfo-type"></a><span data-ttu-id="abf8d-204">GetCustomDataToExport – metoda (MemberInfo, Type)</span><span class="sxs-lookup"><span data-stu-id="abf8d-204">GetCustomDataToExport Method (MemberInfo, Type)</span></span>  
 <span data-ttu-id="abf8d-205"><xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Reflection.MemberInfo%2CSystem.Type%29?displayProperty=nameWithType> Je volána během exportu pro každého člena v typech, které jsou exportovány.</span><span class="sxs-lookup"><span data-stu-id="abf8d-205">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Reflection.MemberInfo%2CSystem.Type%29?displayProperty=nameWithType> is called during export for every member in the types that are exported.</span></span> <span data-ttu-id="abf8d-206">Tato funkce umožňuje přizpůsobit všechny komentáře pro členy, kteří budou součástí schématu při exportu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-206">This function enables you to customize any comments for the members that will be included in the schema upon export.</span></span> <span data-ttu-id="abf8d-207">Informace pro každého člena v rámci třídy se odesílají této metodě, aby zkontrolovala, jestli je potřeba přidat do schématu nějaká další data.</span><span class="sxs-lookup"><span data-stu-id="abf8d-207">The information for every member within the class is sent to this method to check whether any additional data need to be added in the schema.</span></span>  
  
 <span data-ttu-id="abf8d-208">Výše uvedený příklad vyhledává `dataContractType` pro každého člena náhrady.</span><span class="sxs-lookup"><span data-stu-id="abf8d-208">The example above searches through the `dataContractType` for each member of the surrogate.</span></span> <span data-ttu-id="abf8d-209">Pak vrátí odpovídající modifikátor přístupu pro každé pole.</span><span class="sxs-lookup"><span data-stu-id="abf8d-209">It then returns the appropriate access modifier for each field.</span></span> <span data-ttu-id="abf8d-210">Bez tohoto vlastního nastavení je výchozí hodnota pro modifikátory přístupu veřejná.</span><span class="sxs-lookup"><span data-stu-id="abf8d-210">Without this customization, the default value for access modifiers is public.</span></span> <span data-ttu-id="abf8d-211">Proto budou všichni členové definováni jako veřejné v kódu generovaném pomocí exportovaného schématu bez ohledu na to, jaká jsou jejich skutečná omezení přístupu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-211">Therefore, all members would be defined as public in the code generated using the exported schema no matter what their actual access restrictions are.</span></span> <span data-ttu-id="abf8d-212">Pokud tato implementace nepoužíváte, člen `numpens` by byl v exportovaném schématu veřejný i v případě, že byl definován v náhradní podobě jako soukromý.</span><span class="sxs-lookup"><span data-stu-id="abf8d-212">When not using this implementation, the member `numpens` would be public in the exported schema even though it was defined in the surrogate as private.</span></span> <span data-ttu-id="abf8d-213">Pomocí této metody se v exportovaném schématu dá modifikátor přístupu vygenerovat jako soukromý.</span><span class="sxs-lookup"><span data-stu-id="abf8d-213">Through the use of this method, in the exported schema, the access modifier can be generated as private.</span></span>  
  
### <a name="getreferencedtypeonimport-method"></a><span data-ttu-id="abf8d-214">Metoda GetReferencedTypeOnImport</span><span class="sxs-lookup"><span data-stu-id="abf8d-214">GetReferencedTypeOnImport Method</span></span>  
 <span data-ttu-id="abf8d-215">Tato metoda mapuje <xref:System.Type> náhradu na původní typ.</span><span class="sxs-lookup"><span data-stu-id="abf8d-215">This method maps the <xref:System.Type> of the surrogate to the original type.</span></span> <span data-ttu-id="abf8d-216">Tato metoda je volitelná pro import schématu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-216">This method is optional for schema importation.</span></span>  
  
 <span data-ttu-id="abf8d-217">Při vytváření náhrady, která importuje schéma a generuje pro něj kód, je dalším úkolem definování typu náhradní instance na původním typu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-217">When creating a surrogate that imports a schema and generates code for it, the next task is to define the type of a surrogate instance to its original type.</span></span>  
  
 <span data-ttu-id="abf8d-218">Pokud generovaný kód musí odkazovat na existující typ uživatele, je to provedeno implementací <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="abf8d-218">If the generated code needs to reference an existing user type, this is done by implementing the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> method.</span></span>  
  
 <span data-ttu-id="abf8d-219">Při importu schématu je tato metoda volána pro každou deklaraci typu k mapování kontraktu náhradních dat na typ.</span><span class="sxs-lookup"><span data-stu-id="abf8d-219">When importing a schema, this method is called for every type declaration to map the surrogated data contract to a type.</span></span> <span data-ttu-id="abf8d-220">Parametry `typeName` řetězce a `typeNamespace` definujte název a obor názvů pro typ s příponou.</span><span class="sxs-lookup"><span data-stu-id="abf8d-220">The string parameters `typeName` and `typeNamespace` define the name and namespace of the surrogated type.</span></span> <span data-ttu-id="abf8d-221">Návratová hodnota pro <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> slouží k určení, zda je třeba vygenerovat nový typ.</span><span class="sxs-lookup"><span data-stu-id="abf8d-221">The return value for <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> is used to determine whether a new type needs to be generated.</span></span> <span data-ttu-id="abf8d-222">Tato metoda musí vracet buď platný typ, nebo hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="abf8d-222">This method must return either a valid type or null.</span></span> <span data-ttu-id="abf8d-223">Pro platné typy bude vrácený typ použit jako odkazovaný typ ve vygenerovaném kódu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-223">For valid types, the type returned will be used as a referenced type in the generated code.</span></span> <span data-ttu-id="abf8d-224">Pokud je vrácena hodnota null, nebude odkazován žádný typ a je třeba vytvořit nový typ.</span><span class="sxs-lookup"><span data-stu-id="abf8d-224">If null is returned, no type will be referenced and a new type must be created.</span></span> <span data-ttu-id="abf8d-225">Pokud existuje více náhradních, je možné provést mapování pro každý typ náhrady zpátky na jeho počáteční typ.</span><span class="sxs-lookup"><span data-stu-id="abf8d-225">If several surrogates exist, it is possible to perform the mapping for each surrogate type back to its initial type.</span></span>  
  
 <span data-ttu-id="abf8d-226">Parametr je objekt původně vrácen z <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A>. `customData`</span><span class="sxs-lookup"><span data-stu-id="abf8d-226">The `customData` parameter is the object originally returned from <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A>.</span></span> <span data-ttu-id="abf8d-227">Tato `customData` funkce se používá v případě, že náhradní Autoři chtějí do metadat použít další data nebo nápovědu, aby je mohl použít při importu k vygenerování kódu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-227">This `customData` is used when surrogate authors want to insert extra data/hints into the metadata to use during import to generate code.</span></span>  
  
### <a name="processimportedtype-method"></a><span data-ttu-id="abf8d-228">Metoda ProcessImportedType</span><span class="sxs-lookup"><span data-stu-id="abf8d-228">ProcessImportedType Method</span></span>  
 <span data-ttu-id="abf8d-229"><xref:System.Runtime.Serialization.IDataContractSurrogate.ProcessImportedType%2A> Metoda přizpůsobí libovolný typ vytvořený z části Import schématu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-229">The <xref:System.Runtime.Serialization.IDataContractSurrogate.ProcessImportedType%2A> method customizes any type created from schema importation.</span></span> <span data-ttu-id="abf8d-230">Tato metoda je volitelná.</span><span class="sxs-lookup"><span data-stu-id="abf8d-230">This method is optional.</span></span>  
  
 <span data-ttu-id="abf8d-231">Při importu schématu Tato metoda umožňuje přizpůsobení veškerého importovaného typu a informací o kompilaci.</span><span class="sxs-lookup"><span data-stu-id="abf8d-231">When importing a schema, this method allows for any imported type and compilation information to be customized.</span></span> <span data-ttu-id="abf8d-232">Příklad:</span><span class="sxs-lookup"><span data-stu-id="abf8d-232">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#7)]  
  
 <span data-ttu-id="abf8d-233">Během importu je tato metoda volána pro každý generovaný typ.</span><span class="sxs-lookup"><span data-stu-id="abf8d-233">During import, this method is called for every type generated.</span></span> <span data-ttu-id="abf8d-234">Změňte zadané <xref:System.CodeDom.CodeTypeDeclaration> nebo <xref:System.CodeDom.CodeCompileUnit>změňte.</span><span class="sxs-lookup"><span data-stu-id="abf8d-234">Change the specified <xref:System.CodeDom.CodeTypeDeclaration> or modify the <xref:System.CodeDom.CodeCompileUnit>.</span></span> <span data-ttu-id="abf8d-235">To zahrnuje změnu názvu, členů, atributů a mnoha dalších vlastností `CodeTypeDeclaration`.</span><span class="sxs-lookup"><span data-stu-id="abf8d-235">This includes changing the name, members, attributes, and many other properties of the `CodeTypeDeclaration`.</span></span> <span data-ttu-id="abf8d-236">Zpracováním `CodeCompileUnit`je možné upravit direktivy, obory názvů, odkazovaná sestavení a několik dalších aspektů.</span><span class="sxs-lookup"><span data-stu-id="abf8d-236">By processing the `CodeCompileUnit`, it is possible to modify the directives, namespaces, referenced assemblies, and several other aspects.</span></span>  
  
 <span data-ttu-id="abf8d-237">`CodeTypeDeclaration` Parametr obsahuje deklaraci typu DOM kódu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-237">The `CodeTypeDeclaration` parameter contains the code DOM type declaration.</span></span> <span data-ttu-id="abf8d-238">`CodeCompileUnit` Parametr umožňuje úpravy pro zpracování kódu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-238">The `CodeCompileUnit` parameter allows for modification for processing the code.</span></span>  <span data-ttu-id="abf8d-239">Vrací `null` se výsledky v deklaraci typu, která se zahodí.</span><span class="sxs-lookup"><span data-stu-id="abf8d-239">Returning `null` results in the type declaration being discarded.</span></span> <span data-ttu-id="abf8d-240">Naopak při vrácení `CodeTypeDeclaration`změn se změny zachovají.</span><span class="sxs-lookup"><span data-stu-id="abf8d-240">Conversely, when returning a `CodeTypeDeclaration`, the modifications are preserved.</span></span>  
  
 <span data-ttu-id="abf8d-241">Pokud jsou během exportu metadat vložena vlastní data, je nutné ji uživateli poskytnout během importu, aby ji bylo možné použít.</span><span class="sxs-lookup"><span data-stu-id="abf8d-241">If custom data is inserted during metadata export, it needs to be provided to the user during import so that it can be used.</span></span> <span data-ttu-id="abf8d-242">Tato vlastní data lze použít k programování tipů modelu nebo k jiným komentářům.</span><span class="sxs-lookup"><span data-stu-id="abf8d-242">This custom data can be used for programming model hints, or other comments.</span></span> <span data-ttu-id="abf8d-243">Každá `CodeTypeDeclaration` instance <xref:System.CodeDom.CodeTypeMember> a obsahujevlastní`IDataContractSurrogate` data jako vlastnostpřetypovánínatyp.<xref:System.CodeDom.CodeObject.UserData%2A></span><span class="sxs-lookup"><span data-stu-id="abf8d-243">Each `CodeTypeDeclaration` and <xref:System.CodeDom.CodeTypeMember> instance includes custom data as the <xref:System.CodeDom.CodeObject.UserData%2A> property, cast to the `IDataContractSurrogate` type.</span></span>  
  
 <span data-ttu-id="abf8d-244">Výše uvedený příklad provede některé změny importovaného schématu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-244">The example above performs some changes on the schema imported.</span></span> <span data-ttu-id="abf8d-245">Kód zachovává soukromé členy původního typu pomocí náhrady.</span><span class="sxs-lookup"><span data-stu-id="abf8d-245">The code preserves private members of the original type by using a surrogate.</span></span> <span data-ttu-id="abf8d-246">Výchozí modifikátor přístupu při importu schématu `public`.</span><span class="sxs-lookup"><span data-stu-id="abf8d-246">The default access modifier when importing a schema is `public`.</span></span> <span data-ttu-id="abf8d-247">Proto budou všichni členové schématu nahrazení veřejné, pokud se nezmění, jako v tomto příkladu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-247">Therefore, all members of the surrogate schema will be public unless modified, as in this example.</span></span> <span data-ttu-id="abf8d-248">Během exportu se vlastní data vloží do metadat, o kterých jsou členové privátní.</span><span class="sxs-lookup"><span data-stu-id="abf8d-248">During export, custom data is inserted into the metadata about which members are private.</span></span> <span data-ttu-id="abf8d-249">V příkladu jsou vyhledána vlastní data, zkontroluje, zda je modifikátor přístupu soukromý, a pak upraví příslušný člen tak, aby byl privátní, nastavením jeho atributů.</span><span class="sxs-lookup"><span data-stu-id="abf8d-249">The example looks up the custom data, checks whether the access modifier is private, and then modifies the appropriate member to be private by setting its attributes.</span></span> <span data-ttu-id="abf8d-250">Bez tohoto přizpůsobení by byl `numpens` člen definován jako veřejný, nikoli jako soukromý.</span><span class="sxs-lookup"><span data-stu-id="abf8d-250">Without this customization, the `numpens` member would be defined as public instead of private.</span></span>  
  
### <a name="getknowncustomdatatypes-method"></a><span data-ttu-id="abf8d-251">Metoda GetKnownCustomDataTypes</span><span class="sxs-lookup"><span data-stu-id="abf8d-251">GetKnownCustomDataTypes Method</span></span>  
 <span data-ttu-id="abf8d-252">Tato metoda získá vlastní datové typy, které jsou definovány ve schématu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-252">This method obtains custom data types defined from the schema.</span></span> <span data-ttu-id="abf8d-253">Metoda je volitelná pro import schématu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-253">The method is optional for schema importation.</span></span>  
  
 <span data-ttu-id="abf8d-254">Metoda je volána na začátku exportu schématu a importu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-254">The method is called at the beginning of schema export and import.</span></span> <span data-ttu-id="abf8d-255">Metoda vrátí vlastní datové typy používané v exportovaném nebo importovaném schématu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-255">The method returns the custom data types used in the schema exported or imported.</span></span> <span data-ttu-id="abf8d-256">Metoda je předána <xref:System.Collections.ObjectModel.Collection%601> `customDataTypes` (parametr), což je kolekce typů.</span><span class="sxs-lookup"><span data-stu-id="abf8d-256">The method is passed a <xref:System.Collections.ObjectModel.Collection%601> (the `customDataTypes` parameter), which is a collection of types.</span></span> <span data-ttu-id="abf8d-257">Metoda by měla do této kolekce přidat další známé typy.</span><span class="sxs-lookup"><span data-stu-id="abf8d-257">The method should add additional known types to this collection.</span></span> <span data-ttu-id="abf8d-258">Známé vlastní datové typy jsou potřebné k povolení serializace a deserializace vlastních dat pomocí <xref:System.Runtime.Serialization.DataContractSerializer>.</span><span class="sxs-lookup"><span data-stu-id="abf8d-258">The known custom data types are needed to enable serialization and deserialization of custom data using the <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span> <span data-ttu-id="abf8d-259">Další informace najdete v tématu [známé typy kontraktů dat](../feature-details/data-contract-known-types.md).</span><span class="sxs-lookup"><span data-stu-id="abf8d-259">For more information, see [Data Contract Known Types](../feature-details/data-contract-known-types.md).</span></span>  
  
## <a name="implementing-a-surrogate"></a><span data-ttu-id="abf8d-260">Implementace náhrady</span><span class="sxs-lookup"><span data-stu-id="abf8d-260">Implementing a Surrogate</span></span>  
 <span data-ttu-id="abf8d-261">Chcete-li v rámci služby WCF použít náhradu za kontrakt dat, je nutné dodržovat několik zvláštních postupů.</span><span class="sxs-lookup"><span data-stu-id="abf8d-261">To use the data contract surrogate within WCF, you must follow a few special procedures.</span></span>  
  
### <a name="to-use-a-surrogate-for-serialization-and-deserialization"></a><span data-ttu-id="abf8d-262">Použití náhradních pro serializaci a deserializaci</span><span class="sxs-lookup"><span data-stu-id="abf8d-262">To Use a Surrogate for Serialization and Deserialization</span></span>  
 <span data-ttu-id="abf8d-263"><xref:System.Runtime.Serialization.DataContractSerializer> Použijte k provedení serializace a deserializace dat s náhradou.</span><span class="sxs-lookup"><span data-stu-id="abf8d-263">Use the <xref:System.Runtime.Serialization.DataContractSerializer> to perform serialization and deserialization of data with the surrogate.</span></span> <span data-ttu-id="abf8d-264"><xref:System.Runtime.Serialization.DataContractSerializer> Je vytvořen <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>pomocí.</span><span class="sxs-lookup"><span data-stu-id="abf8d-264">The <xref:System.Runtime.Serialization.DataContractSerializer> is created by the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>.</span></span> <span data-ttu-id="abf8d-265">Je také nutné zadat náhradní.</span><span class="sxs-lookup"><span data-stu-id="abf8d-265">The surrogate must also be specified.</span></span>  
  
##### <a name="to-implement-serialization-and-deserialization"></a><span data-ttu-id="abf8d-266">Implementace serializace a deserializace</span><span class="sxs-lookup"><span data-stu-id="abf8d-266">To implement serialization and deserialization</span></span>  
  
1. <span data-ttu-id="abf8d-267">Vytvořte instanci <xref:System.ServiceModel.ServiceHost> služby pro vaši službu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-267">Create an instance of the <xref:System.ServiceModel.ServiceHost> for your service.</span></span> <span data-ttu-id="abf8d-268">Podrobné pokyny najdete v tématu [Základní programování WCF](../basic-wcf-programming.md).</span><span class="sxs-lookup"><span data-stu-id="abf8d-268">For complete instructions, see [Basic WCF Programming](../basic-wcf-programming.md).</span></span>  
  
2. <span data-ttu-id="abf8d-269">Pro každého <xref:System.ServiceModel.Description.ServiceEndpoint> zadaného hostitele služby Najděte jeho <xref:System.ServiceModel.Description.OperationDescription>.</span><span class="sxs-lookup"><span data-stu-id="abf8d-269">For every <xref:System.ServiceModel.Description.ServiceEndpoint> of the specified service host, find its <xref:System.ServiceModel.Description.OperationDescription>.</span></span>  
  
3. <span data-ttu-id="abf8d-270">Pokud chcete zjistit, jestli se našla instance, <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> vyhledejte v chování operace.</span><span class="sxs-lookup"><span data-stu-id="abf8d-270">Search through the operation behaviors to determine if an instance of the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> is found.</span></span>  
  
4. <span data-ttu-id="abf8d-271">Pokud je nalezen, nastavte jeho <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> vlastnost na novou instanci náhrady. <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior></span><span class="sxs-lookup"><span data-stu-id="abf8d-271">If a <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> is found, set its <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> property to a new instance of the surrogate.</span></span> <span data-ttu-id="abf8d-272">Pokud se nenajde, vytvořte novou instanci a <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> nastavte člena nového chování na novou instanci náhrady. <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior></span><span class="sxs-lookup"><span data-stu-id="abf8d-272">If no <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> is found, then create a new instance and set the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> member of the new behavior to a new instance of the surrogate.</span></span>  
  
5. <span data-ttu-id="abf8d-273">Nakonec přidejte toto nové chování do chování aktuální operace, jak je znázorněno v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="abf8d-273">Finally, add this new behavior to the current operation behaviors, as shown in the following example:</span></span>  
  
     [!code-csharp[C_IDataContractSurrogate#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#8)]  
  
### <a name="to-use-a-surrogate-for-metadata-import"></a><span data-ttu-id="abf8d-274">Použití náhrady při importu metadat</span><span class="sxs-lookup"><span data-stu-id="abf8d-274">To Use a Surrogate for Metadata Import</span></span>  
 <span data-ttu-id="abf8d-275">Při importu metadat, jako je WSDL a XSD, pro generování kódu na straně klienta, je nutné přidat náhradní komponentu do komponenty zodpovědné za generování kódu ze schématu <xref:System.Runtime.Serialization.XsdDataContractImporter>XSD.</span><span class="sxs-lookup"><span data-stu-id="abf8d-275">When importing metadata like WSDL and XSD to generate client-side code, the surrogate needs to be added to the component responsible for generating code from XSD schema, <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span></span> <span data-ttu-id="abf8d-276">Provedete to tak, že <xref:System.ServiceModel.Description.WsdlImporter> přímo upravíte použití pro import metadat.</span><span class="sxs-lookup"><span data-stu-id="abf8d-276">To do this, directly modify the <xref:System.ServiceModel.Description.WsdlImporter> used to import metadata.</span></span>  
  
##### <a name="to-implement-a-surrogate-for-metadata-importation"></a><span data-ttu-id="abf8d-277">Implementace náhrady při dovozu metadat</span><span class="sxs-lookup"><span data-stu-id="abf8d-277">To implement a surrogate for metadata importation</span></span>  
  
1. <span data-ttu-id="abf8d-278">Importujte metadata pomocí <xref:System.ServiceModel.Description.WsdlImporter> třídy.</span><span class="sxs-lookup"><span data-stu-id="abf8d-278">Import the metadata using the <xref:System.ServiceModel.Description.WsdlImporter> class.</span></span>  
  
2. <span data-ttu-id="abf8d-279">Použijte metodu ke kontrole, zda <xref:System.Runtime.Serialization.XsdDataContractImporter> byl definován. <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A></span><span class="sxs-lookup"><span data-stu-id="abf8d-279">Use the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method to check whether an <xref:System.Runtime.Serialization.XsdDataContractImporter> has been defined.</span></span>  
  
3. <span data-ttu-id="abf8d-280">`false` <xref:System.Runtime.Serialization.XsdDataContractImporter> Pokud metoda vrátí, vytvořte novou a nastavte <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> <xref:System.Runtime.Serialization.ImportOptions> její vlastnost na novou instanci třídy. <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A></span><span class="sxs-lookup"><span data-stu-id="abf8d-280">If the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method returns `false`, create a new <xref:System.Runtime.Serialization.XsdDataContractImporter> and set its <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> property to a new instance of the <xref:System.Runtime.Serialization.ImportOptions> class.</span></span> <span data-ttu-id="abf8d-281">V opačném případě použijte import vrácený `out` parametrem <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="abf8d-281">Otherwise, use the importer returned by the `out` parameter of the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method.</span></span>  
  
4. <span data-ttu-id="abf8d-282">Pokud není definován, nastavte vlastnost tak, aby byla novou instancí <xref:System.Runtime.Serialization.ImportOptions> třídy. <xref:System.Runtime.Serialization.ImportOptions> <xref:System.Runtime.Serialization.XsdDataContractImporter></span><span class="sxs-lookup"><span data-stu-id="abf8d-282">If the <xref:System.Runtime.Serialization.XsdDataContractImporter> has no <xref:System.Runtime.Serialization.ImportOptions> defined, then set the property to be a new instance of the <xref:System.Runtime.Serialization.ImportOptions> class.</span></span>  
  
5. <span data-ttu-id="abf8d-283"><xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A> Nastavte vlastnost <xref:System.Runtime.Serialization.ImportOptions> pro nanovouinstancináhrady.<xref:System.Runtime.Serialization.XsdDataContractImporter></span><span class="sxs-lookup"><span data-stu-id="abf8d-283">Set the <xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A> property of the <xref:System.Runtime.Serialization.ImportOptions> of the <xref:System.Runtime.Serialization.XsdDataContractImporter> to a new instance of the surrogate.</span></span>  
  
6. <span data-ttu-id="abf8d-284">Přidejte do kolekce vrácené <xref:System.ServiceModel.Description.MetadataExporter.State%2A> vlastností <xref:System.ServiceModel.Description.WsdlImporter> (zděděné ze <xref:System.ServiceModel.Description.MetadataExporter> třídy). <xref:System.Runtime.Serialization.XsdDataContractImporter></span><span class="sxs-lookup"><span data-stu-id="abf8d-284">Add the <xref:System.Runtime.Serialization.XsdDataContractImporter> to the collection returned by the <xref:System.ServiceModel.Description.MetadataExporter.State%2A> property of the <xref:System.ServiceModel.Description.WsdlImporter> (inherited from the <xref:System.ServiceModel.Description.MetadataExporter> class.)</span></span>  
  
7. <span data-ttu-id="abf8d-285"><xref:System.ServiceModel.Description.WsdlImporter.ImportAllContracts%2A> Použijte metodu <xref:System.ServiceModel.Description.WsdlImporter> pro import všech kontraktů dat v rámci schématu.</span><span class="sxs-lookup"><span data-stu-id="abf8d-285">Use the <xref:System.ServiceModel.Description.WsdlImporter.ImportAllContracts%2A> method of the <xref:System.ServiceModel.Description.WsdlImporter> to import all of the data contracts within the schema.</span></span> <span data-ttu-id="abf8d-286">Během posledního kroku se kód generuje ze schémat načtených voláním do náhradní.</span><span class="sxs-lookup"><span data-stu-id="abf8d-286">During the last step, code is generated from the schemas loaded by calling into the surrogate.</span></span>  
  
     [!code-csharp[C_IDataContractSurrogate#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#9)]  
  
### <a name="to-use-a-surrogate-for-metadata-export"></a><span data-ttu-id="abf8d-287">Použití náhrady při exportu metadat</span><span class="sxs-lookup"><span data-stu-id="abf8d-287">To Use a surrogate for Metadata Export</span></span>  
 <span data-ttu-id="abf8d-288">Ve výchozím nastavení je při exportu metadat z WCF pro službu nutné vygenerovat schéma WSDL i XSD.</span><span class="sxs-lookup"><span data-stu-id="abf8d-288">By default, when exporting metadata from WCF for a service, both WSDL and XSD schema needs to be generated.</span></span> <span data-ttu-id="abf8d-289">Náhradní je nutné přidat do komponenty zodpovědné za generování schématu XSD pro typy <xref:System.Runtime.Serialization.XsdDataContractExporter>kontraktů dat.</span><span class="sxs-lookup"><span data-stu-id="abf8d-289">The surrogate needs to be added to the component responsible for generating XSD schema for data contract types, <xref:System.Runtime.Serialization.XsdDataContractExporter>.</span></span> <span data-ttu-id="abf8d-290">K tomu použijte chování, které implementuje <xref:System.ServiceModel.Description.IWsdlExportExtension> k <xref:System.ServiceModel.Description.WsdlExporter>úpravě <xref:System.ServiceModel.Description.WsdlExporter> , nebo přímo upraví použití pro export metadat.</span><span class="sxs-lookup"><span data-stu-id="abf8d-290">To do this, either use a behavior that implements <xref:System.ServiceModel.Description.IWsdlExportExtension> to modify the <xref:System.ServiceModel.Description.WsdlExporter>, or directly modify the <xref:System.ServiceModel.Description.WsdlExporter> used to export metadata.</span></span>  
  
##### <a name="to-use-a-surrogate-for-metadata-export"></a><span data-ttu-id="abf8d-291">Použití náhrady při exportu metadat</span><span class="sxs-lookup"><span data-stu-id="abf8d-291">To use a surrogate for metadata export</span></span>  
  
1. <span data-ttu-id="abf8d-292">Vytvořte nový <xref:System.ServiceModel.Description.WsdlExporter> nebo `wsdlExporter` použijte parametr předaný <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> metodě.</span><span class="sxs-lookup"><span data-stu-id="abf8d-292">Create a new <xref:System.ServiceModel.Description.WsdlExporter> or use the `wsdlExporter` parameter passed to the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method.</span></span>  
  
2. <span data-ttu-id="abf8d-293">Pomocí funkce zkontrolujete, zda <xref:System.Runtime.Serialization.XsdDataContractExporter> byl definován. <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A></span><span class="sxs-lookup"><span data-stu-id="abf8d-293">Use the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> function to check whether an <xref:System.Runtime.Serialization.XsdDataContractExporter> has been defined.</span></span>  
  
3. <span data-ttu-id="abf8d-294">Pokud <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> se `false`vrátí, vytvořte nový <xref:System.Runtime.Serialization.XsdDataContractExporter> s generovanými schématy XML z <xref:System.ServiceModel.Description.WsdlExporter>a a <xref:System.ServiceModel.Description.WsdlExporter>přidejte je do kolekce vrácené <xref:System.ServiceModel.Description.MetadataExporter.State%2A> vlastností.</span><span class="sxs-lookup"><span data-stu-id="abf8d-294">If <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> returns `false`, create a new <xref:System.Runtime.Serialization.XsdDataContractExporter> with the generated XML schemas from the <xref:System.ServiceModel.Description.WsdlExporter>, and add it to the collection returned by the <xref:System.ServiceModel.Description.MetadataExporter.State%2A> property of the <xref:System.ServiceModel.Description.WsdlExporter>.</span></span> <span data-ttu-id="abf8d-295">V opačném případě použijte vývozce vrácený `out` parametrem <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="abf8d-295">Otherwise, use the exporter returned by the `out` parameter of the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method.</span></span>  
  
4. <span data-ttu-id="abf8d-296">Pokud není definován,<xref:System.Runtime.Serialization.ExportOptions> nastavte vlastnost na novou instanci třídy. <xref:System.Runtime.Serialization.XsdDataContractExporter.Options%2A> <xref:System.Runtime.Serialization.ExportOptions> <xref:System.Runtime.Serialization.XsdDataContractExporter></span><span class="sxs-lookup"><span data-stu-id="abf8d-296">If the <xref:System.Runtime.Serialization.XsdDataContractExporter> has no <xref:System.Runtime.Serialization.ExportOptions> defined, then set the <xref:System.Runtime.Serialization.XsdDataContractExporter.Options%2A> property to a new instance of the <xref:System.Runtime.Serialization.ExportOptions> class.</span></span>  
  
5. <span data-ttu-id="abf8d-297"><xref:System.Runtime.Serialization.ExportOptions.DataContractSurrogate%2A> Nastavte vlastnost <xref:System.Runtime.Serialization.ExportOptions> pro nanovouinstancináhrady.<xref:System.Runtime.Serialization.XsdDataContractExporter></span><span class="sxs-lookup"><span data-stu-id="abf8d-297">Set the <xref:System.Runtime.Serialization.ExportOptions.DataContractSurrogate%2A> property of the <xref:System.Runtime.Serialization.ExportOptions> of the <xref:System.Runtime.Serialization.XsdDataContractExporter> to a new instance of the surrogate.</span></span> <span data-ttu-id="abf8d-298">Následující kroky pro export metadat nevyžadují žádné změny.</span><span class="sxs-lookup"><span data-stu-id="abf8d-298">Subsequent steps for exporting metadata do not require any changes.</span></span>  
  
     [!code-csharp[C_IDataContractSurrogate#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#10)]  
  
## <a name="see-also"></a><span data-ttu-id="abf8d-299">Viz také:</span><span class="sxs-lookup"><span data-stu-id="abf8d-299">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractSerializer>
- <xref:System.Runtime.Serialization.IDataContractSurrogate>
- <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>
- <xref:System.Runtime.Serialization.ImportOptions>
- <xref:System.Runtime.Serialization.ExportOptions>
- [<span data-ttu-id="abf8d-300">Použití kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="abf8d-300">Using Data Contracts</span></span>](../feature-details/using-data-contracts.md)
