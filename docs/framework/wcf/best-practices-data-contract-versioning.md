---
title: 'Doporučené postupy: Správa verzí kontraktů dat'
ms.date: 03/30/2017
helpviewer_keywords:
- data contracts
- service contracts
- best practices [WCF], data contract versioning
- Windows Communication Foundation, data contracts
ms.assetid: bf0ab338-4d36-4e12-8002-8ebfdeb346cb
ms.openlocfilehash: a56111796b1e301862dcbd9e76a6294c709ea06f
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/28/2019
ms.locfileid: "64652143"
---
# <a name="best-practices-data-contract-versioning"></a><span data-ttu-id="7841c-102">Doporučené postupy: Správa verzí kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="7841c-102">Best Practices: Data Contract Versioning</span></span>
<span data-ttu-id="7841c-103">Toto téma obsahuje osvědčené postupy pro vytváření dat smlouvy, které v průběhu času můžete snadno vyvíjejí.</span><span class="sxs-lookup"><span data-stu-id="7841c-103">This topic lists the best practices for creating data contracts that can evolve easily over time.</span></span> <span data-ttu-id="7841c-104">Další informace o kontraktech dat, najdete v tématech v [kontraktů dat pomocí](../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="7841c-104">For more information about data contracts, see the topics in [Using Data Contracts](../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span></span>  
  
## <a name="note-on-schema-validation"></a><span data-ttu-id="7841c-105">Poznámka týkající se ověřování schématu</span><span class="sxs-lookup"><span data-stu-id="7841c-105">Note on Schema Validation</span></span>  
 <span data-ttu-id="7841c-106">V zabývat Správa verzí kontraktů dat, je důležité si uvědomit, že schéma dat smlouvu exportovat Windows Communication Foundation (WCF) nemá žádné podporou správy verzí, než je skutečnost, že ve výchozím nastavení jsou označeny jako volitelné elementy.</span><span class="sxs-lookup"><span data-stu-id="7841c-106">In discussing data contract versioning, it is important to note that the data contract schema exported by Windows Communication Foundation (WCF) does not have any versioning support, other than the fact that elements are marked as optional by default.</span></span>  
  
 <span data-ttu-id="7841c-107">To znamená, že i nejběžnější scénáře správy verzí jako je například přidávání nových datový člen nejde implementovat způsobem, který je bezproblémové s ohledem na dané schéma.</span><span class="sxs-lookup"><span data-stu-id="7841c-107">This means that even the most common versioning scenario, such as adding a new data member, cannot be implemented in a way that is seamless with regard to a given schema.</span></span> <span data-ttu-id="7841c-108">Novější verze kontraktu dat. (s nový datový člen, například) nelze ověřit pomocí staré schématu.</span><span class="sxs-lookup"><span data-stu-id="7841c-108">The newer versions of a data contract (with a new data member, for example) do not validate using the old schema.</span></span>  
  
 <span data-ttu-id="7841c-109">Existují však mnoho scénářů, ve kterých striktní schéma dodržování předpisů se nevyžaduje.</span><span class="sxs-lookup"><span data-stu-id="7841c-109">However, there are many scenarios in which strict schema compliance is not required.</span></span> <span data-ttu-id="7841c-110">Mnoho webových služeb platformy, včetně WCF a XML webových služeb vytvořené pomocí ASP.NET, není ve výchozím nastavení provádět ověřování schématu a proto tolerovat dodatečné prvky, které nebyly popsány pomocí schématu rozhraní.</span><span class="sxs-lookup"><span data-stu-id="7841c-110">Many Web services platforms, including WCF and XML Web services created using ASP.NET, do not perform schema validation by default and therefore tolerate extra elements that are not described by the schema.</span></span> <span data-ttu-id="7841c-111">Při práci s tyto platformy, se snadněji implementovat řadu scénářů správy verzí.</span><span class="sxs-lookup"><span data-stu-id="7841c-111">When working with such platforms, many versioning scenarios are easier to implement.</span></span>  
  
 <span data-ttu-id="7841c-112">Proto existují dvě sady dat smlouvy pokyny pro správu verzí: jeden pro scénáře, kde je důležité, striktní schéma platnosti a další nastavení pro scénáře, když není nastaven.</span><span class="sxs-lookup"><span data-stu-id="7841c-112">Thus, there are two sets of data contract versioning guidelines: one set for scenarios where strict schema validity is important, and another set for scenarios when it is not.</span></span>  
  
## <a name="versioning-when-schema-validation-is-required"></a><span data-ttu-id="7841c-113">Správa verzí, pokud je nutné použít ověřování schématu</span><span class="sxs-lookup"><span data-stu-id="7841c-113">Versioning When Schema Validation Is Required</span></span>  
 <span data-ttu-id="7841c-114">Pokud ve všech směrech (nové starého a staré – nové) se vyžaduje striktní schéma platnosti, kontrakty dat by měl být považován za neměnitelný.</span><span class="sxs-lookup"><span data-stu-id="7841c-114">If strict schema validity is required in all directions (new-to-old and old-to-new), data contracts should be considered immutable.</span></span> <span data-ttu-id="7841c-115">Pokud správy verzí je potřeba, nový datový kontrakt by měl být vytvořen s jiným názvem nebo obor názvů, a kontrakt služby pomocí datový typ by měl být označené verzí odpovídajícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="7841c-115">If versioning is required, a new data contract should be created, with a different name or namespace, and the service contract using the data type should be versioned accordingly.</span></span>  
  
 <span data-ttu-id="7841c-116">Například nákupní objednávku zpracovává kontrakt služby s názvem `PoProcessing` s `PostPurchaseOrder` operace přebírá parametr, který odpovídá `PurchaseOrder` kontraktu dat.</span><span class="sxs-lookup"><span data-stu-id="7841c-116">For example, a purchase order processing service contract named `PoProcessing` with a `PostPurchaseOrder` operation takes a parameter that conforms to a `PurchaseOrder` data contract.</span></span> <span data-ttu-id="7841c-117">Pokud `PurchaseOrder` smlouvy musí změnit, je třeba vytvořit nové kontraktu dat, to znamená, `PurchaseOrder2`, což zahrnuje změny.</span><span class="sxs-lookup"><span data-stu-id="7841c-117">If the `PurchaseOrder` contract has to change, you must create a new data contract, that is, `PurchaseOrder2`, which includes the changes.</span></span> <span data-ttu-id="7841c-118">Potom musí umět zpracovat správy verzí na úrovni kontraktu služby.</span><span class="sxs-lookup"><span data-stu-id="7841c-118">You must then handle the versioning at the service contract level.</span></span> <span data-ttu-id="7841c-119">Například tak, že vytvoříte `PostPurchaseOrder2` operace, která přebírá `PurchaseOrder2` parametr, nebo tak, že vytvoříte `PoProcessing2` kontrakt služby kde `PostPurchaseOrder` operace přebírá `PurchaseOrder2` kontraktu dat.</span><span class="sxs-lookup"><span data-stu-id="7841c-119">For example, by creating a `PostPurchaseOrder2` operation that takes the `PurchaseOrder2` parameter, or by creating a `PoProcessing2` service contract where the `PostPurchaseOrder` operation takes a `PurchaseOrder2` data contract.</span></span>  
  
 <span data-ttu-id="7841c-120">Všimněte si, že změny v kontraktech dat, které odkazují jiné kontraktů dat rozšířit také vrstva modelu služby.</span><span class="sxs-lookup"><span data-stu-id="7841c-120">Note that changes in data contracts that are referenced by other data contracts also extend to the service model layer.</span></span> <span data-ttu-id="7841c-121">Například v předchozím scénáři `PurchaseOrder` kontraktu dat. není potřeba změnit.</span><span class="sxs-lookup"><span data-stu-id="7841c-121">For example, in the previous scenario the `PurchaseOrder` data contract does not need to change.</span></span> <span data-ttu-id="7841c-122">Však obsahuje datový člen třídy `Customer` kontraktu dat, která dále obsaženy datový člen třídy `Address` kontraktu dat, které je třeba změnit.</span><span class="sxs-lookup"><span data-stu-id="7841c-122">However, it contains a data member of a `Customer` data contract, which in turn contained a data member of the `Address` data contract, which does need to be changed.</span></span> <span data-ttu-id="7841c-123">V takovém případě je potřeba vytvořit `Address2` kontraktu dat s požadované změny `Customer2` kontraktu dat, která obsahuje `Address2` datový člen a `PurchaseOrder2` kontraktu dat, která obsahuje `Customer2` datový člen.</span><span class="sxs-lookup"><span data-stu-id="7841c-123">In that case, you would need to create an `Address2` data contract with the required changes, a `Customer2` data contract that contains the `Address2` data member, and a `PurchaseOrder2` data contract that contains a `Customer2` data member.</span></span> <span data-ttu-id="7841c-124">Stejně jako v předchozím případě by mohl být označené verzí také kontrakt služby.</span><span class="sxs-lookup"><span data-stu-id="7841c-124">As in the previous case, the service contract would have to be versioned as well.</span></span>  
  
 <span data-ttu-id="7841c-125">I když v těchto příkladech jsou názvy změnit (přidáním "2"), doporučujeme změnit obory názvů namísto názvů přidáním nové obory názvů s číslo verze nebo datum.</span><span class="sxs-lookup"><span data-stu-id="7841c-125">Although in these examples names are changed (by appending a "2"), the recommendation is to change namespaces instead of names by appending new namespaces with a version number or a date.</span></span> <span data-ttu-id="7841c-126">Například `http://schemas.contoso.com/2005/05/21/PurchaseOrder` kontraktu dat se změní `http://schemas.contoso.com/2005/10/14/PurchaseOrder` kontraktu dat.</span><span class="sxs-lookup"><span data-stu-id="7841c-126">For example, the `http://schemas.contoso.com/2005/05/21/PurchaseOrder` data contract would change to the `http://schemas.contoso.com/2005/10/14/PurchaseOrder` data contract.</span></span>  
  
 <span data-ttu-id="7841c-127">Další informace najdete v tématu Doporučené postupy: [Správa verzí služby](../../../docs/framework/wcf/service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="7841c-127">For more information, see Best Practices: [Service Versioning](../../../docs/framework/wcf/service-versioning.md).</span></span>  
  
 <span data-ttu-id="7841c-128">V některých případech musí zajistit dodržování předpisů striktní schéma pro zprávy odeslané aplikací ale nelze spoléhat na příchozí zprávy, které mají být přísně schématu nedodržující předpisy.</span><span class="sxs-lookup"><span data-stu-id="7841c-128">Occasionally, you must guarantee strict schema compliance for messages sent by your application, but cannot rely on the incoming messages to be strictly schema-compliant.</span></span> <span data-ttu-id="7841c-129">V takovém případě hrozí, že příchozí zprávy může obsahovat nadbytečná data.</span><span class="sxs-lookup"><span data-stu-id="7841c-129">In this case, there is a danger that an incoming message might contain extraneous data.</span></span> <span data-ttu-id="7841c-130">Nadbytečné hodnoty jsou uloženy a vrácené WCF, jejichž výsledkem tedy schéma neplatný zprávy odesílané.</span><span class="sxs-lookup"><span data-stu-id="7841c-130">The extraneous values are stored and returned by WCF and thus results in schema-invalid messages being sent.</span></span> <span data-ttu-id="7841c-131">Tomuto problému zabráníte tak, by měla být funkce verzemi vypnuta.</span><span class="sxs-lookup"><span data-stu-id="7841c-131">To avoid this problem, the round-tripping feature should be turned off.</span></span> <span data-ttu-id="7841c-132">Existují dva způsoby, jak to provést.</span><span class="sxs-lookup"><span data-stu-id="7841c-132">There are two ways to do this.</span></span>  
  
- <span data-ttu-id="7841c-133">Neprovádějte implementaci <xref:System.Runtime.Serialization.IExtensibleDataObject> na některý z typů rozhraní.</span><span class="sxs-lookup"><span data-stu-id="7841c-133">Do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface on any of your types.</span></span>  
  
- <span data-ttu-id="7841c-134">Použít <xref:System.ServiceModel.ServiceBehaviorAttribute> atribut vaše kontrakt služby s <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> nastavenou na `true`.</span><span class="sxs-lookup"><span data-stu-id="7841c-134">Apply a <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to your service contract with the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property set to `true`.</span></span>  
  
 <span data-ttu-id="7841c-135">Další informace o verzemi najdete v tématu [kontraktů dat dopřednou](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="7841c-135">For more information about round-tripping, see [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span>  
  
## <a name="versioning-when-schema-validation-is-not-required"></a><span data-ttu-id="7841c-136">Správa verzí při ověřování schématu se nevyžaduje</span><span class="sxs-lookup"><span data-stu-id="7841c-136">Versioning When Schema Validation Is Not Required</span></span>  
 <span data-ttu-id="7841c-137">Striktní schéma dodržování předpisů se jen zřídka vyžaduje.</span><span class="sxs-lookup"><span data-stu-id="7841c-137">Strict schema compliance is rarely required.</span></span> <span data-ttu-id="7841c-138">Řada platforem tolerovat dodatečné prvky, které nejsou popsané ve schématu.</span><span class="sxs-lookup"><span data-stu-id="7841c-138">Many platforms tolerate extra elements not described by a schema.</span></span> <span data-ttu-id="7841c-139">Za předpokladu, to je dovoleno, úplná sada funkcí popsaných v [Správa verzí kontraktů dat](../../../docs/framework/wcf/feature-details/data-contract-versioning.md) a [kontraktů dat dopřednou](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) lze použít.</span><span class="sxs-lookup"><span data-stu-id="7841c-139">As long as this is tolerated, the full set of features described in [Data Contract Versioning](../../../docs/framework/wcf/feature-details/data-contract-versioning.md) and [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) can be used.</span></span> <span data-ttu-id="7841c-140">Následující pokyny jsou vhodné.</span><span class="sxs-lookup"><span data-stu-id="7841c-140">The following guidelines are recommended.</span></span>  
  
 <span data-ttu-id="7841c-141">Některé pokyny musí následovat přesně tak, aby bylo možné odesílat nové verze typu, kde je očekávána starší nebo odeslat staré heslo, kde je očekávána novou.</span><span class="sxs-lookup"><span data-stu-id="7841c-141">Some of the guidelines must be followed exactly in order to send new versions of a type where an older one is expected or send an old one where the new one is expected.</span></span> <span data-ttu-id="7841c-142">Další pokyny nejsou bezpodmínečně nutné, ale jsou zde uvedeny, protože mohou být ovlivněny budoucnost schématu.</span><span class="sxs-lookup"><span data-stu-id="7841c-142">Other guidelines are not strictly required, but are listed here because they may be affected by the future of schema versioning.</span></span>  
  
1. <span data-ttu-id="7841c-143">Nepokoušejte se verzí kontraktů dat podle typu dědičnosti.</span><span class="sxs-lookup"><span data-stu-id="7841c-143">Do not attempt to version data contracts by type inheritance.</span></span> <span data-ttu-id="7841c-144">K vytvoření novější verze, změnit kontraktu dat na existujícím typu nebo vytvořte nový typ nesouvisející.</span><span class="sxs-lookup"><span data-stu-id="7841c-144">To create later versions, either change the data contract on an existing type or create a new unrelated type.</span></span>  
  
2. <span data-ttu-id="7841c-145">Použití dědičnosti spolu s kontrakty dat je povoleno, za předpokladu, že dědičnosti se nepoužívá jako mechanismus správy verzí a nepoužijí určitá pravidla.</span><span class="sxs-lookup"><span data-stu-id="7841c-145">The use of inheritance together with data contracts is allowed, provided that inheritance is not used as a versioning mechanism and that certain rules are followed.</span></span> <span data-ttu-id="7841c-146">Pokud typ je odvozen od určité základní typ, Nedělejte ji odvodit z různých základního typu v budoucí verzi (Pokud se stejná data smlouvy).</span><span class="sxs-lookup"><span data-stu-id="7841c-146">If a type derives from a certain base type, do not make it derive from a different base type in a future version (unless it has the same data contract).</span></span> <span data-ttu-id="7841c-147">Existuje jedna výjimka: typ můžete vložit do hierarchie mezi typ kontraktu dat a jeho základní typ, ale pouze v případě, že neobsahuje datové členy pomocí stejné názvy jako ostatní členové všechny možné verze z ostatních typů v hierarchii.</span><span class="sxs-lookup"><span data-stu-id="7841c-147">There is one exception to this: you can insert a type into the hierarchy between a data contract type and its base type, but only if it does not contain data members with the same names as other members in any possible versions of the other types in the hierarchy.</span></span> <span data-ttu-id="7841c-148">Obecně platí pomocí datové členy se stejnými názvy na různých úrovních stejné hierarchii dědičnosti může vést k problémům vážné správy verzí a mělo by se vyhnout.</span><span class="sxs-lookup"><span data-stu-id="7841c-148">In general, using data members with the same names at different levels of the same inheritance hierarchy can lead to serious versioning problems and should be avoided.</span></span>  
  
3. <span data-ttu-id="7841c-149">Od první verze kontraktu dat, vždy implementovat <xref:System.Runtime.Serialization.IExtensibleDataObject> umožňující verzemi.</span><span class="sxs-lookup"><span data-stu-id="7841c-149">Starting with the first version of a data contract, always implement <xref:System.Runtime.Serialization.IExtensibleDataObject> to enable round-tripping.</span></span> <span data-ttu-id="7841c-150">Další informace najdete v tématu [kontraktů dat dopřednou](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="7841c-150">For more information, see [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span> <span data-ttu-id="7841c-151">Vydání jeden nebo více verzemi typu bez implementace tohoto rozhraní implementaci v příští verzi typu.</span><span class="sxs-lookup"><span data-stu-id="7841c-151">If you have released one or more versions of a type without implementing this interface, implement it in the next version of the type.</span></span>  
  
4. <span data-ttu-id="7841c-152">V novějších verzích neměňte název kontraktu dat nebo oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="7841c-152">In later versions, do not change the data contract name or namespace.</span></span> <span data-ttu-id="7841c-153">Pokud změníte název nebo obor názvů tohoto typu základního kontraktu dat, je potřeba zachovat název kontraktu dat a oboru názvů pomocí příslušné mechanismy, jako <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> vlastnost <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="7841c-153">If changing the name or namespace of the type underlying the data contract, be sure to preserve the data contract name and namespace by using the appropriate mechanisms, such as the <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> property of the <xref:System.Runtime.Serialization.DataContractAttribute>.</span></span> <span data-ttu-id="7841c-154">Další informace o pojmenování naleznete v tématu [názvy datových kontraktů](../../../docs/framework/wcf/feature-details/data-contract-names.md).</span><span class="sxs-lookup"><span data-stu-id="7841c-154">For more information about naming, see [Data Contract Names](../../../docs/framework/wcf/feature-details/data-contract-names.md).</span></span>  
  
5. <span data-ttu-id="7841c-155">V novějších verzích Neměňte názvy žádné datové členy.</span><span class="sxs-lookup"><span data-stu-id="7841c-155">In later versions, do not change the names of any data members.</span></span> <span data-ttu-id="7841c-156">Pokud změníte název pole, vlastnost nebo událost základní datový člen, použijte `Name` vlastnost <xref:System.Runtime.Serialization.DataMemberAttribute> zachovat existující názvem datového členu.</span><span class="sxs-lookup"><span data-stu-id="7841c-156">If changing the name of the field, property, or event underlying the data member, use the `Name` property of the <xref:System.Runtime.Serialization.DataMemberAttribute> to preserve the existing data member name.</span></span>  
  
6. <span data-ttu-id="7841c-157">Neměňte typ pole, vlastnost nebo událost základní datový člen tak, aby výsledná data smlouvy pro tento člen změny dat, v novějších verzích.</span><span class="sxs-lookup"><span data-stu-id="7841c-157">In later versions, do not change the type of any field, property, or event underlying a data member such that the resulting data contract for that data member changes.</span></span> <span data-ttu-id="7841c-158">Uvědomte si, že typy rozhraní jsou ekvivalentní <xref:System.Object> pro účely stanovení smlouvy očekávaná data.</span><span class="sxs-lookup"><span data-stu-id="7841c-158">Keep in mind that interface types are equivalent to <xref:System.Object> for the purposes of determining the expected data contract.</span></span>  
  
7. <span data-ttu-id="7841c-159">V novějších verzích, neměňte pořadí existující datové členy úpravou <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> vlastnost <xref:System.Runtime.Serialization.DataMemberAttribute> atribut.</span><span class="sxs-lookup"><span data-stu-id="7841c-159">In later versions, do not change the order of the existing data members by adjusting the <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute.</span></span>  
  
8. <span data-ttu-id="7841c-160">V novějších verzích je možné přidat nové datové členy.</span><span class="sxs-lookup"><span data-stu-id="7841c-160">In later versions, new data members can be added.</span></span> <span data-ttu-id="7841c-161">By měl vždy postupujte podle těchto pravidel:</span><span class="sxs-lookup"><span data-stu-id="7841c-161">They should always follow these rules:</span></span>  
  
    1. <span data-ttu-id="7841c-162"><xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> Vlastnost by měl vždy být ponechány na jeho výchozí hodnotu `false`.</span><span class="sxs-lookup"><span data-stu-id="7841c-162">The <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property should always be left at its default value of `false`.</span></span>  
  
    2. <span data-ttu-id="7841c-163">Pokud výchozí hodnotu `null` nebo klesne na nepřijatelnou nulu pro člen, musí být zadaná metoda zpětného volání pomocí <xref:System.Runtime.Serialization.OnDeserializingAttribute> zajistit přiměřené výchozí hodnoty v případě, že člen není k dispozici v příchozím datovém proudu.</span><span class="sxs-lookup"><span data-stu-id="7841c-163">If a default value of `null` or zero for the member is unacceptable, a callback method should be provided using the <xref:System.Runtime.Serialization.OnDeserializingAttribute> to provide a reasonable default in case the member is not present in the incoming stream.</span></span> <span data-ttu-id="7841c-164">Další informace o zpětné volání, naleznete v tématu [tolerantní zpětná volání serializace](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="7841c-164">For more information about the callback, see [Version-Tolerant Serialization Callbacks](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
    3. <span data-ttu-id="7841c-165"><xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> Vlastnost by měla sloužit k Ujistěte se, že všichni členové nově přidaná data se zobrazí po existující datové členy.</span><span class="sxs-lookup"><span data-stu-id="7841c-165">The <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> property should be used to make sure that all of the newly added data members appear after the existing data members.</span></span> <span data-ttu-id="7841c-166">Doporučený způsob, jak to vypadá takto: Žádné datové členy v první verzi kontraktu dat by měl mít jejich `Order` sadu vlastností.</span><span class="sxs-lookup"><span data-stu-id="7841c-166">The recommended way of doing this is as follows: None of the data members in the first version of the data contract should have their `Order` property set.</span></span> <span data-ttu-id="7841c-167">Všechny datové členy, které byly přidány ve verzi 2 kontraktu dat by měl mít jejich `Order` nastavenou na 2.</span><span class="sxs-lookup"><span data-stu-id="7841c-167">All of the data members added in version 2 of the data contract should have their `Order` property set to 2.</span></span> <span data-ttu-id="7841c-168">Všechny datové členy, které byly přidány ve verzi 3 kontraktu dat by měl mít jejich `Order` nastaven na hodnotu 3 a tak dále.</span><span class="sxs-lookup"><span data-stu-id="7841c-168">All of the data members added in version 3 of the data contract should have their `Order` set to 3, and so on.</span></span> <span data-ttu-id="7841c-169">Je přípustné mít více než jeden datový člen nastaví na stejnou `Order` číslo.</span><span class="sxs-lookup"><span data-stu-id="7841c-169">It is permissible to have more than one data member set to the same `Order` number.</span></span>  
  
9. <span data-ttu-id="7841c-170">Neodebírejte datové členy v novějších verzích, i v případě, <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> vlastnost byla ponechána v její výchozí vlastnost `false` v předchozích verzích.</span><span class="sxs-lookup"><span data-stu-id="7841c-170">Do not remove data members in later versions, even if the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property was left at its default property of `false` in prior versions.</span></span>  
  
10. <span data-ttu-id="7841c-171">Neměňte `IsRequired` vlastnost na žádné existující datové členy z verze na verzi.</span><span class="sxs-lookup"><span data-stu-id="7841c-171">Do not change the `IsRequired` property on any existing data members from version to version.</span></span>  
  
11. <span data-ttu-id="7841c-172">Pro požadované datové členy (kde `IsRequired` je `true`), se nezmění `EmitDefaultValue` vlastnost z verze na verzi.</span><span class="sxs-lookup"><span data-stu-id="7841c-172">For required data members (where `IsRequired` is `true`), do not change the `EmitDefaultValue` property from version to version.</span></span>  
  
12. <span data-ttu-id="7841c-173">Nepokoušejte se vytváření hierarchií větvenou správy verzí.</span><span class="sxs-lookup"><span data-stu-id="7841c-173">Do not attempt to create branched versioning hierarchies.</span></span> <span data-ttu-id="7841c-174">To znamená, že by měla být vždy cestu minimálně jeden směr z libovolné verze na jakoukoli jinou verzi pomocí pouze změny, které jsou povolené podle následujících pokynů.</span><span class="sxs-lookup"><span data-stu-id="7841c-174">That is, there should always be a path in at least one direction from any version to any other version using only the changes permitted by these guidelines.</span></span>  
  
     <span data-ttu-id="7841c-175">Například, pokud verze 1 kontraktu dat osoby obsahuje pouze datový člen název, nevytvářejte 2a verze kontraktu přidávání pouze stáří člen a verze 2b přidávání pouze člena adresy.</span><span class="sxs-lookup"><span data-stu-id="7841c-175">For example, if version 1 of a Person data contract contains only the Name data member, you should not create version 2a of the contract adding only the Age member and version 2b adding only the Address member.</span></span> <span data-ttu-id="7841c-176">Budete z 2a 2b by vyžadovalo odebrání stáří a přidání adresy; do toho pustit v opačným směrem by za následek odebrání adres a přidání věk.</span><span class="sxs-lookup"><span data-stu-id="7841c-176">Going from 2a to 2b would involve removing Age and adding Address; going in the other direction would entail removing Address and adding Age.</span></span> <span data-ttu-id="7841c-177">Odebírají se členové nepovoluje podle následujících pokynů.</span><span class="sxs-lookup"><span data-stu-id="7841c-177">Removing members is not permitted by these guidelines.</span></span>  
  
13. <span data-ttu-id="7841c-178">Obecně nevytvářejte nový podtypy existující typy kontraktů dat v nové verzi vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="7841c-178">You should generally not create new subtypes of existing data contract types in a new version of your application.</span></span> <span data-ttu-id="7841c-179">Podobně nevytvářejte nové kontraktů dat, které se používají místo data, která členy deklarované jako objekt nebo jako typy rozhraní.</span><span class="sxs-lookup"><span data-stu-id="7841c-179">Likewise, you should not create new data contracts that are used in place of data members declared as Object or as interface types.</span></span> <span data-ttu-id="7841c-180">Vytvoření těchto nových tříd je povoleno pouze v případě, že víte, že můžete přidat nové typy do seznamu známých typů všech instancí vaše staré aplikace v.</span><span class="sxs-lookup"><span data-stu-id="7841c-180">Creating these new classes is allowed only when you know that you can add the new types to the known types list of all instances of your old application.</span></span> <span data-ttu-id="7841c-181">Ve verzi 1 vaše aplikace může například mít LibraryItem datový typ s knihu kontraktu a novinách data smlouvy podtypy.</span><span class="sxs-lookup"><span data-stu-id="7841c-181">For example, in version 1 of your application, you may have the LibraryItem data contract type with the Book and Newspaper data contract subtypes.</span></span> <span data-ttu-id="7841c-182">LibraryItem by pak měl u seznamu známých typů, která obsahuje adresář a novinách.</span><span class="sxs-lookup"><span data-stu-id="7841c-182">LibraryItem would then have a known types list that contains Book and Newspaper.</span></span> <span data-ttu-id="7841c-183">Předpokládejme, že přidáte typ Magazine nyní ve verzi 2, která je podtypem typu LibraryItem.</span><span class="sxs-lookup"><span data-stu-id="7841c-183">Suppose you now add a Magazine type in version 2 which is a subtype of LibraryItem.</span></span> <span data-ttu-id="7841c-184">Pokud odešlete instanci Magazine z verze 2 verze 1, časopisu kontraktu dat nebyl nalezen v seznamu známých typů a je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="7841c-184">If you send a Magazine instance from version 2 to version 1, the Magazine data contract is not found in the list of known types and an exception is thrown.</span></span>  
  
14. <span data-ttu-id="7841c-185">Neměli přidat nebo odebrat členy výčtu mezi verzemi.</span><span class="sxs-lookup"><span data-stu-id="7841c-185">You should not add or remove enumeration members between versions.</span></span> <span data-ttu-id="7841c-186">Členy výčtu, by neměla také přejmenovat, pokud použijete vlastnost Name na `EnumMemberAttribute` atribut zachovat jejich názvy v datovém modelu smlouvy stejné.</span><span class="sxs-lookup"><span data-stu-id="7841c-186">You should also not rename enumeration members, unless you use the Name property on the `EnumMemberAttribute` attribute to keep their names in the data contract model the same.</span></span>  
  
15. <span data-ttu-id="7841c-187">Kolekce jsou zaměnitelné v datovém modelu smlouvy, jak je popsáno v [typy kolekcí v kontraktech dat](../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="7841c-187">Collections are interchangeable in the data contract model as described in [Collection Types in Data Contracts](../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="7841c-188">To umožňuje vysoký stupeň flexibilitu.</span><span class="sxs-lookup"><span data-stu-id="7841c-188">This allows for a great degree of flexibility.</span></span> <span data-ttu-id="7841c-189">Ale ujistěte se, že neměnit neúmyslně typ kolekce ve jiných zaměnitelné verze způsobem.</span><span class="sxs-lookup"><span data-stu-id="7841c-189">However, make sure that you do not inadvertently change a collection type in a non-interchangeable way from version to version.</span></span> <span data-ttu-id="7841c-190">Například neměňte z kolekce neupravené (to znamená bez `CollectionDataContractAttribute` atribut) do přizpůsobené jedné nebo vlastní kolekci pro jeden neupravené.</span><span class="sxs-lookup"><span data-stu-id="7841c-190">For example, do not change from a non-customized collection (that is, without the `CollectionDataContractAttribute` attribute) to a customized one or a customized collection to a non-customized one.</span></span> <span data-ttu-id="7841c-191">Také, neměňte vlastnosti na `CollectionDataContractAttribute` mezi verzemi.</span><span class="sxs-lookup"><span data-stu-id="7841c-191">Also, do not change the properties on the `CollectionDataContractAttribute` from version to version.</span></span> <span data-ttu-id="7841c-192">Jediná povolená změna je přidání vlastnosti Name nebo Namespace, pokud došlo ke změně názvu nebo oboru názvů základní typ kolekce a budete muset udělat svá data smlouvy názvem a oborem názvů stejné, jako v předchozí verzi.</span><span class="sxs-lookup"><span data-stu-id="7841c-192">The only allowed change is adding a Name or Namespace property if the underlying collection type's name or namespace has changed and you need to make its data contract name and namespace the same as in a previous version.</span></span>  
  
 <span data-ttu-id="7841c-193">Některé zde uvedené pokyny můžete bezpečně ignorovat při použití zvláštní okolnosti.</span><span class="sxs-lookup"><span data-stu-id="7841c-193">Some of the guidelines listed here can be safely ignored when special circumstances apply.</span></span> <span data-ttu-id="7841c-194">Ujistěte se, že plně chápete serializace, deserializace a schéma mechanismy upozorněni před odchýlení od pokynů.</span><span class="sxs-lookup"><span data-stu-id="7841c-194">Make sure you fully understand the serialization, deserialization, and schema mechanisms involved before deviating from the guidelines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7841c-195">Viz také:</span><span class="sxs-lookup"><span data-stu-id="7841c-195">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>
- <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>
- <xref:System.Runtime.Serialization.IExtensibleDataObject>
- <xref:System.ServiceModel.ServiceBehaviorAttribute>
- <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A>
- <xref:System.Runtime.Serialization.ExtensionDataObject>
- <xref:System.Runtime.Serialization.OnDeserializingAttribute>
- [<span data-ttu-id="7841c-196">Použití kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="7841c-196">Using Data Contracts</span></span>](../../../docs/framework/wcf/feature-details/using-data-contracts.md)
- [<span data-ttu-id="7841c-197">Správa verzí kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="7841c-197">Data Contract Versioning</span></span>](../../../docs/framework/wcf/feature-details/data-contract-versioning.md)
- [<span data-ttu-id="7841c-198">Názvy kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="7841c-198">Data Contract Names</span></span>](../../../docs/framework/wcf/feature-details/data-contract-names.md)
- [<span data-ttu-id="7841c-199">Kontrakty dat s dopřednou kompatibilitou</span><span class="sxs-lookup"><span data-stu-id="7841c-199">Forward-Compatible Data Contracts</span></span>](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md)
- [<span data-ttu-id="7841c-200">Zpětná volání serializace tolerantní k verzím</span><span class="sxs-lookup"><span data-stu-id="7841c-200">Version-Tolerant Serialization Callbacks</span></span>](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md)
