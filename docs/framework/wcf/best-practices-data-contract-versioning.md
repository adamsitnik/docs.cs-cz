---
title: 'Osvědčené postupy: Správa verzí kontraktů dat'
ms.date: 03/30/2017
helpviewer_keywords:
- data contracts
- service contracts
- best practices [WCF], data contract versioning
- Windows Communication Foundation, data contracts
ms.assetid: bf0ab338-4d36-4e12-8002-8ebfdeb346cb
ms.openlocfilehash: 4d500c37efa4a90e24b06cd2e886147e1f159d4e
ms.sourcegitcommit: 628e8147ca10187488e6407dab4c4e6ebe0cac47
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/15/2019
ms.locfileid: "72320782"
---
# <a name="best-practices-data-contract-versioning"></a><span data-ttu-id="1b8bb-102">Osvědčené postupy: Správa verzí kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="1b8bb-102">Best Practices: Data Contract Versioning</span></span>
<span data-ttu-id="1b8bb-103">Toto téma obsahuje seznam osvědčených postupů pro vytváření kontraktů dat, které se můžou v průběhu času vyvíjet snadno.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-103">This topic lists the best practices for creating data contracts that can evolve easily over time.</span></span> <span data-ttu-id="1b8bb-104">Další informace o kontraktech dat najdete v tématech v tématu [Použití kontraktů dat](./feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="1b8bb-104">For more information about data contracts, see the topics in [Using Data Contracts](./feature-details/using-data-contracts.md).</span></span>  
  
## <a name="note-on-schema-validation"></a><span data-ttu-id="1b8bb-105">Poznámka při ověřování schématu</span><span class="sxs-lookup"><span data-stu-id="1b8bb-105">Note on Schema Validation</span></span>  
 <span data-ttu-id="1b8bb-106">V diskuzi o verzích kontraktů dat je důležité si uvědomit, že schéma kontraktu dat exportovaného službou Windows Communication Foundation (WCF) nemá žádnou podporu správy verzí, kromě faktu, že ve výchozím nastavení jsou prvky označeny jako volitelné.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-106">In discussing data contract versioning, it is important to note that the data contract schema exported by Windows Communication Foundation (WCF) does not have any versioning support, other than the fact that elements are marked as optional by default.</span></span>  
  
 <span data-ttu-id="1b8bb-107">To znamená, že dokonce i Nejběžnější scénář správy verzí, jako je například přidání nového datového člena, nelze implementovat způsobem, který je bez problémů s ohledem na dané schéma.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-107">This means that even the most common versioning scenario, such as adding a new data member, cannot be implemented in a way that is seamless with regard to a given schema.</span></span> <span data-ttu-id="1b8bb-108">Novější verze kontraktu dat (například s novým datovým členem) neověřují pomocí starého schématu.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-108">The newer versions of a data contract (with a new data member, for example) do not validate using the old schema.</span></span>  
  
 <span data-ttu-id="1b8bb-109">Existuje však mnoho scénářů, ve kterých není vyžadováno striktní dodržování schématu.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-109">However, there are many scenarios in which strict schema compliance is not required.</span></span> <span data-ttu-id="1b8bb-110">Mnoho platforem webové služby, včetně webových služeb WCF a XML vytvořených pomocí ASP.NET, neprovádí ve výchozím nastavení ověřování schématu a proto tolerovat nadbytečné prvky, které nejsou popsány ve schématu.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-110">Many Web services platforms, including WCF and XML Web services created using ASP.NET, do not perform schema validation by default and therefore tolerate extra elements that are not described by the schema.</span></span> <span data-ttu-id="1b8bb-111">Při práci s těmito platformami je snazší implementovat řadu scénářů správy verzí.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-111">When working with such platforms, many versioning scenarios are easier to implement.</span></span>  
  
 <span data-ttu-id="1b8bb-112">Proto existují dvě sady pokynů pro správu verzí kontraktů dat: jedna sada pro scénáře, kdy je důležitá striktní platnost schématu, a další sada pro scénáře, pokud není.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-112">Thus, there are two sets of data contract versioning guidelines: one set for scenarios where strict schema validity is important, and another set for scenarios when it is not.</span></span>  
  
## <a name="versioning-when-schema-validation-is-required"></a><span data-ttu-id="1b8bb-113">Správa verzí při vyžadování ověření schématu</span><span class="sxs-lookup"><span data-stu-id="1b8bb-113">Versioning When Schema Validation Is Required</span></span>  
 <span data-ttu-id="1b8bb-114">Pokud je potřeba striktní platnost schématu pro všechny směry (nové – staré a staré až nové), kontrakty dat by se měly považovat za neměnné.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-114">If strict schema validity is required in all directions (new-to-old and old-to-new), data contracts should be considered immutable.</span></span> <span data-ttu-id="1b8bb-115">Pokud je vyžadována Správa verzí, je třeba vytvořit nový kontrakt dat s jiným názvem nebo oborem názvů a kontrakt služby používající datový typ by měl mít odpovídající verzi.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-115">If versioning is required, a new data contract should be created, with a different name or namespace, and the service contract using the data type should be versioned accordingly.</span></span>  
  
 <span data-ttu-id="1b8bb-116">Například kontrakt služby pro zpracování nákupních objednávek s názvem `PoProcessing` s operací `PostPurchaseOrder` přebírá parametr, který odpovídá kontraktu dat `PurchaseOrder`.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-116">For example, a purchase order processing service contract named `PoProcessing` with a `PostPurchaseOrder` operation takes a parameter that conforms to a `PurchaseOrder` data contract.</span></span> <span data-ttu-id="1b8bb-117">Pokud se má smlouva `PurchaseOrder` změnit, je nutné vytvořit novou kontrakt dat, tj. `PurchaseOrder2`, který obsahuje změny.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-117">If the `PurchaseOrder` contract has to change, you must create a new data contract, that is, `PurchaseOrder2`, which includes the changes.</span></span> <span data-ttu-id="1b8bb-118">Pak je nutné zpracovat verzi na úrovni smlouvy služby.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-118">You must then handle the versioning at the service contract level.</span></span> <span data-ttu-id="1b8bb-119">Například vytvořením operace `PostPurchaseOrder2`, která převezme parametr `PurchaseOrder2`, nebo vytvořením kontraktu služby `PoProcessing2`, kde operace `PostPurchaseOrder` převezme kontrakt dat `PurchaseOrder2`.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-119">For example, by creating a `PostPurchaseOrder2` operation that takes the `PurchaseOrder2` parameter, or by creating a `PoProcessing2` service contract where the `PostPurchaseOrder` operation takes a `PurchaseOrder2` data contract.</span></span>  
  
 <span data-ttu-id="1b8bb-120">Všimněte si, že změny v kontraktech dat, na které odkazují jiné datové kontrakty, se také zvyšují na vrstvu modelu služby.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-120">Note that changes in data contracts that are referenced by other data contracts also extend to the service model layer.</span></span> <span data-ttu-id="1b8bb-121">Například v předchozím scénáři se kontrakt dat `PurchaseOrder` nemusí měnit.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-121">For example, in the previous scenario the `PurchaseOrder` data contract does not need to change.</span></span> <span data-ttu-id="1b8bb-122">Obsahuje však datový člen kontraktu dat `Customer`, který zase obsahuje datový člen kontraktu dat `Address`, který je třeba změnit.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-122">However, it contains a data member of a `Customer` data contract, which in turn contained a data member of the `Address` data contract, which does need to be changed.</span></span> <span data-ttu-id="1b8bb-123">V takovém případě byste museli vytvořit kontrakt dat `Address2` s požadovanými změnami, kontraktem dat `Customer2`, který obsahuje datový člen `Address2`, a kontrakt dat `PurchaseOrder2`, který obsahuje datový člen `Customer2`.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-123">In that case, you would need to create an `Address2` data contract with the required changes, a `Customer2` data contract that contains the `Address2` data member, and a `PurchaseOrder2` data contract that contains a `Customer2` data member.</span></span> <span data-ttu-id="1b8bb-124">Stejně jako v předchozím případě musí být kontrakt služby také ve verzi.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-124">As in the previous case, the service contract would have to be versioned as well.</span></span>  
  
 <span data-ttu-id="1b8bb-125">I když v těchto příkladech se názvy změnily (připojením "2"), doporučuje se změnit obory názvů místo názvů připojením nových oborů názvů s číslem verze nebo datem.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-125">Although in these examples names are changed (by appending a "2"), the recommendation is to change namespaces instead of names by appending new namespaces with a version number or a date.</span></span> <span data-ttu-id="1b8bb-126">Například kontrakt dat `http://schemas.contoso.com/2005/05/21/PurchaseOrder` se změní na kontrakt dat `http://schemas.contoso.com/2005/10/14/PurchaseOrder`.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-126">For example, the `http://schemas.contoso.com/2005/05/21/PurchaseOrder` data contract would change to the `http://schemas.contoso.com/2005/10/14/PurchaseOrder` data contract.</span></span>  
  
 <span data-ttu-id="1b8bb-127">Další informace najdete v tématu osvědčené postupy: [Správa verzí služeb](service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="1b8bb-127">For more information, see Best Practices: [Service Versioning](service-versioning.md).</span></span>  
  
 <span data-ttu-id="1b8bb-128">V některých případech je potřeba zajistit striktní dodržování předpisů schématu pro zprávy odesílané vaší aplikací, ale nemůžou spoléhat na to, že příchozí zprávy budou odpovídat striktnímu schématu.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-128">Occasionally, you must guarantee strict schema compliance for messages sent by your application, but cannot rely on the incoming messages to be strictly schema-compliant.</span></span> <span data-ttu-id="1b8bb-129">V takovém případě existuje nebezpečí, že příchozí zpráva může obsahovat nadbytečné údaje.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-129">In this case, there is a danger that an incoming message might contain extraneous data.</span></span> <span data-ttu-id="1b8bb-130">Nadbytečné hodnoty jsou uloženy a vraceny službou WCF, takže mají za následek odeslání neplatných zpráv.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-130">The extraneous values are stored and returned by WCF and thus results in schema-invalid messages being sent.</span></span> <span data-ttu-id="1b8bb-131">Chcete-li se tomuto problému vyhnout, měla by být vypnuta funkce Round-Trip.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-131">To avoid this problem, the round-tripping feature should be turned off.</span></span> <span data-ttu-id="1b8bb-132">To můžete provést dvěma způsoby.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-132">There are two ways to do this.</span></span>  
  
- <span data-ttu-id="1b8bb-133">Neimplementujte rozhraní <xref:System.Runtime.Serialization.IExtensibleDataObject> na žádném z vašich typů.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-133">Do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface on any of your types.</span></span>  
  
- <span data-ttu-id="1b8bb-134">Použijte atribut <xref:System.ServiceModel.ServiceBehaviorAttribute> u kontraktu služby s vlastností <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> nastavenou na `true`.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-134">Apply a <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to your service contract with the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property set to `true`.</span></span>  
  
 <span data-ttu-id="1b8bb-135">Další informace o kulatých Trip najdete v článku [kontrakty dat kompatibilní s dopředně](./feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="1b8bb-135">For more information about round-tripping, see [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md).</span></span>  
  
## <a name="versioning-when-schema-validation-is-not-required"></a><span data-ttu-id="1b8bb-136">Správa verzí, když není vyžadováno ověření schématu</span><span class="sxs-lookup"><span data-stu-id="1b8bb-136">Versioning When Schema Validation Is Not Required</span></span>  
 <span data-ttu-id="1b8bb-137">Striktní kompatibilita schématu je vyžadována zřídka.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-137">Strict schema compliance is rarely required.</span></span> <span data-ttu-id="1b8bb-138">Řada platforem připustila navíc prvky, které nejsou popsány ve schématu.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-138">Many platforms tolerate extra elements not described by a schema.</span></span> <span data-ttu-id="1b8bb-139">Pokud je tato možnost tolerována, je možné použít úplnou sadu funkcí popsaných v tématu [Správa verzí kontraktů dat](./feature-details/data-contract-versioning.md) a [kontraktů dat kompatibilních s přesměrováním](./feature-details/forward-compatible-data-contracts.md) .</span><span class="sxs-lookup"><span data-stu-id="1b8bb-139">As long as this is tolerated, the full set of features described in [Data Contract Versioning](./feature-details/data-contract-versioning.md) and [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md) can be used.</span></span> <span data-ttu-id="1b8bb-140">Doporučuje se postupovat podle následujících pokynů.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-140">The following guidelines are recommended.</span></span>  
  
 <span data-ttu-id="1b8bb-141">Některé pokyny musí být následovány přesně za účelem odeslání nových verzí typu, kde je očekávána starší verze, nebo pro odeslání staré, kde se očekává nový.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-141">Some of the guidelines must be followed exactly in order to send new versions of a type where an older one is expected or send an old one where the new one is expected.</span></span> <span data-ttu-id="1b8bb-142">Jiné pokyny nejsou bezpodmínečně nutné, ale jsou tady uvedené, protože můžou být ovlivněné budoucí správou verzí schématu.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-142">Other guidelines are not strictly required, but are listed here because they may be affected by the future of schema versioning.</span></span>  
  
1. <span data-ttu-id="1b8bb-143">Neprovádějte pokus o verzi kontraktů dat podle typu dědičnosti.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-143">Do not attempt to version data contracts by type inheritance.</span></span> <span data-ttu-id="1b8bb-144">Chcete-li vytvořit novější verze, buď změňte kontrakt dat na existujícím typu, nebo vytvořte nový nesouvisející typ.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-144">To create later versions, either change the data contract on an existing type or create a new unrelated type.</span></span>  
  
2. <span data-ttu-id="1b8bb-145">Použití dědičnosti spolu s kontrakty dat je povoleno za předpokladu, že se dědičnost nepoužívá jako mechanismus správy verzí a že jsou dodržována určitá pravidla.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-145">The use of inheritance together with data contracts is allowed, provided that inheritance is not used as a versioning mechanism and that certain rules are followed.</span></span> <span data-ttu-id="1b8bb-146">Pokud typ je odvozen z určitého základního typu, neprovádějte jeho odvození od jiného základního typu v budoucí verzi (pokud nemá stejný kontrakt dat).</span><span class="sxs-lookup"><span data-stu-id="1b8bb-146">If a type derives from a certain base type, do not make it derive from a different base type in a future version (unless it has the same data contract).</span></span> <span data-ttu-id="1b8bb-147">K této výjimce existuje jedna výjimka: typ lze vložit do hierarchie mezi typem kontraktu dat a jeho základním typem, ale pouze v případě, že neobsahuje datové členy se stejnými názvy jako ostatní členové v jakékoli možné verzi ostatních typů v hierarchii.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-147">There is one exception to this: you can insert a type into the hierarchy between a data contract type and its base type, but only if it does not contain data members with the same names as other members in any possible versions of the other types in the hierarchy.</span></span> <span data-ttu-id="1b8bb-148">Obecně platí, že použití datových členů se stejnými názvy na různých úrovních stejné hierarchie dědičnosti může vést k vážným problémům se správou verzí a je třeba se jim vyhnout.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-148">In general, using data members with the same names at different levels of the same inheritance hierarchy can lead to serious versioning problems and should be avoided.</span></span>  
  
3. <span data-ttu-id="1b8bb-149">Od první verze kontraktu dat vždy implementujte <xref:System.Runtime.Serialization.IExtensibleDataObject>, aby se aktivovala kulatá Trip.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-149">Starting with the first version of a data contract, always implement <xref:System.Runtime.Serialization.IExtensibleDataObject> to enable round-tripping.</span></span> <span data-ttu-id="1b8bb-150">Další informace najdete v tématu [kontrakty dat kompatibilní s dopředné](./feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="1b8bb-150">For more information, see [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md).</span></span> <span data-ttu-id="1b8bb-151">Pokud jste vydali jednu nebo více verzí typu bez implementace tohoto rozhraní, implementujte ho v další verzi tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-151">If you have released one or more versions of a type without implementing this interface, implement it in the next version of the type.</span></span>  
  
4. <span data-ttu-id="1b8bb-152">V novějších verzích neměňte název kontraktu dat ani obor názvů.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-152">In later versions, do not change the data contract name or namespace.</span></span> <span data-ttu-id="1b8bb-153">Pokud měníte název nebo obor názvů typu, který je základem kontraktu dat, nezapomeňte zachovat název kontraktu dat a obor názvů pomocí příslušných mechanismů, jako je například vlastnost <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-153">If changing the name or namespace of the type underlying the data contract, be sure to preserve the data contract name and namespace by using the appropriate mechanisms, such as the <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> property of the <xref:System.Runtime.Serialization.DataContractAttribute>.</span></span> <span data-ttu-id="1b8bb-154">Další informace o pojmenování najdete v tématu [názvy kontraktů dat](./feature-details/data-contract-names.md).</span><span class="sxs-lookup"><span data-stu-id="1b8bb-154">For more information about naming, see [Data Contract Names](./feature-details/data-contract-names.md).</span></span>  
  
5. <span data-ttu-id="1b8bb-155">V novějších verzích Neměňte názvy žádných datových členů.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-155">In later versions, do not change the names of any data members.</span></span> <span data-ttu-id="1b8bb-156">Pokud se změní název pole, vlastnosti nebo události podkladového datového členu, použijte vlastnost `Name` <xref:System.Runtime.Serialization.DataMemberAttribute> k zachování existujícího názvu datového členu.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-156">If changing the name of the field, property, or event underlying the data member, use the `Name` property of the <xref:System.Runtime.Serialization.DataMemberAttribute> to preserve the existing data member name.</span></span>  
  
6. <span data-ttu-id="1b8bb-157">V novějších verzích neměňte typ žádného pole, vlastnosti nebo události podkladového datového členu tak, aby se projevil výsledný kontrakt dat pro tento datový člen.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-157">In later versions, do not change the type of any field, property, or event underlying a data member such that the resulting data contract for that data member changes.</span></span> <span data-ttu-id="1b8bb-158">Mějte na paměti, že typy rozhraní jsou ekvivalentní <xref:System.Object> pro účely určení očekávaného kontraktu dat.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-158">Keep in mind that interface types are equivalent to <xref:System.Object> for the purposes of determining the expected data contract.</span></span>  
  
7. <span data-ttu-id="1b8bb-159">V novějších verzích neměňte pořadí existujících datových členů úpravou vlastnosti <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> atributu <xref:System.Runtime.Serialization.DataMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-159">In later versions, do not change the order of the existing data members by adjusting the <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute.</span></span>  
  
8. <span data-ttu-id="1b8bb-160">V novějších verzích lze přidat nové datové členy.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-160">In later versions, new data members can be added.</span></span> <span data-ttu-id="1b8bb-161">Mají vždycky dodržovat tato pravidla:</span><span class="sxs-lookup"><span data-stu-id="1b8bb-161">They should always follow these rules:</span></span>  
  
    1. <span data-ttu-id="1b8bb-162">Vlastnost <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> by měla vždy zůstat na výchozí hodnotě `false`.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-162">The <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property should always be left at its default value of `false`.</span></span>  
  
    2. <span data-ttu-id="1b8bb-163">Pokud výchozí hodnota `null` nebo nula pro člena nesouhlasí, je třeba zadat metodu zpětného volání pomocí <xref:System.Runtime.Serialization.OnDeserializingAttribute> k poskytnutí přiměřené výchozí hodnoty pro případ, že člen není přítomen v příchozím datovém proudu.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-163">If a default value of `null` or zero for the member is unacceptable, a callback method should be provided using the <xref:System.Runtime.Serialization.OnDeserializingAttribute> to provide a reasonable default in case the member is not present in the incoming stream.</span></span> <span data-ttu-id="1b8bb-164">Další informace o zpětném volání naleznete v tématu [zpětná volání serializace odolná proti verzi](./feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="1b8bb-164">For more information about the callback, see [Version-Tolerant Serialization Callbacks](./feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
    3. <span data-ttu-id="1b8bb-165">Vlastnost <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> by se měla použít k ujištění, že se všechny nově přidané datové členy zobrazí po stávajících datových členech.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-165">The <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> property should be used to make sure that all of the newly added data members appear after the existing data members.</span></span> <span data-ttu-id="1b8bb-166">Doporučený postup je následující: žádný z datových členů v první verzi kontraktu dat by neměl mít nastavenou vlastnost `Order`.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-166">The recommended way of doing this is as follows: None of the data members in the first version of the data contract should have their `Order` property set.</span></span> <span data-ttu-id="1b8bb-167">U všech datových členů přidaných ve verzi 2 kontraktu dat by měla být vlastnost `Order` nastavená na hodnotu 2.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-167">All of the data members added in version 2 of the data contract should have their `Order` property set to 2.</span></span> <span data-ttu-id="1b8bb-168">U všech datových členů přidaných ve verzi 3 kontraktu dat by měla být `Order` nastavená na 3 atd.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-168">All of the data members added in version 3 of the data contract should have their `Order` set to 3, and so on.</span></span> <span data-ttu-id="1b8bb-169">Je povoleno mít více než jeden datový člen nastavený na stejné číslo `Order`.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-169">It is permissible to have more than one data member set to the same `Order` number.</span></span>  
  
9. <span data-ttu-id="1b8bb-170">Neodstraňujte datové členy v novějších verzích, a to ani v případě, že vlastnost <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> zůstala ve své výchozí vlastnosti `false` v předchozích verzích.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-170">Do not remove data members in later versions, even if the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property was left at its default property of `false` in prior versions.</span></span>  
  
10. <span data-ttu-id="1b8bb-171">Neměňte vlastnost `IsRequired` u všech existujících datových členů z verze na verzi.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-171">Do not change the `IsRequired` property on any existing data members from version to version.</span></span>  
  
11. <span data-ttu-id="1b8bb-172">Pro požadované datové členy (kde `IsRequired` je `true`) neměňte vlastnost `EmitDefaultValue` z verze na verzi.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-172">For required data members (where `IsRequired` is `true`), do not change the `EmitDefaultValue` property from version to version.</span></span>  
  
12. <span data-ttu-id="1b8bb-173">Nepokoušejte se vytvářet větve s více verzemi.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-173">Do not attempt to create branched versioning hierarchies.</span></span> <span data-ttu-id="1b8bb-174">To znamená, že by vždy měla být cesta alespoň v jednom směru od libovolné verze k jakékoli jiné verzi, a to pouze pomocí změn povolených těmito pokyny.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-174">That is, there should always be a path in at least one direction from any version to any other version using only the changes permitted by these guidelines.</span></span>  
  
     <span data-ttu-id="1b8bb-175">Například pokud verze 1 kontraktu dat osoby obsahuje pouze název datového členu, neměli byste vytvořit verzi 2a smlouvy, která přidává pouze člena věk a verze 2b přidávají pouze člena adresy.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-175">For example, if version 1 of a Person data contract contains only the Name data member, you should not create version 2a of the contract adding only the Age member and version 2b adding only the Address member.</span></span> <span data-ttu-id="1b8bb-176">Výsledkem z 2a na 2b by bylo odebrání stáří a přidání adresy; ve druhém směru by to vedlo k odebrání adres a přidání stáří.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-176">Going from 2a to 2b would involve removing Age and adding Address; going in the other direction would entail removing Address and adding Age.</span></span> <span data-ttu-id="1b8bb-177">Odebrání členů není v těchto pokynech povoleno.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-177">Removing members is not permitted by these guidelines.</span></span>  
  
13. <span data-ttu-id="1b8bb-178">Obecně byste neměli vytvářet nové podtypy stávajících typů kontraktů dat v nové verzi aplikace.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-178">You should generally not create new subtypes of existing data contract types in a new version of your application.</span></span> <span data-ttu-id="1b8bb-179">Podobně byste neměli vytvářet nové kontrakty dat, které se používají místo datových členů deklarovaných jako objekty nebo jako typy rozhraní.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-179">Likewise, you should not create new data contracts that are used in place of data members declared as Object or as interface types.</span></span> <span data-ttu-id="1b8bb-180">Vytváření těchto nových tříd je povoleno pouze v případě, že víte, že můžete přidat nové typy do seznamu známých typů všech instancí staré aplikace.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-180">Creating these new classes is allowed only when you know that you can add the new types to the known types list of all instances of your old application.</span></span> <span data-ttu-id="1b8bb-181">Například ve verzi 1 vaší aplikace můžete mít typ kontraktu dat LibraryItem s údaji o knize a podtypu kontraktu dat novinek.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-181">For example, in version 1 of your application, you may have the LibraryItem data contract type with the Book and Newspaper data contract subtypes.</span></span> <span data-ttu-id="1b8bb-182">LibraryItem by pak měl seznam známých typů, který obsahuje knihu a novinku.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-182">LibraryItem would then have a known types list that contains Book and Newspaper.</span></span> <span data-ttu-id="1b8bb-183">Předpokládejme, že jste teď přidali typ časopisu ve verzi 2, který je podtypem LibraryItem.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-183">Suppose you now add a Magazine type in version 2 which is a subtype of LibraryItem.</span></span> <span data-ttu-id="1b8bb-184">Pokud odešlete instanci časopisu z verze 2 na verzi 1, kontrakt dat časopisu se v seznamu známých typů nenalezne a vyvolá se výjimka.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-184">If you send a Magazine instance from version 2 to version 1, the Magazine data contract is not found in the list of known types and an exception is thrown.</span></span>  
  
14. <span data-ttu-id="1b8bb-185">Nemusíte přidávat ani odebírat členy výčtu mezi verzemi.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-185">You should not add or remove enumeration members between versions.</span></span> <span data-ttu-id="1b8bb-186">Členy výčtu byste také neměli přejmenovat, pokud nepoužijete vlastnost Name v atributu `EnumMemberAttribute`, abyste zachovali jejich názvy v modelu kontraktu dat.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-186">You should also not rename enumeration members, unless you use the Name property on the `EnumMemberAttribute` attribute to keep their names in the data contract model the same.</span></span>  
  
15. <span data-ttu-id="1b8bb-187">Kolekce jsou v modelu kontraktů dat zaměnitelné, jak je popsáno v tématu [typy kolekcí v kontraktech dat](./feature-details/collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="1b8bb-187">Collections are interchangeable in the data contract model as described in [Collection Types in Data Contracts](./feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="1b8bb-188">To vám umožní skvělou míru flexibility.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-188">This allows for a great degree of flexibility.</span></span> <span data-ttu-id="1b8bb-189">Ujistěte se však, že nechtěně nemůžete změnit typ kolekce z verze na verzi bez možnosti změny.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-189">However, make sure that you do not inadvertently change a collection type in a non-interchangeable way from version to version.</span></span> <span data-ttu-id="1b8bb-190">Neměňte například z nepřizpůsobené kolekce (to znamená bez atributu `CollectionDataContractAttribute`) na vlastní přizpůsobenou kolekci nebo přizpůsobenou kolekci na nepřizpůsobenou.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-190">For example, do not change from a non-customized collection (that is, without the `CollectionDataContractAttribute` attribute) to a customized one or a customized collection to a non-customized one.</span></span> <span data-ttu-id="1b8bb-191">Neměňte také vlastnosti `CollectionDataContractAttribute` z verze na verzi.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-191">Also, do not change the properties on the `CollectionDataContractAttribute` from version to version.</span></span> <span data-ttu-id="1b8bb-192">Jedinou povolenou změnou je přidání vlastnosti Name nebo Namespace, pokud došlo ke změně názvu nebo oboru názvů základní kolekce typu kolekce a je třeba zadat název kontraktu dat a obor názvů stejně jako v předchozí verzi.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-192">The only allowed change is adding a Name or Namespace property if the underlying collection type's name or namespace has changed and you need to make its data contract name and namespace the same as in a previous version.</span></span>  
  
 <span data-ttu-id="1b8bb-193">Některé z uvedených pokynů se můžou bezpečně ignorovat, když se uplatní zvláštní okolnosti.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-193">Some of the guidelines listed here can be safely ignored when special circumstances apply.</span></span> <span data-ttu-id="1b8bb-194">Ujistěte se, že plně rozumíte mechanismům serializace, deserializace a schématu, které se týkají, než se odchylují od pokynů.</span><span class="sxs-lookup"><span data-stu-id="1b8bb-194">Make sure you fully understand the serialization, deserialization, and schema mechanisms involved before deviating from the guidelines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1b8bb-195">Viz také:</span><span class="sxs-lookup"><span data-stu-id="1b8bb-195">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>
- <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>
- <xref:System.Runtime.Serialization.IExtensibleDataObject>
- <xref:System.ServiceModel.ServiceBehaviorAttribute>
- <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A>
- <xref:System.Runtime.Serialization.ExtensionDataObject>
- <xref:System.Runtime.Serialization.OnDeserializingAttribute>
- [<span data-ttu-id="1b8bb-196">Použití kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="1b8bb-196">Using Data Contracts</span></span>](./feature-details/using-data-contracts.md)
- [<span data-ttu-id="1b8bb-197">Správa verzí kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="1b8bb-197">Data Contract Versioning</span></span>](./feature-details/data-contract-versioning.md)
- [<span data-ttu-id="1b8bb-198">Názvy kontraktů dat</span><span class="sxs-lookup"><span data-stu-id="1b8bb-198">Data Contract Names</span></span>](./feature-details/data-contract-names.md)
- [<span data-ttu-id="1b8bb-199">Kontrakty dat s dopřednou kompatibilitou</span><span class="sxs-lookup"><span data-stu-id="1b8bb-199">Forward-Compatible Data Contracts</span></span>](./feature-details/forward-compatible-data-contracts.md)
- [<span data-ttu-id="1b8bb-200">Zpětná volání serializace tolerantní k verzím</span><span class="sxs-lookup"><span data-stu-id="1b8bb-200">Version-Tolerant Serialization Callbacks</span></span>](./feature-details/version-tolerant-serialization-callbacks.md)
