---
title: 'Postupy: Zákaz šifrování digitálních podpisů'
ms.date: 03/30/2017
ms.assetid: fd174313-ad81-4dca-898a-016ccaff8187
ms.openlocfilehash: e2fd2a058e636ebf398f9d0c71a93788ccd7dfa0
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/18/2019
ms.locfileid: "59325264"
---
# <a name="how-to-disable-encryption-of-digital-signatures"></a><span data-ttu-id="a5e48-102">Postupy: Zákaz šifrování digitálních podpisů</span><span class="sxs-lookup"><span data-stu-id="a5e48-102">How to: Disable Encryption of Digital Signatures</span></span>
<span data-ttu-id="a5e48-103">Ve výchozím nastavení zprávy je podepsaná a digitálně podpis zašifrují.</span><span class="sxs-lookup"><span data-stu-id="a5e48-103">By default, a message is signed and the signature is digitally encrypted.</span></span> <span data-ttu-id="a5e48-104">Toto se řídí vytváření vlastní vazby s instancí <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> nebo <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> a nastavení `MessageProtectionOrder` vlastnost buď třídy <xref:System.ServiceModel.Security.MessageProtectionOrder> hodnota výčtu.</span><span class="sxs-lookup"><span data-stu-id="a5e48-104">This is controlled by creating a custom binding with an instance of the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> and setting the `MessageProtectionOrder` property of either class to a <xref:System.ServiceModel.Security.MessageProtectionOrder> enumeration value.</span></span> <span data-ttu-id="a5e48-105">Výchozí hodnota je <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span><span class="sxs-lookup"><span data-stu-id="a5e48-105">The default is <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span></span> <span data-ttu-id="a5e48-106">Tento proces využívá až 30 procent déle než jednoduše podepisování a šifrování založené na celkovou velikost zprávy (Čím menší zprávy, tím větší dopad na výkon).</span><span class="sxs-lookup"><span data-stu-id="a5e48-106">This process consumes up to 30 percent more time than simply signing and encrypting based on the overall message size (the smaller the message, the greater the performance impact).</span></span> <span data-ttu-id="a5e48-107">Zakázáním šifrování podpisu, ale může umožnit útočníkovi možnost uhádnout obsah zprávy.</span><span class="sxs-lookup"><span data-stu-id="a5e48-107">Disabling encryption of the signature, however, might allow an attacker to guess the content of the message.</span></span> <span data-ttu-id="a5e48-108">Je to možné, proto prvek podpisu obsahuje kód hash ve formátu prostého textu každý podepsaný části ve zprávě.</span><span class="sxs-lookup"><span data-stu-id="a5e48-108">This is possible because the signature element contains the hash code of the plain text of every signed part in the message.</span></span> <span data-ttu-id="a5e48-109">Například i když obsah zprávy se šifrují ve výchozím nastavení, nešifrované podpis obsahuje kód hash před šifrování těla zprávy.</span><span class="sxs-lookup"><span data-stu-id="a5e48-109">For example, although the message body is encrypted by default, the unencrypted signature contains the hash code of the message body before the encryption.</span></span> <span data-ttu-id="a5e48-110">Pokud sadu možných hodnot pro část šifrovaný a podepsaný držitelem je nízká, útočník může být možné odvodit obsah podle hodnoty hash.</span><span class="sxs-lookup"><span data-stu-id="a5e48-110">If the set of possible values for the signed and encrypted part is small, an attacker might be able to deduce the contents by looking at the hash value.</span></span> <span data-ttu-id="a5e48-111">Šifrování podpis zmírňuje tohoto útoku.</span><span class="sxs-lookup"><span data-stu-id="a5e48-111">Encrypting the signature mitigates this attack vector.</span></span>  
  
 <span data-ttu-id="a5e48-112">Proto zákaz šifrování podpis, pouze pokud je hodnota obsah s nízkou nebo sadu možných hodnot obsahu je Nedeterministický i velké a výkonový zisk plynoucí je mnohem důležitější než zmírnění útoků popsané výše.</span><span class="sxs-lookup"><span data-stu-id="a5e48-112">Therefore, disable encryption of the signature only when the value of the content is low or the set of possible content values is large and nondeterministic, and the performance gain is more important than mitigating the attack described above.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a5e48-113">Pokud není nic ve zprávě, která je zašifrovaná, prvek podpisu není zašifrovaný, i když <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> nebo <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> je nastavena na <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span><span class="sxs-lookup"><span data-stu-id="a5e48-113">If there is nothing in the message that is encrypted, the signature element is not encrypted, even when the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property is set to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span></span> <span data-ttu-id="a5e48-114">K tomuto chování dochází i s vazeb poskytovaných systémem; všechny vazby poskytované systémem mají pořadí ochrany zprávy, nastavte na `SignBeforeEncryptAndEncryptSignature`.</span><span class="sxs-lookup"><span data-stu-id="a5e48-114">This behavior occurs even with system-provided bindings; all system-provided bindings have the message protection order set to `SignBeforeEncryptAndEncryptSignature`.</span></span> <span data-ttu-id="a5e48-115">Ale na webové služby WSDL (Description Language) WCF vygeneruje se pořád neobsahuje `<sp:EncryptSignature>` kontrolní výraz.</span><span class="sxs-lookup"><span data-stu-id="a5e48-115">However, the Web Services Description Language (WSDL) WCF generates will still contain the `<sp:EncryptSignature>` assertion.</span></span>  
  
### <a name="to-disable-digital-signing"></a><span data-ttu-id="a5e48-116">Chcete-li zakázat digitální podpis</span><span class="sxs-lookup"><span data-stu-id="a5e48-116">To disable digital signing</span></span>  
  
1. <span data-ttu-id="a5e48-117">Vytvoření <xref:System.ServiceModel.Channels.CustomBinding>.</span><span class="sxs-lookup"><span data-stu-id="a5e48-117">Create a <xref:System.ServiceModel.Channels.CustomBinding>.</span></span> <span data-ttu-id="a5e48-118">Další informace najdete v tématu [jak: Vytvoření vlastní vazby pomocí elementu SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span><span class="sxs-lookup"><span data-stu-id="a5e48-118">For more information, see [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span></span>  
  
2. <span data-ttu-id="a5e48-119">Buď přidejte <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> nebo <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> ke kolekci vazby.</span><span class="sxs-lookup"><span data-stu-id="a5e48-119">Add either an <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> to the binding collection.</span></span>  
  
3. <span data-ttu-id="a5e48-120">Nastavte <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> vlastnost <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>, nebo nastavte <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> vlastnost <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>.</span><span class="sxs-lookup"><span data-stu-id="a5e48-120">Set the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>, or set the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a5e48-121">Viz také:</span><span class="sxs-lookup"><span data-stu-id="a5e48-121">See also</span></span>

- [<span data-ttu-id="a5e48-122">Možnosti zabezpečení u vlastních vazeb</span><span class="sxs-lookup"><span data-stu-id="a5e48-122">Security Capabilities with Custom Bindings</span></span>](../../../../docs/framework/wcf/feature-details/security-capabilities-with-custom-bindings.md)
