---
title: Kompatibilita funkcí s částečnou důvěryhodností
ms.date: 03/30/2017
ms.assetid: a36a540b-1606-4e63-88e0-b7c59e0e6ab7
ms.openlocfilehash: 1ff3b6e4d54dcbc6cc884c9bcd1bf5aa4fb3a526
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/28/2019
ms.locfileid: "64603692"
---
# <a name="partial-trust-feature-compatibility"></a><span data-ttu-id="85e0b-102">Kompatibilita funkcí s částečnou důvěryhodností</span><span class="sxs-lookup"><span data-stu-id="85e0b-102">Partial Trust Feature Compatibility</span></span>
<span data-ttu-id="85e0b-103">Windows Communication Foundation (WCF) podporuje omezenou podmnožinou funkce při spouštění v částečně důvěryhodném prostředí.</span><span class="sxs-lookup"><span data-stu-id="85e0b-103">Windows Communication Foundation (WCF) supports a limited subset of functionality when running in a partially-trusted environment.</span></span> <span data-ttu-id="85e0b-104">Funkce podporované v částečném vztahu důvěryhodnosti jsou navržená kolem konkrétní škálu scénářů, jak je popsáno v [Podporované scénáře nasazení](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md) tématu.</span><span class="sxs-lookup"><span data-stu-id="85e0b-104">The features supported in partial trust are designed around a specific set of scenarios as described in the [Supported Deployment Scenarios](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md) topic.</span></span>  
  
## <a name="minimum-permission-requirements"></a><span data-ttu-id="85e0b-105">Požadavky na minimální oprávnění</span><span class="sxs-lookup"><span data-stu-id="85e0b-105">Minimum Permission Requirements</span></span>  
 <span data-ttu-id="85e0b-106">WCF podporuje podmnožinu funkcí v aplikace spuštěné v některé z následujících sad standardní pojmenovaných oprávnění:</span><span class="sxs-lookup"><span data-stu-id="85e0b-106">WCF supports a subset of features in applications running under either of the following standard named permission sets:</span></span>  
  
- <span data-ttu-id="85e0b-107">Střední oprávnění důvěryhodnosti</span><span class="sxs-lookup"><span data-stu-id="85e0b-107">Medium Trust permissions</span></span>  
  
- <span data-ttu-id="85e0b-108">Oprávnění pro zónu Internetu</span><span class="sxs-lookup"><span data-stu-id="85e0b-108">Internet Zone permissions</span></span>  
  
 <span data-ttu-id="85e0b-109">Pokus o použití WCF v částečně důvěryhodné aplikace s víc omezující oprávnění může vést k bezpečnostním výjimkám v době běhu.</span><span class="sxs-lookup"><span data-stu-id="85e0b-109">Attempting to use WCF in partially-trusted applications with more restrictive permissions may result in security exceptions at runtime.</span></span>  
  
## <a name="contracts"></a><span data-ttu-id="85e0b-110">Kontrakty</span><span class="sxs-lookup"><span data-stu-id="85e0b-110">Contracts</span></span>  
 <span data-ttu-id="85e0b-111">Kontrakty se vztahují následující omezení při spouštění v částečném vztahu důvěryhodnosti:</span><span class="sxs-lookup"><span data-stu-id="85e0b-111">Contracts are subject to the following restrictions when running under partial trust:</span></span>  
  
- <span data-ttu-id="85e0b-112">Třídu služby, který implementuje `[ServiceContract]` rozhraní musí být `public` a mít `public` konstruktoru.</span><span class="sxs-lookup"><span data-stu-id="85e0b-112">The service class that implements the `[ServiceContract]` interface must be `public` and have a `public` constructor.</span></span> <span data-ttu-id="85e0b-113">Pokud ho definuje `[OperationContract]` metod, musí být `public`.</span><span class="sxs-lookup"><span data-stu-id="85e0b-113">If it defines `[OperationContract]` methods, these must be `public`.</span></span> <span data-ttu-id="85e0b-114">Pokud místo toho implementuje `[ServiceContract]` rozhraní, tyto implementace metody může být explicitní nebo `private`za předpokladu, že `[ServiceContract]` rozhraní je `public`.</span><span class="sxs-lookup"><span data-stu-id="85e0b-114">If it instead implements a `[ServiceContract]` interface, those method implementations can be explicit or `private`, provided that the `[ServiceContract]` interface is `public`.</span></span>  
  
- <span data-ttu-id="85e0b-115">Při použití `[ServiceKnownType]` atribut, musí být zadaná metoda `public`.</span><span class="sxs-lookup"><span data-stu-id="85e0b-115">When using the `[ServiceKnownType]` attribute, the method specified must be `public`.</span></span>  
  
- <span data-ttu-id="85e0b-116">`[MessageContract]` třídy a jejich členy, může být `public`.</span><span class="sxs-lookup"><span data-stu-id="85e0b-116">`[MessageContract]` classes and their members can be `public`.</span></span> <span data-ttu-id="85e0b-117">Pokud `[MessageContract]` třída je definována v sestavení aplikace může být `internal` a mít `internal` členy.</span><span class="sxs-lookup"><span data-stu-id="85e0b-117">If the `[MessageContract]` class is defined in the application assembly it can be `internal` and have `internal` members.</span></span>  
  
## <a name="system-provided-bindings"></a><span data-ttu-id="85e0b-118">Vazby poskytované systémem</span><span class="sxs-lookup"><span data-stu-id="85e0b-118">System-Provided Bindings</span></span>  
 <span data-ttu-id="85e0b-119"><xref:System.ServiceModel.BasicHttpBinding> a <xref:System.ServiceModel.WebHttpBinding> jsou plně podporovány v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="85e0b-119">The <xref:System.ServiceModel.BasicHttpBinding> and <xref:System.ServiceModel.WebHttpBinding> are fully supported in a partial trust environment.</span></span> <span data-ttu-id="85e0b-120"><xref:System.ServiceModel.WSHttpBinding> Je podporováno pouze v režimu zabezpečení přenosu.</span><span class="sxs-lookup"><span data-stu-id="85e0b-120">The <xref:System.ServiceModel.WSHttpBinding> is supported for Transport security mode only.</span></span>  
  
 <span data-ttu-id="85e0b-121">Vazby, které používají přenosy jiné než HTTP, jako <xref:System.ServiceModel.NetTcpBinding>, <xref:System.ServiceModel.NetNamedPipeBinding>, nebo <xref:System.ServiceModel.NetMsmqBinding>, nejsou podporovány při spouštění v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="85e0b-121">Bindings that use transports other than HTTP, such as the <xref:System.ServiceModel.NetTcpBinding>, the <xref:System.ServiceModel.NetNamedPipeBinding>, or the <xref:System.ServiceModel.NetMsmqBinding>, are not supported when running in a partial trust environment.</span></span>  
  
## <a name="custom-bindings"></a><span data-ttu-id="85e0b-122">Vlastní vazby</span><span class="sxs-lookup"><span data-stu-id="85e0b-122">Custom Bindings</span></span>  
 <span data-ttu-id="85e0b-123">Vlastní vazby je možné vytvořit a použít v prostředí s částečnou důvěryhodností, ale musí dodržovat omezení uvedených v této části.</span><span class="sxs-lookup"><span data-stu-id="85e0b-123">Custom bindings can be created and used in a partial trust environment, but must follow the restrictions specified in this section.</span></span>  
  
### <a name="transports"></a><span data-ttu-id="85e0b-124">Přenosy</span><span class="sxs-lookup"><span data-stu-id="85e0b-124">Transports</span></span>  
 <span data-ttu-id="85e0b-125">Jediným povoleným názvem vazby přenosu prvky jsou <xref:System.ServiceModel.Channels.HttpTransportBindingElement> a <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="85e0b-125">The only allowed transport binding elements are <xref:System.ServiceModel.Channels.HttpTransportBindingElement> and <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span></span>  
  
### <a name="encoders"></a><span data-ttu-id="85e0b-126">Kodérů</span><span class="sxs-lookup"><span data-stu-id="85e0b-126">Encoders</span></span>  
 <span data-ttu-id="85e0b-127">Jsou povoleny následující kodéry:</span><span class="sxs-lookup"><span data-stu-id="85e0b-127">The following encoders are allowed:</span></span>  
  
- <span data-ttu-id="85e0b-128">Kodér textu (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="85e0b-128">The text encoder (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span></span>  
  
- <span data-ttu-id="85e0b-129">Binárního kodéru (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="85e0b-129">The binary encoder (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span></span>  
  
- <span data-ttu-id="85e0b-130">Kodér zprávy Web (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="85e0b-130">The Web Message encoder (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span></span>  
  
 <span data-ttu-id="85e0b-131">Kodérů zpráv přenosu optimalizace mechanismus (MTOM) nejsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="85e0b-131">The Message Transmission Optimization Mechanism (MTOM) encoders are not supported.</span></span>  
  
### <a name="security"></a><span data-ttu-id="85e0b-132">Zabezpečení</span><span class="sxs-lookup"><span data-stu-id="85e0b-132">Security</span></span>  
 <span data-ttu-id="85e0b-133">Částečně důvěryhodné aplikace můžou využívat funkce zabezpečení na úrovni přenosu WCF. pro zabezpečení komunikace.</span><span class="sxs-lookup"><span data-stu-id="85e0b-133">Partially-trusted applications can use WCF's transport-level security features for securing their communication.</span></span> <span data-ttu-id="85e0b-134">Zabezpečení na úrovni zprávy se nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="85e0b-134">Message-level security is not supported.</span></span> <span data-ttu-id="85e0b-135">Konfigurace vazby pro použití zabezpečení na úrovni zpráv za následek výjimku za běhu.</span><span class="sxs-lookup"><span data-stu-id="85e0b-135">Configuring a binding to use message-level security results in an exception at runtime.</span></span>  
  
### <a name="unsupported-bindings"></a><span data-ttu-id="85e0b-136">Nepodporované vazby</span><span class="sxs-lookup"><span data-stu-id="85e0b-136">Unsupported Bindings</span></span>  
 <span data-ttu-id="85e0b-137">Vazby, které používají spolehlivé zasílání zpráv, transakce nebo zabezpečení na úrovni zpráv nejsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="85e0b-137">Bindings that use reliable messaging, transactions, or message-level security are not supported.</span></span>  
  
## <a name="serialization"></a><span data-ttu-id="85e0b-138">Serializace</span><span class="sxs-lookup"><span data-stu-id="85e0b-138">Serialization</span></span>  
 <span data-ttu-id="85e0b-139">Jak <xref:System.Runtime.Serialization.DataContractSerializer> a <xref:System.Xml.Serialization.XmlSerializer> jsou podporovány v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="85e0b-139">Both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer> are supported in a partial trust environment.</span></span> <span data-ttu-id="85e0b-140">Nicméně použití <xref:System.Runtime.Serialization.DataContractSerializer> podléhá následující podmínky:</span><span class="sxs-lookup"><span data-stu-id="85e0b-140">However, use of the <xref:System.Runtime.Serialization.DataContractSerializer> is subject to the following conditions:</span></span>  
  
- <span data-ttu-id="85e0b-141">Všechny serializovatelný `[DataContract]` typy musí být `public`.</span><span class="sxs-lookup"><span data-stu-id="85e0b-141">All serializable `[DataContract]` types must be `public`.</span></span>  
  
- <span data-ttu-id="85e0b-142">Všechny serializovatelný `[DataMember]` pole nebo vlastnosti v `[DataContract]` typ musí být veřejný a čtení a zápisu.</span><span class="sxs-lookup"><span data-stu-id="85e0b-142">All serializable `[DataMember]` fields or properties in a `[DataContract]` type must be public and read/write.</span></span> <span data-ttu-id="85e0b-143">Serializace a deserializace [jen pro čtení](https://go.microsoft.com/fwlink/?LinkID=98854) polí není podporováno při spouštění v částečně důvěryhodné aplikaci WCF.</span><span class="sxs-lookup"><span data-stu-id="85e0b-143">The serialization and deserialization of [readonly](https://go.microsoft.com/fwlink/?LinkID=98854) fields is not supported when running WCF in a partially-trusted application.</span></span>  
  
- <span data-ttu-id="85e0b-144"> `[Serializable]` /ISerializable programovacího modelu není podporován v částečném vztahu důvěryhodnosti prostředí.</span><span class="sxs-lookup"><span data-stu-id="85e0b-144">The `[Serializable]`/ISerializable programming model is not supported in a partial trust environment.</span></span>  
  
- <span data-ttu-id="85e0b-145">Známé typy je třeba zadat v kódu nebo konfigurace na úrovni počítače (machine.config).</span><span class="sxs-lookup"><span data-stu-id="85e0b-145">Known types must be specified in code or machine-level configuration (machine.config).</span></span> <span data-ttu-id="85e0b-146">Známé typy nelze zadat v konfigurace na úrovni aplikace z bezpečnostních důvodů.</span><span class="sxs-lookup"><span data-stu-id="85e0b-146">Known types cannot be specified in application-level configuration for security reasons.</span></span>  
  
- <span data-ttu-id="85e0b-147">Typy, které implementují <xref:System.Runtime.Serialization.IObjectReference> vyvolat výjimku v částečně důvěryhodném prostředí.</span><span class="sxs-lookup"><span data-stu-id="85e0b-147">Types that implement <xref:System.Runtime.Serialization.IObjectReference> throw an exception in a partially-trusted environment.</span></span>  
  
 <span data-ttu-id="85e0b-148">V části serializace v [částečné důvěryhodnosti osvědčené postupy](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md) Další informace o zabezpečení při použití <xref:System.Runtime.Serialization.DataContractSerializer> bezpečně v částečně důvěryhodné aplikaci.</span><span class="sxs-lookup"><span data-stu-id="85e0b-148">See the Serialization section in [Partial Trust Best Practices](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md) for more information about security when using <xref:System.Runtime.Serialization.DataContractSerializer> safely in a partially-trusted application.</span></span>  
  
### <a name="collection-types"></a><span data-ttu-id="85e0b-149">Typy kolekcí</span><span class="sxs-lookup"><span data-stu-id="85e0b-149">Collection Types</span></span>  
 <span data-ttu-id="85e0b-150">Některé typy kolekcí implementovat oba <xref:System.Collections.Generic.IEnumerable%601> a <xref:System.Collections.IEnumerable>.</span><span class="sxs-lookup"><span data-stu-id="85e0b-150">Some collection types implement both <xref:System.Collections.Generic.IEnumerable%601> and <xref:System.Collections.IEnumerable>.</span></span> <span data-ttu-id="85e0b-151">Mezi příklady patří typy, které implementují <xref:System.Collections.Generic.ICollection%601>.</span><span class="sxs-lookup"><span data-stu-id="85e0b-151">Examples include types that implement <xref:System.Collections.Generic.ICollection%601>.</span></span> <span data-ttu-id="85e0b-152">Tyto typy můžou implementovat `public` provádění `GetEnumerator()`a explicitní implementaci `GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="85e0b-152">Such types can implement a `public` implementation of `GetEnumerator()`, and an explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="85e0b-153">V takovém případě <xref:System.Runtime.Serialization.DataContractSerializer> vyvolá `public` provádění `GetEnumerator()`a ne explicitní implementaci `GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="85e0b-153">In this case, <xref:System.Runtime.Serialization.DataContractSerializer> invokes the `public` implementation of `GetEnumerator()`, and not the explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="85e0b-154">Pokud žádná z `GetEnumerator()` implementace jsou `public` a jsou všechny explicitní implementací, pak <xref:System.Runtime.Serialization.DataContractSerializer> vyvolá `IEnumerable.GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="85e0b-154">If none of the `GetEnumerator()` implementations are `public` and all are explicit implementations, then <xref:System.Runtime.Serialization.DataContractSerializer> invokes `IEnumerable.GetEnumerator()`.</span></span>  
  
 <span data-ttu-id="85e0b-155">U typů kolekce při WCF běží v částečném vztahu důvěryhodnosti prostředí, pokud žádná z `GetEnumerator()` implementace jsou `public`, nebo žádná z nich jsou implementace explicitního rozhraní a pak je vyvolána výjimka zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="85e0b-155">For collection types when WCF is running in a partial trust environment, if none of the `GetEnumerator()` implementations are `public`, or none of them are explicit interface implementations, then a security exception is thrown.</span></span>  
  
### <a name="netdatacontractserializer"></a><span data-ttu-id="85e0b-156">NetDataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="85e0b-156">NetDataContractSerializer</span></span>  
 <span data-ttu-id="85e0b-157">Mnoho typů kolekce rozhraní .NET Framework, jako <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> a <xref:System.Collections.Hashtable> nejsou podporovány <xref:System.Runtime.Serialization.NetDataContractSerializer> v částečném vztahu důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="85e0b-157">Many .NET Framework collection types such as <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> and <xref:System.Collections.Hashtable> are not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span> <span data-ttu-id="85e0b-158">Tyto typy mají `[Serializable]` nastaven atribut a jak bylo uvedeno dříve v části serializace, tento atribut není podporován v částečném vztahu důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="85e0b-158">These types have the `[Serializable]` attribute set, and as stated previously in the Serialization section, this attribute is not supported in partial trust.</span></span> <span data-ttu-id="85e0b-159"><xref:System.Runtime.Serialization.DataContractSerializer> Zpracovává kolekce zvláštním způsobem a je tedy možné jsme toto omezení, ale <xref:System.Runtime.Serialization.NetDataContractSerializer> nemá žádný takový mechanismus pro toto omezení obejít.</span><span class="sxs-lookup"><span data-stu-id="85e0b-159">The <xref:System.Runtime.Serialization.DataContractSerializer> treats collections in a special way and is thus able to get around this restriction, but the <xref:System.Runtime.Serialization.NetDataContractSerializer> has no such mechanism to circumvent this restriction.</span></span>  
  
 <span data-ttu-id="85e0b-160"><xref:System.DateTimeOffset> Typ není podporován <xref:System.Runtime.Serialization.NetDataContractSerializer> v částečném vztahu důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="85e0b-160">The <xref:System.DateTimeOffset> type is not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span>  
  
 <span data-ttu-id="85e0b-161">Náhradní nelze použít s <xref:System.Runtime.Serialization.NetDataContractSerializer> (pomocí <xref:System.Runtime.Serialization.SurrogateSelector> mechanismus) při spouštění v částečném vztahu důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="85e0b-161">A surrogate cannot be used with the <xref:System.Runtime.Serialization.NetDataContractSerializer> (using the <xref:System.Runtime.Serialization.SurrogateSelector> mechanism) when running in partial trust.</span></span> <span data-ttu-id="85e0b-162">Všimněte si, že toto omezení platí pro použití náhradní, ne k jeho serializace.</span><span class="sxs-lookup"><span data-stu-id="85e0b-162">Note that this restriction applies to using a surrogate, not to serializing it.</span></span>  
  
## <a name="enabling-common-behaviors-to-run"></a><span data-ttu-id="85e0b-163">Povolení společné chování pro spuštění</span><span class="sxs-lookup"><span data-stu-id="85e0b-163">Enabling Common Behaviors to Run</span></span>  
 <span data-ttu-id="85e0b-164">Chování služby nebo koncového bodu není označené <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atribut (APTCA), které jsou přidány do [ \<commonBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/commonbehaviors.md) oddílu konfiguračního souboru se nespustí, když aplikace běží v částečném vztahu důvěryhodnosti Pokud k tomu dojde, je vyvolána prostředí a žádná výjimka.</span><span class="sxs-lookup"><span data-stu-id="85e0b-164">Service or endpoint behaviors not marked with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute (APTCA) that are added to the [\<commonBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/commonbehaviors.md) section of a configuration file are not run when the application runs in a partial trust environment and no exception is thrown when this occurs.</span></span> <span data-ttu-id="85e0b-165">Pokud chcete vynutit spuštění společné chování, musíte udělat jednu z následujících možností:</span><span class="sxs-lookup"><span data-stu-id="85e0b-165">To enforce the running of common behaviors, you must do one of the following options:</span></span>  
  
- <span data-ttu-id="85e0b-166">Označit vaše běžné chování s <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atribut tak, aby ji můžete spustit po nasazení jako aplikace s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="85e0b-166">Mark your common behavior with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute so that it can run when deployed as a partial trust application.</span></span> <span data-ttu-id="85e0b-167">Všimněte si, že položka registru můžete nastavit v počítači zabránit sestavení APTCA označené spouštění.</span><span class="sxs-lookup"><span data-stu-id="85e0b-167">Note that a registry entry can be set on the computer to prevent APTCA-marked assemblies from running.</span></span> <span data-ttu-id="85e0b-168">.</span><span class="sxs-lookup"><span data-stu-id="85e0b-168">.</span></span>  
  
- <span data-ttu-id="85e0b-169">Ujistěte se, že pokud je aplikace nasazená jako plně důvěryhodné aplikace, uživatelé nemohou upravovat nastavení zabezpečení přístupu kódu a spusťte aplikaci v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="85e0b-169">Ensure that if the application is deployed as a fully-trusted application that users cannot modify the code-access security settings to run the application in a partial trust environment.</span></span> <span data-ttu-id="85e0b-170">Pokud můžete, chování se nespustí a není vyvolána žádná výjimka.</span><span class="sxs-lookup"><span data-stu-id="85e0b-170">If they can do so, the behavior does not run and no exception is thrown.</span></span> <span data-ttu-id="85e0b-171">Aby se zajistilo to, najdete v článku **levelfinal** možnost použití [Caspol.exe (nástroj zásad zabezpečení přístupu kódu)](../../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="85e0b-171">To ensure this, see the **levelfinal** option using [Caspol.exe (Code Access Security Policy Tool)](../../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
 <span data-ttu-id="85e0b-172">Příklad běžné chování najdete v tématu [jak: Uzamknutí koncových bodů v podniku](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span><span class="sxs-lookup"><span data-stu-id="85e0b-172">For an example of a common behavior, see [How to: Lock Down Endpoints in the Enterprise](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span></span>  
  
## <a name="configuration"></a><span data-ttu-id="85e0b-173">Konfigurace</span><span class="sxs-lookup"><span data-stu-id="85e0b-173">Configuration</span></span>  
 <span data-ttu-id="85e0b-174">S jednou výjimkou může částečně důvěryhodným kódem načíst jenom WCF konfigurační oddíly funkce v místním `app.config` souboru.</span><span class="sxs-lookup"><span data-stu-id="85e0b-174">With one exception, partially-trusted code can only load WCF configuration sections in the local `app.config` file.</span></span> <span data-ttu-id="85e0b-175">Načíst WCF konfigurační oddíly funkce, které odkazují na části WCF v souboru machine.config nebo kořenového souboru web.config vyžaduje ConfigurationPermission(Unrestricted).</span><span class="sxs-lookup"><span data-stu-id="85e0b-175">To load WCF configuration sections that reference WCF sections in machine.config or in a root web.config file requires ConfigurationPermission(Unrestricted).</span></span> <span data-ttu-id="85e0b-176">Bez tohoto oprávnění odkazy na WCF konfigurační oddíly (chování, vazby) mimo místní konfigurační soubor výsledkem výjimku při načtení konfigurace.</span><span class="sxs-lookup"><span data-stu-id="85e0b-176">Without this permission, references to WCF configuration sections (behaviors, bindings) outside of the local configuration file results in an exception when the configuration is loaded.</span></span>  
  
 <span data-ttu-id="85e0b-177">Jedinou výjimkou je známý typ konfigurace pro serializaci, jak je popsáno v části serializace v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="85e0b-177">The one exception is known-type configuration for serialization, as described in the Serialization section of this topic.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="85e0b-178">Konfigurace rozšíření jsou podporovány pouze při spuštění v plné důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="85e0b-178">Configuration extensions are only supported when running under Full Trust.</span></span>  
  
## <a name="diagnostics"></a><span data-ttu-id="85e0b-179">Diagnostika</span><span class="sxs-lookup"><span data-stu-id="85e0b-179">Diagnostics</span></span>  
  
### <a name="event-logging"></a><span data-ttu-id="85e0b-180">Protokolování událostí</span><span class="sxs-lookup"><span data-stu-id="85e0b-180">Event Logging</span></span>  
 <span data-ttu-id="85e0b-181">Omezené události protokolování je podporován v částečném vztahu důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="85e0b-181">Limited event logging is supported under partial trust.</span></span> <span data-ttu-id="85e0b-182">Pouze služba Aktivace chyb a selhání protokolování trasování/zpráv jsou protokolovány do protokolu událostí.</span><span class="sxs-lookup"><span data-stu-id="85e0b-182">Only service activation faults and tracing/message logging failures are logged to the Event Log.</span></span> <span data-ttu-id="85e0b-183">Maximální počet událostí, které můžete protokolovat procesem je 5, aby se zabránilo nadměrnému zprávy zápisu do protokolu událostí.</span><span class="sxs-lookup"><span data-stu-id="85e0b-183">The maximum number of events that can be logged by a process is 5, to avoid writing excessive messages to the Event Log.</span></span>  
  
### <a name="message-logging"></a><span data-ttu-id="85e0b-184">Protokolování zpráv</span><span class="sxs-lookup"><span data-stu-id="85e0b-184">Message Logging</span></span>  
 <span data-ttu-id="85e0b-185">Protokolování zpráv nefunguje při spuštění WCF v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="85e0b-185">Message logging does not work when WCF is run in a partial trust environment.</span></span> <span data-ttu-id="85e0b-186">Pokud je povoleno v částečném vztahu důvěryhodnosti, neselže pro aktivaci služeb, ale je zaznamenána žádná zpráva.</span><span class="sxs-lookup"><span data-stu-id="85e0b-186">If enabled under partial trust, it does not fail service activation, but no message is logged.</span></span>  
  
### <a name="tracing"></a><span data-ttu-id="85e0b-187">Trasování</span><span class="sxs-lookup"><span data-stu-id="85e0b-187">Tracing</span></span>  
 <span data-ttu-id="85e0b-188">Omezené trasování funkce je k dispozici při spuštění v prostředí s částečnou důvěryhodností.</span><span class="sxs-lookup"><span data-stu-id="85e0b-188">Restricted tracing functionality is available when running in a partial trust environment.</span></span> <span data-ttu-id="85e0b-189">V <`listeners`> element v konfiguračním souboru, jsou pouze typy, které můžete přidat <xref:System.Diagnostics.TextWriterTraceListener> a nové <xref:System.Diagnostics.EventSchemaTraceListener>.</span><span class="sxs-lookup"><span data-stu-id="85e0b-189">In the <`listeners`> element in the configuration file, the only types that you can add are <xref:System.Diagnostics.TextWriterTraceListener> and the new <xref:System.Diagnostics.EventSchemaTraceListener>.</span></span> <span data-ttu-id="85e0b-190">Použití standardu <xref:System.Diagnostics.XmlWriterTraceListener> může způsobit nesprávné nebo neúplné protokoly.</span><span class="sxs-lookup"><span data-stu-id="85e0b-190">Use of the standard <xref:System.Diagnostics.XmlWriterTraceListener> may result in incomplete or incorrect logs.</span></span>  
  
 <span data-ttu-id="85e0b-191">Podporované trasování zdroje jsou:</span><span class="sxs-lookup"><span data-stu-id="85e0b-191">Supported trace sources are:</span></span>  
  
- <xref:System.ServiceModel>  
  
- <xref:System.Runtime.Serialization>  
  
- <span data-ttu-id="85e0b-192"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors>, a <xref:System.IdentityModel.Tokens>.</span><span class="sxs-lookup"><span data-stu-id="85e0b-192"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors>, and <xref:System.IdentityModel.Tokens>.</span></span>  
  
 <span data-ttu-id="85e0b-193">Nejsou podporovány následující zdroje trasování:</span><span class="sxs-lookup"><span data-stu-id="85e0b-193">The following trace sources are not supported:</span></span>  
  
- <span data-ttu-id="85e0b-194">CardSpace</span><span class="sxs-lookup"><span data-stu-id="85e0b-194">CardSpace</span></span>  
  
- <xref:System.IO.Log>  

- <span data-ttu-id="85e0b-195">[System.ServiceModel.Internal.TransactionBridge](https://docs.microsoft.com/previous-versions/aa346556(v=vs.110))]</span><span class="sxs-lookup"><span data-stu-id="85e0b-195">[System.ServiceModel.Internal.TransactionBridge](https://docs.microsoft.com/previous-versions/aa346556(v=vs.110))]</span></span>
  
 <span data-ttu-id="85e0b-196">Následující členové <xref:System.Diagnostics.TraceOptions> by neměl být zadaný výčet:</span><span class="sxs-lookup"><span data-stu-id="85e0b-196">The following members of the <xref:System.Diagnostics.TraceOptions> enumeration should not be specified:</span></span>  
  
- <xref:System.Diagnostics.TraceOptions.Callstack?displayProperty=nameWithType>  
  
- <xref:System.Diagnostics.TraceOptions.ProcessId?displayProperty=nameWithType>  
  
 <span data-ttu-id="85e0b-197">Při použití trasování v částečně důvěryhodném prostředí, ujistěte se, že aplikace má dostatečná oprávnění k uložení výstupu naslouchací služby stopy.</span><span class="sxs-lookup"><span data-stu-id="85e0b-197">When using tracing in a partial trust environment, ensure that the application has sufficient permissions to store the output of the trace listener.</span></span> <span data-ttu-id="85e0b-198">Například při použití <xref:System.Diagnostics.TextWriterTraceListener> zapisovat výstup trasování do textového souboru, ujistěte se, že aplikace má potřebné FileIOPermission vyžadovaných k zápisu úspěšně pro trasovacího souboru.</span><span class="sxs-lookup"><span data-stu-id="85e0b-198">For example, when using the <xref:System.Diagnostics.TextWriterTraceListener> to write trace output to a text file, ensure that the application has the necessary FileIOPermission required to successfully write to the trace file.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="85e0b-199">Aby nedošlo k zaplavení trasovací soubory s duplicitní chyby, zakáže WCF sledování prostředku nebo akce po prvním selhání zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="85e0b-199">To avoid flooding the trace files with duplicate errors, WCF disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="85e0b-200">Existuje jedna výjimka trasování pro každý přístup k problémovému prostředku poprvé, který je proveden pokus o přístup k prostředku nebo provedení akce.</span><span class="sxs-lookup"><span data-stu-id="85e0b-200">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="wcf-service-host"></a><span data-ttu-id="85e0b-201">Hostitel služby WCF</span><span class="sxs-lookup"><span data-stu-id="85e0b-201">WCF Service Host</span></span>  
 <span data-ttu-id="85e0b-202">Hostitel služby WCF nepodporuje částečným vztahem důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="85e0b-202">WCF service host does not support partial trust.</span></span> <span data-ttu-id="85e0b-203">Pokud chcete použít službu WCF v částečném vztahu důvěryhodnosti, nepoužívejte šablony projektu Knihovna služby WCF v sadě Visual Studio k vytvoření vaší služby.</span><span class="sxs-lookup"><span data-stu-id="85e0b-203">If you want to use a WCF service in partial trust, do not use the WCF Service Library Project template in Visual Studio to build your service.</span></span> <span data-ttu-id="85e0b-204">Místo toho vytvořte nový web v sadě Visual Studio výběrem šablony webu služby WCF, která může hostovat službu na webovém serveru, na kterém se podporuje částečné důvěryhodnosti WCF.</span><span class="sxs-lookup"><span data-stu-id="85e0b-204">Instead, create a new Web site in Visual Studio by choosing the WCF service Web site template, which can host the service in a Web server on which WCF partial trust is supported.</span></span>  
  
## <a name="other-limitations"></a><span data-ttu-id="85e0b-205">Další omezení</span><span class="sxs-lookup"><span data-stu-id="85e0b-205">Other Limitations</span></span>  
 <span data-ttu-id="85e0b-206">WCF je obvykle omezená na aspekty zabezpečení podle ní stanovené hostitelské aplikace.</span><span class="sxs-lookup"><span data-stu-id="85e0b-206">WCF is generally limited to the security considerations imposed upon it by the hosting application.</span></span> <span data-ttu-id="85e0b-207">Například pokud WCF je hostitelem v aplikace prohlížeče XAML (XBAP), je v souladu s omezeními XBAP, jak je popsáno v [Windows Presentation Foundation částečné důvěryhodnosti zabezpečení](https://go.microsoft.com/fwlink/?LinkId=89138).</span><span class="sxs-lookup"><span data-stu-id="85e0b-207">For example, if WCF is hosted in a XAML Browser Application (XBAP), it is subject to XBAP limitations, as described in [Windows Presentation Foundation Partial Trust Security](https://go.microsoft.com/fwlink/?LinkId=89138).</span></span>  
  
 <span data-ttu-id="85e0b-208">Tyhle další funkce nejsou povoleny při spuštění indigo2 v prostředí s částečným vztahem důvěryhodnosti:</span><span class="sxs-lookup"><span data-stu-id="85e0b-208">The following additional features are not enabled when running indigo2 in a partial trust environment:</span></span>  
  
- <span data-ttu-id="85e0b-209">Windows Management Instrumentation (WMI)</span><span class="sxs-lookup"><span data-stu-id="85e0b-209">Windows Management Instrumentation (WMI)</span></span>  
  
- <span data-ttu-id="85e0b-210">Protokolování událostí je povolená jen částečně (viz diskuze v **diagnostiky** části).</span><span class="sxs-lookup"><span data-stu-id="85e0b-210">Event logging is only partially enabled (see discussion in **Diagnostics** section).</span></span>  
  
- <span data-ttu-id="85e0b-211">Čítače výkonu</span><span class="sxs-lookup"><span data-stu-id="85e0b-211">Performance counters</span></span>  
  
 <span data-ttu-id="85e0b-212">Využívání funkce WCF, které nejsou podporovány v prostředí s částečnou důvěryhodností může vést k výjimkám v době běhu.</span><span class="sxs-lookup"><span data-stu-id="85e0b-212">Use of WCF features that are not supported in a partial trust environment may result in exceptions at runtime.</span></span>  
  
## <a name="unlisted-features"></a><span data-ttu-id="85e0b-213">Neuvedené v seznamu funkcí</span><span class="sxs-lookup"><span data-stu-id="85e0b-213">Unlisted Features</span></span>  
 <span data-ttu-id="85e0b-214">Nejlepší způsob, jak zjistit, že část informací nebo akce není k dispozici při spuštění v prostředí s částečnou důvěryhodností pro pokus o přístup k prostředku nebo provedení akce uvnitř `try` bloku a potom `catch` selhání.</span><span class="sxs-lookup"><span data-stu-id="85e0b-214">The best way to discover that a piece of information or action is unavailable when running in a partial trust environment is to try to access the resource or do the action inside of a `try` block, and then `catch` the failure.</span></span> <span data-ttu-id="85e0b-215">Aby nedošlo k zaplavení trasovací soubory s duplicitní chyby, zakáže WCF sledování prostředku nebo akce po prvním selhání zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="85e0b-215">To avoid flooding the trace files with duplicate errors, WCF disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="85e0b-216">Existuje jedna výjimka trasování pro každý přístup k problémovému prostředku poprvé, který je proveden pokus o přístup k prostředku nebo provedení akce.</span><span class="sxs-lookup"><span data-stu-id="85e0b-216">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="85e0b-217">Viz také:</span><span class="sxs-lookup"><span data-stu-id="85e0b-217">See also</span></span>

- <xref:System.ServiceModel.Channels.HttpTransportBindingElement>
- <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>
- <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>
- <xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>
- [<span data-ttu-id="85e0b-218">Podporované scénáře nasazení</span><span class="sxs-lookup"><span data-stu-id="85e0b-218">Supported Deployment Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md)
- [<span data-ttu-id="85e0b-219">Osvědčené postupy pro částečnou důvěryhodnost</span><span class="sxs-lookup"><span data-stu-id="85e0b-219">Partial Trust Best Practices</span></span>](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md)
