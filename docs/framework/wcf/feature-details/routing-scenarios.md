---
title: Scénáře směrování
ms.date: 03/30/2017
helpviewer_keywords:
- rounting [WCF], scenarios
ms.assetid: ec22f308-665a-413e-9f94-7267cb665dab
ms.openlocfilehash: cab683c11c20f3373a1140a9fd5ad499b2e696e5
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/28/2019
ms.locfileid: "64626050"
---
# <a name="routing-scenarios"></a><span data-ttu-id="dd085-102">Scénáře směrování</span><span class="sxs-lookup"><span data-stu-id="dd085-102">Routing Scenarios</span></span>
<span data-ttu-id="dd085-103">Směrovací služba je vysoce přizpůsobitelné, může být obtížné navrhnout efektivní logiku směrování při vytváření nové konfigurace od začátku.</span><span class="sxs-lookup"><span data-stu-id="dd085-103">While the Routing Service is highly customizable, it can be a challenge to design efficient routing logic when creating a new configuration from scratch.</span></span>  <span data-ttu-id="dd085-104">Existují však několik běžných scénářů, které následují většina konfigurací směrovací služby.</span><span class="sxs-lookup"><span data-stu-id="dd085-104">However, there are several common scenarios that most Routing Service configurations follow.</span></span> <span data-ttu-id="dd085-105">Zatímco tyto scénáře se nemusí vztahovat přímo na konkrétní konfiguraci, pochopení, jak lze konfigurovat směrovací služba pro zpracování těchto scénářů bude pomoc při Princip služby směrování.</span><span class="sxs-lookup"><span data-stu-id="dd085-105">While these scenarios may not apply directly to your specific configuration, understanding how the Routing Service can be configured to handle these scenarios will aid you in understanding the Routing Service.</span></span>  
  
## <a name="common-scenarios"></a><span data-ttu-id="dd085-106">Obvyklé scénáře</span><span class="sxs-lookup"><span data-stu-id="dd085-106">Common Scenarios</span></span>  
 <span data-ttu-id="dd085-107">Základní použití směrovací služba je agregovat více cílové koncové body a snížit počet koncových bodů, které jsou vystaveny pro klientské aplikace a pak pomocí filtry zpráv pro každou zprávu směrování do správné cíl.</span><span class="sxs-lookup"><span data-stu-id="dd085-107">The most basic use of the Routing Service is to aggregate multiple destination endpoints to reduce the number of endpoints exposed to the client applications, and then use message filters to route each message to the correct destination.</span></span> <span data-ttu-id="dd085-108">Zprávy mohou být směrována na základě fyzické nebo logické zpracování požadavků, jako je například typ zprávy, které musí být zpracovány určité služby, nebo na základě libovolného obchodních potřeb, jako je například poskytnutí prioritu zpracování zprávy z konkrétního zdroje.</span><span class="sxs-lookup"><span data-stu-id="dd085-108">Messages may be routed based on logical or physical processing requirements, such as a message type that must be processed by a specific service, or based on arbitrary business needs such as providing priority processing of messages from a specific source.</span></span> <span data-ttu-id="dd085-109">V následující tabulce jsou uvedeny některé obvyklé scénáře a při jejich výskytu:</span><span class="sxs-lookup"><span data-stu-id="dd085-109">The following table lists some of the common scenarios and when they are encountered:</span></span>  
  
|<span data-ttu-id="dd085-110">Scénář</span><span class="sxs-lookup"><span data-stu-id="dd085-110">Scenario</span></span>|<span data-ttu-id="dd085-111">Kdy použít</span><span class="sxs-lookup"><span data-stu-id="dd085-111">Use when</span></span>|  
|--------------|--------------|  
|<span data-ttu-id="dd085-112">Správa verzí služby</span><span class="sxs-lookup"><span data-stu-id="dd085-112">Service versioning</span></span>|<span data-ttu-id="dd085-113">Můžete potřebovat pro podporu více verzí služby nebo může v budoucnu nasazení aktualizace služby</span><span class="sxs-lookup"><span data-stu-id="dd085-113">You need to support multiple versions of a service or may deploy an updated service in the future</span></span>|  
|<span data-ttu-id="dd085-114">Vytvoření oddílů dat služby</span><span class="sxs-lookup"><span data-stu-id="dd085-114">Service data partitioning</span></span>|<span data-ttu-id="dd085-115">Služba musí oddílů napříč více hostiteli</span><span class="sxs-lookup"><span data-stu-id="dd085-115">You must partition a service across multiple hosts</span></span>|  
|<span data-ttu-id="dd085-116">Dynamická aktualizace</span><span class="sxs-lookup"><span data-stu-id="dd085-116">Dynamic update</span></span>|<span data-ttu-id="dd085-117">Je nutné překonfigurovat dynamicky logiku směrování za běhu pro zpracování Změna nasazení služby</span><span class="sxs-lookup"><span data-stu-id="dd085-117">You must dynamically reconfigure routing logic at runtime to handle changing service deployments</span></span>|  
|<span data-ttu-id="dd085-118">Vícesměrové vysílání</span><span class="sxs-lookup"><span data-stu-id="dd085-118">Multicast</span></span>|<span data-ttu-id="dd085-119">Jednu zprávu je nutné odeslat do více koncových bodů</span><span class="sxs-lookup"><span data-stu-id="dd085-119">You must send one message to multiple endpoints</span></span>|  
|<span data-ttu-id="dd085-120">Protokol přemostění</span><span class="sxs-lookup"><span data-stu-id="dd085-120">Protocol bridging</span></span>|<span data-ttu-id="dd085-121">Příjem zpráv jeden přenosový protokol a cílový koncový bod používá jiný protokol</span><span class="sxs-lookup"><span data-stu-id="dd085-121">You receive messages over one transport protocol, and the destination endpoint uses a different protocol</span></span>|  
|<span data-ttu-id="dd085-122">Zpracování chyb</span><span class="sxs-lookup"><span data-stu-id="dd085-122">Error Handling</span></span>|<span data-ttu-id="dd085-123">Je potřeba zadat odolnost výpadky sítě nebo selhání komunikace</span><span class="sxs-lookup"><span data-stu-id="dd085-123">You need to provide resilience to network outages and communication failures</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="dd085-124">Přestože mnoho scénářů zobrazí jsou specifické pro určité obchodní potřeby nebo požadavků na zpracování, plánování pro podporu dynamické aktualizace a využití zpracování chyb můžete často považovat za osvědčených postupů umožňují upravit logiku směrování za běhu a zotavení z chyb při přechodných síťových a komunikace.</span><span class="sxs-lookup"><span data-stu-id="dd085-124">While many of the scenarios presented are specific to certain business needs or processing requirements, planning to support dynamic updates and utilizing error handling can often be considered as best practices as they allow you to modify routing logic at runtime and recover from transient network and communication failures.</span></span>  
  
### <a name="service-versioning"></a><span data-ttu-id="dd085-125">Verze služby</span><span class="sxs-lookup"><span data-stu-id="dd085-125">Service Versioning</span></span>  
 <span data-ttu-id="dd085-126">Při zavádění nové verze služby, musí často zachovat předchozí verze, dokud všichni klienti přešla na novou službu.</span><span class="sxs-lookup"><span data-stu-id="dd085-126">When introducing a new version of a service, you must often maintain the previous version until all clients have transitioned to the new service.</span></span> <span data-ttu-id="dd085-127">To je zvlášť zásadní v případě, že služba je dlouho běžící proces, který zabere dny, týdny nebo dokonce měsíce.</span><span class="sxs-lookup"><span data-stu-id="dd085-127">This is especially critical if the service is a long-running process that takes days, weeks, or even months to complete.</span></span> <span data-ttu-id="dd085-128">Obvykle vyžaduje implementace novou adresu koncového bodu pro novou službu a přitom původní koncový bod pro předchozí verze.</span><span class="sxs-lookup"><span data-stu-id="dd085-128">Usually this requires implementing a new endpoint address for the new service while maintaining the original endpoint for the previous version.</span></span>  
  
 <span data-ttu-id="dd085-129">S použitím služby směrování, můžete zveřejnit jeden koncový bod pro příjem zpráv z klientských aplikací a pak směrovat na správné služby verzi na základě obsahu zpráv každou zprávu.</span><span class="sxs-lookup"><span data-stu-id="dd085-129">By using the Routing Service, you can expose one endpoint to receive messages from client applications and then route each message to the correct service version based on the message content.</span></span> <span data-ttu-id="dd085-130">Základní implementaci zahrnuje přidání vlastní hlavičky zprávy, která určuje verzi služby, který je zprávu zpracovat.</span><span class="sxs-lookup"><span data-stu-id="dd085-130">The most basic implementation involves adding a custom header to the message that indicates the version of the service that the message is to be processed by.</span></span> <span data-ttu-id="dd085-131">Směrovací služba můžete použít XPathMessageFilter ke kontrole přítomnosti vlastní hlavičce každou zprávu a směrování zprávy do příslušné cílové koncového bodu.</span><span class="sxs-lookup"><span data-stu-id="dd085-131">The Routing Service can use the XPathMessageFilter to inspect each message for the presence of the custom header and route the message to the appropriate destination endpoint.</span></span>  
  
 <span data-ttu-id="dd085-132">Postup použitý k vytvoření konfigurace správy verzí služby najdete v tématu [How To: Správa verzí služby](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="dd085-132">For the steps used to create a service versioning configuration, see [How To: Service Versioning](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md).</span></span>
  
### <a name="service-data-partitioning"></a><span data-ttu-id="dd085-133">Vytvoření oddílů dat služby</span><span class="sxs-lookup"><span data-stu-id="dd085-133">Service Data Partitioning</span></span>  
 <span data-ttu-id="dd085-134">Když navrhujete distribuované prostředí, je často žádoucí rozložit zatížení mezi více počítačů za účelem poskytnutí vysoké dostupnosti, snížení zatížení na jednotlivých počítačích, nebo k poskytování prostředků vyhrazených pro určitou podmnožinu zpráv.</span><span class="sxs-lookup"><span data-stu-id="dd085-134">When designing a distributed environment, it is often desirable to spread processing load across multiple computers in order to provide high availability, decrease processing load on individual computers, or to provide dedicated resources for a specific subset of messages.</span></span> <span data-ttu-id="dd085-135">Zatímco služba Směrování nenahrazuje vyhrazené řešení vyrovnávání zatížení, schopnost provést směrování obsahu na základě je možné pro směrování zpráv v opačném případě podobné určitým příjemcům.</span><span class="sxs-lookup"><span data-stu-id="dd085-135">While the Routing Service does not replace a dedicated load balancing solution, its ability to perform content based routing can be used to route otherwise similar messages to specific destinations.</span></span> <span data-ttu-id="dd085-136">Například může mít požadavek na zpracování zpráv z konkrétního klienta nezávisle na zprávy přijaté z jiných klientů.</span><span class="sxs-lookup"><span data-stu-id="dd085-136">For example, you may have a requirement to process messages from a specific client separately from messages received from other clients.</span></span>  
  
 <span data-ttu-id="dd085-137">Postup použitý k vytvoření datové služby dělení konfigurace najdete v tématu [How To: Vytvoření oddílů dat služby](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="dd085-137">For the steps used to create a service data partitioning configuration, see [How To: Service Data Partitioning](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md).</span></span>  
  
### <a name="dynamic-routing"></a><span data-ttu-id="dd085-138">Dynamické směrování</span><span class="sxs-lookup"><span data-stu-id="dd085-138">Dynamic Routing</span></span>  
 <span data-ttu-id="dd085-139">Často je žádoucí, aby změny konfigurace směrování splnit měnící se potřeby organizace, jako je například přidávání trasu na novější verzi služby, změnou kritérií směrování nebo změna koncového bodu cílové konkrétní zprávu, která filtr přesměruje.</span><span class="sxs-lookup"><span data-stu-id="dd085-139">Often it is desirable to modify the routing configuration to satisfy changing business needs, such as adding a route to a newer version of a service, changing routing criteria, or changing the destination endpoint a specific message that the filter routes to.</span></span> <span data-ttu-id="dd085-140">Směrovací služba umožňuje udělat prostřednictvím <xref:System.ServiceModel.Routing.RoutingExtension>, což vám umožňuje poskytovat nová konfigurace RoutingConfiguration za běhu.</span><span class="sxs-lookup"><span data-stu-id="dd085-140">The Routing Service allows you to do this through the <xref:System.ServiceModel.Routing.RoutingExtension>, which allows you to provide a new RoutingConfiguration during run time.</span></span> <span data-ttu-id="dd085-141">Nová konfigurace projeví se okamžitě, ale pouze ovlivňuje všechny nové relace zpracovaných službou směrování.</span><span class="sxs-lookup"><span data-stu-id="dd085-141">The new configuration takes effect immediately, but only affects any new sessions processed by the Routing Service.</span></span>  
  
 <span data-ttu-id="dd085-142">Postup používaný k implementaci dynamického směrování najdete v tématu [How To: Dynamická aktualizace](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md).</span><span class="sxs-lookup"><span data-stu-id="dd085-142">For the steps used to implement dynamic routing, see [How To: Dynamic Update](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md).</span></span>
  
### <a name="multicast"></a><span data-ttu-id="dd085-143">Vícesměrové vysílání</span><span class="sxs-lookup"><span data-stu-id="dd085-143">Multicast</span></span>  
 <span data-ttu-id="dd085-144">Při směrování zpráv, obvykle můžete směrování každou zprávu do koncového bodu konkrétní cílové.</span><span class="sxs-lookup"><span data-stu-id="dd085-144">When routing messages, usually you routing each message to one specific destination endpoint.</span></span>  <span data-ttu-id="dd085-145">Však může čas od času potřeba směrovat kopie zprávy na víc cílové koncové body.</span><span class="sxs-lookup"><span data-stu-id="dd085-145">However, you may occasionally need to route a copy of the message to multiple destination endpoints.</span></span> <span data-ttu-id="dd085-146">Chcete-li provést směrování vícesměrového vysílání, musí být splněné následující podmínky:</span><span class="sxs-lookup"><span data-stu-id="dd085-146">To perform multicast routing, the following conditions must be true:</span></span>  
  
- <span data-ttu-id="dd085-147">Tvar kanálu nesmí být požadavek odpověď (i když může být jednosměrné nebo obousměrné,) vzhledem k tomu, že požadavek odpověď, určuje, že pouze jednu odpověď lze přijímat pomocí klientské aplikace v odpovědi na požadavek.</span><span class="sxs-lookup"><span data-stu-id="dd085-147">The channel shape must not be request-reply (though it may be one-way or duplex,) because request-reply mandates that only one reply can be received by the client application in response to the request.</span></span>  
  
- <span data-ttu-id="dd085-148">Několik filtrů musí vracet **true** při vyhodnocování zprávy.</span><span class="sxs-lookup"><span data-stu-id="dd085-148">Multiple filters must return **true** when evaluating the message.</span></span>  
  
 <span data-ttu-id="dd085-149">Pokud jsou tyto podmínky splněny, každý cílový koncový bod, který je přidružený filtr, který vrací hodnotu true, obdrží kopii zprávy.</span><span class="sxs-lookup"><span data-stu-id="dd085-149">If these conditions are met, each destination endpoint that is associated with a filter that returns true will receive a copy of the message.</span></span>  
  
### <a name="protocol-bridging"></a><span data-ttu-id="dd085-150">Protokol přemostění</span><span class="sxs-lookup"><span data-stu-id="dd085-150">Protocol Bridging</span></span>  
 <span data-ttu-id="dd085-151">Při směrování zpráv mezi rozdílných protokolů SOAP, směrovací služba používá rozhraní API WCF převést zprávy z jednoho protokolu na druhý.</span><span class="sxs-lookup"><span data-stu-id="dd085-151">When routing messages between dissimilar SOAP protocols, the Routing Service uses WCF APIs to convert the message from one protocol to the other.</span></span> <span data-ttu-id="dd085-152">K tomu dojde automaticky při vystavený koncových bodů služby pomocí směrovací služba jiného protokolu než koncových bodů klienta, které zprávy jsou směrovány na.</span><span class="sxs-lookup"><span data-stu-id="dd085-152">This occurs automatically when the service endpoint(s) exposed by the Routing Service use a different protocol than the client endpoint(s) that messages are routed to.</span></span> <span data-ttu-id="dd085-153">Je možné toto chování zakázat, pokud nejsou protokoly používá standardní; ale musíte pak zadat vlastní přemostění kódu.</span><span class="sxs-lookup"><span data-stu-id="dd085-153">It is possible to disable this behavior if the protocols in use are not standard; however, you must then provide your own bridging code.</span></span>
  
### <a name="error-handling"></a><span data-ttu-id="dd085-154">Zpracování chyb</span><span class="sxs-lookup"><span data-stu-id="dd085-154">Error Handling</span></span>  
 <span data-ttu-id="dd085-155">V distribuovaném prostředí není nic neobvyklého, když dojde k selhání přechodné síťové nebo komunikace.</span><span class="sxs-lookup"><span data-stu-id="dd085-155">In a distributed environment, it is not uncommon to encounter transient network or communication failures.</span></span> <span data-ttu-id="dd085-156">Bez zprostředkující služby, jako je například služba Směrování zatížení zpracovávat takové chyby klesne na klientské aplikaci.</span><span class="sxs-lookup"><span data-stu-id="dd085-156">Without an intermediary service such as the Routing Service, the burden of handling such failures falls on the client application.</span></span> <span data-ttu-id="dd085-157">Pokud klientská aplikace neobsahuje konkrétní logiku pro opakování v případě sítě nebo selhání komunikace a znalosti o alternativních umístění, uživatel může dojít scénáře, ve kterém zpráva musí být předloženy více než jednou předtím, než je úspěšně zpracovává cílové služby.</span><span class="sxs-lookup"><span data-stu-id="dd085-157">If the client application does not include specific logic to retry in the event of network or communication failures and knowledge of alternate locations, the user may encounter scenarios where a message must be submitted multiple times before it is successfully processed by the destination service.</span></span> <span data-ttu-id="dd085-158">To může vést k jejich nespokojenost zákazníka s aplikací, protože to může být vnímané jako nespolehlivé.</span><span class="sxs-lookup"><span data-stu-id="dd085-158">This can lead to customer dissatisfaction with the application, as it may be perceived as unreliable.</span></span>  
  
 <span data-ttu-id="dd085-159">Směrovací služba se pokusí napravit tento scénář tím, že poskytuje robustní Chyba funkce zpracování zprávy, které dojde k síti nebo chyby týkající se komunikace.</span><span class="sxs-lookup"><span data-stu-id="dd085-159">The Routing Service attempts to remedy this scenario by providing robust error handling capabilities for messages that encounter network or communication-related failures.</span></span> <span data-ttu-id="dd085-160">Vytvořením seznamu možných cílové koncové body a tento seznam přidružení každý filtr zpráv, odebrat jediný bod selhání vzniklé v souvislosti s pouze jeden možný cíl.</span><span class="sxs-lookup"><span data-stu-id="dd085-160">By creating a list of possible destination endpoints and associating this list with each message filter, you remove the single point of failure incurred by having only one possible destination.</span></span> <span data-ttu-id="dd085-161">V případě selhání směrovací služba se pokusí doručit zprávu další koncový bod v seznamu, dokud nebyly dodány zprávy, dojde k selhání bez komunikace, nebo všechny koncové body byly vyčerpány.</span><span class="sxs-lookup"><span data-stu-id="dd085-161">In the event of a failure, the Routing Service will attempt to deliver the message to the next endpoint in the list until the message has been delivered, a non-communication failure occurs, or all endpoints have been exhausted.</span></span>  
  
 <span data-ttu-id="dd085-162">Postup slouží ke konfiguraci zpracování chyb najdete v tématu [How To: Zpracování chyb](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md).</span><span class="sxs-lookup"><span data-stu-id="dd085-162">For the steps used to configure error handling, see [How To: Error Handling](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md).</span></span>
  
### <a name="in-this-section"></a><span data-ttu-id="dd085-163">V tomto oddílu</span><span class="sxs-lookup"><span data-stu-id="dd085-163">In This Section</span></span>  
 [<span data-ttu-id="dd085-164">Postupy: Správa verzí služby</span><span class="sxs-lookup"><span data-stu-id="dd085-164">How To: Service Versioning</span></span>](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md)  
  
 [<span data-ttu-id="dd085-165">Postupy: Vytvoření oddílů dat služby</span><span class="sxs-lookup"><span data-stu-id="dd085-165">How To: Service Data Partitioning</span></span>](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md)  
  
 [<span data-ttu-id="dd085-166">Postupy: Dynamická aktualizace</span><span class="sxs-lookup"><span data-stu-id="dd085-166">How To: Dynamic Update</span></span>](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md)  
  
 [<span data-ttu-id="dd085-167">Postupy: Zpracování chyb</span><span class="sxs-lookup"><span data-stu-id="dd085-167">How To: Error Handling</span></span>](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md)  
  
## <a name="see-also"></a><span data-ttu-id="dd085-168">Viz také:</span><span class="sxs-lookup"><span data-stu-id="dd085-168">See also</span></span>

- [<span data-ttu-id="dd085-169">Úvod do směrování</span><span class="sxs-lookup"><span data-stu-id="dd085-169">Routing Introduction</span></span>](../../../../docs/framework/wcf/feature-details/routing-introduction.md)
