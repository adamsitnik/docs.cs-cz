---
title: Zpracování chyb
ms.date: 03/30/2017
ms.assetid: c948841a-7db9-40ae-9b78-587d216cbcaf
ms.openlocfilehash: 396ad7ba6f690cedf783adcf180c92a88427a959
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/23/2019
ms.locfileid: "54695553"
---
# <a name="error-handling"></a><span data-ttu-id="fb501-102">Zpracování chyb</span><span class="sxs-lookup"><span data-stu-id="fb501-102">Error handling</span></span>
## <a name="error-handling-in-windows-communication-foundation"></a><span data-ttu-id="fb501-103">Zpracování chyb v Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="fb501-103">Error Handling in Windows Communication Foundation</span></span>  
 <span data-ttu-id="fb501-104">Když služba dojde k neočekávané výjimce nebo chyba, existuje více způsobů návrhu řešení typu zpracování výjimek.</span><span class="sxs-lookup"><span data-stu-id="fb501-104">When a service encounters an unexpected exception or error, there are multiple ways to design an exception-handling solution.</span></span> <span data-ttu-id="fb501-105">Když neexistuje žádné jedno "Opravit" nebo "co nejlépe praxi" zpracování chyb řešení, existuje více cest platná pro jeden vzít v úvahu.</span><span class="sxs-lookup"><span data-stu-id="fb501-105">While there is no single "correct" or "best practice" error-handling solution, there are multiple valid paths for one to consider.</span></span> <span data-ttu-id="fb501-106">Obvykle je vhodné, že jedna implementace hybridní řešení, která kombinuje několik přístupů ze seznamu níže, v závislosti na složitosti implementace WCF, typ a frekvenci výjimek, zpracováván vs. neošetřené povaze výjimky a všechny související požadavky zásad, trasování a protokolování.</span><span class="sxs-lookup"><span data-stu-id="fb501-106">It is normally recommended that one implement a hybrid solution that combines multiple approaches from the list below, depending on the complexity of the WCF implementation, the type and frequency of the exceptions, the handled vs. unhandled nature of the exceptions, and any associated tracing, logging, or policy requirements.</span></span>  
  
 <span data-ttu-id="fb501-107">Tato řešení jsou vysvětleny hlouběji ve zbytku této části.</span><span class="sxs-lookup"><span data-stu-id="fb501-107">These solutions are explained more deeply in the rest of this section.</span></span>  
  
### <a name="the-microsoft-enterprise-library"></a><span data-ttu-id="fb501-108">Microsoft Enterprise Library</span><span class="sxs-lookup"><span data-stu-id="fb501-108">The Microsoft Enterprise Library</span></span>  
 <span data-ttu-id="fb501-109">Microsoft Enterprise Library výjimka Handling Application Block pomáhá implementovat běžné vzory návrhu a vytvořit konzistentní strategie pro zpracování výjimek, ke kterým dochází v všechny vrstvy architektury podnikové aplikace.</span><span class="sxs-lookup"><span data-stu-id="fb501-109">The Microsoft Enterprise Library Exception Handling Application Block helps implement common design patterns and create a consistent strategy for processing exceptions that occur in all architectural layers of an enterprise application.</span></span> <span data-ttu-id="fb501-110">Je určená pro podporu typické kód obsažený v příkazech catch v součásti aplikace.</span><span class="sxs-lookup"><span data-stu-id="fb501-110">It is designed to support the typical code contained in catch statements in application components.</span></span> <span data-ttu-id="fb501-111">Výjimka Handling Application Block namísto tento kód (například kód, který zaznamenává informace o výjimce) v blocích catch stejné v celé aplikaci, umožňuje vývojářům k zapouzdření tuto logiku jako obslužné rutiny výjimek opakovaně použitelné.</span><span class="sxs-lookup"><span data-stu-id="fb501-111">Instead of repeating this code (such as code that logs exception information) in identical catch blocks throughout an application, the Exception Handling Application Block allows developers to encapsulate this logic as reusable exception handlers.</span></span>  
  
 <span data-ttu-id="fb501-112">Tato knihovna obsahuje out-of-the-box obslužnou rutinu výjimky selhání kontraktu.</span><span class="sxs-lookup"><span data-stu-id="fb501-112">This Library includes out-of-the-box a Fault Contract Exception Handler.</span></span> <span data-ttu-id="fb501-113">Této obslužné rutiny výjimky je určen k použití na hranicích mezi službami Windows® Communication Foundation (WCF) a vygeneruje nový kontrakt chyby z výjimky.</span><span class="sxs-lookup"><span data-stu-id="fb501-113">This exception handler is designed for use at Windows® Communication Foundation (WCF) service boundaries, and generates a new Fault Contract from the exception.</span></span>  
  
 <span data-ttu-id="fb501-114">Bloky aplikace cílem začlenění běžně používaných osvědčené postupy a poskytují běžný postup pro zpracování v rámci aplikace výjimek.</span><span class="sxs-lookup"><span data-stu-id="fb501-114">Application blocks aim to incorporate commonly used best practices and provide a common approach for exception handling throughout your application.</span></span> <span data-ttu-id="fb501-115">Na druhé straně obslužné rutiny vlastních chyb a selhání kontraktů vyvinuté v vlastního může také být velmi užitečné.</span><span class="sxs-lookup"><span data-stu-id="fb501-115">On the other hand, custom error handlers and fault contracts developed on one’s own can also be very useful.</span></span> <span data-ttu-id="fb501-116">Například obslužné rutiny vlastních chyb poskytuje skvělou příležitost se automaticky zvýšit úroveň všech výjimek FaultExceptions a také pro přidání možností protokolování do vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="fb501-116">For instance, custom error handlers provide an excellent opportunity to automatically promote all exceptions to FaultExceptions and also to add logging capabilities to your application.</span></span>  
  
 <span data-ttu-id="fb501-117">Další informace najdete v tématu [Microsoft Enterprise Library](https://msdn.microsoft.com/library/ff632023.aspx).</span><span class="sxs-lookup"><span data-stu-id="fb501-117">For more information, please see [Microsoft Enterprise Library](https://msdn.microsoft.com/library/ff632023.aspx).</span></span>  
  
### <a name="dealing-with-expected-exceptions"></a><span data-ttu-id="fb501-118">Práce s očekávané výjimky</span><span class="sxs-lookup"><span data-stu-id="fb501-118">Dealing with Expected Exceptions</span></span>  
 <span data-ttu-id="fb501-119">Správný kurz akce má zachytit očekávané výjimky v každé operace nebo bod relevantní rozšiřitelnosti, rozhodnout, zda je možné obnovit z a vrátí správné vlastní chyby v FaultException\<T ></span><span class="sxs-lookup"><span data-stu-id="fb501-119">The proper course of action is to catch expected exceptions in every operation or relevant extensibility point, decide whether they can be recovered from, and return the proper custom fault in a FaultException\<T></span></span>  
  
### <a name="dealing-with-unexpected-exceptions-using-an-ierrorhandler"></a><span data-ttu-id="fb501-120">Řešení pomocí IErrorHandler neočekávané výjimky</span><span class="sxs-lookup"><span data-stu-id="fb501-120">Dealing with Unexpected Exceptions using an IErrorHandler</span></span>  
 <span data-ttu-id="fb501-121">Řešit neočekávané výjimky, je "spojit" IErrorHandler doporučené kurz akce.</span><span class="sxs-lookup"><span data-stu-id="fb501-121">To deal with unexpected exceptions, the recommended course of action is to "hook" an IErrorHandler.</span></span> <span data-ttu-id="fb501-122">Obslužné rutiny chyb pouze zachytit výjimky na úrovni modulu runtime WCF (vrstva "model služby"), ne ve vrstvě kanálu.</span><span class="sxs-lookup"><span data-stu-id="fb501-122">Error handlers only catch exceptions at the WCF runtime level (the "service model" layer), not at the channel layer.</span></span> <span data-ttu-id="fb501-123">Jediný způsob, jak se připojit IErrorHandler na úrovni kanálu je vytvořte vlastní kanál, který se ve většině scénářů nedoporučuje.</span><span class="sxs-lookup"><span data-stu-id="fb501-123">The only way to hook an IErrorHandler at the channel level is to create a custom channel, which is not recommended in most scenarios.</span></span>  
  
 <span data-ttu-id="fb501-124">"Neočekávanou výjimku" není obecně neobnovitelné výjimce ani zpracování výjimek; je místo toho uživatel neočekávané výjimky.</span><span class="sxs-lookup"><span data-stu-id="fb501-124">An "unexpected exception" is generally neither an irrecoverable exception nor a processing exception; it is, instead, an unexpected user exception.</span></span> <span data-ttu-id="fb501-125">Neobnovitelné výjimce (například výjimku paměti) – jedna obecně provádí [obslužná rutina výjimky modelu služby](xref:System.ServiceModel.Dispatcher.ExceptionHandler) automaticky – nelze obecně zpracovat bez výpadku a jediným důvodem pro zpracování takových výjimky vůbec může být dodatečné protokolování nebo se vraťte do klienta standardní výjimka.</span><span class="sxs-lookup"><span data-stu-id="fb501-125">An irrecoverable exception (such as an out-of-memory exception) – one generally handled by the [Service Model Exception Handler](xref:System.ServiceModel.Dispatcher.ExceptionHandler) automatically – cannot generally be handled gracefully, and the only reason to handle such an exception at all may be do additional logging or to return a standard exception to the client.</span></span> <span data-ttu-id="fb501-126">Dojde k výjimce zpracování v zpracování zprávy – například serializace, kodér nebo úroveň formátovací modul – obecně nelze zpracovat v IErrorHandler, protože je obecně buď příliš brzy, nebo příliš pozdě pro obslužnou rutinu chyb zasáhnout podle čas, kdy dojde k tyto výjimky.</span><span class="sxs-lookup"><span data-stu-id="fb501-126">A processing exception occurs in the processing of the message – for example, at the serialization, encoder, or formatter level – generally cannot be handled at an IErrorHandler, because it is generally either too early or too late for the error handler to intervene by the time these exceptions occur.</span></span> <span data-ttu-id="fb501-127">Podobně nelze zpracovat výjimky přenosu IErrorHandler.</span><span class="sxs-lookup"><span data-stu-id="fb501-127">Similarly, transport exceptions cannot be handled at an IErrorHandler.</span></span>  
  
 <span data-ttu-id="fb501-128">S IErrorHandler můžete explicitně řídit chování aplikace, když dojde k výjimce.</span><span class="sxs-lookup"><span data-stu-id="fb501-128">With an IErrorHandler, you can explicitly control the behavior of your application when an exception is thrown.</span></span> <span data-ttu-id="fb501-129">Můžete:</span><span class="sxs-lookup"><span data-stu-id="fb501-129">You may:</span></span>  
  
1.  <span data-ttu-id="fb501-130">Rozhodněte, jestli se mají odeslat klientovi chybu</span><span class="sxs-lookup"><span data-stu-id="fb501-130">Decide whether or not to send a fault to the client</span></span>  
  
2.  <span data-ttu-id="fb501-131">Nahraďte výjimku chybu</span><span class="sxs-lookup"><span data-stu-id="fb501-131">Replace an exception with a fault</span></span>  
  
3.  <span data-ttu-id="fb501-132">Nahraďte jinou chybu selhání</span><span class="sxs-lookup"><span data-stu-id="fb501-132">Replace a fault with another fault</span></span>  
  
4.  <span data-ttu-id="fb501-133">Provádět protokolování nebo trasování</span><span class="sxs-lookup"><span data-stu-id="fb501-133">Perform logging or tracing</span></span>  
  
5.  <span data-ttu-id="fb501-134">Provést jiné vlastní aktivity</span><span class="sxs-lookup"><span data-stu-id="fb501-134">Perform other custom activities</span></span>  
  
 <span data-ttu-id="fb501-135">Obslužné rutiny vlastních chyb jeden můžete nainstalovat tak, že přidáte na vlastnost ErrorHandlers dispečerů kanálu pro vaši službu.</span><span class="sxs-lookup"><span data-stu-id="fb501-135">One can install a custom error handler by adding it to the ErrorHandlers property of the channel dispatchers for your service.</span></span>  <span data-ttu-id="fb501-136">Je možné mít víc než jedna obslužná rutina chyb a jsou volány v pořadí, ve kterém jsou přidané do této kolekce.</span><span class="sxs-lookup"><span data-stu-id="fb501-136">It is possible to have more than one error handler and they are called in the order they are added to this collection.</span></span>  
  
 <span data-ttu-id="fb501-137">IErrorHandler.ProvideFault řídí chybová zpráva, která je odeslána do klienta.</span><span class="sxs-lookup"><span data-stu-id="fb501-137">IErrorHandler.ProvideFault controls the fault message that is sent to the client.</span></span> <span data-ttu-id="fb501-138">Tato metoda je volána bez ohledu na typ výjimky vyvolané operace ve službě.</span><span class="sxs-lookup"><span data-stu-id="fb501-138">This method is called regardless of the type of the exception thrown by an operation in your service.</span></span> <span data-ttu-id="fb501-139">Pokud žádná operace se zde provádí, WCF předpokládá jeho výchozí chování a pokračuje, jako by nebyly žádné obslužné rutiny vlastních chyb na místě.</span><span class="sxs-lookup"><span data-stu-id="fb501-139">If no operation is performed here, WCF assumes its default behaviour and continues as if there were no custom error handlers in place.</span></span>  
  
 <span data-ttu-id="fb501-140">Jednu oblast, můžete případně použít tento přístup je, když chcete vytvořit centrální místo pro převod výjimky na chyby, před jejich odesláním do klienta (zajistí, že instance není uvolněn a kanál nebyl přesunut do stavu chyba).</span><span class="sxs-lookup"><span data-stu-id="fb501-140">One area that you could perhaps use this approach is when you want to create a central place for converting exceptions to faults before they are sent to the client (ensuring that the instance is not disposed and the channel is not moved to the Faulted state).</span></span>  
  
 <span data-ttu-id="fb501-141">Metoda IErrorHandler.HandleError se obvykle používá k implementaci chyba související chování jako je například protokolování, chyba systému oznámení, vypínání aplikace atd. IErrorHandler.HandleError lze volat na více místech ve službě, a v závislosti na tom, kde je vyvolána chyba, metoda HandleError můžou nebo nelze volat ve stejném vlákně jako operace; v tomto ohledu nebudou provedeny žádné záruky.</span><span class="sxs-lookup"><span data-stu-id="fb501-141">The IErrorHandler.HandleError method is usually used to implement error-related behaviors such as error logging, system notifications, shutting down the application, etc. IErrorHandler.HandleError can be called at multiple places inside the service, and depending on where the error is thrown, the HandleError method may or may not be called by the same thread as the operation; no guarantees are made in this regard.</span></span>  
  
### <a name="dealing-with-exceptions-outside-wcf"></a><span data-ttu-id="fb501-142">Práce s výjimkami mimo WCF</span><span class="sxs-lookup"><span data-stu-id="fb501-142">Dealing with Exceptions outside WCF</span></span>  
 <span data-ttu-id="fb501-143">Často, může dojít v rámci kontextu aplikace WCF konfigurace výjimek, výjimky připojovací řetězec databáze a další podobné výjimky, ale představují samy o sobě nejsou výjimek způsobených modelu služby nebo samotnou webovou službu.</span><span class="sxs-lookup"><span data-stu-id="fb501-143">Often, configuration exceptions, database connection string exceptions, and other similar exceptions may occur within the context of a WCF application, but are themselves are not exceptions caused by the service model or the web service itself.</span></span> <span data-ttu-id="fb501-144">Tyto výjimky jsou externí vzhledem k webové službě "regulární" výjimky a by měly být zpracovány stejně jako ostatní externí výjimky v prostředí mají zpracovat.</span><span class="sxs-lookup"><span data-stu-id="fb501-144">These exceptions are "regular" exceptions external to the web service, and should be handled just as other external exceptions in the environment are to be handled.</span></span>  
  
### <a name="tracing-exceptions"></a><span data-ttu-id="fb501-145">Sledování výjimek</span><span class="sxs-lookup"><span data-stu-id="fb501-145">Tracing exceptions</span></span>  
 <span data-ttu-id="fb501-146">Trasování je pouze "pokrývající vše" místem, kde jeden může potenciálně sledovat všechny výjimky.</span><span class="sxs-lookup"><span data-stu-id="fb501-146">Tracing is the only "catch-all" place where one can potentially see all exceptions.</span></span> <span data-ttu-id="fb501-147">Další informace o trasování a protokolování výjimek naleznete v tématu trasování a protokolování.</span><span class="sxs-lookup"><span data-stu-id="fb501-147">For more information on tracing and logging exceptions, see Tracing and Logging.</span></span>  
  
### <a name="uri-template-errors-when-using-webgetattribute-and-webinvokeattribute"></a><span data-ttu-id="fb501-148">Identifikátor URI šablony chyby při použitím WebGetAttribute i WebInvokeAttribute</span><span class="sxs-lookup"><span data-stu-id="fb501-148">URI template errors when using WebGetAttribute and WebInvokeAttribute</span></span>  
 <span data-ttu-id="fb501-149">Atributy WebGet a WebInvoke vám umožňují určit šablona identifikátoru URI, který mapuje součástí adresu požadavek na parametry operace.</span><span class="sxs-lookup"><span data-stu-id="fb501-149">The WebGet and WebInvoke attributes allow you to specify a URI template that maps components of the request address to operation parameters.</span></span> <span data-ttu-id="fb501-150">Například šablona identifikátoru URI "počasí / {state} / {Město}" mapuje adresu požadavek na literálové tokeny, parametr s názvem stavu a parametr s názvem Město.</span><span class="sxs-lookup"><span data-stu-id="fb501-150">For example, the URI template "weather/{state}/{city}" maps the request address into literal tokens, a parameter named state, and a parameter named city.</span></span> <span data-ttu-id="fb501-151">Tyto parametry může pak být vázána podle názvu k některým formálních parametrů operace.</span><span class="sxs-lookup"><span data-stu-id="fb501-151">These parameters might then be bound by name to some of the formal parameters of the operation.</span></span>  
  
 <span data-ttu-id="fb501-152">Parametry šablony se zobrazí ve formě řetězce v rámci identifikátoru URI při typy jiné než řetězec může být formální parametry typu kontraktu.</span><span class="sxs-lookup"><span data-stu-id="fb501-152">The template parameters appear in the form of strings within the URI while the formal parameters of a typed contract might be of non-string types.</span></span> <span data-ttu-id="fb501-153">Převod je proto potřeba předtím, než může vyvolat operaci.</span><span class="sxs-lookup"><span data-stu-id="fb501-153">Therefore, a conversion needs to take place before the operation can be invoked.</span></span> <span data-ttu-id="fb501-154">A [tabulku převod formátů](wcf-web-http-programming-model-overview.md) je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="fb501-154">A [table of conversion formats](wcf-web-http-programming-model-overview.md) is available.</span></span>  
  
 <span data-ttu-id="fb501-155">Nicméně pokud převod selže, pak se nedají v operaci vědět, že se něco nepovedlo.</span><span class="sxs-lookup"><span data-stu-id="fb501-155">However, if the conversion fails, then there's no way to let the operation know that something has gone wrong.</span></span> <span data-ttu-id="fb501-156">Převod typu místo toho poskytuje informace o ve formě selhání odeslání.</span><span class="sxs-lookup"><span data-stu-id="fb501-156">The type conversion instead surfaces in the form of a dispatch failure.</span></span>  
  
 <span data-ttu-id="fb501-157">Chyba odeslání převodu typu může být stejně jako mnoho dalších typů zpracování chyb zkontroloval nainstalováním obslužná rutina chyby.</span><span class="sxs-lookup"><span data-stu-id="fb501-157">A type conversion dispatch failure can be inspected the same as with many other types of dispatch failures by installing an error handler.</span></span> <span data-ttu-id="fb501-158">Bod rozšiřitelnosti IErrorHandler je volána pro zpracování výjimek na úrovni služby.</span><span class="sxs-lookup"><span data-stu-id="fb501-158">The IErrorHandler extensibility point is called to handle service-level exceptions.</span></span> <span data-ttu-id="fb501-159">Odtud odpověď k odeslání zpět do volajícího – a také jako provádět jakékoli vlastní úlohy vytváření sestav – je možné zvolit.</span><span class="sxs-lookup"><span data-stu-id="fb501-159">From there, the response to be sent back to the caller – as well as perform any custom tasks and reporting – may be chosen.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fb501-160">Viz také:</span><span class="sxs-lookup"><span data-stu-id="fb501-160">See also</span></span>
- [<span data-ttu-id="fb501-161">Základní programování WCF</span><span class="sxs-lookup"><span data-stu-id="fb501-161">Basic WCF Programming</span></span>](../basic-wcf-programming.md)
