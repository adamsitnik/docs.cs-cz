---
title: Atributy transakce ServiceModel
ms.date: 03/30/2017
helpviewer_keywords:
- transactions [WCF], ServiceModel attributes
ms.assetid: 1e0d2436-6ae5-439b-9765-a448d6f60000
ms.openlocfilehash: 79d97eee328d816281348b5b15cf779e1ee65893
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/23/2019
ms.locfileid: "61747664"
---
# <a name="servicemodel-transaction-attributes"></a><span data-ttu-id="36eff-102">Atributy transakce ServiceModel</span><span class="sxs-lookup"><span data-stu-id="36eff-102">ServiceModel Transaction Attributes</span></span>
<span data-ttu-id="36eff-103">Windows Communication Foundation (WCF) poskytuje vlastnosti na tři standardní <xref:System.ServiceModel> atributy, které je možné nakonfigurovat chování transakce služby WCF:</span><span class="sxs-lookup"><span data-stu-id="36eff-103">Windows Communication Foundation (WCF) provides properties on three standard <xref:System.ServiceModel> attributes that enable you to configure the behavior of transactions for a WCF service:</span></span>  
  
- <xref:System.ServiceModel.TransactionFlowAttribute>  
  
- <xref:System.ServiceModel.ServiceBehaviorAttribute>  
  
- <xref:System.ServiceModel.OperationBehaviorAttribute>  
  
## <a name="transactionflowattribute"></a><span data-ttu-id="36eff-104">TransactionFlowAttribute</span><span class="sxs-lookup"><span data-stu-id="36eff-104">TransactionFlowAttribute</span></span>  
 <span data-ttu-id="36eff-105"><xref:System.ServiceModel.TransactionFlowAttribute> Atribut určuje ochotu operace v kontraktu služby tak, aby přijímal příchozí transakce z klienta.</span><span class="sxs-lookup"><span data-stu-id="36eff-105">The <xref:System.ServiceModel.TransactionFlowAttribute> attribute specifies the willingness of an operation in a service contract to accept incoming transactions from a client.</span></span> <span data-ttu-id="36eff-106">Atribut obsahuje tento ovládací prvek s následující vlastnost: Použití transakce <xref:System.ServiceModel.TransactionFlowOption> výčet k určení, zda je příchozí transakce <xref:System.ServiceModel.TransactionFlowOption.Mandatory>, <xref:System.ServiceModel.TransactionFlowOption.Allowed>, nebo <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span><span class="sxs-lookup"><span data-stu-id="36eff-106">The attribute provides this control with the following property: Transactions use the <xref:System.ServiceModel.TransactionFlowOption> enumeration to specify whether an incoming transaction is <xref:System.ServiceModel.TransactionFlowOption.Mandatory>, <xref:System.ServiceModel.TransactionFlowOption.Allowed>, or <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span></span>  
  
 <span data-ttu-id="36eff-107">Toto je jediný atribut, který se týká operace služby na externí interakce s klientem.</span><span class="sxs-lookup"><span data-stu-id="36eff-107">This is the only attribute that relates service operations to external interactions with a client.</span></span> <span data-ttu-id="36eff-108">Atributy, které jsou popsané v následujících částech se týkají použití transakcí v rámci provedení operace.</span><span class="sxs-lookup"><span data-stu-id="36eff-108">The attributes described in the following sections relate to the use of transactions within the execution of the operation.</span></span>  
  
## <a name="servicebehaviorattribute"></a><span data-ttu-id="36eff-109">ServiceBehaviorAttribute</span><span class="sxs-lookup"><span data-stu-id="36eff-109">ServiceBehaviorAttribute</span></span>  
 <span data-ttu-id="36eff-110"><xref:System.ServiceModel.ServiceBehaviorAttribute> Atribut určuje chování při spuštění vnitřní implementace kontraktu služby.</span><span class="sxs-lookup"><span data-stu-id="36eff-110">The <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute specifies the internal execution behavior of a service contract implementation.</span></span> <span data-ttu-id="36eff-111">Vlastnosti specifické pro transakce tohoto atributu patří:</span><span class="sxs-lookup"><span data-stu-id="36eff-111">Transaction-specific properties of this attribute include:</span></span>  
  
- <span data-ttu-id="36eff-112"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> Určuje, jestli se má provést nedokončené transakci po zavření relace.</span><span class="sxs-lookup"><span data-stu-id="36eff-112"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> specifies whether to complete an uncompleted transaction when the session closes.</span></span> <span data-ttu-id="36eff-113">Výchozí hodnota této vlastnosti je `false`.</span><span class="sxs-lookup"><span data-stu-id="36eff-113">The default value for this property is `false`.</span></span> <span data-ttu-id="36eff-114">Pokud je tato vlastnost `true`a příchozí relace byla řádně vypnout namísto z důvodu sítě nebo klient zavírání chyb, žádné nedokončené transakce je úspěšně dokončena.</span><span class="sxs-lookup"><span data-stu-id="36eff-114">If this property is `true`, and the incoming session was gracefully shut down instead of closing due to network or client faults, any uncompleted transaction is successfully completed.</span></span> <span data-ttu-id="36eff-115">Jinak, pokud je tato vlastnost `false` nebo pokud relace nebyl řádně uzavřen, žádné nedokončené transakce se vrátí zpět při zavření relace.</span><span class="sxs-lookup"><span data-stu-id="36eff-115">Otherwise, if this property is `false` or if the session was not gracefully closed, any uncompleted transaction is rolled back when the session closes.</span></span> <span data-ttu-id="36eff-116">Pokud je tato vlastnost `true`, příchozí kanál musí být na základě relace.</span><span class="sxs-lookup"><span data-stu-id="36eff-116">If this property is `true`, the incoming channel must be session-based.</span></span>  
  
- <span data-ttu-id="36eff-117"><xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A> Určuje, zda podkladové instance služby je všeobecně dostupné po dokončení transakce.</span><span class="sxs-lookup"><span data-stu-id="36eff-117"><xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A> specifies whether the underlying service instance is released when a transaction completes.</span></span> <span data-ttu-id="36eff-118">Výchozí hodnota této vlastnosti je `true`.</span><span class="sxs-lookup"><span data-stu-id="36eff-118">The default value for this property is `true`.</span></span> <span data-ttu-id="36eff-119">Další příchozí zprávu způsobí, že nové základní instance má být vytvořen, se zahodí některému ze stavů za transakce, která může mít nachází předchozí instanci.</span><span class="sxs-lookup"><span data-stu-id="36eff-119">The next inbound message causes a new underlying instance to be created, discarding any per-transaction state that the previous instance might have held.</span></span> <span data-ttu-id="36eff-120">Uvolnění instance služby je interní akce služba má a nemá žádný vliv na existující připojení nebo relace, které může mít vytvořené klienty.</span><span class="sxs-lookup"><span data-stu-id="36eff-120">Releasing a service instance is an internal action the service takes and has no impact on any existing connections or sessions that clients might have established.</span></span> <span data-ttu-id="36eff-121">Tato funkce je ekvivalentní k funkci just-in-time aktivace, které poskytuje modelu COM +.</span><span class="sxs-lookup"><span data-stu-id="36eff-121">This functionality is equivalent to the just-in-time activation feature COM+ provides.</span></span> <span data-ttu-id="36eff-122">Pokud je vlastnost `true`, <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> musí být rovna <xref:System.ServiceModel.ConcurrencyMode.Single>.</span><span class="sxs-lookup"><span data-stu-id="36eff-122">If the property is `true`, <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> must be equal to <xref:System.ServiceModel.ConcurrencyMode.Single>.</span></span> <span data-ttu-id="36eff-123">V opačném případě služba vyvolá výjimku neplatná konfigurace ověřování během spouštění.</span><span class="sxs-lookup"><span data-stu-id="36eff-123">Otherwise, the service throws an invalid configuration validation exception during startup.</span></span>  
  
- <span data-ttu-id="36eff-124"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionIsolationLevel%2A> Určuje úroveň izolace použitou pro transakce v rámci služby; Tato vlastnost má jednu z <xref:System.Transactions.IsolationLevel> hodnoty.</span><span class="sxs-lookup"><span data-stu-id="36eff-124"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionIsolationLevel%2A> specifies the isolation level to use for transactions within the service; this property takes one of the <xref:System.Transactions.IsolationLevel> values.</span></span> <span data-ttu-id="36eff-125">Pokud vlastnost úrovně izolace místní se něco jiného než <xref:System.Transactions.IsolationLevel.Unspecified>, úroveň izolace příchozí transakce musí shodovat s nastavením této místní vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="36eff-125">If the local isolation level property is anything other than <xref:System.Transactions.IsolationLevel.Unspecified>, the isolation level of an incoming transaction must match the setting of this local property.</span></span> <span data-ttu-id="36eff-126">V opačném případě příchozí transakce byl odmítnut a chybu, je odeslána zpět klientovi.</span><span class="sxs-lookup"><span data-stu-id="36eff-126">Otherwise, the incoming transaction is rejected, and a fault is sent back to the client.</span></span> <span data-ttu-id="36eff-127">Pokud <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> je `true`, a žádná transakce je naplněn, určuje tato vlastnost <xref:System.Transactions.IsolationLevel> hodnotu pro místně vytvořené transakce.</span><span class="sxs-lookup"><span data-stu-id="36eff-127">If <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> is `true`, and no transaction is flowed, this property determines the <xref:System.Transactions.IsolationLevel> value to use for the locally created transaction.</span></span> <span data-ttu-id="36eff-128">Pokud <xref:System.Transactions.IsolationLevel> je nastavena na <xref:System.Transactions.IsolationLevel.Unspecified>, <xref:System.Transactions.IsolationLevel> <xref:System.Transactions.IsolationLevel.Serializable> se používá.</span><span class="sxs-lookup"><span data-stu-id="36eff-128">If <xref:System.Transactions.IsolationLevel> is set to <xref:System.Transactions.IsolationLevel.Unspecified>, <xref:System.Transactions.IsolationLevel><xref:System.Transactions.IsolationLevel.Serializable> is used.</span></span>  
  
- <span data-ttu-id="36eff-129"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> Určuje časové období, ve kterém musí být vytvořené ve službě nové transakce dokončena.</span><span class="sxs-lookup"><span data-stu-id="36eff-129"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> specifies the time period within which a new transaction created at the service must complete.</span></span> <span data-ttu-id="36eff-130">Pokud transakce nebyla dokončena, dosažení tentokrát se přeruší.</span><span class="sxs-lookup"><span data-stu-id="36eff-130">If this time is reached and the transaction has not been completed, it will abort.</span></span> <span data-ttu-id="36eff-131"><xref:System.TimeSpan> Slouží jako <xref:System.Transactions.TransactionScope> vypršení časového limitu pro všechny operace, které mají <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> nastavena na `true` a pro které byl vytvořen novou transakci.</span><span class="sxs-lookup"><span data-stu-id="36eff-131">The <xref:System.TimeSpan> is used as the <xref:System.Transactions.TransactionScope> time-out for any operations that have <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> set to `true` and for which a new transaction was created.</span></span> <span data-ttu-id="36eff-132">Časový limit je maximální povolená doba trvání od vytvoření transakce pro dokončení fáze 1 v protokol dvoufázového potvrzení.</span><span class="sxs-lookup"><span data-stu-id="36eff-132">The time-out is the maximum allowed duration from the creation of the transaction to the completion of phase 1 in the two-phase commit protocol.</span></span> <span data-ttu-id="36eff-133">Hodnota časového limitu je vždy nižší hodnotu mezi <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> vlastnost a `transactionTimeout` nastavení konfigurace.</span><span class="sxs-lookup"><span data-stu-id="36eff-133">The time-out value used is always the lower value between the <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> property and the `transactionTimeout` configuration setting.</span></span>  
  
## <a name="operationbehaviorattribute"></a><span data-ttu-id="36eff-134">OperationBehaviorAttribute</span><span class="sxs-lookup"><span data-stu-id="36eff-134">OperationBehaviorAttribute</span></span>  
 <span data-ttu-id="36eff-135"><xref:System.ServiceModel.OperationBehaviorAttribute> Atribut určuje chování metody v implementaci služby.</span><span class="sxs-lookup"><span data-stu-id="36eff-135">The <xref:System.ServiceModel.OperationBehaviorAttribute> attribute specifies the behaviors of the methods in the service implementation.</span></span> <span data-ttu-id="36eff-136">Slouží k označení chování při provádění konkrétní operace.</span><span class="sxs-lookup"><span data-stu-id="36eff-136">You can use it to indicate the operation's specific execution behavior.</span></span> <span data-ttu-id="36eff-137">Vlastnosti tohoto atributu nemají vliv na popis webové služby WSDL (Description Language) kontraktu služby a jsou čistě prvky programovacího modelu WCF, které umožňují společné funkce, že mají vývojáři jinak provádět sami.</span><span class="sxs-lookup"><span data-stu-id="36eff-137">Properties of this attribute do not affect the Web Service Description Language (WSDL) description of the service contract, and are purely elements of the WCF programming model that enable common features that developers otherwise have to implement themselves.</span></span>  
  
 <span data-ttu-id="36eff-138">Tento atribut má následující vlastnosti specifické pro transakce:</span><span class="sxs-lookup"><span data-stu-id="36eff-138">This attribute has the following transaction-specific properties:</span></span>  
  
- <span data-ttu-id="36eff-139"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> Určuje, zda metoda musí být spuštěn v rámci rozsahu aktivní transakce.</span><span class="sxs-lookup"><span data-stu-id="36eff-139"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> specifies whether a method must execute within an active transaction scope.</span></span> <span data-ttu-id="36eff-140">Výchozí hodnota je `false`.</span><span class="sxs-lookup"><span data-stu-id="36eff-140">The default is `false`.</span></span> <span data-ttu-id="36eff-141">Pokud <xref:System.ServiceModel.OperationBehaviorAttribute> atribut není nastaven pro metodu, také znamená, že metoda nebude spuštěno v transakci.</span><span class="sxs-lookup"><span data-stu-id="36eff-141">If the <xref:System.ServiceModel.OperationBehaviorAttribute> attribute is not set for a method, it also implies that the method will not execute in a transaction.</span></span> <span data-ttu-id="36eff-142">Pokud obor transakce není vyžadována pro operace, všechny transakce, která je k dispozici v rámci záhlaví zprávy není aktivovaný a zůstane jako prvek sady <xref:System.ServiceModel.OperationContext.IncomingMessageProperties%2A> z <xref:System.ServiceModel.OperationContext>.</span><span class="sxs-lookup"><span data-stu-id="36eff-142">If a transaction scope is not required for an operation, any transaction that is present within the message header is not activated and remains as an element of the <xref:System.ServiceModel.OperationContext.IncomingMessageProperties%2A> of the <xref:System.ServiceModel.OperationContext>.</span></span> <span data-ttu-id="36eff-143">Pokud obor transakce je potřeba pro operace, zdroj pro transakci je odvozený od jednoho z následujících akcí:</span><span class="sxs-lookup"><span data-stu-id="36eff-143">If a transaction scope is required for an operation, the source for the transaction is derived from one of the following:</span></span>  
  
    - <span data-ttu-id="36eff-144">Pokud transakce je plynoucí z klienta, metoda je provedena v rámci oboru transakce vytvořené pomocí této distribuované transakce.</span><span class="sxs-lookup"><span data-stu-id="36eff-144">If a transaction is flowed from the client, the method is executed under a transaction scope created using that distributed transaction.</span></span>  
  
    - <span data-ttu-id="36eff-145">S zařazených do fronty přenosu se používá transakce použitá k odstranění z fronty zprávu.</span><span class="sxs-lookup"><span data-stu-id="36eff-145">With a queued transport, the transaction used to dequeue the message is used.</span></span> <span data-ttu-id="36eff-146">Všimněte si, že používá transakce není sdružení probíhajících transakcí v tom, že nebyl zadán původní odesílatel zprávy.</span><span class="sxs-lookup"><span data-stu-id="36eff-146">Note that the transaction used is not a flowed transaction, in that it was not provided by the original sender of the message.</span></span>  
  
    - <span data-ttu-id="36eff-147">Vlastní přenosu může poskytnout transakce prostřednictvím `TransportTransactionProperty`.</span><span class="sxs-lookup"><span data-stu-id="36eff-147">A custom transport can provide a transaction through the use of the `TransportTransactionProperty`.</span></span>  
  
    - <span data-ttu-id="36eff-148">Pokud žádná z výše uvedené poskytuje externího zdroje pro transakci, nový <xref:System.Transactions.Transaction> bezprostředně před volání metody je vytvořena instance.</span><span class="sxs-lookup"><span data-stu-id="36eff-148">If none of the above provides an external source for a transaction, a new <xref:System.Transactions.Transaction> instance is created immediately prior to calling the method.</span></span>  
  
- <span data-ttu-id="36eff-149"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionAutoComplete%2A> Určuje, zda je transakce, ve kterém metoda je provedena automaticky dokončit, pokud nejsou vyvolány žádné neošetřené výjimky.</span><span class="sxs-lookup"><span data-stu-id="36eff-149"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionAutoComplete%2A> specifies whether the transaction in which the method executes is automatically completed if no unhandled exceptions are thrown.</span></span> <span data-ttu-id="36eff-150">Pokud je tato vlastnost `true`, volání infrastruktury automaticky označí transakce, jako "dokončeno", pokud uživatel metoda vrátí bez vyvolání výjimky.</span><span class="sxs-lookup"><span data-stu-id="36eff-150">If this property is `true`, the calling infrastructure automatically marks the transaction as "completed" if the user method returns without throwing an exception.</span></span> <span data-ttu-id="36eff-151">Pokud je tato vlastnost `false`, transakce je připojen k instanci a označena jako "Dokončená" volá-li klienta následné metodu, která je označena s touto vlastností rovna `true`, nebo pokud následné metoda explicitně volá <xref:System.ServiceModel.OperationContext.SetTransactionComplete%2A>.</span><span class="sxs-lookup"><span data-stu-id="36eff-151">If this property is `false`, the transaction is attached to the instance, and is only marked as "completed" if the client calls a subsequent method that is marked with this property equal to `true`, or if a subsequent method explicitly calls <xref:System.ServiceModel.OperationContext.SetTransactionComplete%2A>.</span></span> <span data-ttu-id="36eff-152">Selhání proveďte některý z těchto výsledků v rámci transakce nikdy se "dokončeno" a omezením pracovní není potvrzené, pokud <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> je nastavena na `true`.</span><span class="sxs-lookup"><span data-stu-id="36eff-152">Failure to perform either of these results in the transaction never being "completed," and the contained work is not committed, unless the <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> property is set to `true`.</span></span> <span data-ttu-id="36eff-153">Pokud je tato vlastnost nastavená na `true`, je nutné použít kanál s relací a <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> musí být nastaveno na <xref:System.ServiceModel.InstanceContextMode.PerSession>.</span><span class="sxs-lookup"><span data-stu-id="36eff-153">If this property is set to `true`, you must use a channel with a session, and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> must be set to <xref:System.ServiceModel.InstanceContextMode.PerSession>.</span></span>
