---
title: Identita a ověřování služby
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- authentication [WCF], specifying the identity of a service
ms.assetid: a4c8f52c-5b30-45c4-a545-63244aba82be
ms.openlocfilehash: 695b6c24700fe42664944d6f9c1e03010248d86a
ms.sourcegitcommit: 2d42b7ae4252cfe1232777f501ea9ac97df31b63
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/01/2019
ms.locfileid: "67487737"
---
# <a name="service-identity-and-authentication"></a><span data-ttu-id="34836-102">Identita a ověřování služby</span><span class="sxs-lookup"><span data-stu-id="34836-102">Service Identity and Authentication</span></span>
<span data-ttu-id="34836-103">Služby *identitě koncového bodu* je hodnota vygenerovaná ze služby webové služby WSDL (Description Language).</span><span class="sxs-lookup"><span data-stu-id="34836-103">A service's *endpoint identity* is a value generated from the service Web Services Description Language (WSDL).</span></span> <span data-ttu-id="34836-104">Tato hodnota, rozšíří na všechny klienty, se používá k ověřování.</span><span class="sxs-lookup"><span data-stu-id="34836-104">This value, propagated to any client, is used to authenticate the service.</span></span> <span data-ttu-id="34836-105">Poté, co klient inicializuje komunikaci na koncový bod a služby se ověří na klienta, klient porovná hodnotu identity koncový bod s skutečná hodnota vrácená v procesu ověřování koncového bodu.</span><span class="sxs-lookup"><span data-stu-id="34836-105">After the client initiates a communication to an endpoint and the service authenticates itself to the client, the client compares the endpoint identity value with the actual value the endpoint authentication process returned.</span></span> <span data-ttu-id="34836-106">Pokud se shodují, klient jistotu, že kontaktoval koncový bod služby očekávané.</span><span class="sxs-lookup"><span data-stu-id="34836-106">If they match, the client is assured it has contacted the expected service endpoint.</span></span> <span data-ttu-id="34836-107">Tato operace funguje jako ochranu proti *phishing* zabraňuje klient se přesměrovává na koncový bod hostitelem škodlivé služby.</span><span class="sxs-lookup"><span data-stu-id="34836-107">This functions as a protection against *phishing* by preventing a client from being redirected to an endpoint hosted by a malicious service.</span></span>  
  
 <span data-ttu-id="34836-108">Ukázková aplikace, který ukazuje nastavení identity, najdete v části [ukázka Identity služby](../../../../docs/framework/wcf/samples/service-identity-sample.md).</span><span class="sxs-lookup"><span data-stu-id="34836-108">For a sample application that demonstrates identity setting, see [Service Identity Sample](../../../../docs/framework/wcf/samples/service-identity-sample.md).</span></span> <span data-ttu-id="34836-109">Další informace o koncových bodech a adresy koncových bodů najdete v tématu [adresy](../../../../docs/framework/wcf/feature-details/endpoint-addresses.md).</span><span class="sxs-lookup"><span data-stu-id="34836-109">For more information about endpoints and endpoint addresses, see [Addresses](../../../../docs/framework/wcf/feature-details/endpoint-addresses.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="34836-110">Když LanMan NT (NTLM) se používají k ověřování, identity služby není kontrolovat, protože v protokolu NTLM, klient se nemůže ověřit server.</span><span class="sxs-lookup"><span data-stu-id="34836-110">When you use NT LanMan (NTLM) for authentication, the service identity is not checked because, under NTLM, the client is unable to authenticate the server.</span></span> <span data-ttu-id="34836-111">Je použit protokol NTLM, když se počítače pracovní skupiny Windows nebo při spuštění starší verzi Windows, který nepodporuje ověřování pomocí protokolu Kerberos.</span><span class="sxs-lookup"><span data-stu-id="34836-111">NTLM is used when computers are part of a Windows workgroup, or when running an older version of Windows that does not support Kerberos authentication.</span></span>  
  
 <span data-ttu-id="34836-112">Když klient zahájí zabezpečený kanál pro odeslání zprávy do služby přes něj, ověřuje služby infrastruktury Windows Communication Foundation (WCF) a pouze odešle zprávu, pokud služba identity odpovídá identitě zadané v koncovém bodě Adresa, kterou klient používá.</span><span class="sxs-lookup"><span data-stu-id="34836-112">When the client initiates a secure channel to send a message to a service over it, the Windows Communication Foundation (WCF) infrastructure authenticates the service, and only sends the message if the service identity matches the identity specified in the endpoint address the client uses.</span></span>  
  
 <span data-ttu-id="34836-113">Zpracování identity se skládá z následujících fází:</span><span class="sxs-lookup"><span data-stu-id="34836-113">Identity processing consists of the following stages:</span></span>  
  
- <span data-ttu-id="34836-114">V době návrhu vývojáře klienta určuje identitu služby z koncového bodu metadat (vystavené prostřednictvím WSDL).</span><span class="sxs-lookup"><span data-stu-id="34836-114">At design time, the client developer determines the service's identity from the endpoint's metadata (exposed through WSDL).</span></span>  
  
- <span data-ttu-id="34836-115">Klientská aplikace za běhu, zkontroluje deklarací zabezpečovací přihlašovací údaje služby před odesláním jakýchkoli zpráv do služby.</span><span class="sxs-lookup"><span data-stu-id="34836-115">At runtime, the client application checks the claims of the service's security credentials before sending any messages to the service.</span></span>  
  
 <span data-ttu-id="34836-116">Identita zpracování na straně klienta je obdobou ověřování klientů na službu.</span><span class="sxs-lookup"><span data-stu-id="34836-116">Identity processing on the client is analogous to client authentication on the service.</span></span> <span data-ttu-id="34836-117">Služba Zabezpečené nespustí kódu až po ověření pověření klienta.</span><span class="sxs-lookup"><span data-stu-id="34836-117">A secure service does not execute code until the client's credentials have been authenticated.</span></span> <span data-ttu-id="34836-118">Podobně klient nezasílal zprávy do služby až po ověření přihlašovacích údajů služby založené na co předem známý z metadat služby.</span><span class="sxs-lookup"><span data-stu-id="34836-118">Likewise, the client does not send messages to the service until the service's credentials have been authenticated based on what is known in advance from the service's metadata.</span></span>  
  
 <span data-ttu-id="34836-119"><xref:System.ServiceModel.EndpointAddress.Identity%2A> Vlastnost <xref:System.ServiceModel.EndpointAddress> třída reprezentuje identitu služby volána klientem.</span><span class="sxs-lookup"><span data-stu-id="34836-119">The <xref:System.ServiceModel.EndpointAddress.Identity%2A> property of the <xref:System.ServiceModel.EndpointAddress> class represents the identity of the service called by the client.</span></span> <span data-ttu-id="34836-120">Služba zveřejňuje <xref:System.ServiceModel.EndpointAddress.Identity%2A> ve svých metadatech.</span><span class="sxs-lookup"><span data-stu-id="34836-120">The service publishes the <xref:System.ServiceModel.EndpointAddress.Identity%2A> in its metadata.</span></span> <span data-ttu-id="34836-121">Při spuštění klienta pro vývojáře [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) na koncový bod služby vygenerovanou konfiguraci obsahuje hodnotu služby <xref:System.ServiceModel.EndpointAddress.Identity%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="34836-121">When the client developer runs the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) against the service endpoint, the generated configuration contains the value of the service's <xref:System.ServiceModel.EndpointAddress.Identity%2A> property.</span></span> <span data-ttu-id="34836-122">Infrastruktura WCF (Pokud je nakonfigurovaná s zabezpečení) ověřuje, že služba má identita zadaná.</span><span class="sxs-lookup"><span data-stu-id="34836-122">The WCF infrastructure (if configured with security) verifies that the service possesses the identity specified.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="34836-123">Metadata obsahuje Očekávaná identita služby, proto se doporučuje zpřístupňují metadata služby prostřednictvím zabezpečené prostředky, třeba tak, že vytvoříte koncový bod HTTPS pro službu.</span><span class="sxs-lookup"><span data-stu-id="34836-123">The metadata contains the expected identity of the service, so it is recommended that you expose the service metadata through secure means, for example, by creating an HTTPS endpoint for the service.</span></span> <span data-ttu-id="34836-124">Další informace najdete v tématu [jak: Zabezpečené koncové body metadat](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="34836-124">For more information, see [How to: Secure Metadata Endpoints](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).</span></span>  
  
## <a name="identity-types"></a><span data-ttu-id="34836-125">Typy identity</span><span class="sxs-lookup"><span data-stu-id="34836-125">Identity Types</span></span>  
 <span data-ttu-id="34836-126">Služba může poskytnout šest typů identit.</span><span class="sxs-lookup"><span data-stu-id="34836-126">A service can provide six types of identities.</span></span> <span data-ttu-id="34836-127">Každý typ identity odpovídá elementu, který může být obsažena uvnitř `<identity>` element v konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="34836-127">Each identity type corresponds to an element that can be contained inside the `<identity>` element in configuration.</span></span> <span data-ttu-id="34836-128">Typ použitý závisí na scénáře a požadavky na zabezpečení služby.</span><span class="sxs-lookup"><span data-stu-id="34836-128">The type used depends on the scenario and the service's security requirements.</span></span> <span data-ttu-id="34836-129">Následující tabulka popisuje každý typ identity.</span><span class="sxs-lookup"><span data-stu-id="34836-129">The following table describes each identity type.</span></span>  
  
|<span data-ttu-id="34836-130">Typ identity</span><span class="sxs-lookup"><span data-stu-id="34836-130">Identity type</span></span>|<span data-ttu-id="34836-131">Popis</span><span class="sxs-lookup"><span data-stu-id="34836-131">Description</span></span>|<span data-ttu-id="34836-132">Typický scénář</span><span class="sxs-lookup"><span data-stu-id="34836-132">Typical scenario</span></span>|  
|-------------------|-----------------|----------------------|  
|<span data-ttu-id="34836-133">Domain Name System (DNS)</span><span class="sxs-lookup"><span data-stu-id="34836-133">Domain Name System (DNS)</span></span>|<span data-ttu-id="34836-134">Tento prvek pomocí certifikátů X.509 nebo účty Windows.</span><span class="sxs-lookup"><span data-stu-id="34836-134">Use this element with X.509 certificates or Windows accounts.</span></span> <span data-ttu-id="34836-135">Porovná název DNS zadaný v přihlašovacích údajích s hodnotou zadanou v tomto elementu.</span><span class="sxs-lookup"><span data-stu-id="34836-135">It compares the DNS name specified in the credential with the value specified in this element.</span></span>|<span data-ttu-id="34836-136">Kontrola DNS umožňuje používat certifikáty s DNS nebo názvy subjektu.</span><span class="sxs-lookup"><span data-stu-id="34836-136">A DNS check enables you to use certificates with DNS or subject names.</span></span> <span data-ttu-id="34836-137">Pokud je ho znova vydat certifikát se stejným DNS nebo názvu subjektu, kontrola identity je stále platný.</span><span class="sxs-lookup"><span data-stu-id="34836-137">If a certificate is reissued with the same DNS or subject name, then the identity check is still valid.</span></span> <span data-ttu-id="34836-138">Když se ho znova vydat certifikát, získá nový klíč RSA, ale zachováte stejný DNS nebo názvu subjektu.</span><span class="sxs-lookup"><span data-stu-id="34836-138">When a certificate is reissued, it gets a new RSA key but retains the same DNS or subject name.</span></span> <span data-ttu-id="34836-139">To znamená, že klienti, není nutné aktualizovat své identity informace o službě.</span><span class="sxs-lookup"><span data-stu-id="34836-139">This means that clients do not have to update their identity information about the service.</span></span>|  
|<span data-ttu-id="34836-140">certifikát.</span><span class="sxs-lookup"><span data-stu-id="34836-140">Certificate.</span></span> <span data-ttu-id="34836-141">Výchozí hodnota při `ClientCredentialType` je nastavena na certifikát.</span><span class="sxs-lookup"><span data-stu-id="34836-141">The default when `ClientCredentialType` is set to Certificate.</span></span>|<span data-ttu-id="34836-142">Tento prvek Určuje certifikát X.509 s kódováním Base64 hodnotu k porovnání s klientem.</span><span class="sxs-lookup"><span data-stu-id="34836-142">This element specifies a Base64-encoded X.509 certificate value to compare with the client.</span></span><br /><br /> <span data-ttu-id="34836-143">Tento prvek používejte také při použití CardSpace jako přihlašovací údaj k ověřování.</span><span class="sxs-lookup"><span data-stu-id="34836-143">Also use this element when using a CardSpace as a credential to authenticate the service.</span></span>|<span data-ttu-id="34836-144">Tento prvek omezuje ověřování na základě jeho hodnotu kryptografického otisku jeden certifikát.</span><span class="sxs-lookup"><span data-stu-id="34836-144">This element restricts authentication to a single certificate based upon its thumbprint value.</span></span> <span data-ttu-id="34836-145">To umožňuje přísnější ověřování, protože jsou jedinečné hodnoty kryptografického otisku.</span><span class="sxs-lookup"><span data-stu-id="34836-145">This enables stricter authentication because thumbprint values are unique.</span></span> <span data-ttu-id="34836-146">Součástí jednoho výstrahou: Pokud se ho znova vydat certifikát se stejným názvem subjektu, má také nový kryptografický otisk.</span><span class="sxs-lookup"><span data-stu-id="34836-146">This comes with one caveat: If the certificate is reissued with the same Subject name, it also has a new Thumbprint.</span></span> <span data-ttu-id="34836-147">Proto klienti nebudou se moct k ověření služby, pokud je známý nový kryptografický otisk.</span><span class="sxs-lookup"><span data-stu-id="34836-147">Therefore, clients are not able to validate the service unless the new thumbprint is known.</span></span> <span data-ttu-id="34836-148">Další informace o vyhledání kryptografický otisk certifikátu najdete v tématu [jak: Načtení kryptografického otisku certifikátu](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="34836-148">For more information about finding a certificate's thumbprint, see [How to: Retrieve the Thumbprint of a Certificate](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md).</span></span>|  
|<span data-ttu-id="34836-149">Odkaz na certifikát</span><span class="sxs-lookup"><span data-stu-id="34836-149">Certificate Reference</span></span>|<span data-ttu-id="34836-150">Stejné možnosti certifikátů je popsáno výše.</span><span class="sxs-lookup"><span data-stu-id="34836-150">Identical to the Certificate option described previously.</span></span> <span data-ttu-id="34836-151">Tento element však umožňuje zadat název certifikátu a umístění, ze kterého se má načíst certifikát uložit.</span><span class="sxs-lookup"><span data-stu-id="34836-151">However, this element enables you to specify a certificate name and store location from which to retrieve the certificate.</span></span>|<span data-ttu-id="34836-152">Stejné jako certifikát scénář je popsáno výše.</span><span class="sxs-lookup"><span data-stu-id="34836-152">Same as the Certificate scenario described previously.</span></span><br /><br /> <span data-ttu-id="34836-153">Výhodou je, že můžete změnit umístění úložiště certifikátů.</span><span class="sxs-lookup"><span data-stu-id="34836-153">The benefit is that the certificate store location can change.</span></span>|  
|<span data-ttu-id="34836-154">RSA</span><span class="sxs-lookup"><span data-stu-id="34836-154">RSA</span></span>|<span data-ttu-id="34836-155">Tento prvek určuje hodnotu klíče RSA k porovnání s klientem.</span><span class="sxs-lookup"><span data-stu-id="34836-155">This element specifies an RSA key value to compare with the client.</span></span> <span data-ttu-id="34836-156">Je to podobné možnosti certifikátů, ale místo použití kryptografického otisku certifikátu, se místo toho používá klíč RSA certifikátu.</span><span class="sxs-lookup"><span data-stu-id="34836-156">This is similar to the certificate option but rather than using the certificate's thumbprint, the certificate's RSA key is used instead.</span></span>|<span data-ttu-id="34836-157">Kontrolu RSA umožňuje konkrétně omezit ověření na základě jeho klíč RSA jeden certifikát.</span><span class="sxs-lookup"><span data-stu-id="34836-157">An RSA check enables you to specifically restrict authentication to a single certificate based upon its RSA key.</span></span> <span data-ttu-id="34836-158">To umožňuje přísnější ověřování z určitého klíče RSA za cenu službu, která už funguje s existující klienty, pokud se změní hodnota klíče RSA.</span><span class="sxs-lookup"><span data-stu-id="34836-158">This enables stricter authentication of a specific RSA key at the expense of the service, which no longer works with existing clients if the RSA key value changes.</span></span>|  
|<span data-ttu-id="34836-159">Hlavní název uživatele (UPN).</span><span class="sxs-lookup"><span data-stu-id="34836-159">User principal name (UPN).</span></span> <span data-ttu-id="34836-160">Výchozí hodnota při `ClientCredentialType` nastavena Windows a proces není spuštěn v rámci jednoho systémové účty.</span><span class="sxs-lookup"><span data-stu-id="34836-160">The default when the `ClientCredentialType` is set to Windows and the service process is not running under one of the system accounts.</span></span>|<span data-ttu-id="34836-161">Tento prvek určuje, na kterém běží služba v rámci hlavní název uživatele.</span><span class="sxs-lookup"><span data-stu-id="34836-161">This element specifies the UPN that the service is running under.</span></span> <span data-ttu-id="34836-162">Najdete v části protokol Kerberos a Identity [přepsání Identity služby kvůli ověřování](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="34836-162">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="34836-163">Tím se zajistí, že služba běží v rámci konkrétní uživatelský účet Windows.</span><span class="sxs-lookup"><span data-stu-id="34836-163">This ensures that the service is running under a specific Windows user account.</span></span> <span data-ttu-id="34836-164">Uživatelský účet může být aktuální přihlášeného uživatele nebo služby spuštěné v rámci určitého uživatelského účtu.</span><span class="sxs-lookup"><span data-stu-id="34836-164">The user account can be either the current logged-on user or the service running under a particular user account.</span></span><br /><br /> <span data-ttu-id="34836-165">Toto nastavení využívá výhod zabezpečení Windows protokolu Kerberos, pokud je služba spuštěna pod účtem domény v prostředí služby Active Directory.</span><span class="sxs-lookup"><span data-stu-id="34836-165">This setting takes advantage of Windows Kerberos security if the service is running under a domain account within an Active Directory environment.</span></span>|  
|<span data-ttu-id="34836-166">Hlavní název služby (SPN).</span><span class="sxs-lookup"><span data-stu-id="34836-166">Service principal name (SPN).</span></span> <span data-ttu-id="34836-167">Výchozí hodnota při `ClientCredentialType` je nastavena na Windows a služby je proces spuštěn pod jeden z účtů systému – LocalService, LocalSystem nebo NetworkService.</span><span class="sxs-lookup"><span data-stu-id="34836-167">The default when the `ClientCredentialType` is set to Windows and the service process is running under one of the system accounts—LocalService, LocalSystem, or NetworkService.</span></span>|<span data-ttu-id="34836-168">Tento prvek určuje hlavní název služby přidružené k účtu služby.</span><span class="sxs-lookup"><span data-stu-id="34836-168">This element specifies the SPN associated with the service's account.</span></span> <span data-ttu-id="34836-169">Najdete v části protokol Kerberos a Identity [přepsání Identity služby kvůli ověřování](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="34836-169">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="34836-170">Tím se zajistí, že hlavní název služby a konkrétní Windows účet spojený s hlavní název služby identifikaci služby.</span><span class="sxs-lookup"><span data-stu-id="34836-170">This ensures that the SPN and the specific Windows account associated with the SPN identify the service.</span></span><br /><br /> <span data-ttu-id="34836-171">Chcete-li přidružit účet počítače pro uživatelský účet služby můžete použít nástroje Setspn.exe.</span><span class="sxs-lookup"><span data-stu-id="34836-171">You can use the Setspn.exe tool to associate a machine account for the service's user account.</span></span><br /><br /> <span data-ttu-id="34836-172">Toto nastavení využívá Windows protokolu Kerberos, zabezpečení, pokud je služba spuštěná v jednom ze systémové účty nebo pod účtem domény, který má odpovídající název SPN se ho a počítač je členem domény v prostředí služby Active Directory.</span><span class="sxs-lookup"><span data-stu-id="34836-172">This setting takes advantage of Windows Kerberos security if the service is running under one of the system accounts or under a domain account that has an associated SPN name with it and the computer is a member of a domain within an Active Directory environment.</span></span>|  
  
## <a name="specifying-identity-at-the-service"></a><span data-ttu-id="34836-173">Určení Identity na službu</span><span class="sxs-lookup"><span data-stu-id="34836-173">Specifying Identity at the Service</span></span>  
 <span data-ttu-id="34836-174">Standardně nastavit identitu ve službě, protože výběr typu pověření klienta Určuje typ identity v metadatech služby není nutné.</span><span class="sxs-lookup"><span data-stu-id="34836-174">Typically, you do not have to set the identity on a service because the selection of a client credential type dictates the type of identity exposed in the service metadata.</span></span> <span data-ttu-id="34836-175">Další informace o tom, jak přepsat nebo zadejte identitu služby najdete v tématu [přepsání Identity služby kvůli ověřování](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="34836-175">For more information about how to override or specify service identity, see [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>  
  
## <a name="using-the-identity-element-in-configuration"></a><span data-ttu-id="34836-176">Použití \<identity > v elementu konfigurace</span><span class="sxs-lookup"><span data-stu-id="34836-176">Using the \<identity> Element in Configuration</span></span>  
 <span data-ttu-id="34836-177">Pokud změníte typ přihlašovacích údajů klienta ve vazbě bylo dříve uvedeno na `Certificate,` generovaného WSDL obsahuje Base64 serializovat certifikátů X.509 pro hodnotu identity, jak je znázorněno v následujícím kódu.</span><span class="sxs-lookup"><span data-stu-id="34836-177">If you change the client credential type in the binding previously shown to `Certificate,` then the generated WSDL contains a Base64 serialized X.509 certificate for the identity value as shown in the following code.</span></span> <span data-ttu-id="34836-178">Toto je výchozí pro všechny typy přihlašovacích údajů klienta jiné než Windows.</span><span class="sxs-lookup"><span data-stu-id="34836-178">This is the default for all client credential types other than Windows.</span></span>  

 <span data-ttu-id="34836-179">Můžete změnit hodnotu výchozí identitu služby nebo změňte typ identity pomocí `<identity>` element v konfiguraci nebo nastavením identita v kódu.</span><span class="sxs-lookup"><span data-stu-id="34836-179">You can change the value of the default service identity or change the type of the identity by using the `<identity>` element in configuration or by setting the identity in code.</span></span> <span data-ttu-id="34836-180">Následující kód konfigurace nastaví identitou system (DNS) název domény s hodnotou `contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="34836-180">The following configuration code sets a domain name system (DNS) identity with the value `contoso.com`.</span></span>  

## <a name="setting-identity-programmatically"></a><span data-ttu-id="34836-181">Nastavení Identity prostřednictvím kódu programu</span><span class="sxs-lookup"><span data-stu-id="34836-181">Setting Identity Programmatically</span></span>  
 <span data-ttu-id="34836-182">Vaše služba není nutné explicitně určit identitu, protože WCF automaticky určuje.</span><span class="sxs-lookup"><span data-stu-id="34836-182">Your service does not have to explicitly specify an identity, because WCF automatically determines it.</span></span> <span data-ttu-id="34836-183">Ale WCF umožňuje určit identitu, která v koncovém bodě, podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="34836-183">However, WCF allows you to specify an identity on an endpoint, if required.</span></span> <span data-ttu-id="34836-184">Následující kód přidá nový koncový bod služby s konkrétní identitu DNS.</span><span class="sxs-lookup"><span data-stu-id="34836-184">The following code adds a new service endpoint with a specific DNS identity.</span></span>  
  
 [!code-csharp[C_Identity#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#5)]
 [!code-vb[C_Identity#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#5)]  
  
## <a name="specifying-identity-at-the-client"></a><span data-ttu-id="34836-185">Určení Identity klienta</span><span class="sxs-lookup"><span data-stu-id="34836-185">Specifying Identity at the Client</span></span>  
 <span data-ttu-id="34836-186">V době návrhu, vývojáři klientského programu obvykle používá [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) ke generování konfigurace klienta.</span><span class="sxs-lookup"><span data-stu-id="34836-186">At design time, a client developer typically uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate client configuration.</span></span> <span data-ttu-id="34836-187">Vygenerovaný konfigurační soubor (určené pro použití klientem) obsahuje identitu serveru.</span><span class="sxs-lookup"><span data-stu-id="34836-187">The generated configuration file (intended for use by the client) contains the server's identity.</span></span> <span data-ttu-id="34836-188">Například následující kód je generován ze služby, která určuje identitu DNS, jak je znázorněno v předchozím příkladu.</span><span class="sxs-lookup"><span data-stu-id="34836-188">For example, the following code is generated from a service that specifies a DNS identity, as shown in the preceding example.</span></span> <span data-ttu-id="34836-189">Všimněte si, že hodnota identity klienta koncový bod odpovídá služby.</span><span class="sxs-lookup"><span data-stu-id="34836-189">Note that the client's endpoint identity value matches that of the service.</span></span> <span data-ttu-id="34836-190">V tomto případě, když klient obdrží pověření Windows (Kerberos) pro službu, očekává hodnota, která má být `contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="34836-190">In this case, when the client receives the Windows (Kerberos) credentials for the service, it expects the value to be `contoso.com`.</span></span>  

 <span data-ttu-id="34836-191">Pokud, místo Windows, tato služba Určuje certifikát jako typ pověření klienta, pak vlastnost DNS tento certifikát má být hodnota `contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="34836-191">If, instead of Windows, the service specifies a certificate as the client credential type, then the certificate's DNS property is expected to be the value `contoso.com`.</span></span> <span data-ttu-id="34836-192">(Nebo pokud je vlastnost DNS `null`, musí být název subjektu certifikátu `contoso.com`.)</span><span class="sxs-lookup"><span data-stu-id="34836-192">(Or if the DNS property is `null`, the certificate's subject name must be `contoso.com`.)</span></span>  
  
#### <a name="using-a-specific-value-for-identity"></a><span data-ttu-id="34836-193">Pomocí konkrétní hodnoty pro identitu</span><span class="sxs-lookup"><span data-stu-id="34836-193">Using a Specific Value for Identity</span></span>  
 <span data-ttu-id="34836-194">Následující konfigurační soubor klienta ukazuje, jak služby identita má být konkrétní hodnotu.</span><span class="sxs-lookup"><span data-stu-id="34836-194">The following client configuration file shows how the service's identity is expected to be a specific value.</span></span> <span data-ttu-id="34836-195">V následujícím příkladu klient může komunikovat s dva koncové body.</span><span class="sxs-lookup"><span data-stu-id="34836-195">In the following example, the client can communicate with two endpoints.</span></span> <span data-ttu-id="34836-196">První je označena kryptografický otisk certifikátu a druhý s klíčem RSA certifikátu.</span><span class="sxs-lookup"><span data-stu-id="34836-196">The first is identified with a certificate thumbprint and the second with a certificate RSA key.</span></span> <span data-ttu-id="34836-197">To znamená, že certifikát, který obsahuje pouze veřejný klíč nebo privátní pár klíčů, ale není vydán důvěryhodnou autoritou.</span><span class="sxs-lookup"><span data-stu-id="34836-197">That is, a certificate that contains only a public key/private key pair, but is not issued by a trusted authority.</span></span>  

## <a name="identity-checking-at-run-time"></a><span data-ttu-id="34836-198">Identita kontrolu za běhu</span><span class="sxs-lookup"><span data-stu-id="34836-198">Identity Checking at Run Time</span></span>  
 <span data-ttu-id="34836-199">V době návrhu vývojáře klienta určuje identitu serveru pomocí jeho metadata.</span><span class="sxs-lookup"><span data-stu-id="34836-199">At design time, a client developer determines the server's identity through its metadata.</span></span> <span data-ttu-id="34836-200">V době běhu je provedena kontrola identity před voláním žádné koncové body služby.</span><span class="sxs-lookup"><span data-stu-id="34836-200">At runtime, the identity check is performed before calling any endpoints on the service.</span></span>  
  
 <span data-ttu-id="34836-201">Hodnota identity je vázán na typ ověřování určené metadata; jinými slovy zadejte přihlašovací údaje použité pro službu.</span><span class="sxs-lookup"><span data-stu-id="34836-201">The identity value is tied to the type of authentication specified by metadata; in other words, the type of credentials used for the service.</span></span>  
  
 <span data-ttu-id="34836-202">Pokud kanál je nakonfigurován k ověření zprávy nebo transportní vrstvy SSL (Secure Sockets) pomocí certifikátů X.509 pro ověřování, platí následující hodnoty identity:</span><span class="sxs-lookup"><span data-stu-id="34836-202">If the channel is configured to authenticate using message- or transport-level Secure Sockets Layer (SSL) with X.509 certificates for authentication, the following identity values are valid:</span></span>  
  
- <span data-ttu-id="34836-203">DNS.</span><span class="sxs-lookup"><span data-stu-id="34836-203">DNS.</span></span> <span data-ttu-id="34836-204">WCF zajišťuje, že obsahuje položku certifikátu poskytnutého během metody handshake SSL DNS nebo `CommonName` (CN) atributu rovná hodnotě zadané v identitu DNS na klientovi.</span><span class="sxs-lookup"><span data-stu-id="34836-204">WCF ensures that the certificate provided during the SSL handshake contains a DNS or `CommonName` (CN) attribute equal to the value specified in the DNS identity on the client.</span></span> <span data-ttu-id="34836-205">Všimněte si, že tyto kontroly se provádějí kromě toho pro určení platnosti certifikátu serveru.</span><span class="sxs-lookup"><span data-stu-id="34836-205">Note that these checks are done in addition to determining the validity of the server certificate.</span></span> <span data-ttu-id="34836-206">Ve výchozím nastavení WCF ověří, že je certifikát serveru vydané důvěryhodnou kořenovou autoritou.</span><span class="sxs-lookup"><span data-stu-id="34836-206">By default, WCF validates that the server certificate is issued by a trusted root authority.</span></span>  
  
- <span data-ttu-id="34836-207">certifikát.</span><span class="sxs-lookup"><span data-stu-id="34836-207">Certificate.</span></span> <span data-ttu-id="34836-208">Během metody handshake SSL WCF zajistí, že vzdálený koncový bod poskytuje přesnou certifikátu hodnotu zadanou v identitě.</span><span class="sxs-lookup"><span data-stu-id="34836-208">During the SSL handshake, WCF ensures that the remote endpoint provides the exact certificate value specified in the identity.</span></span>  
  
- <span data-ttu-id="34836-209">Odkaz na certifikát.</span><span class="sxs-lookup"><span data-stu-id="34836-209">Certificate Reference.</span></span> <span data-ttu-id="34836-210">Stejné jako certifikát.</span><span class="sxs-lookup"><span data-stu-id="34836-210">Same as Certificate.</span></span>  
  
- <span data-ttu-id="34836-211">RSA.</span><span class="sxs-lookup"><span data-stu-id="34836-211">RSA.</span></span> <span data-ttu-id="34836-212">Během metody handshake SSL WCF zajistí, že vzdálený koncový bod poskytuje přesnou klíč RSA zadaný v identitě.</span><span class="sxs-lookup"><span data-stu-id="34836-212">During the SSL handshake, WCF ensures that the remote endpoint provides the exact RSA key specified in the identity.</span></span>  
  
 <span data-ttu-id="34836-213">Pokud služba se ověřuje pomocí SSL na úrovni zprávy nebo přenosu pomocí přihlašovacích údajů Windows pro ověřování a vyjedná přihlašovací údaje, platí následující hodnoty identity:</span><span class="sxs-lookup"><span data-stu-id="34836-213">If the service authenticates using message- or transport-level SSL with a Windows credential for authentication, and negotiates the credential, the following identity values are valid:</span></span>  
  
- <span data-ttu-id="34836-214">DNS.</span><span class="sxs-lookup"><span data-stu-id="34836-214">DNS.</span></span> <span data-ttu-id="34836-215">Vyjednávání předá SPN služby tak, aby název DNS můžete kontrolovat.</span><span class="sxs-lookup"><span data-stu-id="34836-215">The negotiation passes the service's SPN so that the DNS name can be checked.</span></span> <span data-ttu-id="34836-216">Hlavní název služby je ve formě `host/<dns name>`.</span><span class="sxs-lookup"><span data-stu-id="34836-216">The SPN is in the form `host/<dns name>`.</span></span>  
  
- <span data-ttu-id="34836-217">HLAVNÍ NÁZEV SLUŽBY.</span><span class="sxs-lookup"><span data-stu-id="34836-217">SPN.</span></span> <span data-ttu-id="34836-218">Explicitní služby se vrátí hlavní název služby, například `host/myservice`.</span><span class="sxs-lookup"><span data-stu-id="34836-218">An explicit service SPN is returned, for example, `host/myservice`.</span></span>  
  
- <span data-ttu-id="34836-219">HLAVNÍ NÁZEV UŽIVATELE.</span><span class="sxs-lookup"><span data-stu-id="34836-219">UPN.</span></span> <span data-ttu-id="34836-220">Hlavní název uživatele účtu služby.</span><span class="sxs-lookup"><span data-stu-id="34836-220">The UPN of the service account.</span></span> <span data-ttu-id="34836-221">Hlavní název uživatele je ve formě `username` @ `domain`.</span><span class="sxs-lookup"><span data-stu-id="34836-221">The UPN is in the form `username`@`domain`.</span></span> <span data-ttu-id="34836-222">Například pokud služba je spuštěna v uživatelském účtu, může být `username@contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="34836-222">For example, when the service is running in a user account, it may be `username@contoso.com`.</span></span>  
  
 <span data-ttu-id="34836-223">Programové určení identity (pomocí <xref:System.ServiceModel.EndpointAddress.Identity%2A> vlastnost) je volitelný.</span><span class="sxs-lookup"><span data-stu-id="34836-223">Specifying the identity programmatically (using the <xref:System.ServiceModel.EndpointAddress.Identity%2A> property) is optional.</span></span> <span data-ttu-id="34836-224">Pokud je zadána žádná identita a je typu pověření klienta Windows, výchozí hodnota je hodnota nastavena na název hostitele součástí adresu koncového bodu služby s předponou hlavního názvu služby "hostitele /" literál.</span><span class="sxs-lookup"><span data-stu-id="34836-224">If no identity is specified, and the client credential type is Windows, the default is SPN with the value set to the hostname part of the service endpoint address prefixed with the "host/" literal.</span></span> <span data-ttu-id="34836-225">Pokud je zadána žádná identita a typu pověření klienta je certifikát, výchozí hodnota je `Certificate`.</span><span class="sxs-lookup"><span data-stu-id="34836-225">If no identity is specified, and the client credential type is a certificate, the default is `Certificate`.</span></span> <span data-ttu-id="34836-226">To platí pro obě zprávy a přenos úroveň zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="34836-226">This applies to both message- and transport-level security.</span></span>  
  
## <a name="identity-and-custom-bindings"></a><span data-ttu-id="34836-227">Identita a vlastních vazeb</span><span class="sxs-lookup"><span data-stu-id="34836-227">Identity and Custom Bindings</span></span>  
 <span data-ttu-id="34836-228">Protože identity služby závisí na typu vazbu použít, ujistěte se, že je přístupný správnou identitu, při vytváření vlastní vazby.</span><span class="sxs-lookup"><span data-stu-id="34836-228">Because the identity of a service depends on the binding type used, ensure that an appropriate identity is exposed when creating a custom binding.</span></span> <span data-ttu-id="34836-229">Například v následujícím příkladu kódu identity vystavit není kompatibilní s typem zabezpečení, protože identita pro zaváděcí vazbu zabezpečené konverzace neodpovídá identitě pro vazbu v koncovém bodě.</span><span class="sxs-lookup"><span data-stu-id="34836-229">For example, in the following code example, the identity exposed is not compatible with the security type, because the identity for the secure conversation bootstrap binding does not match the identity for the binding on the endpoint.</span></span> <span data-ttu-id="34836-230">Vazbu zabezpečené konverzace nastaví identitu DNS, zatímco <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement> nastaví identitu (UPN) nebo hlavní název služby.</span><span class="sxs-lookup"><span data-stu-id="34836-230">The secure conversation binding sets the DNS identity, while the <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement> sets the UPN or SPN identity.</span></span>  
  
 [!code-csharp[C_Identity#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#8)]
 [!code-vb[C_Identity#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#8)]  
  
 <span data-ttu-id="34836-231">Další informace o tom, jak zásobníku vazby prvky správně pro vlastní vazbu, naleznete v tématu [Creating User-Defined vazby](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="34836-231">For more information about how to stack binding elements correctly for a custom binding, see [Creating User-Defined Bindings](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md).</span></span> <span data-ttu-id="34836-232">Další informace o vytvoření vlastní vazby s <xref:System.ServiceModel.Channels.SecurityBindingElement>, naleznete v tématu [jak: Vytvoření elementu SecurityBindingElement pro zadaný režim ověřování](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span><span class="sxs-lookup"><span data-stu-id="34836-232">For more information about creating a custom binding with the <xref:System.ServiceModel.Channels.SecurityBindingElement>, see [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="34836-233">Viz také:</span><span class="sxs-lookup"><span data-stu-id="34836-233">See also</span></span>

- [<span data-ttu-id="34836-234">Postupy: Vytvoření vlastní vazby pomocí elementu SecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="34836-234">How to: Create a Custom Binding Using the SecurityBindingElement</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)
- [<span data-ttu-id="34836-235">Postupy: Vytvoření elementu SecurityBindingElement pro zadaný režim ověřování</span><span class="sxs-lookup"><span data-stu-id="34836-235">How to: Create a SecurityBindingElement for a Specified Authentication Mode</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)
- [<span data-ttu-id="34836-236">Postupy: Vytvoření vlastního ověřovatele Identity</span><span class="sxs-lookup"><span data-stu-id="34836-236">How to: Create a Custom Client Identity Verifier</span></span>](../../../../docs/framework/wcf/extending/how-to-create-a-custom-client-identity-verifier.md)
- [<span data-ttu-id="34836-237">Výběr typu přihlašovacích údajů</span><span class="sxs-lookup"><span data-stu-id="34836-237">Selecting a Credential Type</span></span>](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md)
- [<span data-ttu-id="34836-238">Práce s certifikáty</span><span class="sxs-lookup"><span data-stu-id="34836-238">Working with Certificates</span></span>](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)
- [<span data-ttu-id="34836-239">Nástroj metadat modelu služby (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="34836-239">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)
- [<span data-ttu-id="34836-240">Vytváření uživatelem definovaných vazeb</span><span class="sxs-lookup"><span data-stu-id="34836-240">Creating User-Defined Bindings</span></span>](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md)
- [<span data-ttu-id="34836-241">Postupy: Načtení kryptografického otisku certifikátu</span><span class="sxs-lookup"><span data-stu-id="34836-241">How to: Retrieve the Thumbprint of a Certificate</span></span>](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md)
