---
title: Konfigurace HTTP a HTTPS - WCF
ms.date: 04/08/2019
helpviewer_keywords:
- configuring HTTP [WCF]
ms.assetid: b0c29a86-bc0c-41b3-bc1e-4eb5bb5714d4
ms.openlocfilehash: 86705a4f8daa327c442ac6c53c9b44c5b5c5c2ad
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/23/2019
ms.locfileid: "61857360"
---
# <a name="configuring-http-and-https"></a><span data-ttu-id="7ca70-102">Konfigurace HTTP a HTTPS</span><span class="sxs-lookup"><span data-stu-id="7ca70-102">Configuring HTTP and HTTPS</span></span>

<span data-ttu-id="7ca70-103">Služby WCF a klienti mohou komunikovat prostřednictvím protokolu HTTP a HTTPS.</span><span class="sxs-lookup"><span data-stu-id="7ca70-103">WCF services and clients can communicate over HTTP and HTTPS.</span></span> <span data-ttu-id="7ca70-104">Nastavení HTTP/HTTPS se konfigurují pomocí Internetové informační služby (IIS) nebo pomocí nástroje příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="7ca70-104">The HTTP/HTTPS settings are configured by using Internet Information Services (IIS) or through the use of a command-line tool.</span></span> <span data-ttu-id="7ca70-105">Když je služba WCF hostované na nastavení služby IIS protokolu HTTP nebo HTTPS lze nastavit v rámci služby IIS (pomocí nástroje inetmgr.exe).</span><span class="sxs-lookup"><span data-stu-id="7ca70-105">When a WCF service is hosted under IIS HTTP or HTTPS settings can be configured within IIS (using the inetmgr.exe tool).</span></span> <span data-ttu-id="7ca70-106">Pokud je služba WCF v místním prostředí, HTTP nebo HTTPS je nakonfigurováno pomocí nástroje příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="7ca70-106">If a WCF service is self-hosted, HTTP or HTTPS settings are configured by using a command-line tool.</span></span>

<span data-ttu-id="7ca70-107">Minimálně chcete konfigurovat adresu URL registrace a přidat výjimku brány Firewall pro adresu URL vaší služby budete používat.</span><span class="sxs-lookup"><span data-stu-id="7ca70-107">At a minimum, you want to configure a URL registration and add a Firewall exception for the URL your service will be using.</span></span> <span data-ttu-id="7ca70-108">Tato nastavení můžete konfigurovat pomocí nástroje Netsh.exe.</span><span class="sxs-lookup"><span data-stu-id="7ca70-108">You can configure these settings with the Netsh.exe tool.</span></span>

## <a name="configuring-namespace-reservations"></a><span data-ttu-id="7ca70-109">Konfigurace rezervace oboru názvů</span><span class="sxs-lookup"><span data-stu-id="7ca70-109">Configuring namespace reservations</span></span>

<span data-ttu-id="7ca70-110">Rezervace Namespace přiřadí oprávnění pro část oboru názvů HTTP URL ke konkrétní skupině uživatelů.</span><span class="sxs-lookup"><span data-stu-id="7ca70-110">Namespace reservation assigns the rights for a portion of the HTTP URL namespace to a particular group of users.</span></span> <span data-ttu-id="7ca70-111">Rezervace opravňuje tito uživatelé vytvářet služby, které naslouchat na část oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="7ca70-111">A reservation gives those users the right to create services that listen on that portion of the namespace.</span></span> <span data-ttu-id="7ca70-112">Rezervace se předpony adres URL, to znamená, že rezervace pokrývá všechny dílčí cesty rezervace.</span><span class="sxs-lookup"><span data-stu-id="7ca70-112">Reservations are URL prefixes, meaning that the reservation covers all subpaths of the reservation path.</span></span> <span data-ttu-id="7ca70-113">Rezervace Namespace povolit dva způsoby, jak použít zástupné znaky.</span><span class="sxs-lookup"><span data-stu-id="7ca70-113">Namespace reservations permit two ways to use wildcards.</span></span> <span data-ttu-id="7ca70-114">Popisuje dokumentace k rozhraní API serveru HTTP [pořadí rozlišení rozsahu deklarace identity oboru názvů, které se týkají zástupné znaky](/windows/desktop/Http/routing-incoming-requests).</span><span class="sxs-lookup"><span data-stu-id="7ca70-114">The HTTP Server API documentation describes the [order of resolution between namespace claims that involve wildcards](/windows/desktop/Http/routing-incoming-requests).</span></span>

<span data-ttu-id="7ca70-115">Podobně jako požadavek na přidání registrace oboru názvů můžete vytvořit běžící aplikaci.</span><span class="sxs-lookup"><span data-stu-id="7ca70-115">A running application can create a similar request to add namespace registrations.</span></span> <span data-ttu-id="7ca70-116">Registrace a rezervace soutěžit o části obor názvů.</span><span class="sxs-lookup"><span data-stu-id="7ca70-116">Registrations and reservations compete for portions of the namespace.</span></span> <span data-ttu-id="7ca70-117">Rezervace mohou mít přednost před registrace podle pořadí podle rozlišení [pořadí rozlišení rozsahu deklarace identity oboru názvů, které se týkají zástupné znaky](/windows/desktop/Http/routing-incoming-requests).</span><span class="sxs-lookup"><span data-stu-id="7ca70-117">A reservation may have precedence over a registration according to the order of resolution given in the [order of resolution between namespace claims that involve wildcards](/windows/desktop/Http/routing-incoming-requests).</span></span> <span data-ttu-id="7ca70-118">V takovém případě rezervace blokuje běžící aplikaci příjem požadavků.</span><span class="sxs-lookup"><span data-stu-id="7ca70-118">In this case, the reservation blocks the running application from receiving requests.</span></span>

<span data-ttu-id="7ca70-119">Pomocí nástroje Netsh.exe v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="7ca70-119">The following example uses the Netsh.exe tool:</span></span>

```console
netsh http add urlacl url=http://+:80/MyUri user=DOMAIN\user
```

<span data-ttu-id="7ca70-120">Tento příkaz přidá rezervaci adresy URL pro obor názvů zadané adresy URL pro účet doména\uživatel.</span><span class="sxs-lookup"><span data-stu-id="7ca70-120">This command adds a URL reservation for the specified URL namespace for the DOMAIN\user account.</span></span> <span data-ttu-id="7ca70-121">Další informace o použití příkazu netsh, zadejte `netsh http add urlacl /?` v příkazovém řádku a potom stiskněte klávesu Enter.</span><span class="sxs-lookup"><span data-stu-id="7ca70-121">For more information on using the netsh command, type `netsh http add urlacl /?` in a command-prompt and press Enter.</span></span>

## <a name="configuring-a-firewall-exception"></a><span data-ttu-id="7ca70-122">Konfigurace výjimek brány firewall</span><span class="sxs-lookup"><span data-stu-id="7ca70-122">Configuring a firewall exception</span></span>

<span data-ttu-id="7ca70-123">Při samoobslužné hostování služby WCF, který komunikuje přes protokol HTTP, výjimky musí být přidány do konfigurace brány firewall pro povolení příchozích připojení pomocí konkrétní adresy URL.</span><span class="sxs-lookup"><span data-stu-id="7ca70-123">When self-hosting a WCF service that communicates over HTTP, an exception must be added to the firewall configuration to allow inbound connections using a particular URL.</span></span>

## <a name="configuring-ssl-certificates"></a><span data-ttu-id="7ca70-124">Konfigurace certifikátů SSL</span><span class="sxs-lookup"><span data-stu-id="7ca70-124">Configuring SSL certificates</span></span>

<span data-ttu-id="7ca70-125">Protokol vrstvy SSL (Secure Sockets) používá certifikáty na klienta a serveru pro ukládání šifrovacích klíčů.</span><span class="sxs-lookup"><span data-stu-id="7ca70-125">The Secure Sockets Layer (SSL) protocol uses certificates on the client and server to store encryption keys.</span></span> <span data-ttu-id="7ca70-126">Server poskytuje svůj certifikát SSL, když se vytvoří připojení tak, aby klient lze ověřit identitu serveru.</span><span class="sxs-lookup"><span data-stu-id="7ca70-126">The server provides its SSL certificate when a connection is made so that the client can verify the server identity.</span></span> <span data-ttu-id="7ca70-127">Na serveru můžete také požádat o certifikát od klienta k zajištění vzájemného ověřování obou stranách připojení.</span><span class="sxs-lookup"><span data-stu-id="7ca70-127">The server can also request a certificate from the client to provide mutual authentication of both sides of the connection.</span></span>

<span data-ttu-id="7ca70-128">Certifikáty jsou uloženy v centralizované úložiště podle IP adresy a portu počtu připojení.</span><span class="sxs-lookup"><span data-stu-id="7ca70-128">Certificates are stored in a centralized store according to the IP address and port number of the connection.</span></span> <span data-ttu-id="7ca70-129">Speciální IP adresu 0.0.0.0 odpovídá jakékoli IP adresu místního počítače.</span><span class="sxs-lookup"><span data-stu-id="7ca70-129">The special IP address 0.0.0.0 matches any IP address for the local machine.</span></span> <span data-ttu-id="7ca70-130">Všimněte si, že úložiště certifikátů není rozlišit adresy URL na základě cesty.</span><span class="sxs-lookup"><span data-stu-id="7ca70-130">Note that the certificate store doesn't distinguish URLs based on the path.</span></span> <span data-ttu-id="7ca70-131">Služby se stejnou IP adresu a port kombinací musí sdílet certifikáty, i v případě, že cesta v adrese URL pro služby se liší.</span><span class="sxs-lookup"><span data-stu-id="7ca70-131">Services with the same IP address and port combination must share certificates even if the path in the URL for the services is different.</span></span>

<span data-ttu-id="7ca70-132">Podrobné pokyny najdete v tématu [jak: Konfigurace portu s certifikátem SSL](how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="7ca70-132">For step-by-step instructions, see [How to: Configure a Port with an SSL Certificate](how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>

## <a name="configuring-the-ip-listen-list"></a><span data-ttu-id="7ca70-133">Konfigurace seznamu vlastností listenurimode nastavenou IP</span><span class="sxs-lookup"><span data-stu-id="7ca70-133">Configuring the IP Listen List</span></span>

<span data-ttu-id="7ca70-134">Rozhraní API HTTP serveru vytvoří vazbu jenom na IP adresu a port jakmile se uživatel zaregistruje adresy URL.</span><span class="sxs-lookup"><span data-stu-id="7ca70-134">The HTTP Server API only binds to an IP address and port once a user registers a URL.</span></span> <span data-ttu-id="7ca70-135">Ve výchozím nastavení rozhraní API serveru HTTP váže na port v adrese URL pro všechny IP adresy počítače.</span><span class="sxs-lookup"><span data-stu-id="7ca70-135">By default, the HTTP Server API binds to the port in the URL for all of the IP addresses of the machine.</span></span> <span data-ttu-id="7ca70-136">Konflikt nastane, pokud aplikace, která nepoužívá rozhraní API serveru HTTP byl dříve spojen daná kombinace IP adresy a portu.</span><span class="sxs-lookup"><span data-stu-id="7ca70-136">A conflict arises if an application that doesn't use the HTTP Server API has previously bound to that combination of IP address and port.</span></span> <span data-ttu-id="7ca70-137">Seznam naslouchání IP umožňuje služeb WCF pro existovat současně s aplikací, které používají port pro některé z IP adresy počítače.</span><span class="sxs-lookup"><span data-stu-id="7ca70-137">The IP Listen List allows WCF services to coexist with applications that use a port for some of the IP addresses of the machine.</span></span> <span data-ttu-id="7ca70-138">Pokud IP naslouchání seznam obsahuje všechny položky, rozhraní API HTTP serveru pouze vytvoří vazbu tyto IP adresy, které určuje seznamu.</span><span class="sxs-lookup"><span data-stu-id="7ca70-138">If the IP Listen List contains any entries, the HTTP Server API only binds to those IP addresses that the list specifies.</span></span> <span data-ttu-id="7ca70-139">Úprava seznamu naslouchání IP vyžaduje oprávnění správce.</span><span class="sxs-lookup"><span data-stu-id="7ca70-139">Modifying the IP Listen List requires administrative privileges.</span></span>

<span data-ttu-id="7ca70-140">Pomocí nástroje netsh k úpravě seznamu naslouchání IP, jak je znázorněno v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="7ca70-140">Use the netsh tool to modify the IP Listen List, as shown in the following example:</span></span>

```console
netsh http add iplisten ipaddress=0.0.0.0:8000
```

## <a name="other-configuration-settings"></a><span data-ttu-id="7ca70-141">Další nastavení konfigurace</span><span class="sxs-lookup"><span data-stu-id="7ca70-141">Other configuration settings</span></span>

<span data-ttu-id="7ca70-142">Při použití <xref:System.ServiceModel.WSDualHttpBinding>, připojení klienta používá výchozí hodnoty, které jsou kompatibilní s rezervace oboru názvů a brány Windows firewall.</span><span class="sxs-lookup"><span data-stu-id="7ca70-142">When using <xref:System.ServiceModel.WSDualHttpBinding>, the client connection uses defaults that are compatible with namespace reservations and the Windows firewall.</span></span> <span data-ttu-id="7ca70-143">Pokud budete chtít upravit základní adresu duální připojení klienta, také musíte nakonfigurovat nastavení protokolu HTTP na straně klienta tak, aby odpovídala nové adrese.</span><span class="sxs-lookup"><span data-stu-id="7ca70-143">If you choose to customize the client base address of a dual connection, then you also must configure these HTTP settings on the client to match the new address.</span></span>

<span data-ttu-id="7ca70-144">Rozhraní API HTTP Server má nastavení některé pokročilé konfigurace, které nejsou k dispozici prostřednictvím HttpCfg.</span><span class="sxs-lookup"><span data-stu-id="7ca70-144">The HTTP Server API has some advanced configuration settings that aren't available through HttpCfg.</span></span> <span data-ttu-id="7ca70-145">Tato nastavení se zachovají v registru a platí pro všechny aplikace spuštěné v systémech, které používají rozhraní API serveru HTTP.</span><span class="sxs-lookup"><span data-stu-id="7ca70-145">These settings are maintained in the registry and apply to all applications running on the systems that use the HTTP Server APIs.</span></span> <span data-ttu-id="7ca70-146">Informace o těchto nastaveních najdete v tématu [nastavení registru Http.sys pro službu IIS](https://support.microsoft.com/en-us/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="7ca70-146">For information about these settings, see [Http.sys registry settings for IIS](https://support.microsoft.com/en-us/help/820129/http-sys-registry-settings-for-windows).</span></span> <span data-ttu-id="7ca70-147">Většina uživatelů nemusí tato nastavení změnit.</span><span class="sxs-lookup"><span data-stu-id="7ca70-147">Most users don't need to change these settings.</span></span>

## <a name="see-also"></a><span data-ttu-id="7ca70-148">Viz také:</span><span class="sxs-lookup"><span data-stu-id="7ca70-148">See also</span></span>

- <xref:System.ServiceModel.WSDualHttpBinding>
- [<span data-ttu-id="7ca70-149">Postupy: Konfigurace portu s certifikátem SSL</span><span class="sxs-lookup"><span data-stu-id="7ca70-149">How to: Configure a Port with an SSL Certificate</span></span>](how-to-configure-a-port-with-an-ssl-certificate.md)
