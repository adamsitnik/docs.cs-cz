---
title: Řešení potíží se zasíláním zpráv zařazovaných do front
ms.date: 03/30/2017
ms.assetid: a5f2836f-018d-42f5-a571-1e97e64ea5b0
ms.openlocfilehash: c85b0701c870fe2b4a3c11dc384e890e1ed001dd
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/22/2019
ms.locfileid: "59977285"
---
# <a name="troubleshooting-queued-messaging"></a><span data-ttu-id="d4a80-102">Řešení potíží se zasíláním zpráv zařazovaných do front</span><span class="sxs-lookup"><span data-stu-id="d4a80-102">Troubleshooting Queued Messaging</span></span>
<span data-ttu-id="d4a80-103">Tato část obsahuje běžné dotazy a řešení potíží s pomoci při používání front ve Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="d4a80-103">This section contains common questions and troubleshooting help for using queues in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="common-questions"></a><span data-ttu-id="d4a80-104">Nejčastější dotazy</span><span class="sxs-lookup"><span data-stu-id="d4a80-104">Common Questions</span></span>  
 <span data-ttu-id="d4a80-105">**DOTAZ:** Můžu použít WCF Beta 1 a mám nainstalovanou opravu hotfix služby MSMQ.</span><span class="sxs-lookup"><span data-stu-id="d4a80-105">**Q:** I used WCF Beta 1 and I installed the MSMQ hotfix.</span></span> <span data-ttu-id="d4a80-106">Je potřeba odebrat opravu hotfix?</span><span class="sxs-lookup"><span data-stu-id="d4a80-106">Do I need to remove the hotfix?</span></span>  
  
 <span data-ttu-id="d4a80-107">**ODPOVĚĎ:** Ano.</span><span class="sxs-lookup"><span data-stu-id="d4a80-107">**A:** Yes.</span></span> <span data-ttu-id="d4a80-108">Tato oprava hotfix se už nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="d4a80-108">This hotfix is no longer supported.</span></span> <span data-ttu-id="d4a80-109">WCF teď funguje v MSMQ bez požadavek na opravu hotfix.</span><span class="sxs-lookup"><span data-stu-id="d4a80-109">WCF now works on MSMQ without a hotfix requirement.</span></span>  
  
 <span data-ttu-id="d4a80-110">**DOTAZ:** Existují dvě vazby pro službu MSMQ: <xref:System.ServiceModel.NetMsmqBinding> a <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span><span class="sxs-lookup"><span data-stu-id="d4a80-110">**Q:** There are two bindings for MSMQ: <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span> <span data-ttu-id="d4a80-111">Kterou možnost mám použít a kdy?</span><span class="sxs-lookup"><span data-stu-id="d4a80-111">What should I use and when?</span></span>  
  
 <span data-ttu-id="d4a80-112">**ODPOVĚĎ:** Použít <xref:System.ServiceModel.NetMsmqBinding> Pokud chcete použít pro komunikaci ve frontě mezi dvěma aplikacemi WCF služby MSMQ jako přenosového mechanismu.</span><span class="sxs-lookup"><span data-stu-id="d4a80-112">**A:** Use the <xref:System.ServiceModel.NetMsmqBinding> when you want to use MSMQ as a transport for queued communication between two WCF applications.</span></span> <span data-ttu-id="d4a80-113">Použít <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> Pokud chcete použít existující aplikacím služby MSMQ ke komunikaci s novou aplikací služby WCF.</span><span class="sxs-lookup"><span data-stu-id="d4a80-113">Use the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> when you want to use existing MSMQ applications to communicate with new WCF applications.</span></span>  
  
 <span data-ttu-id="d4a80-114">**DOTAZ:** Je nutné upgradovat služby MSMQ používat <xref:System.ServiceModel.NetMsmqBinding> a `MsmqIntegration` vazby?</span><span class="sxs-lookup"><span data-stu-id="d4a80-114">**Q:** Do I have to upgrade MSMQ to use the <xref:System.ServiceModel.NetMsmqBinding> and `MsmqIntegration` bindings?</span></span>  
  
 <span data-ttu-id="d4a80-115">**ODPOVĚĎ:** Ne.</span><span class="sxs-lookup"><span data-stu-id="d4a80-115">**A:** No.</span></span> <span data-ttu-id="d4a80-116">Obě vazby pracovat s MSMQ 3.0 na [!INCLUDE[wxp](../../../../includes/wxp-md.md)] a [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d4a80-116">Both bindings work with MSMQ 3.0 on [!INCLUDE[wxp](../../../../includes/wxp-md.md)] and [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)].</span></span> <span data-ttu-id="d4a80-117">Některé funkce vazby k dispozici, když upgradujete na službu MSMQ 4.0 v [!INCLUDE[wv](../../../../includes/wv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d4a80-117">Certain features of the bindings become available when you upgrade to MSMQ 4.0 in [!INCLUDE[wv](../../../../includes/wv-md.md)].</span></span>  
  
 <span data-ttu-id="d4a80-118">**DOTAZ:** Jaké funkce <xref:System.ServiceModel.NetMsmqBinding> a <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> vazeb jsou k dispozici v MSMQ 4.0, ale ne v MSMQ 3.0?</span><span class="sxs-lookup"><span data-stu-id="d4a80-118">**Q:** What features of the <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> bindings are available in MSMQ 4.0 but not in MSMQ 3.0?</span></span>  
  
 <span data-ttu-id="d4a80-119">**ODPOVĚĎ:** K dispozici v MSMQ 4.0, ale ne v MSMQ 3.0 spadají následující funkce:</span><span class="sxs-lookup"><span data-stu-id="d4a80-119">**A:** The following features are available in MSMQ 4.0 but not in MSMQ 3.0:</span></span>  
  
-   <span data-ttu-id="d4a80-120">Vlastní frontu nedoručených zpráv je podporován pouze v MSMQ 4.0.</span><span class="sxs-lookup"><span data-stu-id="d4a80-120">Custom dead-letter queue is supported only on MSMQ 4.0.</span></span>  
  
-   <span data-ttu-id="d4a80-121">Služba MSMQ 3.0 a 4.0 zpracování jinak nezpracovatelných zpráv.</span><span class="sxs-lookup"><span data-stu-id="d4a80-121">MSMQ 3.0 and 4.0 handle poison messages differently.</span></span>  
  
-   <span data-ttu-id="d4a80-122">Pouze služba MSMQ 4.0 podporuje vzdálené transakce čtení.</span><span class="sxs-lookup"><span data-stu-id="d4a80-122">Only MSMQ 4.0 supports remote transacted read.</span></span>  
  
 <span data-ttu-id="d4a80-123">Další informace najdete v tématu [rozdíly ve funkcích služby Řízení front ve Windows Vista, Windows Server 2003 a Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span><span class="sxs-lookup"><span data-stu-id="d4a80-123">For more information, see [Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span></span>  
  
 <span data-ttu-id="d4a80-124">**DOTAZ:** Můžete použít služby MSMQ 3.0 na jedné straně komunikaci ve frontě a MSMQ 4.0 na druhé straně?</span><span class="sxs-lookup"><span data-stu-id="d4a80-124">**Q:** Can I use MSMQ 3.0 on one side of a queued communication and MSMQ 4.0 on the other side?</span></span>  
  
 <span data-ttu-id="d4a80-125">**ODPOVĚĎ:** Ano.</span><span class="sxs-lookup"><span data-stu-id="d4a80-125">**A:** Yes.</span></span>  
  
 <span data-ttu-id="d4a80-126">**DOTAZ:** Chci, aby stávající služby MSMQ aplikace integrovat nové WCF klientů nebo serverů.</span><span class="sxs-lookup"><span data-stu-id="d4a80-126">**Q:** I want to integrate existing MSMQ applications with new WCF clients or servers.</span></span> <span data-ttu-id="d4a80-127">Je potřeba upgradovat na obou stranách Moje MSMQ infrastruktury?</span><span class="sxs-lookup"><span data-stu-id="d4a80-127">Do I need to upgrade both sides of my MSMQ infrastructure?</span></span>  
  
 <span data-ttu-id="d4a80-128">**ODPOVĚĎ:** Ne.</span><span class="sxs-lookup"><span data-stu-id="d4a80-128">**A:** No.</span></span> <span data-ttu-id="d4a80-129">Není potřeba upgradovat na službu MSMQ 4.0 na obou stranách.</span><span class="sxs-lookup"><span data-stu-id="d4a80-129">You do not have to upgrade to MSMQ 4.0 on either side.</span></span>  
  
## <a name="troubleshooting"></a><span data-ttu-id="d4a80-130">Poradce při potížích</span><span class="sxs-lookup"><span data-stu-id="d4a80-130">Troubleshooting</span></span>  
 <span data-ttu-id="d4a80-131">Tato část obsahuje odpovědi na nejčastější řešení problémů.</span><span class="sxs-lookup"><span data-stu-id="d4a80-131">This section contains answers to most common troubleshooting issues.</span></span> <span data-ttu-id="d4a80-132">Některé problémy, které jsou známé omezení jsou také popsány v poznámkách k verzi.</span><span class="sxs-lookup"><span data-stu-id="d4a80-132">Some issues that are known limitations are also described in the release notes.</span></span>  
  
 <span data-ttu-id="d4a80-133">**DOTAZ:** Provést použít soukromé fronty a získat následující výjimku: `System.InvalidOperationException`: Adresa URL je neplatná.</span><span class="sxs-lookup"><span data-stu-id="d4a80-133">**Q:** I am trying to use a private queue and I get the following exception: `System.InvalidOperationException`: The URL is invalid.</span></span> <span data-ttu-id="d4a80-134">Adresa URL pro frontu nesmí obsahovat znak "$".</span><span class="sxs-lookup"><span data-stu-id="d4a80-134">The URL for the queue cannot contain the '$' character.</span></span> <span data-ttu-id="d4a80-135">Použijte syntaxi v adrese NET.MSMQ://machine/private/queueName k adresování soukromé fronty.</span><span class="sxs-lookup"><span data-stu-id="d4a80-135">Use the syntax in net.msmq://machine/private/queueName to address a private queue.</span></span>  
  
 <span data-ttu-id="d4a80-136">**ODPOVĚĎ:** Zkontrolujte, zda fronta identifikátor URI (Uniform Resource) ve vaší konfiguraci a kód.</span><span class="sxs-lookup"><span data-stu-id="d4a80-136">**A:** Please check the queue Uniform Resource Identifier (URI) in your configuration and code.</span></span> <span data-ttu-id="d4a80-137">Nepoužívejte znak "$" v identifikátoru URI.</span><span class="sxs-lookup"><span data-stu-id="d4a80-137">Do not use the "$" character in the URI.</span></span> <span data-ttu-id="d4a80-138">Například adresování soukromé fronty s názvem OrdersQueue, zadejte jako net.msmq://localhost/private/ordersQueue identifikátoru URI.</span><span class="sxs-lookup"><span data-stu-id="d4a80-138">For example, to address a private queue named OrdersQueue, specify the URI as net.msmq://localhost/private/ordersQueue.</span></span>  
  
 <span data-ttu-id="d4a80-139">**DOTAZ:** Volání `ServiceHost.Open()` na aplikaci ve frontě vyvolala následující výjimku: `System.ArgumentException`: Základní adresa nesmí obsahovat řetězec dotazu identifikátoru URI.</span><span class="sxs-lookup"><span data-stu-id="d4a80-139">**Q:** Calling `ServiceHost.Open()` on my queued application throws the following exception: `System.ArgumentException`: A base address cannot contain a URI query string.</span></span> <span data-ttu-id="d4a80-140">Proč?</span><span class="sxs-lookup"><span data-stu-id="d4a80-140">Why?</span></span>  
  
 <span data-ttu-id="d4a80-141">**ODPOVĚĎ:** Zkontrolujte fronty identifikátor URI v konfiguračním souboru a ve vašem kódu.</span><span class="sxs-lookup"><span data-stu-id="d4a80-141">**A:** Check the queue URI in your configuration file and in your code.</span></span> <span data-ttu-id="d4a80-142">Zatímco fronty MSMQ podporují použití "?" znak, identifikátory URI tento znak interpretovat jako začátek řetězce dotazu.</span><span class="sxs-lookup"><span data-stu-id="d4a80-142">While MSMQ queues support the use of the '?' character, URIs interpret this character as the beginning of a string query.</span></span> <span data-ttu-id="d4a80-143">Chcete-li tomuto problému vyhnout, použijte názvy front, které neobsahují "?" znaků.</span><span class="sxs-lookup"><span data-stu-id="d4a80-143">To avoid this issue, use queue names that do not contain '?' characters.</span></span>  
  
 <span data-ttu-id="d4a80-144">**DOTAZ:** Moje odesílání úspěšné, ale žádné operaci služby se vyvolá u příjemce.</span><span class="sxs-lookup"><span data-stu-id="d4a80-144">**Q:** My send succeeded but no service operation is invoked on the receiver.</span></span> <span data-ttu-id="d4a80-145">Proč?</span><span class="sxs-lookup"><span data-stu-id="d4a80-145">Why?</span></span>  
  
 <span data-ttu-id="d4a80-146">**ODPOVĚĎ:** Chcete-li zjistit odpověď, seznámení se základními následujícím kontrolním seznamu:</span><span class="sxs-lookup"><span data-stu-id="d4a80-146">**A:** To determine the answer, work through the following check list:</span></span>  
  
-   <span data-ttu-id="d4a80-147">Zkontrolujte, jestli jsou kompatibilní s záruky zadaný transakční fronty požadavků.</span><span class="sxs-lookup"><span data-stu-id="d4a80-147">Check that the transactional queue requirements are compatible with the assurances specified.</span></span> <span data-ttu-id="d4a80-148">Mějte na paměti následující zásady:</span><span class="sxs-lookup"><span data-stu-id="d4a80-148">Note the following principles:</span></span>  
  
    -   <span data-ttu-id="d4a80-149">Můžete odeslat trvalý zprávy (datagramů a relace) s "právě jednou" záruky (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`) pouze pro transakční frontu.</span><span class="sxs-lookup"><span data-stu-id="d4a80-149">You can send durable messages (datagrams and sessions) with "exactly once" assurances (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`) only to a transactional queue.</span></span>  
  
    -   <span data-ttu-id="d4a80-150">Můžete odeslat relace pouze s "právě jednou" záruky.</span><span class="sxs-lookup"><span data-stu-id="d4a80-150">You can send sessions only with "exactly once" assurances.</span></span>  
  
    -   <span data-ttu-id="d4a80-151">Transakce se vyžaduje pro příjem zpráv v transakční frontě relaci.</span><span class="sxs-lookup"><span data-stu-id="d4a80-151">A transaction is required to receive messages in a session from a transactional queue.</span></span>  
  
    -   <span data-ttu-id="d4a80-152">Můžete odesílat nebo přijímat přechodné nebo trvalé zprávy (pouze datagramy) s žádné záruky (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`) pouze pro transakční frontu.</span><span class="sxs-lookup"><span data-stu-id="d4a80-152">You can send or receive volatile or durable messages (datagrams only) with no assurances (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`) only to a non-transactional queue.</span></span>  
  
-   <span data-ttu-id="d4a80-153">Zkontrolujte fronty nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="d4a80-153">Check the dead-letter queue.</span></span> <span data-ttu-id="d4a80-154">Pokud zjistíte, že zprávy, zjistit, proč se doručit.</span><span class="sxs-lookup"><span data-stu-id="d4a80-154">If you find the messages there, determine why they were not delivered.</span></span>  
  
-   <span data-ttu-id="d4a80-155">Zkontrolujte fronty odesílaných zpráv pro připojení nebo řeší problémy.</span><span class="sxs-lookup"><span data-stu-id="d4a80-155">Check the outgoing queues for connectivity or addressing problems.</span></span>  
  
 <span data-ttu-id="d4a80-156">**DOTAZ:** Zadání vlastní frontu nedoručených zpráv, ale při spuštění aplikace odesílatele, získat výjimku, která nebyla nalezena fronty nedoručených zpráv nebo odesílací aplikace nemá oprávnění pro frontu nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="d4a80-156">**Q:** I have specified a custom dead-letter queue, but when I start the sender application, I get an exception that either the dead-letter queue is not found, or the sending application has no permission to the dead-letter queue.</span></span> <span data-ttu-id="d4a80-157">Proč k tomu dochází?</span><span class="sxs-lookup"><span data-stu-id="d4a80-157">Why is this happening?</span></span>  
  
 <span data-ttu-id="d4a80-158">**ODPOVĚĎ:** Vlastní frontu nedoručených zpráv identifikátor URI musí obsahovat "localhost" ani název počítače v první segment, například net.msmq://localhost/private/myAppdead-letter fronty.</span><span class="sxs-lookup"><span data-stu-id="d4a80-158">**A:** The custom dead-letter queue URI must include a "localhost" or the computer name in the first segment, for example, net.msmq://localhost/private/myAppdead-letter queue.</span></span>  
  
 <span data-ttu-id="d4a80-159">**DOTAZ:** Platí to vždy nezbytné k definování vlastní frontu nedoručených zpráv, nebo je výchozí fronta nedoručených zpráv?</span><span class="sxs-lookup"><span data-stu-id="d4a80-159">**Q:** Is it always necessary to define a custom dead-letter queue, or is there a default dead-letter queue?</span></span>  
  
 <span data-ttu-id="d4a80-160">**ODPOVĚĎ:** Pokud jsou záruky "právě jednou" (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`), a pokud nezadáte vlastní frontu nedoručených zpráv, výchozí hodnota je systémová transakční fronty nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="d4a80-160">**A:** If assurances are "exactly once" (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`), and if you do not specify a custom dead-letter queue, the default is a system-wide transactional dead-letter queue.</span></span>  
  
 <span data-ttu-id="d4a80-161">Pokud záruky k žádným nedošlo (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`), pak výchozí hodnota je žádné funkce fronty nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="d4a80-161">If assurances are none (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`), then the default is no dead-letter queue functionality.</span></span>  
  
 <span data-ttu-id="d4a80-162">**DOTAZ:** Služba se vyvolá na SvcHost.Open s zpráva "EndpointListener požadavky nelze splnit třídou ListenerFactory".</span><span class="sxs-lookup"><span data-stu-id="d4a80-162">**Q:** My service throws on SvcHost.Open with a message "EndpointListener requirements cannot be met by the ListenerFactory".</span></span> <span data-ttu-id="d4a80-163">Proč?</span><span class="sxs-lookup"><span data-stu-id="d4a80-163">Why?</span></span>  
  
 <span data-ttu-id="d4a80-164">A.</span><span class="sxs-lookup"><span data-stu-id="d4a80-164">A.</span></span> <span data-ttu-id="d4a80-165">Zkontrolujte váš kontraktu služby.</span><span class="sxs-lookup"><span data-stu-id="d4a80-165">Check your service contract.</span></span> <span data-ttu-id="d4a80-166">Možná jste zapomněli vložit "IsOneWay =`true`" na všechny operace služby.</span><span class="sxs-lookup"><span data-stu-id="d4a80-166">You may have forgotten to put "IsOneWay=`true`" on all the service operations.</span></span> <span data-ttu-id="d4a80-167">Fronty podporují pouze jednosměrné servisní operace.</span><span class="sxs-lookup"><span data-stu-id="d4a80-167">Queues support only one-way service operations.</span></span>  
  
 <span data-ttu-id="d4a80-168">**DOTAZ:** Existují zprávy ve frontě, ale je vyvolána žádná operace služby.</span><span class="sxs-lookup"><span data-stu-id="d4a80-168">**Q:** There are messages in the queue but no service operation is invoked.</span></span> <span data-ttu-id="d4a80-169">V čem je problém?</span><span class="sxs-lookup"><span data-stu-id="d4a80-169">What is the problem?</span></span>  
  
 <span data-ttu-id="d4a80-170">**ODPOVĚĎ:** Určete, pokud je váš hostitel služby selhal.</span><span class="sxs-lookup"><span data-stu-id="d4a80-170">**A:** Determine if your service host is faulted.</span></span> <span data-ttu-id="d4a80-171">Můžete zkontrolovat, že prohlížení trasování nebo implementaci `IErrorHandler`.</span><span class="sxs-lookup"><span data-stu-id="d4a80-171">You can check by looking at the trace or implementing `IErrorHandler`.</span></span> <span data-ttu-id="d4a80-172">Chyby služby hostitele, ve výchozím nastavení, pokud se zjistí počet nezpracovatelných zpráv.</span><span class="sxs-lookup"><span data-stu-id="d4a80-172">Service host faults, by default, if a poison message is detected.</span></span>  
  
 <span data-ttu-id="d4a80-173">**DOTAZ:** Existují zprávy ve frontě, ale můj Web hostovaný ve frontě služby získávání neaktivovat.</span><span class="sxs-lookup"><span data-stu-id="d4a80-173">**Q:** There are messages in the queue but my Web-hosted queued service is not getting activated.</span></span> <span data-ttu-id="d4a80-174">Proč?</span><span class="sxs-lookup"><span data-stu-id="d4a80-174">Why?</span></span>  
  
 <span data-ttu-id="d4a80-175">**ODPOVĚĎ:** Nejběžnějším důvodem je oprávnění.</span><span class="sxs-lookup"><span data-stu-id="d4a80-175">**A:** The most common reason is permissions.</span></span>  
  
1. <span data-ttu-id="d4a80-176">Ujistěte se, že `NetMsmqActivator` je proces spuštěn a její identitu `NetMsmqActivator` procesu je uveden pro čtení a hledání oprávnění ve frontě.</span><span class="sxs-lookup"><span data-stu-id="d4a80-176">Ensure that the `NetMsmqActivator` process is running and the identity of the `NetMsmqActivator` process is given read and seek permission on the queue.</span></span>  
  
2. <span data-ttu-id="d4a80-177">Pokud `NetMsmqActivator` je monitorování front ve vzdáleném počítači, ujistěte se, že `NetMsmqActivator` neběží pod token s omezeným přístupem.</span><span class="sxs-lookup"><span data-stu-id="d4a80-177">If the `NetMsmqActivator` is monitoring queues on a remote machine, ensure that `NetMsmqActivator` does not run under a restricted token.</span></span> <span data-ttu-id="d4a80-178">Ke spuštění `NetMsmqActivator` neomezený tokenu:</span><span class="sxs-lookup"><span data-stu-id="d4a80-178">To run the `NetMsmqActivator` with an unrestricted token:</span></span>  
  
    ```  
    sc sidtype NetMsmqActivator unrestricted  
    ```  
  
 <span data-ttu-id="d4a80-179">Nesouvisí se zabezpečením související webového hostitele problémy najdete: [Webhosting Frontové aplikace](../../../../docs/framework/wcf/feature-details/web-hosting-a-queued-application.md).</span><span class="sxs-lookup"><span data-stu-id="d4a80-179">For non-security related Web host issues refer to: [Web Hosting a Queued Application](../../../../docs/framework/wcf/feature-details/web-hosting-a-queued-application.md).</span></span>  
  
 <span data-ttu-id="d4a80-180">**DOTAZ:** Co je nejjednodušší způsob, jak relace přístupu?</span><span class="sxs-lookup"><span data-stu-id="d4a80-180">**Q:** What is the easiest way to access sessions?</span></span>  
  
 <span data-ttu-id="d4a80-181">**ODPOVĚĎ:** Nastavení automatického dokončování =`true` na operaci, která odpovídá na poslední zprávy v relaci a nastavit automatické dokončování =`false` na všechny zbývající operace služby.</span><span class="sxs-lookup"><span data-stu-id="d4a80-181">**A:** Set AutoComplete=`true` on the operation that corresponds to the last message in the session, and set AutoComplete=`false` on all remaining service operations.</span></span>  
  
 <span data-ttu-id="d4a80-182">**DOTAZ:** Kde najdete odpovědi na běžné dotazy na službu MSMQ?</span><span class="sxs-lookup"><span data-stu-id="d4a80-182">**Q:** Where can I find answers to common questions on MSMQ?</span></span>  
  
 <span data-ttu-id="d4a80-183">**ODPOVĚĎ:** Další informace o MSMQ najdete v tématu [Microsoft Message Queuing](https://go.microsoft.com/fwlink/?LinkId=87810).</span><span class="sxs-lookup"><span data-stu-id="d4a80-183">**A:** For more information about MSMQ, see [Microsoft Message Queuing](https://go.microsoft.com/fwlink/?LinkId=87810).</span></span>  
  
 <span data-ttu-id="d4a80-184">**DOTAZ:** Proč Moje služba vyvolá `ProtocolException` při čtení z fronty, která obsahuje obě relace zpráv zařazených do fronty a datagram zpráv zařazených do fronty?</span><span class="sxs-lookup"><span data-stu-id="d4a80-184">**Q:** Why does my service throw a `ProtocolException` when reading from a queue that contains both queued session messages and queued datagram messages?</span></span>  
  
 <span data-ttu-id="d4a80-185">**ODPOVĚĎ:** Je zásadní rozdíl v relaci způsobem ve frontě zpráv a zprávy ve frontě datagram se skládají.</span><span class="sxs-lookup"><span data-stu-id="d4a80-185">**A:** There is a fundamental difference in the way queued session messages and queued datagram messages are composed.</span></span> <span data-ttu-id="d4a80-186">Z toho důvodu služba, která očekává ke čtení zprávy ve frontě relace nemůže přijímat zprávy ve frontě datagram a do služby očekávající ke čtení zprávy ve frontě datagram nemůže přijímat zprávy relace.</span><span class="sxs-lookup"><span data-stu-id="d4a80-186">Because of this, a service that is expecting to read a queued session message cannot receive a queued datagram message and a service expecting to read a queued datagram message cannot receive a session message.</span></span> <span data-ttu-id="d4a80-187">Při čtení oba typy zpráv ze stejné fronty vyvolá následující výjimku:</span><span class="sxs-lookup"><span data-stu-id="d4a80-187">Attempting to read both types of messages from the same queue throws the following exception:</span></span>  
  
```  
System.ServiceModel.MsmqPoisonMessageException: The transport channel detected a poison message. This occurred because the message exceeded the maximum number of delivery attempts or because the channel detected a fundamental problem with the message. The inner exception may contain additional information.   
---> System.ServiceModel.ProtocolException: An incoming MSMQ message contained invalid or unexpected .NET Message Framing information in its body. The message cannot be received. Ensure that the sender is using a compatible service contract with a matching SessionMode.  
```  
  
 <span data-ttu-id="d4a80-188">Fronty nedoručených zpráv systému, stejně jako všechny vlastní frontu nedoručených zpráv, je zvlášť náchylné k tomuto problému, když aplikace pošle obě relace zpráv zařazených do fronty a zprávy pro datagram ze stejného počítače zařazené do fronty.</span><span class="sxs-lookup"><span data-stu-id="d4a80-188">The system dead-letter queue, as well as any custom dead-letter queue, is particularly susceptible to this issue if an application sends both queued session messages and queued datagram messages from the same computer.</span></span> <span data-ttu-id="d4a80-189">Pokud zprávu nejde úspěšně odeslat, je přesunuta do fronty nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="d4a80-189">If a message cannot be sent successfully, it is moved to the dead-letter queue.</span></span> <span data-ttu-id="d4a80-190">Za těchto okolností je možné mít relace a datagram zprávy ve frontě nedoručených zpráv.</span><span class="sxs-lookup"><span data-stu-id="d4a80-190">Under these circumstances, it is possible to have both session and datagram messages in the dead-letter queue.</span></span> <span data-ttu-id="d4a80-191">Neexistuje žádný způsob, jak oddělit oba typy zpráv za běhu při čtení z fronty, proto by neměly odesílat aplikace obě relace zpráv zařazených do fronty a zprávy pro datagram ze stejného počítače zařazené do fronty.</span><span class="sxs-lookup"><span data-stu-id="d4a80-191">There is no way to separate both types of messages at runtime when reading from a queue, therefore, applications should not send both queued session messages and queued datagram messages from the same computer.</span></span>  
  
### <a name="msmq-integration-specific-troubleshooting"></a><span data-ttu-id="d4a80-192">Integrace MSMQ: Řešení konkrétních potíží</span><span class="sxs-lookup"><span data-stu-id="d4a80-192">MSMQ Integration: Specific Troubleshooting</span></span>  
 <span data-ttu-id="d4a80-193">**DOTAZ:** Když mi odeslat zprávu nebo při otevření hostitele služby, obdržím chybu, která označuje, že schéma je nesprávný.</span><span class="sxs-lookup"><span data-stu-id="d4a80-193">**Q:** When I send a message, or when I open the service host, I get an error that indicates the scheme is wrong.</span></span> <span data-ttu-id="d4a80-194">Proč?</span><span class="sxs-lookup"><span data-stu-id="d4a80-194">Why?</span></span>  
  
 <span data-ttu-id="d4a80-195">**ODPOVĚĎ:** Při použití integrace vazby služby MSMQ musí používat schéma msmq.formatname.</span><span class="sxs-lookup"><span data-stu-id="d4a80-195">**A:** When you use the MSMQ integration binding, you must use the msmq.formatname scheme.</span></span> <span data-ttu-id="d4a80-196">Například msmq.formatname:DIRECT=OS:.\private$\OrdersQueue.</span><span class="sxs-lookup"><span data-stu-id="d4a80-196">For example, msmq.formatname:DIRECT=OS:.\private$\OrdersQueue.</span></span> <span data-ttu-id="d4a80-197">Ale pokud chcete zadat vlastní frontu nedoručených zpráv, je nutné použít schéma net.msmq.</span><span class="sxs-lookup"><span data-stu-id="d4a80-197">But when you specify the custom dead-letter queue, you must use the net.msmq scheme.</span></span>  
  
 <span data-ttu-id="d4a80-198">**DOTAZ:** Při použití veřejných nebo privátních formát názvu a otevřít hostitele služby v [!INCLUDE[wv](../../../../includes/wv-md.md)], se zobrazí chyba.</span><span class="sxs-lookup"><span data-stu-id="d4a80-198">**Q:** When I use a public or private format name and open the service host on [!INCLUDE[wv](../../../../includes/wv-md.md)], I get an error.</span></span> <span data-ttu-id="d4a80-199">Proč?</span><span class="sxs-lookup"><span data-stu-id="d4a80-199">Why?</span></span>  
  
 <span data-ttu-id="d4a80-200">**ODPOVĚĎ:** Kanál integrace WCF na [!INCLUDE[wv](../../../../includes/wv-md.md)] kontroluje, pokud do dílčí fronty můžete otevřít pro hlavní aplikaci fronty pro zpracování nezpracovatelných zpráv.</span><span class="sxs-lookup"><span data-stu-id="d4a80-200">**A:** The WCF integration channel on [!INCLUDE[wv](../../../../includes/wv-md.md)] checks to see if a sub-queue can be opened for the main application queue for handling poison messages.</span></span> <span data-ttu-id="d4a80-201">Název dílčí fronty je odvozen z msmq.formatname, které URI předaný k naslouchacímu procesu.</span><span class="sxs-lookup"><span data-stu-id="d4a80-201">The sub-queue name is derived from an msmq.formatname URI passed to the listener.</span></span> <span data-ttu-id="d4a80-202">Název dílčí fronty ve službě MSMQ lze pouze název v přímém formátu.</span><span class="sxs-lookup"><span data-stu-id="d4a80-202">The sub-queue name in MSMQ can only be a direct format name.</span></span> <span data-ttu-id="d4a80-203">Proto se zobrazí chyba.</span><span class="sxs-lookup"><span data-stu-id="d4a80-203">So you see the error.</span></span> <span data-ttu-id="d4a80-204">Změňte identifikátor URI fronty na název v přímém formátu.</span><span class="sxs-lookup"><span data-stu-id="d4a80-204">Change the queue URI to a direct format name.</span></span>  
  
 <span data-ttu-id="d4a80-205">**DOTAZ:** Při příjmu zprávy z aplikace služby MSMQ, zpráva umístěná ve frontě a není, přečtěte si přijímající aplikace WCF.</span><span class="sxs-lookup"><span data-stu-id="d4a80-205">**Q:** When receiving a message from an MSMQ application, the message sits in the queue and is not read by the receiving WCF application.</span></span> <span data-ttu-id="d4a80-206">Proč?</span><span class="sxs-lookup"><span data-stu-id="d4a80-206">Why?</span></span>  
  
 <span data-ttu-id="d4a80-207">**ODPOVĚĎ:** Zkontrolujte, zda zpráva nemá tělo.</span><span class="sxs-lookup"><span data-stu-id="d4a80-207">**A:** Check to see whether the message has a body.</span></span> <span data-ttu-id="d4a80-208">Pokud zpráva nemá žádný text, ignoruje integrace služby MSMQ zprávy.</span><span class="sxs-lookup"><span data-stu-id="d4a80-208">If the message has no body, the MSMQ integration channel ignores the message.</span></span> <span data-ttu-id="d4a80-209">Implementace `IErrorHandler` informováni o výjimkách a zkontrolovat trasování.</span><span class="sxs-lookup"><span data-stu-id="d4a80-209">Implement `IErrorHandler` to be notified of exceptions and check the traces.</span></span>  
  
### <a name="security-related-troubleshooting"></a><span data-ttu-id="d4a80-210">Řešení potíží souvisejících se zabezpečením</span><span class="sxs-lookup"><span data-stu-id="d4a80-210">Security-Related Troubleshooting</span></span>  
 <span data-ttu-id="d4a80-211">**DOTAZ:** Při spuštění ukázky, která používá výchozí vazbu v režimu pracovní skupiny, vypadá to, že odesílání zprávy, ale nepřijímají příjemce.</span><span class="sxs-lookup"><span data-stu-id="d4a80-211">**Q:** When I run the sample that uses a default binding in workgroup mode, messages seem to get sent but are never received by the receiver.</span></span>  
  
 <span data-ttu-id="d4a80-212">**ODPOVĚĎ:** Ve výchozím nastavení jsou zprávy podepsány pomocí služby MSMQ vnitřní certifikát, který vyžaduje adresářové služby Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d4a80-212">**A:** By default, messages are signed using an MSMQ internal certificate that requires the Active Directory directory service.</span></span> <span data-ttu-id="d4a80-213">V režimu pracovní skupiny protože služba Active Directory není k dispozici, podepisování zprávy selže.</span><span class="sxs-lookup"><span data-stu-id="d4a80-213">In workgroup mode, because Active Directory is not available, signing the message fails.</span></span> <span data-ttu-id="d4a80-214">Proto jsou zprávy ve frontě nedoručených zpráv a je označen příčinu selhání, jako je například "Chybný podpis".</span><span class="sxs-lookup"><span data-stu-id="d4a80-214">So the message lands in the dead-letter queue and failure cause, such as "Bad signature", is indicated.</span></span>  
  
 <span data-ttu-id="d4a80-215">Alternativním řešením je vypnout zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="d4a80-215">The workaround is to turn off security.</span></span> <span data-ttu-id="d4a80-216">To se provádí nastavením <xref:System.ServiceModel.NetMsmqSecurity.Mode%2A>  =  <xref:System.ServiceModel.NetMsmqSecurityMode.None> aby to fungovalo v režimu pracovní skupiny.</span><span class="sxs-lookup"><span data-stu-id="d4a80-216">This is done by setting <xref:System.ServiceModel.NetMsmqSecurity.Mode%2A> = <xref:System.ServiceModel.NetMsmqSecurityMode.None> to make it work in workgroup mode.</span></span>  
  
 <span data-ttu-id="d4a80-217">Jiným řešením je zobrazíte <xref:System.ServiceModel.MsmqTransportSecurity> z <xref:System.ServiceModel.NetMsmqSecurity.Transport%2A> vlastnost a nastavte ho na <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>a nastavit certifikát klienta.</span><span class="sxs-lookup"><span data-stu-id="d4a80-217">Another workaround is to get the <xref:System.ServiceModel.MsmqTransportSecurity> from the <xref:System.ServiceModel.NetMsmqSecurity.Transport%2A> property and set it to <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, and set the client certificate.</span></span>  
  
 <span data-ttu-id="d4a80-218">Zatím jiné alternativním řešením je instalace služby MSMQ s integrací služby Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d4a80-218">Yet another workaround is to install MSMQ with Active Directory integration.</span></span>  
  
 <span data-ttu-id="d4a80-219">**DOTAZ:** Při odeslání zprávy s využitím výchozí vazby (přenosu zabezpečení zapnutá) ve službě Active Directory do fronty, se zobrazí zpráva "vnitřní certifikát nebyl nalezen".</span><span class="sxs-lookup"><span data-stu-id="d4a80-219">**Q:** When I send a message with default binding (transport security turned on) in Active Directory to a queue, I get an "internal certificate not found" message.</span></span> <span data-ttu-id="d4a80-220">Jak to mohu napravit?</span><span class="sxs-lookup"><span data-stu-id="d4a80-220">How do I fix this?</span></span>  
  
 <span data-ttu-id="d4a80-221">**ODPOVĚĎ:** To znamená, že certifikát ve službě Active Directory pro odesílatele musí obnovit.</span><span class="sxs-lookup"><span data-stu-id="d4a80-221">**A:** This means that the certificate in Active Directory for the sender must be renewed.</span></span> <span data-ttu-id="d4a80-222">Chcete-li to provést, otevřete **ovládací panely**, **nástroje pro správu**, **Správa počítače**, klikněte pravým tlačítkem na **MSMQ**a vyberte **Vlastnosti**.</span><span class="sxs-lookup"><span data-stu-id="d4a80-222">To do so, open **Control Panel**, **Administrative Tools**, **Computer Management**, right-click **MSMQ**, and select **Properties**.</span></span> <span data-ttu-id="d4a80-223">Vyberte **uživatelský certifikát** kartě a klikněte na tlačítko **obnovit** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="d4a80-223">Select the **User Certificate** tab and click the **Renew** button.</span></span>  
  
 <span data-ttu-id="d4a80-224">**DOTAZ:** Když mi odeslat zprávu pomocí <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> a určete certifikát, který chcete použít, se zobrazí zpráva "Neplatné certifikátu".</span><span class="sxs-lookup"><span data-stu-id="d4a80-224">**Q:** When I send a message using <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and specify the certificate to use, I get an "Invalid certificate" message.</span></span> <span data-ttu-id="d4a80-225">Jak to mohu napravit?</span><span class="sxs-lookup"><span data-stu-id="d4a80-225">How do I fix this?</span></span>  
  
 <span data-ttu-id="d4a80-226">**ODPOVĚĎ:** Úložiště certifikátů místního počítače nelze použít s režimem certifikátu.</span><span class="sxs-lookup"><span data-stu-id="d4a80-226">**A:** You cannot use a local machine certificate store with certificate mode.</span></span> <span data-ttu-id="d4a80-227">Budete muset zkopírujte certifikát do úložiště pro aktuálního uživatele pomocí modulu snap-in certifikátu z úložiště certifikátů počítače.</span><span class="sxs-lookup"><span data-stu-id="d4a80-227">You have to copy the certificate from the machine certificate store to the current user store using the Certificate snap-in.</span></span> <span data-ttu-id="d4a80-228">Pokud chcete získat certifikát modul snap-in:</span><span class="sxs-lookup"><span data-stu-id="d4a80-228">To get the Certificate snap-in:</span></span>  
  
1. <span data-ttu-id="d4a80-229">Klikněte na tlačítko **Start**vyberte **spustit**, typ `mmc`a klikněte na tlačítko **OK**.</span><span class="sxs-lookup"><span data-stu-id="d4a80-229">Click **Start**, select **Run**, type `mmc`, and click **OK**.</span></span>  
  
2. <span data-ttu-id="d4a80-230">V **konzoly Microsoft Management Console**, otevřete **souboru** nabídky a vybereme **Přidat/odebrat modul Snap-in**.</span><span class="sxs-lookup"><span data-stu-id="d4a80-230">In the **Microsoft Management Console**, open the **File** menu and select **Add/Remove Snap-in**.</span></span>  
  
3. <span data-ttu-id="d4a80-231">V **Přidat/odebrat modul Snap-in** dialogové okno, klikněte na tlačítko **přidat** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="d4a80-231">In the **Add/Remove Snap-in** dialog box, click the **Add** button.</span></span>  
  
4. <span data-ttu-id="d4a80-232">V **přidat samostatný modul Snap-in** dialogové okno, vyberte certifikáty a klikněte na tlačítko **přidat**.</span><span class="sxs-lookup"><span data-stu-id="d4a80-232">In the **Add Standalone Snap-in** dialog box, select Certificates and click **Add**.</span></span>  
  
5. <span data-ttu-id="d4a80-233">V **certifikáty** modul snap-in dialogu **Můj uživatelský účet,** a klikněte na tlačítko **Dokončit**.</span><span class="sxs-lookup"><span data-stu-id="d4a80-233">In the **Certificates** snap-in dialog box, select **My user account,** and click **Finish**.</span></span>  
  
6. <span data-ttu-id="d4a80-234">V dalším kroku přidejte druhý certifikáty modulu snap-in v předchozích krocích, ale tentokrát vyberte **účet počítače** a klikněte na tlačítko **Další**.</span><span class="sxs-lookup"><span data-stu-id="d4a80-234">Next, add a second Certificates snap-in using the previous steps, but this time select **Computer account** and click **Next**.</span></span>  
  
7. <span data-ttu-id="d4a80-235">Vyberte **místního počítače** a klikněte na tlačítko **Dokončit**.</span><span class="sxs-lookup"><span data-stu-id="d4a80-235">Select **Local Computer** and click **Finish**.</span></span> <span data-ttu-id="d4a80-236">Teď můžete přetáhnout a vyřadit certifikáty z úložiště certifikátů počítače pro úložiště pro aktuálního uživatele.</span><span class="sxs-lookup"><span data-stu-id="d4a80-236">You can now drag and drop certificates from the machine certificate store to the current user store.</span></span>  
  
 <span data-ttu-id="d4a80-237">**DOTAZ:** Když Služba čte z fronty na jiný počítač v režimu pracovní skupiny, se zobrazit výjimka "přístup byl odepřen".</span><span class="sxs-lookup"><span data-stu-id="d4a80-237">**Q:** When my service reads from a queue on another computer in workgroup mode, I get an "access denied" exception.</span></span>  
  
 <span data-ttu-id="d4a80-238">**ODPOVĚĎ:** V režimu pracovní skupiny pro vzdálenou aplikaci získat přístup k frontě aplikace musí mít oprávnění pro přístup k frontě.</span><span class="sxs-lookup"><span data-stu-id="d4a80-238">**A:** In workgroup mode, for a remote application to gain access to the queue, the application must have permission to access the queue.</span></span> <span data-ttu-id="d4a80-239">Přidání "anonymní přihlášení" do fronty seznam řízení přístupu (ACL) a přiřaďte jí oprávnění ke čtení.</span><span class="sxs-lookup"><span data-stu-id="d4a80-239">Add "Anonymous login" to the queue's access control list (ACL) and give it read permission.</span></span>  
  
 <span data-ttu-id="d4a80-240">**DOTAZ:** Když klient služby sítě (nebo libovolného klienta, který nemá doménový účet) odesílá zprávy ve frontě, odesílání selže s neplatným certifikátem.</span><span class="sxs-lookup"><span data-stu-id="d4a80-240">**Q:** When a network service client (or any client that does not have a domain account) sends a queued message, the send fails with an invalid certificate.</span></span> <span data-ttu-id="d4a80-241">Jak to mohu napravit?</span><span class="sxs-lookup"><span data-stu-id="d4a80-241">How do I fix this?</span></span>  
  
 <span data-ttu-id="d4a80-242">**ODPOVĚĎ:** Zkontrolujte konfiguraci vazby.</span><span class="sxs-lookup"><span data-stu-id="d4a80-242">**A:** Check the binding configuration.</span></span> <span data-ttu-id="d4a80-243">Výchozí vazba má MSMQ zabezpečení přenosu nastavená na aby bylo možné podepisování zpráv.</span><span class="sxs-lookup"><span data-stu-id="d4a80-243">The default binding has MSMQ transport security turned on to sign the message.</span></span> <span data-ttu-id="d4a80-244">Vypněte jej.</span><span class="sxs-lookup"><span data-stu-id="d4a80-244">Turn it off.</span></span>  
  
### <a name="remote-transacted-receives"></a><span data-ttu-id="d4a80-245">Přijímá vzdálené nepodporuje transakce</span><span class="sxs-lookup"><span data-stu-id="d4a80-245">Remote Transacted Receives</span></span>  
 <span data-ttu-id="d4a80-246">**DOTAZ:** Když mám frontu počítače a služby WCF, která čte zprávy z fronty v počítači B (vzdálené transakční přijímat scénář), zprávy se číst z fronty.</span><span class="sxs-lookup"><span data-stu-id="d4a80-246">**Q:** When I have a queue on machine A, and a WCF service that reads messages from a queue on machine B (the remote transacted receive scenario), messages are not read from the queue.</span></span> <span data-ttu-id="d4a80-247">Trasovací informace označuje úspěšný příjem, zpráva "transakci nelze importovat."</span><span class="sxs-lookup"><span data-stu-id="d4a80-247">Tracing information indicates the receive failed with the message "Transaction cannot be imported."</span></span> <span data-ttu-id="d4a80-248">Co můžete dělat na tento problém vyřešit?</span><span class="sxs-lookup"><span data-stu-id="d4a80-248">What can I do to fix this?</span></span>  
  
 <span data-ttu-id="d4a80-249">**ODPOVĚĎ:** Existují tři možné důvody:</span><span class="sxs-lookup"><span data-stu-id="d4a80-249">**A:** There are three possible reasons for this:</span></span>  
  
-   <span data-ttu-id="d4a80-250">Pokud jste v režimu domény, vzdálené transakční přijímat vyžaduje přístup k síti Microsoft distribuované transakce koordinátor (MSDTC).</span><span class="sxs-lookup"><span data-stu-id="d4a80-250">If you are in domain mode, remote transacted receive requires Microsoft Distributed Transaction Coordinator (MSDTC) network access.</span></span> <span data-ttu-id="d4a80-251">Můžete povolit pomocí **přidat nebo odebrat součásti**.</span><span class="sxs-lookup"><span data-stu-id="d4a80-251">You can enable this using **Add/Remove Components**.</span></span>  
  
     ![Snímek obrazovky zobrazující povolení síťové služby DTC přístup.](./media/troubleshooting-queued-messaging/enable-distributed-transaction-coordinator-access.jpg)  
  
-   <span data-ttu-id="d4a80-253">Zkontrolujte režim ověřování pro komunikaci se správcem transakcí.</span><span class="sxs-lookup"><span data-stu-id="d4a80-253">Check the authentication mode for communicating with the transaction manager.</span></span> <span data-ttu-id="d4a80-254">Pokud jste v režimu pracovní skupiny, je nutné vybrat "Ověření není vyžadováno".</span><span class="sxs-lookup"><span data-stu-id="d4a80-254">If you are in workgroup mode, "No Authentication Required" must be selected.</span></span> <span data-ttu-id="d4a80-255">Pokud jste v režimu domény, musíte vybrat "Je vyžadováno vzájemné ověření".</span><span class="sxs-lookup"><span data-stu-id="d4a80-255">If you are in domain mode, then "Mutual Authentication Required" must be selected.</span></span>  
  
     <span data-ttu-id="d4a80-256">![Povolení transakce XA](../../../../docs/framework/wcf/feature-details/media/4f3695e0-fb0b-4c5b-afac-75f8860d2bb0.jpg "4f3695e0-fb0b-4c5b-afac-75f8860d2bb0")</span><span class="sxs-lookup"><span data-stu-id="d4a80-256">![Enabling XA transactions](../../../../docs/framework/wcf/feature-details/media/4f3695e0-fb0b-4c5b-afac-75f8860d2bb0.jpg "4f3695e0-fb0b-4c5b-afac-75f8860d2bb0")</span></span>  
  
-   <span data-ttu-id="d4a80-257">Ujistěte se, že služba MSDTC je v seznamu výjimek v **brány Firewall pro připojení k Internetu** nastavení.</span><span class="sxs-lookup"><span data-stu-id="d4a80-257">Make sure that MSDTC is in the list of exceptions in the **Internet Connection Firewall** settings.</span></span>  
  
-   <span data-ttu-id="d4a80-258">Ujistěte se, že používáte [!INCLUDE[wv](../../../../includes/wv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d4a80-258">Ensure that you are using [!INCLUDE[wv](../../../../includes/wv-md.md)].</span></span> <span data-ttu-id="d4a80-259">MSMQ na [!INCLUDE[wv](../../../../includes/wv-md.md)] podporuje vzdálené transakce čtení.</span><span class="sxs-lookup"><span data-stu-id="d4a80-259">MSMQ on [!INCLUDE[wv](../../../../includes/wv-md.md)] supports remote transacted read.</span></span> <span data-ttu-id="d4a80-260">MSMQ na starších verzích Windows nepodporuje vzdálené transakce čtení.</span><span class="sxs-lookup"><span data-stu-id="d4a80-260">MSMQ on earlier Windows releases does not support remote transacted read.</span></span>  
  
 <span data-ttu-id="d4a80-261">**DOTAZ:** Při čtení z fronty služby je síťová služba, například ve webovém hostitele, proč se zobrazí odepření přístupu výjimka je vyvolána při čtení z fronty?</span><span class="sxs-lookup"><span data-stu-id="d4a80-261">**Q:** When the service reading from the queue is a network service, for example, in a Web host, why do I get an access-denied exception is raised when reading from the queue?</span></span>  
  
 <span data-ttu-id="d4a80-262">**ODPOVĚĎ:** Síťový přístup pro čtení služby musí být přidána do fronty seznamu ACL k zajištění, že síťová služba může číst zprávy z fronty.</span><span class="sxs-lookup"><span data-stu-id="d4a80-262">**A:** Network service read access must be added to the queue ACL to ensure that a network service can read from the queue.</span></span>  
  
 <span data-ttu-id="d4a80-263">**DOTAZ:** Můžete použít aktivační služba MSMQ k aktivaci aplikací založených na zprávy ve frontě na vzdáleném počítači?</span><span class="sxs-lookup"><span data-stu-id="d4a80-263">**Q:** Can I use the MSMQ activation service to activate applications based on messages in a queue on a remote machine?</span></span>  
  
 <span data-ttu-id="d4a80-264">**ODPOVĚĎ:** Ano.</span><span class="sxs-lookup"><span data-stu-id="d4a80-264">**A:** Yes.</span></span> <span data-ttu-id="d4a80-265">K tomu, musíte nakonfigurovat aktivace služby MSMQ pro spuštění jako síťové služby a přidat přístup k síťové službě do fronty ve vzdáleném počítači.</span><span class="sxs-lookup"><span data-stu-id="d4a80-265">To do this, you must configure the MSMQ activation service to run as a network service, and add network service access to the queue on the remote machine.</span></span>  
  
## <a name="using-custom-msmq-bindings-with-receivecontext-enabled"></a><span data-ttu-id="d4a80-266">Vazby služby MSMQ vlastní pomocí ReceiveContext povoleno</span><span class="sxs-lookup"><span data-stu-id="d4a80-266">Using Custom MSMQ Bindings with ReceiveContext Enabled</span></span>  
 <span data-ttu-id="d4a80-267">Při použití vlastní vazby služby MSMQ s <xref:System.ServiceModel.Channels.ReceiveContext> povoleno zpracování příchozí zprávy budou použít vláknu fondu vláken, protože nativní služby MSMQ nepodporuje dokončení vstupně-výstupních operací pro asynchronní <xref:System.ServiceModel.Channels.ReceiveContext> obdrží.</span><span class="sxs-lookup"><span data-stu-id="d4a80-267">When using a custom MSMQ binding with <xref:System.ServiceModel.Channels.ReceiveContext> enabled processing an incoming message will use a thread pool thread because native MSMQ does not support I/O completion for asynchronous <xref:System.ServiceModel.Channels.ReceiveContext> receives.</span></span> <span data-ttu-id="d4a80-268">Důvodem je, že zpracování takové zprávy používá vnitřní transakce pro <xref:System.ServiceModel.Channels.ReceiveContext> a MSMQ nepodporuje asynchronní zpracování.</span><span class="sxs-lookup"><span data-stu-id="d4a80-268">This is because processing such a message uses internal transactions for <xref:System.ServiceModel.Channels.ReceiveContext> and MSMQ does not support asynchronous processing.</span></span> <span data-ttu-id="d4a80-269">Chcete-li vyřešit tento problém můžete přidat <xref:System.ServiceModel.Description.SynchronousReceiveBehavior> ke koncovému bodu vynutit synchronní zpracování, nebo nastavte <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.MaxPendingReceives%2A> na hodnotu 1.</span><span class="sxs-lookup"><span data-stu-id="d4a80-269">To work around this issue you can add a <xref:System.ServiceModel.Description.SynchronousReceiveBehavior> to the endpoint to force synchronous processing or set <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.MaxPendingReceives%2A> to 1.</span></span>
