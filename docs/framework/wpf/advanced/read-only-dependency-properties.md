---
title: Vlastnosti závislosti jen pro čtení
ms.date: 03/30/2017
helpviewer_keywords:
- dependency properties [WPF], read-only
- read-only dependency properties [WPF]
ms.assetid: f23d6ec9-3780-4c09-a2ff-b2f0a2deddf1
ms.openlocfilehash: aa6893b100311ead74f610dd20f327d130dff74a
ms.sourcegitcommit: 24a4a8eb6d8cfe7b8549fb6d823076d7c697e0c6
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/23/2019
ms.locfileid: "68401652"
---
# <a name="read-only-dependency-properties"></a><span data-ttu-id="e577f-102">Vlastnosti závislosti jen pro čtení</span><span class="sxs-lookup"><span data-stu-id="e577f-102">Read-Only Dependency Properties</span></span>
<span data-ttu-id="e577f-103">Toto téma popisuje vlastnosti závislosti jen pro čtení, včetně existujících vlastností závislosti jen pro čtení a scénářů a technik pro vytvoření vlastní vlastnosti závislosti jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="e577f-103">This topic describes read-only dependency properties, including existing read-only dependency properties and the scenarios and techniques for creating a custom read-only dependency property.</span></span>  

<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="e577f-104">Požadavky</span><span class="sxs-lookup"><span data-stu-id="e577f-104">Prerequisites</span></span>  
 <span data-ttu-id="e577f-105">V tomto tématu se předpokládá, že rozumíte základním scénářům implementace vlastnosti závislosti a způsobu, jakým se aplikují metadata na vlastní vlastnost závislosti.</span><span class="sxs-lookup"><span data-stu-id="e577f-105">This topic assumes that you understand the basic scenarios of implementing a dependency property, and how metadata is applied to a custom dependency property.</span></span> <span data-ttu-id="e577f-106">Podívejte se na téma [vlastnosti vlastní závislosti](custom-dependency-properties.md) a [metadata vlastnosti závislosti](dependency-property-metadata.md) pro kontext.</span><span class="sxs-lookup"><span data-stu-id="e577f-106">See [Custom Dependency Properties](custom-dependency-properties.md) and [Dependency Property Metadata](dependency-property-metadata.md) for context.</span></span>  
  
<a name="existing"></a>   
## <a name="existing-read-only-dependency-properties"></a><span data-ttu-id="e577f-107">Existující vlastnosti závislosti jen pro čtení</span><span class="sxs-lookup"><span data-stu-id="e577f-107">Existing Read-Only Dependency Properties</span></span>  
 <span data-ttu-id="e577f-108">Některé vlastnosti závislosti definované v [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] rozhraní jsou jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="e577f-108">Some of the dependency properties defined in the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] framework are read-only.</span></span> <span data-ttu-id="e577f-109">Typickým důvodem pro zadání vlastnosti závislosti jen pro čtení je, že se jedná o vlastnosti, které by měly být použity pro určení stavu, ale pokud je tento stav ovlivněn mnoha faktory, ale pouze nastavení vlastnosti na tento stav není žádoucí z Perspektiva návrhu uživatelského rozhraní</span><span class="sxs-lookup"><span data-stu-id="e577f-109">The typical reason for specifying a read-only dependency property is that these are properties that should be used for state determination, but where that state is influenced by a multitude of factors, but just setting the property to that state isn't desirable from a user interface design perspective.</span></span> <span data-ttu-id="e577f-110">Například vlastnost <xref:System.Windows.UIElement.IsMouseOver%2A> je ve skutečnosti pouze zpřístupnění stav, jak je určeno z vstupu myši.</span><span class="sxs-lookup"><span data-stu-id="e577f-110">For example, the property <xref:System.Windows.UIElement.IsMouseOver%2A> is really just surfacing state as determined from the mouse input.</span></span> <span data-ttu-id="e577f-111">Jakýkoli pokus o nastavení této hodnoty programově obcházením skutečného vstupu myši by bylo nepředvídatelné a způsobil nekonzistenci.</span><span class="sxs-lookup"><span data-stu-id="e577f-111">Any attempt to set this value programmatically by circumventing the true mouse input would be unpredictable and would cause inconsistency.</span></span>  
  
 <span data-ttu-id="e577f-112">Vzhledem k tomu, že není možné napravovat vlastnosti závislosti jen pro čtení, nejsou vhodné pro mnoho scénářů, pro které vlastnosti závislosti běžně nabízejí řešení (konkrétně: datové vazby, přímo ovládacích k hodnotě, ověřování, animaci a dědičnosti).</span><span class="sxs-lookup"><span data-stu-id="e577f-112">By virtue of not being settable, read-only dependency properties aren't appropriate for many of the scenarios for which dependency properties normally offer a solution (namely: data binding, directly stylable to a value, validation, animation, inheritance).</span></span> <span data-ttu-id="e577f-113">Bez ohledu na to, vlastnosti závislosti jen pro čtení mají stále k dispozici některé další funkce podporované vlastnostmi závislosti v systému vlastností.</span><span class="sxs-lookup"><span data-stu-id="e577f-113">Despite not being settable, read-only dependency properties still have some of the additional capabilities supported by dependency properties in the property system.</span></span> <span data-ttu-id="e577f-114">Nejdůležitější zbývající možností je, že vlastnost závislosti, která je jen pro čtení, může být stále používána jako Trigger vlastnosti ve stylu.</span><span class="sxs-lookup"><span data-stu-id="e577f-114">The most important remaining capability is that the read-only dependency property can still be used as a property trigger in a style.</span></span> <span data-ttu-id="e577f-115">Aktivační události nemůžete povolit s normální vlastností modulu CLR (Common Language Runtime). musí se jednat o vlastnost závislosti.</span><span class="sxs-lookup"><span data-stu-id="e577f-115">You can't enable triggers with a normal common language runtime (CLR) property; it needs to be a dependency property.</span></span> <span data-ttu-id="e577f-116">Výše uvedená <xref:System.Windows.UIElement.IsMouseOver%2A> vlastnost je dokonalým příkladem scénáře, kde může být poměrně užitečná k definování stylu ovládacího prvku, kde některá z viditelných vlastností, jako jsou pozadí, popředí nebo podobné vlastnosti složených prvků v rámci ovládací prvek se změní, když uživatel umístí ukazatel myši nad určitou definovanou oblast vašeho ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="e577f-116">The aforementioned <xref:System.Windows.UIElement.IsMouseOver%2A> property is a perfect example of a scenario where it might be quite useful to define a style for a control, where some visible property such as a background, foreground, or similar properties of composited elements within the control will change when the user places a mouse over some defined region of your control.</span></span> <span data-ttu-id="e577f-117">Změny vlastnosti závislosti jen pro čtení mohou být zjištěny a hlášeny základními procesy neplatných v systému vlastností a to ve skutečnosti podporuje funkci triggeru vlastností interně.</span><span class="sxs-lookup"><span data-stu-id="e577f-117">Changes in a read-only dependency property can also be detected and reported by the property system's inherent invalidation processes, and this in fact supports the property trigger functionality internally.</span></span>  
  
<a name="new"></a>   
## <a name="creating-custom-read-only-dependency-properties"></a><span data-ttu-id="e577f-118">Vytváření vlastních vlastností závislosti jen pro čtení</span><span class="sxs-lookup"><span data-stu-id="e577f-118">Creating Custom Read-Only Dependency Properties</span></span>  
 <span data-ttu-id="e577f-119">Nezapomeňte si přečtěte část výše v tématu Proč vlastnosti závislosti jen pro čtení nebudou fungovat pro řadu typických scénářů pro vlastnosti závislostí.</span><span class="sxs-lookup"><span data-stu-id="e577f-119">Make sure to read the section above regarding why read-only dependency properties won't work for many typical dependency-property scenarios.</span></span> <span data-ttu-id="e577f-120">Pokud ale máte vhodný scénář, možná budete chtít vytvořit vlastní vlastnost závislosti jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="e577f-120">But if you have an appropriate scenario, you may wish to create your own read-only dependency property.</span></span>  
  
 <span data-ttu-id="e577f-121">Většina procesu vytvoření vlastnosti závislosti jen pro čtení je stejná jako v případě, že je popsána v tématech [vlastní vlastnosti závislosti](custom-dependency-properties.md) a [implementace vlastností závislosti](how-to-implement-a-dependency-property.md) .</span><span class="sxs-lookup"><span data-stu-id="e577f-121">Much of the process of creating a read-only dependency property is the same as is described in the [Custom Dependency Properties](custom-dependency-properties.md) and [Implement a Dependency Property](how-to-implement-a-dependency-property.md) topics.</span></span> <span data-ttu-id="e577f-122">Existují tři důležité rozdíly:</span><span class="sxs-lookup"><span data-stu-id="e577f-122">There are three important differences:</span></span>  
  
- <span data-ttu-id="e577f-123">Při registraci vlastnosti zavolejte <xref:System.Windows.DependencyProperty.RegisterReadOnly%2A> metodu namísto normální <xref:System.Windows.DependencyProperty.Register%2A> metody pro registraci vlastností.</span><span class="sxs-lookup"><span data-stu-id="e577f-123">When registering your property, call the <xref:System.Windows.DependencyProperty.RegisterReadOnly%2A> method instead of the normal <xref:System.Windows.DependencyProperty.Register%2A> method for property registration.</span></span>  
  
- <span data-ttu-id="e577f-124">Při implementaci vlastnosti "Obálka" CLR se ujistěte, že obálka není nastavena jako implementace, takže neexistuje žádná nekonzistence ve stavu jen pro čtení pro veřejnou obálku, kterou vystavíte.</span><span class="sxs-lookup"><span data-stu-id="e577f-124">When implementing the CLR "wrapper" property, make sure that the wrapper too doesn't have a set implementation, so that there is no inconsistency in read-only state for the public wrapper you expose.</span></span>  
  
- <span data-ttu-id="e577f-125">Objekt vrácený registrací jen pro čtení je <xref:System.Windows.DependencyPropertyKey> spíše než. <xref:System.Windows.DependencyProperty></span><span class="sxs-lookup"><span data-stu-id="e577f-125">The object returned by the read-only registration is <xref:System.Windows.DependencyPropertyKey> rather than <xref:System.Windows.DependencyProperty>.</span></span> <span data-ttu-id="e577f-126">Toto pole byste měli i nadále ukládat jako člen, ale obvykle byste mu nechtěli být veřejným členem tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="e577f-126">You should still store this field as a member but typically you would not make it a public member of the type.</span></span>  
  
 <span data-ttu-id="e577f-127">Jakékoli soukromé pole nebo hodnota, které jste zálohovali ze své vlastnosti závislosti jen pro čtení, je možné samozřejmě plně zapisovat pomocí libovolné logiky, kterou určíte.</span><span class="sxs-lookup"><span data-stu-id="e577f-127">Whatever private field or value you have backing your read-only dependency property can of course be fully writable using whatever logic you decide.</span></span> <span data-ttu-id="e577f-128">Nejjednodušším způsobem, jak vlastnost nastavit buď zpočátku, nebo jako součást logiky prostředí runtime, je však použít rozhraní API systému vlastností namísto obcházení systému vlastností a přímé nastavení soukromého pole pro zálohování.</span><span class="sxs-lookup"><span data-stu-id="e577f-128">However, the most straightforward way to set the property either initially or as part of runtime logic is to use the property system's APIs, rather than circumventing the property system and setting the private backing field directly.</span></span> <span data-ttu-id="e577f-129">Konkrétně je k dispozici podpis <xref:System.Windows.DependencyObject.SetValue%2A> , který přijímá parametr typu. <xref:System.Windows.DependencyPropertyKey></span><span class="sxs-lookup"><span data-stu-id="e577f-129">In particular, there is a signature of <xref:System.Windows.DependencyObject.SetValue%2A> that accepts a parameter of type <xref:System.Windows.DependencyPropertyKey>.</span></span> <span data-ttu-id="e577f-130">Jak a kde nastavíte tuto hodnotu programově v rámci logiky aplikace, bude mít vliv na to, jak můžete chtít <xref:System.Windows.DependencyPropertyKey> nastavit přístup k vytvořenému při první registraci vlastnosti závislosti.</span><span class="sxs-lookup"><span data-stu-id="e577f-130">How and where you set this value programmatically within your application logic will affect how you may wish to set access on the <xref:System.Windows.DependencyPropertyKey> created when you first registered the dependency property.</span></span> <span data-ttu-id="e577f-131">Pokud tuto logiku zpracujete vše v rámci třídy, můžete ji nastavit jako soukromou, nebo pokud požadujete, aby byla nastavena z jiných částí sestavení, které můžete nastavit jako interní.</span><span class="sxs-lookup"><span data-stu-id="e577f-131">If you handle this logic all within the class you could make it private, or if you require it to be set from other portions of the assembly you might set it internal.</span></span> <span data-ttu-id="e577f-132">Jedním z přístupů je zavolat <xref:System.Windows.DependencyObject.SetValue%2A> v rámci obslužné rutiny události třídy příslušné události, která informuje o instanci třídy, že je nutné změnit hodnotu uložené vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="e577f-132">One approach is to call <xref:System.Windows.DependencyObject.SetValue%2A> within a class event handler of a relevant event that informs a class instance that the stored property value needs to be changed.</span></span> <span data-ttu-id="e577f-133">Dalším přístupem je propojení vlastností závislosti společně s použitím spárovaných <xref:System.Windows.PropertyChangedCallback> a <xref:System.Windows.CoerceValueCallback> zpětných volání jako součást metadat těchto vlastností během registrace.</span><span class="sxs-lookup"><span data-stu-id="e577f-133">Another approach is to tie dependency properties together by using paired <xref:System.Windows.PropertyChangedCallback> and <xref:System.Windows.CoerceValueCallback> callbacks as part of those properties' metadata during registration.</span></span>  
  
 <span data-ttu-id="e577f-134">Vzhledem k tomu, že jeprivátníaneníšířenýsystémemvlastnostímimováškód,mávlastnostzávislostijenpročtenílepšínastavenízabezpečenínežvlastnostzávislostipročteníazápis.<xref:System.Windows.DependencyPropertyKey></span><span class="sxs-lookup"><span data-stu-id="e577f-134">Because the <xref:System.Windows.DependencyPropertyKey> is private, and is not propagated by the property system outside of your code, a read-only dependency property does have better setting security than a read-write dependency property.</span></span> <span data-ttu-id="e577f-135">U vlastnosti závislosti pro čtení i zápis je identifikační pole explicitně nebo implicitně veřejné, a proto je tato vlastnost široce nastavitelná.</span><span class="sxs-lookup"><span data-stu-id="e577f-135">For a read-write dependency property, the identifying field is explicitly or implicitly public and thus the property is widely settable.</span></span> <span data-ttu-id="e577f-136">Další podrobnosti najdete v tématu [zabezpečení vlastností závislostí](dependency-property-security.md).</span><span class="sxs-lookup"><span data-stu-id="e577f-136">For more specifics, see [Dependency Property Security](dependency-property-security.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e577f-137">Viz také:</span><span class="sxs-lookup"><span data-stu-id="e577f-137">See also</span></span>

- [<span data-ttu-id="e577f-138">Přehled vlastností závislosti</span><span class="sxs-lookup"><span data-stu-id="e577f-138">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="e577f-139">Vlastní vlastnosti závislosti</span><span class="sxs-lookup"><span data-stu-id="e577f-139">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="e577f-140">Styly a šablony</span><span class="sxs-lookup"><span data-stu-id="e577f-140">Styling and Templating</span></span>](../controls/styling-and-templating.md)
