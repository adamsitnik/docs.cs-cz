---
title: Vlastní vlastnosti závislosti
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- implementing [WPF], wrappers
- registering properties [WPF]
- properties [WPF], metadata
- metadata [WPF], for properties
- custom dependency properties [WPF]
- properties [WPF], registering
- wrappers [WPF], implementing
- dependency properties [WPF], custom
ms.assetid: e6bfcfac-b10d-4f58-9f77-a864c2a2938f
ms.openlocfilehash: 27554d7e0a7e980d240e0609fe0561c2138f0aa1
ms.sourcegitcommit: d6e27023aeaffc4b5a3cb4b88685018d6284ada4
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/09/2019
ms.locfileid: "67664062"
---
# <a name="custom-dependency-properties"></a><span data-ttu-id="a0e65-102">Vlastní vlastnosti závislosti</span><span class="sxs-lookup"><span data-stu-id="a0e65-102">Custom Dependency Properties</span></span>

<span data-ttu-id="a0e65-103">Toto téma popisuje důvody, které [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] vývojáře aplikací a autoři komponenty může být vhodné vytvořit vlastnost vlastní závislosti a popisuje implementaci, jakož i některé možnosti implementace, které může zlepšit výkon, Použitelnost nebo všestrannost vlastnost.</span><span class="sxs-lookup"><span data-stu-id="a0e65-103">This topic describes the reasons that [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] application developers and component authors might want to create custom dependency property, and describes the implementation steps as well as some implementation options that can improve performance, usability, or versatility of the property.</span></span>

<a name="prerequisites"></a>

## <a name="prerequisites"></a><span data-ttu-id="a0e65-104">Požadavky</span><span class="sxs-lookup"><span data-stu-id="a0e65-104">Prerequisites</span></span>

<span data-ttu-id="a0e65-105">Toto téma předpokládá, že rozumíte vlastnosti závislosti z pohledu příjemce vlastnosti existujícího závislosti na [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] třídy a čtení [přehled vlastností závislosti](dependency-properties-overview.md) tématu.</span><span class="sxs-lookup"><span data-stu-id="a0e65-105">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](dependency-properties-overview.md) topic.</span></span> <span data-ttu-id="a0e65-106">Pokud chcete postupovat podle příkladů v tomto tématu, měli byste také znát [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] a vědět, jak psát [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] aplikací.</span><span class="sxs-lookup"><span data-stu-id="a0e65-106">In order to follow the examples in this topic, you should also understand [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] and know how to write [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>

<a name="whatis"></a>

## <a name="what-is-a-dependency-property"></a><span data-ttu-id="a0e65-107">Co je vlastnost závislosti?</span><span class="sxs-lookup"><span data-stu-id="a0e65-107">What Is a Dependency Property?</span></span>

<span data-ttu-id="a0e65-108">Můžete povolit, co by jinak byly [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] vlastnost pro podporu používání stylů pro vytváření datových vazeb, dědičnosti, animace a výchozí hodnoty implementací jako vlastnost závislosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-108">You can enable what would otherwise be a [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] property to support styling, data binding, inheritance, animations, and default values by implementing it as a dependency property.</span></span> <span data-ttu-id="a0e65-109">Závislé vlastnosti jsou vlastnosti, které jsou registrované [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] vlastnost systému voláním <xref:System.Windows.DependencyProperty.Register%2A> – metoda (nebo <xref:System.Windows.DependencyProperty.RegisterReadOnly%2A>), a které se zálohují na <xref:System.Windows.DependencyProperty> identifikátor pole.</span><span class="sxs-lookup"><span data-stu-id="a0e65-109">Dependency properties are properties that are registered with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system by calling the <xref:System.Windows.DependencyProperty.Register%2A> method (or <xref:System.Windows.DependencyProperty.RegisterReadOnly%2A>), and that are backed by a <xref:System.Windows.DependencyProperty> identifier field.</span></span> <span data-ttu-id="a0e65-110">Vlastnosti závislostí lze použít pouze <xref:System.Windows.DependencyObject> typy, ale <xref:System.Windows.DependencyObject> je poměrně vysoké [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] třídy hierarchie, takže většina tříd k dispozici v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] může podporovat vlastnosti závislosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-110">Dependency properties can be used only by <xref:System.Windows.DependencyObject> types, but <xref:System.Windows.DependencyObject> is quite high in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] class hierarchy, so the majority of classes available in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] can support dependency properties.</span></span> <span data-ttu-id="a0e65-111">Další informace o vlastnosti závislosti a některé terminologie a konvencemi použitými pro popis v tomto [!INCLUDE[TLA2#tla_sdk](../../../../includes/tla2sharptla-sdk-md.md)], naleznete v tématu [přehled vlastností závislosti](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-111">For more information about dependency properties and some of the terminology and conventions used for describing them in this [!INCLUDE[TLA2#tla_sdk](../../../../includes/tla2sharptla-sdk-md.md)], see [Dependency Properties Overview](dependency-properties-overview.md).</span></span>

<a name="example_dp"></a>

## <a name="examples-of-dependency-properties"></a><span data-ttu-id="a0e65-112">Příklady vlastností závislosti</span><span class="sxs-lookup"><span data-stu-id="a0e65-112">Examples of Dependency Properties</span></span>

<span data-ttu-id="a0e65-113">Příkladem vlastnosti závislosti, které jsou implementovány v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] třídy zahrnují <xref:System.Windows.Controls.Control.Background%2A> vlastnost, <xref:System.Windows.FrameworkElement.Width%2A> vlastnost a <xref:System.Windows.Controls.TextBox.Text%2A> vlastnost mezi mnoha dalších.</span><span class="sxs-lookup"><span data-stu-id="a0e65-113">Examples of dependency properties that are implemented on [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes include the <xref:System.Windows.Controls.Control.Background%2A> property, the <xref:System.Windows.FrameworkElement.Width%2A> property, and the <xref:System.Windows.Controls.TextBox.Text%2A> property, among many others.</span></span> <span data-ttu-id="a0e65-114">Každá vlastnost závislosti vystavené třídy má odpovídající veřejné statické pole typu <xref:System.Windows.DependencyProperty> zveřejněné na stejné třídy.</span><span class="sxs-lookup"><span data-stu-id="a0e65-114">Each dependency property exposed by a class has a corresponding public static field of type <xref:System.Windows.DependencyProperty> exposed on that same class.</span></span> <span data-ttu-id="a0e65-115">Toto je identifikátor pro vlastnost závislosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-115">This is the identifier for the dependency property.</span></span> <span data-ttu-id="a0e65-116">Tento identifikátor má název, pomocí konvence: název vlastnosti závislostí s řetězcem `Property` připojí k němu.</span><span class="sxs-lookup"><span data-stu-id="a0e65-116">The identifier is named using a convention: the name of the dependency property with the string `Property` appended to it.</span></span> <span data-ttu-id="a0e65-117">Například odpovídající <xref:System.Windows.DependencyProperty> identifikátor pole <xref:System.Windows.Controls.Control.Background%2A> vlastnost <xref:System.Windows.Controls.Control.BackgroundProperty>.</span><span class="sxs-lookup"><span data-stu-id="a0e65-117">For example, the corresponding <xref:System.Windows.DependencyProperty> identifier field for the <xref:System.Windows.Controls.Control.Background%2A> property is <xref:System.Windows.Controls.Control.BackgroundProperty>.</span></span> <span data-ttu-id="a0e65-118">Identifikátor ukládá informace o vlastnosti závislosti, jako byl zaregistrován a tento identifikátor se pak použije později pro další operace, které zahrnují vlastnost závislosti, jako je například volání <xref:System.Windows.DependencyObject.SetValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="a0e65-118">The identifier stores the information about the dependency property as it was registered, and the identifier is then used later for other operations involving the dependency property, such as calling <xref:System.Windows.DependencyObject.SetValue%2A>.</span></span>

<span data-ttu-id="a0e65-119">Jak je uvedeno v [přehled vlastností závislosti](dependency-properties-overview.md), všechny vlastnosti závislostí v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] (s výjimkou nejvíce připojené vlastnosti) jsou také [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] vlastnosti z důvodu implementace "zabezpečenou obálku".</span><span class="sxs-lookup"><span data-stu-id="a0e65-119">As mentioned in the [Dependency Properties Overview](dependency-properties-overview.md), all dependency properties in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] (except most attached properties) are also [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] properties because of the "wrapper" implementation.</span></span> <span data-ttu-id="a0e65-120">Proto z kódu, můžete získat nebo nastavit vlastnosti závislosti voláním [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] přístupové objekty, které definují obálkami stejným způsobem, že použijete jiné [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-120">Therefore, from code, you can get or set dependency properties by calling [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] accessors that define the wrappers in the same manner that you would use other [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] properties.</span></span> <span data-ttu-id="a0e65-121">Jako příjemce vlastnosti zavedené závislosti, nepoužíváte obvykle <xref:System.Windows.DependencyObject> metody <xref:System.Windows.DependencyObject.GetValue%2A> a <xref:System.Windows.DependencyObject.SetValue%2A>, které jsou spojovací bod do základního vlastnost systému.</span><span class="sxs-lookup"><span data-stu-id="a0e65-121">As a consumer of established dependency properties, you do not typically use the <xref:System.Windows.DependencyObject> methods <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A>, which are the connection point to the underlying property system.</span></span> <span data-ttu-id="a0e65-122">Místo toho stávající implementaci [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] mít vlastnosti již volána <xref:System.Windows.DependencyObject.GetValue%2A> a <xref:System.Windows.DependencyObject.SetValue%2A> v rámci `get` a `set` implementace Obálka vlastnosti odpovídajícím způsobem pomocí pole identifikátoru .</span><span class="sxs-lookup"><span data-stu-id="a0e65-122">Rather, the existing implementation of the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] properties will have already called <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> within the `get` and `set` wrapper implementations of the property, using the identifier field appropriately.</span></span> <span data-ttu-id="a0e65-123">Pokud implementujete vlastní závislost vlastnost sami, pak je bude být definování obálku podobným způsobem.</span><span class="sxs-lookup"><span data-stu-id="a0e65-123">If you are implementing a custom dependency property yourself, then you will be defining the wrapper in a similar way.</span></span>

<a name="backing_with_dp"></a>

## <a name="when-should-you-implement-a-dependency-property"></a><span data-ttu-id="a0e65-124">Pokud je implementace vlastnosti závislosti?</span><span class="sxs-lookup"><span data-stu-id="a0e65-124">When Should You Implement a Dependency Property?</span></span>

<span data-ttu-id="a0e65-125">Pokud implementujete vlastnost ve třídě, tak dlouho, dokud vaše třída odvozena z <xref:System.Windows.DependencyObject>, máte možnost zálohovat vaše vlastnost s <xref:System.Windows.DependencyProperty> identifikátor a tím k němu vlastnost závislosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-125">When you implement a property on a class, so long as your class derives from <xref:System.Windows.DependencyObject>, you have the option to back your property with a <xref:System.Windows.DependencyProperty> identifier and thus to make it a dependency property.</span></span> <span data-ttu-id="a0e65-126">S vaší vlastnost, vlastnost závislosti není vždy nutné nebo vhodné a bude záviset na požadavcích scénáře.</span><span class="sxs-lookup"><span data-stu-id="a0e65-126">Having your property be a dependency property is not always necessary or appropriate, and will depend on your scenario needs.</span></span> <span data-ttu-id="a0e65-127">V některých případech je odpovídající typickou techniku zálohovat vaše vlastnost s privátní pole.</span><span class="sxs-lookup"><span data-stu-id="a0e65-127">Sometimes, the typical technique of backing your property with a private field is adequate.</span></span> <span data-ttu-id="a0e65-128">Ale měli byste implementovat vaše vlastnost jako vlastnost závislosti pokaždé, když chcete, aby vaše vlastnost pro podporu jeden nebo více z následujících [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] možnosti:</span><span class="sxs-lookup"><span data-stu-id="a0e65-128">However, you should implement your property as a dependency property whenever you want your property to support one or more of the following [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] capabilities:</span></span>

- <span data-ttu-id="a0e65-129">Chcete, aby vaše vlastnost být nastavitelná při čekání ve stylu.</span><span class="sxs-lookup"><span data-stu-id="a0e65-129">You want your property to be settable in a style.</span></span> <span data-ttu-id="a0e65-130">Další informace najdete v tématu [styly a šablony](../controls/styling-and-templating.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-130">For more information, see [Styling and Templating](../controls/styling-and-templating.md).</span></span>

- <span data-ttu-id="a0e65-131">Chcete, aby vaše vlastnost pro podporu vytváření datových vazeb.</span><span class="sxs-lookup"><span data-stu-id="a0e65-131">You want your property to support data binding.</span></span> <span data-ttu-id="a0e65-132">Další informace o vlastnosti závislosti datové vazby, naleznete v tématu [vazby vlastností dvou ovládacích](../data/how-to-bind-the-properties-of-two-controls.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-132">For more information about data binding dependency properties, see [Bind the Properties of Two Controls](../data/how-to-bind-the-properties-of-two-controls.md).</span></span>

- <span data-ttu-id="a0e65-133">Chcete, aby vaše vlastnost jako nastavitelnou s odkazem na dynamický prostředek.</span><span class="sxs-lookup"><span data-stu-id="a0e65-133">You want your property to be settable with a dynamic resource reference.</span></span> <span data-ttu-id="a0e65-134">Další informace najdete v tématu [prostředky XAML](xaml-resources.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-134">For more information, see [XAML Resources](xaml-resources.md).</span></span>

- <span data-ttu-id="a0e65-135">Chcete automaticky dědí nadřazený element ve stromové struktuře element hodnotu vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-135">You want to inherit a property value automatically from a parent element in the element tree.</span></span> <span data-ttu-id="a0e65-136">V takovém případě se zaregistrujte <xref:System.Windows.DependencyProperty.RegisterAttached%2A> metoda, i když můžete také vytvořit vlastnost obálku pro [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] přístup.</span><span class="sxs-lookup"><span data-stu-id="a0e65-136">In this case, register with the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method, even if you also create a property wrapper for [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] access.</span></span> <span data-ttu-id="a0e65-137">Další informace najdete v tématu [dědičnost hodnoty vlastnosti](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-137">For more information, see [Property Value Inheritance](property-value-inheritance.md).</span></span>

- <span data-ttu-id="a0e65-138">Chcete, aby vaše vlastnost jako animovatelné.</span><span class="sxs-lookup"><span data-stu-id="a0e65-138">You want your property to be animatable.</span></span> <span data-ttu-id="a0e65-139">Další informace najdete v tématu [přehled animace](../graphics-multimedia/animation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-139">For more information, see [Animation Overview](../graphics-multimedia/animation-overview.md).</span></span>

- <span data-ttu-id="a0e65-140">V systému vlastností na sestavu chcete při předchozí hodnotu vlastnosti nebylo změněno pomocí akce provedené v systému vlastností prostředí nebo uživatele nebo pro čtení a použitím stylů.</span><span class="sxs-lookup"><span data-stu-id="a0e65-140">You want the property system to report when the previous value of the property has been changed by actions taken by the property system, the environment, or the user, or by reading and using styles.</span></span> <span data-ttu-id="a0e65-141">Na základě metadat vlastnosti, můžete zadat vaše vlastnost metodu zpětného volání, která bude volána pokaždé, když systém vlastností určuje, že hodnota vlastnosti byla změněna platností.</span><span class="sxs-lookup"><span data-stu-id="a0e65-141">By using property metadata, your property can specify a callback method that will be invoked each time the property system determines that your property value was definitively changed.</span></span> <span data-ttu-id="a0e65-142">Pojmem, je převod hodnoty vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-142">A related concept is property value coercion.</span></span> <span data-ttu-id="a0e65-143">Další informace najdete v tématu [vlastnost závislosti zpětné volání a ověření](dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-143">For more information, see [Dependency Property Callbacks and Validation](dependency-property-callbacks-and-validation.md).</span></span>

- <span data-ttu-id="a0e65-144">Chcete používat zavedené metadat, které jsou také používány [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] procesy, jako je například vytváření sestav, zda změna hodnoty vlastnosti by měla vyžadují systém rozložení chcete vizuály pro daný element.</span><span class="sxs-lookup"><span data-stu-id="a0e65-144">You want to use established metadata conventions that are also used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] processes, such as reporting whether changing a property value should require the layout system to recompose the visuals for an element.</span></span> <span data-ttu-id="a0e65-145">Nebo chcete být schopni pomocí přepsání metadata tak, aby odvozené třídy můžete změnit na základě metadat vlastnosti, jako je například výchozí hodnota.</span><span class="sxs-lookup"><span data-stu-id="a0e65-145">Or you want to be able to use metadata overrides so that derived classes can change metadata-based characteristics such as the default value.</span></span>

- <span data-ttu-id="a0e65-146">Chcete, aby vlastnosti vlastního ovládacího prvku pro příjem Návrhář WPF Visual Studio podporují, jako je například **vlastnosti** okno úpravy.</span><span class="sxs-lookup"><span data-stu-id="a0e65-146">You want properties of a custom control to receive Visual Studio WPF Designer support, such as **Properties** window editing.</span></span> <span data-ttu-id="a0e65-147">Další informace najdete v tématu [Přehled vytváření ovládacího prvku](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-147">For more information, see [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>

<span data-ttu-id="a0e65-148">Při zkoumání těchto scénářů, měli byste také zvážit, zda můžete dosáhnout váš scénář přepsání metadat existující vlastnost závislosti, nikoli implementací úplně novou vlastnost.</span><span class="sxs-lookup"><span data-stu-id="a0e65-148">When you examine these scenarios, you should also consider whether you can achieve your scenario by overriding the metadata of an existing dependency property, rather than implementing a completely new property.</span></span> <span data-ttu-id="a0e65-149">Určuje, zda je praktické přepis metadat závisí na vašem scénáři a jak tento scénář připomíná implementace v existujícím [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] třídy a vlastnosti závislosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-149">Whether a metadata override is practical depends on your scenario and how closely that scenario resembles the implementation in existing [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] dependency properties and classes.</span></span> <span data-ttu-id="a0e65-150">Další informace o přepsání metadat na existující vlastnosti najdete v tématu [Metadata vlastností závislosti](dependency-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-150">For more information about overriding metadata on existing properties, see [Dependency Property Metadata](dependency-property-metadata.md).</span></span>

<a name="checklist"></a>

## <a name="checklist-for-defining-a-dependency-property"></a><span data-ttu-id="a0e65-151">Kontrolní seznam pro definování vlastnost závislosti</span><span class="sxs-lookup"><span data-stu-id="a0e65-151">Checklist for Defining a Dependency Property</span></span>

<span data-ttu-id="a0e65-152">Definovat vlastnosti závislosti se skládá ze čtyř různých koncepty.</span><span class="sxs-lookup"><span data-stu-id="a0e65-152">Defining a dependency property consists of four distinct concepts.</span></span> <span data-ttu-id="a0e65-153">Tyto koncepty nejsou nutně striktní příklady kroků, protože některé z nich skončit se kombinovat jako jeden řádek kódu v implementaci:</span><span class="sxs-lookup"><span data-stu-id="a0e65-153">These concepts are not necessarily strict procedural steps, because some of these end up being combined as single lines of code in the implementation:</span></span>

- <span data-ttu-id="a0e65-154">(Volitelné) Vytvořte vlastnost metadata pro vlastnost závislosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-154">(Optional) Create property metadata for the dependency property.</span></span>

- <span data-ttu-id="a0e65-155">Zaregistrujte název vlastnosti v systému vlastností zadáním typu vlastníka a typ hodnoty vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-155">Register the property name with the property system, specifying an owner type and the type of the property value.</span></span> <span data-ttu-id="a0e65-156">Metadata vlastnosti zadejte také použít.</span><span class="sxs-lookup"><span data-stu-id="a0e65-156">Also specify the property metadata, if used.</span></span>

- <span data-ttu-id="a0e65-157">Definování <xref:System.Windows.DependencyProperty> identifikátor jako `public` `static` `readonly` na typ vlastníka.</span><span class="sxs-lookup"><span data-stu-id="a0e65-157">Define a <xref:System.Windows.DependencyProperty> identifier as a `public` `static` `readonly` field on the owner type.</span></span>

- <span data-ttu-id="a0e65-158">Definování [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] "zabezpečenou obálku" vlastnost, jejíž název odpovídá názvu vlastnosti závislosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-158">Define a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] "wrapper" property whose name matches the name of the dependency property.</span></span> <span data-ttu-id="a0e65-159">Implementace [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] "zabezpečenou obálku" vlastnost `get` a `set` přístupové objekty pro připojení k vlastnost závislosti, která zálohuje ho.</span><span class="sxs-lookup"><span data-stu-id="a0e65-159">Implement the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] "wrapper" property's `get` and `set` accessors to connect with the dependency property that backs it.</span></span>

<a name="registering"></a>

### <a name="registering-the-property-with-the-property-system"></a><span data-ttu-id="a0e65-160">Vlastnosti registrace v systému vlastností</span><span class="sxs-lookup"><span data-stu-id="a0e65-160">Registering the Property with the Property System</span></span>

<span data-ttu-id="a0e65-161">Aby vaše vlastnost jako vlastnost závislosti musí zaregistrovat tuto vlastnost do tabulky udržuje v systému vlastností a poskytněte jedinečný identifikátor, který se používá jako kvalifikátor pro pozdější operace vlastností systému.</span><span class="sxs-lookup"><span data-stu-id="a0e65-161">In order for your property to be a dependency property, you must register that property into a table maintained by the property system, and give it a unique identifier that is used as the qualifier for later property system operations.</span></span> <span data-ttu-id="a0e65-162">Tyto operace může být interní operace nebo váš vlastní kód volání systému vlastností [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0e65-162">These operations might be internal operations, or your own code calling property system [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)].</span></span> <span data-ttu-id="a0e65-163">K registraci vlastnost zavoláte <xref:System.Windows.DependencyProperty.Register%2A> metoda v těle vaší třídy (uvnitř třídy, ale mimo všechny definice členů).</span><span class="sxs-lookup"><span data-stu-id="a0e65-163">To register the property, you call the <xref:System.Windows.DependencyProperty.Register%2A> method within the body of your class (inside the class, but outside of any member definitions).</span></span> <span data-ttu-id="a0e65-164">Identifikátor pole také poskytuje <xref:System.Windows.DependencyProperty.Register%2A> volání metody, jako návratovou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="a0e65-164">The identifier field is also provided by the <xref:System.Windows.DependencyProperty.Register%2A> method call, as the return value.</span></span> <span data-ttu-id="a0e65-165">Z důvodu, který <xref:System.Windows.DependencyProperty.Register%2A> se provádí volání mimo jiný člen je definice, protože tuto hodnotu použijete přiřadit a vytvořit `public` `static` `readonly` pole typu <xref:System.Windows.DependencyProperty> jako součást vaší třídy.</span><span class="sxs-lookup"><span data-stu-id="a0e65-165">The reason that the <xref:System.Windows.DependencyProperty.Register%2A> call is done outside of other member definitions is because you use this return value to assign and create a `public` `static` `readonly` field of type <xref:System.Windows.DependencyProperty> as part of your class.</span></span> <span data-ttu-id="a0e65-166">Toto pole bude identifikátor pro vaše vlastnost závislosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-166">This field becomes the identifier for your dependency property.</span></span>

[!code-csharp[WPFAquariumSln#RegisterAG](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#registerag)]
[!code-vb[WPFAquariumSln#RegisterAG](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#registerag)]

<a name="nameconventions"></a>

### <a name="dependency-property-name-conventions"></a><span data-ttu-id="a0e65-167">Konvence název vlastnosti závislosti</span><span class="sxs-lookup"><span data-stu-id="a0e65-167">Dependency Property Name Conventions</span></span>

<span data-ttu-id="a0e65-168">Jsou zavedené zásady vytváření názvů týkající se vlastnosti závislosti, které je třeba provést ve všech ale výjimečných okolností.</span><span class="sxs-lookup"><span data-stu-id="a0e65-168">There are established naming conventions regarding dependency properties that you must follow in all but exceptional circumstances.</span></span>

<span data-ttu-id="a0e65-169">Samotné vlastnosti závislosti budou mít základní název "AquariumGraphic" jako v tomto příkladu je zadána jako první parametr <xref:System.Windows.DependencyProperty.Register%2A>.</span><span class="sxs-lookup"><span data-stu-id="a0e65-169">The dependency property itself will have a basic name, "AquariumGraphic" as in this example, which is given as the first parameter of <xref:System.Windows.DependencyProperty.Register%2A>.</span></span> <span data-ttu-id="a0e65-170">Tento název musí být jedinečný v rámci každého typu registrace.</span><span class="sxs-lookup"><span data-stu-id="a0e65-170">That name must be unique within each registering type.</span></span> <span data-ttu-id="a0e65-171">Vlastnosti závislostí zděděné z základní typy se považují za již součástí registrace typu; názvy zděděné vlastnosti nelze zaregistrovat znovu.</span><span class="sxs-lookup"><span data-stu-id="a0e65-171">Dependency properties inherited through base types are considered to be already part of the registering type; names of inherited properties cannot be registered again.</span></span> <span data-ttu-id="a0e65-172">Existuje ale postup pro přidání třídy jako vlastník vlastnost závislostí i v případě, že tuto vlastnost závislosti není zděděno; Podrobnosti najdete v tématu [Metadata vlastností závislosti](dependency-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-172">However, there is a technique for adding a class as owner of a dependency property even when that dependency property is not inherited; for details, see [Dependency Property Metadata](dependency-property-metadata.md).</span></span>

<span data-ttu-id="a0e65-173">Při vytváření identifikátor pole název tohoto pole podle názvu vlastnosti jste zaregistrovali, a navíc přípona `Property`.</span><span class="sxs-lookup"><span data-stu-id="a0e65-173">When you create the identifier field, name this field by the name of the property as you registered it, plus the suffix `Property`.</span></span> <span data-ttu-id="a0e65-174">Toto pole je svůj identifikátor pro vlastnost závislosti, a to se později použijí jako vstup pro <xref:System.Windows.DependencyObject.SetValue%2A> a <xref:System.Windows.DependencyObject.GetValue%2A> volání, které provedete v obálky, všechny ostatní kódu přístup ke vlastnost ve vlastním kódu, všechny externí kód přístup můžete povolit , vlastnost systému a potenciálně podle [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] procesory.</span><span class="sxs-lookup"><span data-stu-id="a0e65-174">This field is your identifier for the dependency property, and it will be used later as an input for the <xref:System.Windows.DependencyObject.SetValue%2A> and <xref:System.Windows.DependencyObject.GetValue%2A> calls you will make in the wrappers, by any other code access to the property by your own code, by any external code access you allow, by the property system, and potentially by [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processors.</span></span>

> [!NOTE]
> <span data-ttu-id="a0e65-175">Definování vlastnosti závislosti do těla třídy je obvyklá implementace, ale je také možné definovat vlastnosti závislosti v statický konstruktor třídy.</span><span class="sxs-lookup"><span data-stu-id="a0e65-175">Defining the dependency property in the class body is the typical implementation, but it is also possible to define a dependency property in the class static constructor.</span></span> <span data-ttu-id="a0e65-176">Tento přístup může mít smysl, pokud potřebujete více než jeden řádek kódu k inicializaci vlastnosti závislosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-176">This approach might make sense if you need more than one line of code to initialize the dependency property.</span></span>

<a name="wrapper1"></a>

### <a name="implementing-the-wrapper"></a><span data-ttu-id="a0e65-177">Implementace zabezpečenou "obálku"</span><span class="sxs-lookup"><span data-stu-id="a0e65-177">Implementing the "Wrapper"</span></span>

<span data-ttu-id="a0e65-178">Implementace obálky by měly volat <xref:System.Windows.DependencyObject.GetValue%2A> v `get` implementaci a <xref:System.Windows.DependencyObject.SetValue%2A> v `set` (původní volání registrace a pole jsou zde uvedená implementace příliš pro přehlednost).</span><span class="sxs-lookup"><span data-stu-id="a0e65-178">Your wrapper implementation should call <xref:System.Windows.DependencyObject.GetValue%2A> in the `get` implementation, and <xref:System.Windows.DependencyObject.SetValue%2A> in the `set` implementation (the original registration call and field are shown here too for clarity).</span></span>

<span data-ttu-id="a0e65-179">Vše kromě výjimečných okolností vaší implementace obálky by měl provádět pouze <xref:System.Windows.DependencyObject.GetValue%2A> a <xref:System.Windows.DependencyObject.SetValue%2A> akce, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="a0e65-179">In all but exceptional circumstances, your wrapper implementations should perform only the <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> actions, respectively.</span></span> <span data-ttu-id="a0e65-180">Důvodem je popsáno v tématu [vlastnosti závislostí a načítání XAML](xaml-loading-and-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-180">The reason for this is discussed in the topic [XAML Loading and Dependency Properties](xaml-loading-and-dependency-properties.md).</span></span>

<span data-ttu-id="a0e65-181">Všechny existující vlastnosti veřejné závislosti, které jsou k dispozici na [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] třídy použijte tento model implementace jednoduchou obálku, většina složitost fungování vlastnosti závislostí je buď ze své podstaty chování systému vlastnost nebo je implementované pomocí jiné koncepty, jako je vlastnost nebo konverze za změňte zpětná volání prostřednictvím vlastnosti metadat.</span><span class="sxs-lookup"><span data-stu-id="a0e65-181">All existing public dependency properties that are provided on the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes use this simple wrapper implementation model; most of the complexity of how dependency properties work is either inherently a behavior of the property system, or is implemented through other concepts such as coercion or property change callbacks through property metadata.</span></span>

[!code-csharp[WPFAquariumSln#AGWithWrapper](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#agwithwrapper)]
[!code-vb[WPFAquariumSln#AGWithWrapper](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#agwithwrapper)]

<span data-ttu-id="a0e65-182">Znovu podle konvence, název vlastnosti obálky musí být stejný jako název zvolené a zadané jako první parametr <xref:System.Windows.DependencyProperty.Register%2A> volání, které registrované vlastnost.</span><span class="sxs-lookup"><span data-stu-id="a0e65-182">Again, by convention, the name of the wrapper property must be the same as the name chosen and given as first parameter of the <xref:System.Windows.DependencyProperty.Register%2A> call that registered the property.</span></span> <span data-ttu-id="a0e65-183">Pokud vaše vlastnost podle úmluvy, to nezakáže nutně všechna možná použití, ale narazíte na několik významné problémy:</span><span class="sxs-lookup"><span data-stu-id="a0e65-183">If your property does not follow the convention, this does not necessarily disable all possible uses, but you will encounter several notable issues:</span></span>

- <span data-ttu-id="a0e65-184">Nebudou fungovat některé aspekty – styly a šablony.</span><span class="sxs-lookup"><span data-stu-id="a0e65-184">Certain aspects of styles and templates will not work.</span></span>

- <span data-ttu-id="a0e65-185">Většina nástrojů a návrháři musíte spoléhat na konvence pojmenování a správně serializovat [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], nebo k poskytování pomoci návrháře prostředí na úrovni na vlastnost.</span><span class="sxs-lookup"><span data-stu-id="a0e65-185">Most tools and designers must rely on the naming conventions to properly serialize [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], or to provide designer environment assistance at a per-property level.</span></span>

- <span data-ttu-id="a0e65-186">Aktuální provádění [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] zavaděč zcela vynechá obálkami a spoléhá na zásady vytváření názvů při zpracování hodnot atributů.</span><span class="sxs-lookup"><span data-stu-id="a0e65-186">The current implementation of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader bypasses the wrappers entirely, and relies on the naming convention when processing attribute values.</span></span> <span data-ttu-id="a0e65-187">Další informace najdete v tématu [vlastnosti závislostí a načítání XAML](xaml-loading-and-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-187">For more information, see [XAML Loading and Dependency Properties](xaml-loading-and-dependency-properties.md).</span></span>

<a name="metadata"></a>

### <a name="property-metadata-for-a-new-dependency-property"></a><span data-ttu-id="a0e65-188">Metadata vlastností pro novou vlastnost závislosti</span><span class="sxs-lookup"><span data-stu-id="a0e65-188">Property Metadata for a New Dependency Property</span></span>

<span data-ttu-id="a0e65-189">Při registraci vlastnost závislosti registrace prostřednictvím systému vlastnost vytvoří objekt metadat, který uchovává vlastnost charakteristiky.</span><span class="sxs-lookup"><span data-stu-id="a0e65-189">When you register a dependency property, the registration through the property system creates a metadata object that stores property characteristics.</span></span> <span data-ttu-id="a0e65-190">Mnohé z těchto vlastností mají výchozí hodnoty, které jsou nastaveny, pokud je vlastnost zaregistrován u jednoduchého podpisy <xref:System.Windows.DependencyProperty.Register%2A>.</span><span class="sxs-lookup"><span data-stu-id="a0e65-190">Many of these characteristics have defaults that are set if the property is registered with the simple signatures of <xref:System.Windows.DependencyProperty.Register%2A>.</span></span> <span data-ttu-id="a0e65-191">Další podpisy <xref:System.Windows.DependencyProperty.Register%2A> vám umožňují určit metadata, která chcete, aby při registraci vlastnost.</span><span class="sxs-lookup"><span data-stu-id="a0e65-191">Other signatures of <xref:System.Windows.DependencyProperty.Register%2A> allow you to specify the metadata that you want as you register the property.</span></span> <span data-ttu-id="a0e65-192">Nejběžnější metadata pro vlastnosti závislosti se jim dát výchozí hodnotu, která je použita pro nové instance, které používají vlastnost.</span><span class="sxs-lookup"><span data-stu-id="a0e65-192">The most common metadata given for dependency properties is to give them a default value that is applied on new instances that use the property.</span></span>

<span data-ttu-id="a0e65-193">Pokud vytváříte vlastnost závislosti, která existuje na odvozenou třídu <xref:System.Windows.FrameworkElement>, můžete použít více specializované třídy metadat <xref:System.Windows.FrameworkPropertyMetadata> místo základní třídy <xref:System.Windows.PropertyMetadata> třídy.</span><span class="sxs-lookup"><span data-stu-id="a0e65-193">If you are creating a dependency property that exists on a derived class of <xref:System.Windows.FrameworkElement>, you can use the more specialized metadata class <xref:System.Windows.FrameworkPropertyMetadata> rather than the base <xref:System.Windows.PropertyMetadata> class.</span></span> <span data-ttu-id="a0e65-194">Konstruktor pro <xref:System.Windows.FrameworkPropertyMetadata> třída obsahuje více podpisů, kde můžete určit různé vlastnosti metadat v kombinaci.</span><span class="sxs-lookup"><span data-stu-id="a0e65-194">The constructor for the <xref:System.Windows.FrameworkPropertyMetadata> class has several signatures where you can specify various metadata characteristics in combination.</span></span> <span data-ttu-id="a0e65-195">Pokud chcete zadat jenom výchozí hodnotu, použijte podpisu, který přijímá jeden parametr typu <xref:System.Object>.</span><span class="sxs-lookup"><span data-stu-id="a0e65-195">If you want to specify the default value only, use the signature that takes a single parameter of type <xref:System.Object>.</span></span> <span data-ttu-id="a0e65-196">Předá parametr objektu jako výchozí typ konkrétní hodnotu vlastnictví (Zadaná výchozí hodnota musí být typ, který jste zadali jako `propertyType` parametr <xref:System.Windows.DependencyProperty.Register%2A> volání).</span><span class="sxs-lookup"><span data-stu-id="a0e65-196">Pass that object parameter as a type-specific default value for your property (the default value provided must be the type you provided as the `propertyType` parameter in the <xref:System.Windows.DependencyProperty.Register%2A> call).</span></span>

<span data-ttu-id="a0e65-197">Pro <xref:System.Windows.FrameworkPropertyMetadata>, můžete také zadat metadata možnost příznaky vlastnictví.</span><span class="sxs-lookup"><span data-stu-id="a0e65-197">For <xref:System.Windows.FrameworkPropertyMetadata>, you can also specify metadata option flags for your property.</span></span> <span data-ttu-id="a0e65-198">Tyto příznaky jsou převedena na diskrétní vlastnosti na metadata vlastnosti po registraci a slouží ke komunikaci určité podmínky pro procesy, jako je například modul rozložení.</span><span class="sxs-lookup"><span data-stu-id="a0e65-198">These flags are converted into discrete properties on the property metadata after registration and are used to communicate certain conditionals to other processes such as the layout engine.</span></span>

#### <a name="setting-appropriate-metadata-flags"></a><span data-ttu-id="a0e65-199">Nastavení příznaků příslušná Metadata</span><span class="sxs-lookup"><span data-stu-id="a0e65-199">Setting Appropriate Metadata Flags</span></span>

- <span data-ttu-id="a0e65-200">Pokud vlastnost (nebo změny v jeho hodnotu) má vliv [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)], a konkrétně ovlivní způsob, jakým by měl systém rozložení velikost nebo vykreslit prvek na stránce nastavit jeden nebo více z následujících příznaků: <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsMeasure>, <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsArrange>, <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsRender>.</span><span class="sxs-lookup"><span data-stu-id="a0e65-200">If your property (or changes in its value) affects the [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)], and in particular affects how the layout system should size or render your element in a page, set one or more of the following flags: <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsMeasure>, <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsArrange>, <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsRender>.</span></span>

  - <span data-ttu-id="a0e65-201"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsMeasure> Označuje, že ke změně této vlastnosti vyžaduje změnu [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] vykreslování, ve kterém obsahujícího objektu může vyžadovat víc nebo míň místa v rámci nadřazené.</span><span class="sxs-lookup"><span data-stu-id="a0e65-201"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsMeasure> indicates that a change to this property requires a change to [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] rendering where the containing object might require more or less space within the parent.</span></span> <span data-ttu-id="a0e65-202">Například vlastnost "Šířka" by měl mít tento příznak nastaven.</span><span class="sxs-lookup"><span data-stu-id="a0e65-202">For example, a "Width" property should have this flag set.</span></span>

  - <span data-ttu-id="a0e65-203"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsArrange> Označuje, že ke změně této vlastnosti vyžaduje změnu [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] vykreslování, které obvykle nevyžaduje změnu ve vyhrazené místo, ale značí to, že se změnila pozice v rámci oboru.</span><span class="sxs-lookup"><span data-stu-id="a0e65-203"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsArrange> indicates that a change to this property requires a change to [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] rendering that typically does not require a change in the dedicated space, but does indicate that the positioning within the space has changed.</span></span> <span data-ttu-id="a0e65-204">Například vlastnost "Zarovnání" by měl mít tento příznak nastaven.</span><span class="sxs-lookup"><span data-stu-id="a0e65-204">For example, an "Alignment" property should have this flag set.</span></span>

  - <span data-ttu-id="a0e65-205"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsRender> Označuje, že některé další došlo ke změně, která nebude mít vliv na rozložení a míry, ale vyžaduje další vykreslování.</span><span class="sxs-lookup"><span data-stu-id="a0e65-205"><xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsRender> indicates that some other change has occurred that will not affect layout and measure, but does require another render.</span></span> <span data-ttu-id="a0e65-206">Příkladem může být vlastnost, která změní barvu existujícího prvku, jako je například "Pozadí".</span><span class="sxs-lookup"><span data-stu-id="a0e65-206">An example would be a property that changes a color of an existing element, such as "Background".</span></span>

  - <span data-ttu-id="a0e65-207">Tyto příznaky jsou často používá jako protokol v metadatech pro vaše vlastní implementace přepsání vlastnosti systému nebo rozložení zpětných volání.</span><span class="sxs-lookup"><span data-stu-id="a0e65-207">These flags are often used as a protocol in metadata for your own override implementations of property system or layout callbacks.</span></span> <span data-ttu-id="a0e65-208">Například můžete mít <xref:System.Windows.DependencyObject.OnPropertyChanged%2A> zpětné volání, které bude volat <xref:System.Windows.UIElement.InvalidateArrange%2A> pokud nějaká vlastnost instance změna hodnoty určité sestavy a má <xref:System.Windows.FrameworkPropertyMetadata.AffectsArrange%2A> jako `true` ve svých metadatech.</span><span class="sxs-lookup"><span data-stu-id="a0e65-208">For instance, you might have an <xref:System.Windows.DependencyObject.OnPropertyChanged%2A> callback that will call <xref:System.Windows.UIElement.InvalidateArrange%2A> if any property of the instance reports a value change and has <xref:System.Windows.FrameworkPropertyMetadata.AffectsArrange%2A> as `true` in its metadata.</span></span>

- <span data-ttu-id="a0e65-209">Některé vlastnosti může mít vliv na vykreslování vlastnosti nadřazeného nadřazeného elementu, způsoby nenabízející změny ve výše uvedené požadované velikosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-209">Some properties may affect the rendering characteristics of the containing parent element, in ways above and beyond the changes in required size mentioned above.</span></span> <span data-ttu-id="a0e65-210">Příkladem je <xref:System.Windows.Documents.Paragraph.MinOrphanLines%2A> vlastnost použít v modelu dokument toku, kde můžete změny vlastnosti měnit celkovou vykreslování plovoucí dokument, který obsahuje odstavce.</span><span class="sxs-lookup"><span data-stu-id="a0e65-210">An example is the <xref:System.Windows.Documents.Paragraph.MinOrphanLines%2A> property used in the flow document model, where changes to that property can change the overall rendering of the flow document that contains the paragraph.</span></span> <span data-ttu-id="a0e65-211">Použití <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsParentArrange> nebo <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsParentMeasure> k identifikaci obdobné případy v vlastní vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-211">Use <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsParentArrange> or <xref:System.Windows.FrameworkPropertyMetadataOptions.AffectsParentMeasure> to identify similar cases in your own properties.</span></span>

- <span data-ttu-id="a0e65-212">Vlastnosti závislostí ve výchozím nastavení, podporují datové vazby.</span><span class="sxs-lookup"><span data-stu-id="a0e65-212">By default, dependency properties support data binding.</span></span> <span data-ttu-id="a0e65-213">Datové vazby pro případy, můžete zakázat záměrně neexistuje žádné reálné scénáře pro datové vazby nebo výkonu v datové vazbě pro velké objekty je rozpoznána jako problém.</span><span class="sxs-lookup"><span data-stu-id="a0e65-213">You can deliberately disable data binding, for cases where there is no realistic scenario for data binding, or where performance in data binding for a large object is recognized as a problem.</span></span>

- <span data-ttu-id="a0e65-214">Ve výchozím nastavení datové vazby <xref:System.Windows.Data.Binding.Mode%2A> pro výchozí vlastnosti závislostí <xref:System.Windows.Data.BindingMode.OneWay>.</span><span class="sxs-lookup"><span data-stu-id="a0e65-214">By default, data binding <xref:System.Windows.Data.Binding.Mode%2A> for dependency properties defaults to <xref:System.Windows.Data.BindingMode.OneWay>.</span></span> <span data-ttu-id="a0e65-215">Můžete vždycky změnit vazbu tak <xref:System.Windows.Data.BindingMode.TwoWay> za instanci vazby; podrobnosti najdete v článku [určení směru vazby](../data/how-to-specify-the-direction-of-the-binding.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-215">You can always change the binding to be <xref:System.Windows.Data.BindingMode.TwoWay> per binding instance; for details, see [Specify the Direction of the Binding](../data/how-to-specify-the-direction-of-the-binding.md).</span></span> <span data-ttu-id="a0e65-216">Ale jako autor vlastnost závislosti, můžete použít vlastnost <xref:System.Windows.Data.BindingMode.TwoWay> režimu vazby ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="a0e65-216">But as the dependency property author, you can choose to make the property use <xref:System.Windows.Data.BindingMode.TwoWay> binding mode by default.</span></span> <span data-ttu-id="a0e65-217">Příklad existující vlastnost závislosti je <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A?displayProperty=nameWithType>; scénář pro tuto vlastnost je, že <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A> nastavení logiku a skládání z <xref:System.Windows.Controls.MenuItem> interakci s výchozího stylu motivu.</span><span class="sxs-lookup"><span data-stu-id="a0e65-217">An example of an existing dependency property is <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A?displayProperty=nameWithType>; the scenario for this property is that the <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A> setting logic and the compositing of <xref:System.Windows.Controls.MenuItem> interact with the default theme style.</span></span> <span data-ttu-id="a0e65-218"><xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A> Datové vazby vlastnost logiky nativně používá k uchování stavu vlastnosti podle jiné vlastnosti stavu a volání metody.</span><span class="sxs-lookup"><span data-stu-id="a0e65-218">The <xref:System.Windows.Controls.MenuItem.IsSubmenuOpen%2A> property logic uses data binding natively to maintain the state of the property in accordance to other state properties and method calls.</span></span> <span data-ttu-id="a0e65-219">Další příklad vlastnost, která vytvoří vazbu <xref:System.Windows.Data.BindingMode.TwoWay> ve výchozím nastavení je <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a0e65-219">Another example property that binds <xref:System.Windows.Data.BindingMode.TwoWay> by default is <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=nameWithType>.</span></span>

- <span data-ttu-id="a0e65-220">Dědičnost vlastnosti ve vlastnosti vlastní závislosti můžete také povolit tak, že nastavíte <xref:System.Windows.FrameworkPropertyMetadataOptions.Inherits> příznak.</span><span class="sxs-lookup"><span data-stu-id="a0e65-220">You can also enable property inheritance in a custom dependency property by setting the <xref:System.Windows.FrameworkPropertyMetadataOptions.Inherits> flag.</span></span> <span data-ttu-id="a0e65-221">Dědičnost vlastnosti je užitečné pro scénáře, kde prvky nadřazené a podřízené prvky mají vlastnosti společné, a dává smysl pro podřízené prvky mají konkrétní hodnotu nastavit na stejnou hodnotu jako nadřazený ho nastavit.</span><span class="sxs-lookup"><span data-stu-id="a0e65-221">Property inheritance is useful for a scenario where parent elements and child elements have a property in common, and it makes sense for the child elements to have that particular property value set to the same value as the parent set it.</span></span> <span data-ttu-id="a0e65-222">Příklad odvoditelný vlastnosti je <xref:System.Windows.FrameworkElement.DataContext%2A>, který se používá pro operace umožňující důležité scénáře hlavní podrobnosti pro prezentaci dat vytvoření vazby.</span><span class="sxs-lookup"><span data-stu-id="a0e65-222">An example inheritable property is <xref:System.Windows.FrameworkElement.DataContext%2A>, which is used for binding operations to enable the important master-detail scenario for data presentation.</span></span> <span data-ttu-id="a0e65-223">Tím, že <xref:System.Windows.FrameworkElement.DataContext%2A> odvoditelný, všechny podřízené prvky dědit daného kontextu dat také.</span><span class="sxs-lookup"><span data-stu-id="a0e65-223">By making <xref:System.Windows.FrameworkElement.DataContext%2A> inheritable, any child elements inherit that data context also.</span></span> <span data-ttu-id="a0e65-224">Z důvodu dědičnost hodnoty vlastnosti můžou určovat kontext dat. v kořenovém adresáři stránky nebo aplikace a nemusíte respecify pro vazby ve všech možných podřízené prvky.</span><span class="sxs-lookup"><span data-stu-id="a0e65-224">Because of property value inheritance, you can specify a data context at the page or application root, and do not need to respecify it for bindings in all possible child elements.</span></span> <span data-ttu-id="a0e65-225"><xref:System.Windows.FrameworkElement.DataContext%2A> také je typickým příkladem pro ilustraci, že dědičnost přepíše výchozí hodnotu, ale vždy nastavíte místně na žádné konkrétní podřízené element. Podrobnosti najdete v tématu [použití vzoru seznam-podrobnosti s hierarchickými daty](../data/how-to-use-the-master-detail-pattern-with-hierarchical-data.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-225"><xref:System.Windows.FrameworkElement.DataContext%2A> is also a good example to illustrate that inheritance overrides the default value, but it can always be set locally on any particular child element; for details, see [Use the Master-Detail Pattern with Hierarchical Data](../data/how-to-use-the-master-detail-pattern-with-hierarchical-data.md).</span></span> <span data-ttu-id="a0e65-226">Dědičnost hodnoty vlastnosti nemá možný výkon a proto by měly používat střídmě, Podrobnosti najdete v tématu [dědičnost hodnoty vlastnosti](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-226">Property value inheritance does have a possible performance cost, and thus should be used sparingly; for details, see [Property Value Inheritance](property-value-inheritance.md).</span></span>

- <span data-ttu-id="a0e65-227">Nastavte <xref:System.Windows.FrameworkPropertyMetadataOptions.Journal> příznak označující, pokud vaše vlastnost závislosti by měly být zjištěna nebo používané službami záznamu do deníku navigace.</span><span class="sxs-lookup"><span data-stu-id="a0e65-227">Set the <xref:System.Windows.FrameworkPropertyMetadataOptions.Journal> flag to indicate if your dependency property should be detected or used by navigation journaling services.</span></span> <span data-ttu-id="a0e65-228">Příkladem je <xref:System.Windows.Controls.Primitives.Selector.SelectedIndex%2A> vlastnost; jakékoli položky vybrané ve výběru ovládací prvek by měl nastavit jako trvalý, když přejde do historie záznamu do deníku.</span><span class="sxs-lookup"><span data-stu-id="a0e65-228">An example is the <xref:System.Windows.Controls.Primitives.Selector.SelectedIndex%2A> property; any item selected in a selection control should be persisted when the journaling history is navigated.</span></span>

<a name="RODP"></a>

## <a name="read-only-dependency-properties"></a><span data-ttu-id="a0e65-229">Vlastnosti závislosti jen pro čtení</span><span class="sxs-lookup"><span data-stu-id="a0e65-229">Read-Only Dependency Properties</span></span>

<span data-ttu-id="a0e65-230">Můžete definovat vlastnosti závislosti, která je jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="a0e65-230">You can define a dependency property that is read-only.</span></span> <span data-ttu-id="a0e65-231">Scénáře pro proč může definovat vaše vlastnost jen pro čtení jsou však poněkud liší, jako je postup pro registraci v systému vlastností a zveřejnění identifikátoru.</span><span class="sxs-lookup"><span data-stu-id="a0e65-231">However, the scenarios for why you might define your property as read-only are somewhat different, as is the procedure for registering them with the property system and exposing the identifier.</span></span> <span data-ttu-id="a0e65-232">Další informace najdete v tématu [vlastnosti závislosti jen pro čtení](read-only-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-232">For more information, see [Read-Only Dependency Properties](read-only-dependency-properties.md).</span></span>

<a name="CTDP"></a>

## <a name="collection-type-dependency-properties"></a><span data-ttu-id="a0e65-233">Vlastnosti závislostí typu kolekce</span><span class="sxs-lookup"><span data-stu-id="a0e65-233">Collection-Type Dependency Properties</span></span>

<span data-ttu-id="a0e65-234">Vlastnosti závislostí typu kolekce mají některé další implementace problémy vzít v úvahu.</span><span class="sxs-lookup"><span data-stu-id="a0e65-234">Collection-type dependency properties have some additional implementation issues to consider.</span></span> <span data-ttu-id="a0e65-235">Podrobnosti najdete v tématu [vlastnosti závislostí typu kolekce](collection-type-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-235">For details, see [Collection-Type Dependency Properties](collection-type-dependency-properties.md).</span></span>

<a name="SecurityC"></a>

## <a name="dependency-property-security-considerations"></a><span data-ttu-id="a0e65-236">Aspekty zabezpečení vlastností závislosti</span><span class="sxs-lookup"><span data-stu-id="a0e65-236">Dependency Property Security Considerations</span></span>

<span data-ttu-id="a0e65-237">Vlastnosti závislosti by měl být deklarován jako veřejné vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="a0e65-237">Dependency properties should be declared as public properties.</span></span> <span data-ttu-id="a0e65-238">Pole identifikátoru vlastnosti závislosti by měl být deklarován jako veřejné statické pole.</span><span class="sxs-lookup"><span data-stu-id="a0e65-238">Dependency property identifier fields should be declared as public static fields.</span></span> <span data-ttu-id="a0e65-239">I v případě, že při pokusu deklarovat jiných úrovních přístupu (například chráněné), vlastnost závislosti vždy přistupuje prostřednictvím identifikátor v kombinaci s vlastností systému [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0e65-239">Even if you attempt to declare other access levels (such as protected), a dependency property can always be accessed through the identifier in combination with the property system [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)].</span></span> <span data-ttu-id="a0e65-240">Z důvodu stanovení vytváření sestav, nebo hodnota metadat potenciálně přístupný i chráněné identifikátor pole [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] , které jsou součástí vlastností systému, jako například <xref:System.Windows.LocalValueEnumerator>.</span><span class="sxs-lookup"><span data-stu-id="a0e65-240">Even a protected identifier field is potentially accessible because of metadata reporting or value determination [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] that are part of the property system, such as <xref:System.Windows.LocalValueEnumerator>.</span></span> <span data-ttu-id="a0e65-241">Další informace najdete v tématu [zabezpečení vlastností závislosti](dependency-property-security.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-241">For more information, see [Dependency Property Security](dependency-property-security.md).</span></span>

<a name="DPCtor"></a>

## <a name="dependency-properties-and-class-constructors"></a><span data-ttu-id="a0e65-242">Vlastnosti závislostí a konstruktor třídy</span><span class="sxs-lookup"><span data-stu-id="a0e65-242">Dependency Properties and Class Constructors</span></span>

<span data-ttu-id="a0e65-243">Je zásadně ve spravovaném kódu programování (často vynucuje sada nástrojů pro analýzu kódu jako je například FxCop), které třídy konstruktory by neměl volat virtuální metody.</span><span class="sxs-lookup"><span data-stu-id="a0e65-243">There is a general principle in managed code programming (often enforced by code analysis tools such as FxCop) that class constructors should not call virtual methods.</span></span> <span data-ttu-id="a0e65-244">Je to proto, že konstruktory lze volat jako základní inicializace konstruktoru odvozené třídy, a zadáte virtuální metodu pomocí konstruktoru mohou nastat za stavu neúplná inicializace vytváří instanci objektu.</span><span class="sxs-lookup"><span data-stu-id="a0e65-244">This is because constructors can be called as base initialization of a derived class constructor, and entering the virtual method through the constructor might occur at an incomplete initialization state of the object instance being constructed.</span></span> <span data-ttu-id="a0e65-245">Když odvozujete z jiné třídy, která už je odvozena z <xref:System.Windows.DependencyObject>, je třeba si uvědomit, že samotný systém vlastnosti volání a interně poskytuje virtuální metody.</span><span class="sxs-lookup"><span data-stu-id="a0e65-245">When you derive from any class that already derives from <xref:System.Windows.DependencyObject>, you should be aware that the property system itself calls and exposes virtual methods internally.</span></span> <span data-ttu-id="a0e65-246">Tyto virtuální metody jsou součástí [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] vlastnost systémových služeb.</span><span class="sxs-lookup"><span data-stu-id="a0e65-246">These virtual methods are part of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system services.</span></span> <span data-ttu-id="a0e65-247">Přepsání metody umožňuje odvozené třídy se účastnit stanovení hodnotu.</span><span class="sxs-lookup"><span data-stu-id="a0e65-247">Overriding the methods enables derived classes to participate in value determination.</span></span> <span data-ttu-id="a0e65-248">Aby se zabránilo problémům s inicializace za běhu, by neměl nastavíte závislost hodnoty vlastností v rámci konstruktory tříd, pokud podle vzoru velmi konkrétní konstruktor.</span><span class="sxs-lookup"><span data-stu-id="a0e65-248">To avoid potential issues with runtime initialization, you should not set dependency property values within constructors of classes, unless you follow a very specific constructor pattern.</span></span> <span data-ttu-id="a0e65-249">Podrobnosti najdete v tématu [bezpečné zabezpečené vzory konstruktoru pro DependencyObjects](safe-constructor-patterns-for-dependencyobjects.md).</span><span class="sxs-lookup"><span data-stu-id="a0e65-249">For details, see [Safe Constructor Patterns for DependencyObjects](safe-constructor-patterns-for-dependencyobjects.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="a0e65-250">Viz také:</span><span class="sxs-lookup"><span data-stu-id="a0e65-250">See also</span></span>

- [<span data-ttu-id="a0e65-251">Přehled vlastností závislosti</span><span class="sxs-lookup"><span data-stu-id="a0e65-251">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="a0e65-252">Metadata vlastností závislosti</span><span class="sxs-lookup"><span data-stu-id="a0e65-252">Dependency Property Metadata</span></span>](dependency-property-metadata.md)
- [<span data-ttu-id="a0e65-253">Přehled vytváření ovládacích prvků</span><span class="sxs-lookup"><span data-stu-id="a0e65-253">Control Authoring Overview</span></span>](../controls/control-authoring-overview.md)
- [<span data-ttu-id="a0e65-254">Vlastnosti závislostí typu kolekce</span><span class="sxs-lookup"><span data-stu-id="a0e65-254">Collection-Type Dependency Properties</span></span>](collection-type-dependency-properties.md)
- [<span data-ttu-id="a0e65-255">Zabezpečení vlastností závislosti</span><span class="sxs-lookup"><span data-stu-id="a0e65-255">Dependency Property Security</span></span>](dependency-property-security.md)
- [<span data-ttu-id="a0e65-256">Vlastnosti závislostí a načítání XAML</span><span class="sxs-lookup"><span data-stu-id="a0e65-256">XAML Loading and Dependency Properties</span></span>](xaml-loading-and-dependency-properties.md)
- [<span data-ttu-id="a0e65-257">Zabezpečené vzory konstruktoru pro DependencyObjects</span><span class="sxs-lookup"><span data-stu-id="a0e65-257">Safe Constructor Patterns for DependencyObjects</span></span>](safe-constructor-patterns-for-dependencyobjects.md)
