---
title: Vzájemná spolupráce grafického subsystému WPF a systému Win32
ms.date: 03/30/2017
helpviewer_keywords:
- hosting WPF content in Win32 window [WPF]
- HWND interop [WPF]
- Win32 code [WPF], WPF interoperation
- interoperability [WPF], Win32
ms.assetid: 0ffbde0d-701d-45a3-a6fa-dd71f4d9772e
ms.openlocfilehash: 7248b0e5abcf2c6357dc7ce7c708eaa85358061a
ms.sourcegitcommit: 337bdc5a463875daf2cc6883e5a2da97d56f5000
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/24/2019
ms.locfileid: "72846798"
---
# <a name="wpf-and-win32-interoperation"></a><span data-ttu-id="bef77-102">Vzájemná spolupráce grafického subsystému WPF a systému Win32</span><span class="sxs-lookup"><span data-stu-id="bef77-102">WPF and Win32 Interoperation</span></span>

<span data-ttu-id="bef77-103">Toto téma poskytuje přehled o tom, jak pracovat s kódem [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bef77-103">This topic provides an overview of how to interoperate [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] code.</span></span> [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="bef77-104">poskytuje bohatou prostředí pro vytváření aplikací.</span><span class="sxs-lookup"><span data-stu-id="bef77-104">provides a rich environment for creating applications.</span></span> <span data-ttu-id="bef77-105">Nicméně pokud máte významnou investici do [!INCLUDE[TLA#tla_win32](../../../../includes/tlasharptla-win32-md.md)] kódu, může být efektivnější použít některý z těchto kódů.</span><span class="sxs-lookup"><span data-stu-id="bef77-105">However, when you have a substantial investment in [!INCLUDE[TLA#tla_win32](../../../../includes/tlasharptla-win32-md.md)] code, it might be more effective to reuse some of that code.</span></span>

<a name="basics"></a>

## <a name="wpf-and-win32-interoperation-basics"></a><span data-ttu-id="bef77-106">Základní informace o meziprovozu WPF a Win32</span><span class="sxs-lookup"><span data-stu-id="bef77-106">WPF and Win32 Interoperation Basics</span></span>

<span data-ttu-id="bef77-107">Existují dvě základní techniky pro spolupráci mezi [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] a kódem [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bef77-107">There are two basic techniques for interoperation between [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] code.</span></span>

- <span data-ttu-id="bef77-108">Hostování obsahu [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] v okně [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bef77-108">Host [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content in a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] window.</span></span> <span data-ttu-id="bef77-109">Pomocí této techniky můžete použít pokročilé grafické funkce [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] v rámci rozhraní Standard [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]ho okna a aplikace.</span><span class="sxs-lookup"><span data-stu-id="bef77-109">With this technique, you can use the advanced graphics capabilities of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] within the framework of a standard [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] window and application.</span></span>

- <span data-ttu-id="bef77-110">Hostování okna [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] v obsahu [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bef77-110">Host a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] window in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content.</span></span> <span data-ttu-id="bef77-111">Pomocí této techniky můžete použít stávající vlastní ovládací prvek [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] v kontextu jiného obsahu [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] a předávat data napříč hranicemi.</span><span class="sxs-lookup"><span data-stu-id="bef77-111">With this technique, you can use an existing custom [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] control in the context of other [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content, and pass data across the boundaries.</span></span>

<span data-ttu-id="bef77-112">Každý z těchto postupů je koncepčně představený v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="bef77-112">Each of these techniques is conceptually introduced in this topic.</span></span> <span data-ttu-id="bef77-113">Další ilustraci hostování [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] v [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]naleznete v tématu [Návod: Hostování obsahu WPF v systému Win32](walkthrough-hosting-wpf-content-in-win32.md).</span><span class="sxs-lookup"><span data-stu-id="bef77-113">For a more code-oriented illustration of hosting [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] in [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)], see [Walkthrough: Hosting WPF Content in Win32](walkthrough-hosting-wpf-content-in-win32.md).</span></span> <span data-ttu-id="bef77-114">Další ilustraci hostování [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] v [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]naleznete v tématu [Návod: hostování ovládacího prvku Win32 v subsystému WPF](walkthrough-hosting-a-win32-control-in-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="bef77-114">For a more code-oriented illustration of hosting [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Walkthrough: Hosting a Win32 Control in WPF](walkthrough-hosting-a-win32-control-in-wpf.md).</span></span>

<a name="projects"></a>

## <a name="wpf-interoperation-projects"></a><span data-ttu-id="bef77-115">Projekty spolupráce WPF</span><span class="sxs-lookup"><span data-stu-id="bef77-115">WPF Interoperation Projects</span></span>

<span data-ttu-id="bef77-116">Rozhraní [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] API jsou spravovaného kódu, ale většina stávajících [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]ch programů je C++zapsána v nespravovaném jazyce.</span><span class="sxs-lookup"><span data-stu-id="bef77-116">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] APIs are managed code, but most existing [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] programs are written in unmanaged C++.</span></span>  <span data-ttu-id="bef77-117">Rozhraní API pro [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] nemůžete volat z skutečného nespravovaného programu.</span><span class="sxs-lookup"><span data-stu-id="bef77-117">You cannot call [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] APIs from a true unmanaged program.</span></span> <span data-ttu-id="bef77-118">Nicméně pomocí možnosti `/clr` s kompilátorem Microsoft Visual C++ Compiler můžete vytvořit smíšený spravovaný a nespravovaný program, kde můžete hladce kombinovat spravovaná a Nespravovaná volání rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="bef77-118">However, by using the `/clr` option with the Microsoft Visual C++ compiler, you can create a mixed managed-unmanaged program where you can seamlessly mix managed and unmanaged API calls.</span></span>

<span data-ttu-id="bef77-119">Jedna komplikace na úrovni projektu je, že nemůžete kompilovat [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] soubory C++ do projektu.</span><span class="sxs-lookup"><span data-stu-id="bef77-119">One project-level complication is that you cannot compile [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] files into a C++ project.</span></span>  <span data-ttu-id="bef77-120">K dispozici je několik technik dělení projektu.</span><span class="sxs-lookup"><span data-stu-id="bef77-120">There are several project division techniques to compensate for this.</span></span>

- <span data-ttu-id="bef77-121">Vytvořte C# knihovnu DLL, která obsahuje všechny vaše [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]stránky jako zkompilované sestavení a pak svůj C++ spustitelný soubor zahrne tuto knihovnu DLL jako referenci.</span><span class="sxs-lookup"><span data-stu-id="bef77-121">Create a C# DLL that contains all your [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pages as a compiled assembly, and then have your C++ executable include that DLL as a reference.</span></span>

- <span data-ttu-id="bef77-122">Vytvořte C# spustitelný soubor pro[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]obsah a přikažte na něj C++ knihovnu DLL, která obsahuje obsah[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bef77-122">Create a C# executable for the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content, and have it reference a C++ DLL that contains the [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] content.</span></span>

- <span data-ttu-id="bef77-123">Použijte <xref:System.Windows.Markup.XamlReader.Load%2A> k načtení [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] v době běhu, namísto kompilování [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bef77-123">Use <xref:System.Windows.Markup.XamlReader.Load%2A> to load any [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] at run time, instead of compiling your [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>

- <span data-ttu-id="bef77-124">Nepoužívejte [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] vůbec a zapište všechny [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] v kódu a sestavte strom elementů z <xref:System.Windows.Application>.</span><span class="sxs-lookup"><span data-stu-id="bef77-124">Do not use [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] at all, and write all your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] in code, building up the element tree from <xref:System.Windows.Application>.</span></span>

<span data-ttu-id="bef77-125">Použijte libovolný přístup, který vám vyhovuje.</span><span class="sxs-lookup"><span data-stu-id="bef77-125">Use whatever approach works best for you.</span></span>

> [!NOTE]
> <span data-ttu-id="bef77-126">Pokud jste ještě nepoužili C++/CLI, můžete si všimnout některých klíčových slov "New", jako jsou například`gcnew`a`nullptr`v příkladech kódu mezioperace.</span><span class="sxs-lookup"><span data-stu-id="bef77-126">If you have not used C++/CLI before, you might notice some "new" keywords such as `gcnew` and `nullptr` in the interoperation code examples.</span></span> <span data-ttu-id="bef77-127">Tato klíčová slova nahrazují starší syntaxi s dvojitým podtržítkem (`__gc`) a poskytují přirozenější syntaxi pro spravovaný kód C++v.</span><span class="sxs-lookup"><span data-stu-id="bef77-127">These keywords supersede the older double-underscore syntax (`__gc`) and provide a more natural syntax for managed code in C++.</span></span>  <span data-ttu-id="bef77-128">Další informace o spravovaných C++funkcích/CLI najdete v tématu [rozšíření komponent pro platformy běhového prostředí](/cpp/windows/component-extensions-for-runtime-platforms).</span><span class="sxs-lookup"><span data-stu-id="bef77-128">To learn more about the C++/CLI managed features, see [Component Extensions for Runtime Platforms](/cpp/windows/component-extensions-for-runtime-platforms).</span></span>

<a name="hwnds"></a>

## <a name="how-wpf-uses-hwnds"></a><span data-ttu-id="bef77-129">Jak WPF používá HWND</span><span class="sxs-lookup"><span data-stu-id="bef77-129">How WPF Uses Hwnds</span></span>

<span data-ttu-id="bef77-130">Aby bylo možné [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] "HWND Interop", potřebujete pochopit, jak [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] používá HWND.</span><span class="sxs-lookup"><span data-stu-id="bef77-130">To make the most of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] "HWND interop", you need to understand how [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] uses HWNDs.</span></span> <span data-ttu-id="bef77-131">Pro libovolný HWND nemůžete kombinovat vykreslování [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] s vykreslováním pomocí rozhraní DirectX nebo vykreslováním GDI/GDI+.</span><span class="sxs-lookup"><span data-stu-id="bef77-131">For any HWND, you cannot mix [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] rendering with DirectX rendering or GDI / GDI+ rendering.</span></span> <span data-ttu-id="bef77-132">To má řadu dopadů.</span><span class="sxs-lookup"><span data-stu-id="bef77-132">This has a number of implications.</span></span> <span data-ttu-id="bef77-133">Primárně, aby bylo možné tyto vykreslovací modely vzájemně kombinovat, musíte vytvořit řešení vzájemného provozu a použít určené segmenty vzájemného provozu pro každý model vykreslování, který se rozhodnete použít.</span><span class="sxs-lookup"><span data-stu-id="bef77-133">Primarily, in order to mix these rendering models at all, you must create an interoperation solution, and use designated segments of interoperation for each rendering model that you choose to use.</span></span> <span data-ttu-id="bef77-134">Také chování vykreslování vytvoří omezení vzdušného prostoru pro to, co vaše řešení pro vzájemnou práci může dosáhnout.</span><span class="sxs-lookup"><span data-stu-id="bef77-134">Also, the rendering behavior creates an "airspace" restriction for what your interoperation solution can accomplish.</span></span> <span data-ttu-id="bef77-135">Koncept "vzdušného prostoru" je podrobněji vysvětlen v tématu [Přehled technologických oblastí](technology-regions-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bef77-135">The "airspace" concept is explained in greater detail in the topic [Technology Regions Overview](technology-regions-overview.md).</span></span>

<span data-ttu-id="bef77-136">Všechny [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] prvky na obrazovce jsou nakonec zazálohovány HWND.</span><span class="sxs-lookup"><span data-stu-id="bef77-136">All [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elements on the screen are ultimately backed by a HWND.</span></span> <span data-ttu-id="bef77-137">Když vytvoříte <xref:System.Windows.Window>[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] vytvoří HWND nejvyšší úrovně a použije <xref:System.Windows.Interop.HwndSource> k vložení <xref:System.Windows.Window> a jeho [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]ho obsahu do HWND.</span><span class="sxs-lookup"><span data-stu-id="bef77-137">When you create a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.Window>, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] creates a top-level HWND, and uses an <xref:System.Windows.Interop.HwndSource> to put the <xref:System.Windows.Window> and its [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content inside the HWND.</span></span>  <span data-ttu-id="bef77-138">Zbytek obsahu [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] ve sdílených složkách aplikace v jednotném HWND.</span><span class="sxs-lookup"><span data-stu-id="bef77-138">The rest of your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content in the application shares that singular HWND.</span></span> <span data-ttu-id="bef77-139">Výjimkou jsou nabídky, rozevírací seznamy pole se seznamem a další automaticky otevíraná okna.</span><span class="sxs-lookup"><span data-stu-id="bef77-139">An exception is menus, combo box drop downs, and other pop-ups.</span></span> <span data-ttu-id="bef77-140">Tyto prvky vytvoří vlastní okno nejvyšší úrovně, což je důvod, proč by nabídka [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] mohla jít po okraji HWND okna, který ho obsahuje.</span><span class="sxs-lookup"><span data-stu-id="bef77-140">These elements create their own top-level window, which is why a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] menu can potentially go past the edge of the window HWND that contains it.</span></span> <span data-ttu-id="bef77-141">Když použijete <xref:System.Windows.Interop.HwndHost> k umístění prvku HWND do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] informují [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)], jak umístit nový podřízený HWND relativní ke [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.Window> HWND.</span><span class="sxs-lookup"><span data-stu-id="bef77-141">When you use <xref:System.Windows.Interop.HwndHost> to put an HWND inside [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] informs [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] how to position the new child HWND relative to the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.Window> HWND.</span></span>

<span data-ttu-id="bef77-142">Související koncept pro HWND je transparentnost uvnitř a mezi jednotlivými HWND.</span><span class="sxs-lookup"><span data-stu-id="bef77-142">A related concept to HWND is transparency within and between each HWND.</span></span> <span data-ttu-id="bef77-143">To je také popsáno v tématu [Přehled technologických oblastí](technology-regions-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bef77-143">This is also discussed in the topic [Technology Regions Overview](technology-regions-overview.md).</span></span>

<a name="hosting_a_wpf_page"></a>

## <a name="hosting-wpf-content-in-a-microsoft-win32-window"></a><span data-ttu-id="bef77-144">Hostování obsahu WPF v okně Microsoft Win32</span><span class="sxs-lookup"><span data-stu-id="bef77-144">Hosting WPF Content in a Microsoft Win32 Window</span></span>

<span data-ttu-id="bef77-145">Klíč pro hostování [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] v okně [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] je třída <xref:System.Windows.Interop.HwndSource>.</span><span class="sxs-lookup"><span data-stu-id="bef77-145">The key to hosting a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] on a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] window is the <xref:System.Windows.Interop.HwndSource> class.</span></span> <span data-ttu-id="bef77-146">Tato třída zalomí obsah [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] v okně [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)], aby mohl být obsah [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] začleněn do [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] jako podřízené okno.</span><span class="sxs-lookup"><span data-stu-id="bef77-146">This class wraps the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content in a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] window, so that the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content can be incorporated into your [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] as a child window.</span></span> <span data-ttu-id="bef77-147">Následující postup kombinuje [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] v jediné aplikaci.</span><span class="sxs-lookup"><span data-stu-id="bef77-147">The following approach combines the [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] in a single application.</span></span>

1. <span data-ttu-id="bef77-148">Implementujte svůj obsah [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] (kořenový element obsahu) jako spravovanou třídu.</span><span class="sxs-lookup"><span data-stu-id="bef77-148">Implement your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content (the content root element) as a managed class.</span></span> <span data-ttu-id="bef77-149">Třída obvykle dědí z jedné třídy, která může obsahovat více podřízených prvků nebo slouží jako kořenový prvek, například <xref:System.Windows.Controls.DockPanel> nebo <xref:System.Windows.Controls.Page>.</span><span class="sxs-lookup"><span data-stu-id="bef77-149">Typically, the class inherits from one of the classes that can contain multiple child elements and/or used as a root element, such as <xref:System.Windows.Controls.DockPanel> or <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="bef77-150">V následujících krocích je tato třída označována jako [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] Třída obsahu a instance třídy jsou označovány jako [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] objekty obsahu.</span><span class="sxs-lookup"><span data-stu-id="bef77-150">In subsequent steps, this class is referred to as the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content class, and instances of the class are referred to as [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content objects.</span></span>

2. <span data-ttu-id="bef77-151">Implementace aplikace pro Windows pomocí C++/CLI.</span><span class="sxs-lookup"><span data-stu-id="bef77-151">Implement a Windows application with C++/CLI.</span></span> <span data-ttu-id="bef77-152">Pokud začínáte s existující nespravovanou C++ aplikací, můžete ji obvykle povolit pro volání spravovaného kódu změnou nastavení projektu tak, aby zahrnovala příznak kompilátoru`/clr`(plný rozsah toho, co může být nutné pro podporu kompilace`/clr`není popsán v tomto tématu).</span><span class="sxs-lookup"><span data-stu-id="bef77-152">If you are starting with an existing unmanaged C++ application, you can usually enable it to call managed code by changing your project settings to include the `/clr` compiler flag (the full scope of what might be necessary to support `/clr` compilation is not described in this topic).</span></span>

3. <span data-ttu-id="bef77-153">Nastavte model dělení na vlákna (STA) na jeden podproces.</span><span class="sxs-lookup"><span data-stu-id="bef77-153">Set the threading model to Single Threaded Apartment (STA).</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="bef77-154">používá tento model vláken.</span><span class="sxs-lookup"><span data-stu-id="bef77-154">uses this threading model.</span></span>

4. <span data-ttu-id="bef77-155">V postupu okna zpracujte oznámení WM_CREATE.</span><span class="sxs-lookup"><span data-stu-id="bef77-155">Handle the WM_CREATE notification in your window procedure.</span></span>

5. <span data-ttu-id="bef77-156">V obslužné rutině (nebo funkci, kterou volá obslužná rutina), udělejte toto:</span><span class="sxs-lookup"><span data-stu-id="bef77-156">Within the handler (or a function that the handler calls), do the following:</span></span>

    1. <span data-ttu-id="bef77-157">Vytvoří nový objekt <xref:System.Windows.Interop.HwndSource> s nadřazeným oknem s HWND jako jeho parametrem `parent`.</span><span class="sxs-lookup"><span data-stu-id="bef77-157">Create a new <xref:System.Windows.Interop.HwndSource> object with the parent window HWND as its `parent` parameter.</span></span>

    2. <span data-ttu-id="bef77-158">Vytvořte instanci třídy obsahu [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bef77-158">Create an instance of your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content class.</span></span>

    3. <span data-ttu-id="bef77-159">Přiřaďte odkaz na objekt [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu k vlastnosti <xref:System.Windows.Interop.HwndSource.RootVisual%2A> objektu <xref:System.Windows.Interop.HwndSource>.</span><span class="sxs-lookup"><span data-stu-id="bef77-159">Assign a reference to the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content object to the <xref:System.Windows.Interop.HwndSource> object <xref:System.Windows.Interop.HwndSource.RootVisual%2A> property.</span></span>

    4. <span data-ttu-id="bef77-160">Vlastnost <xref:System.Windows.Interop.HwndSource> objektů <xref:System.Windows.Interop.HwndSource.Handle%2A> obsahuje popisovač okna (HWND).</span><span class="sxs-lookup"><span data-stu-id="bef77-160">The <xref:System.Windows.Interop.HwndSource> object <xref:System.Windows.Interop.HwndSource.Handle%2A> property contains the window handle (HWND).</span></span> <span data-ttu-id="bef77-161">Chcete-li získat HWND, který můžete použít v nespravované části aplikace, přetypování `Handle.ToPointer()` na HWND.</span><span class="sxs-lookup"><span data-stu-id="bef77-161">To get an HWND that you can use in the unmanaged part of your application, cast `Handle.ToPointer()` to an HWND.</span></span>

6. <span data-ttu-id="bef77-162">Implementujte spravovanou třídu obsahující statické pole, které obsahuje odkaz na objekt obsahu [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bef77-162">Implement a managed class that contains a static field that holds a reference to your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content object.</span></span> <span data-ttu-id="bef77-163">Tato třída umožňuje získat odkaz na objekt [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu z vašeho [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] kódu, ale důležitější je, že se <xref:System.Windows.Interop.HwndSource> neúmyslně shromáždí do paměti.</span><span class="sxs-lookup"><span data-stu-id="bef77-163">This class allows you to get a reference to the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content object from your [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] code, but more importantly it prevents your <xref:System.Windows.Interop.HwndSource> from being inadvertently garbage collected.</span></span>

7. <span data-ttu-id="bef77-164">Příjem oznámení z objektu [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu připojením obslužné rutiny k jedné nebo více událostem objektu [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu.</span><span class="sxs-lookup"><span data-stu-id="bef77-164">Receive notifications from the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content object by attaching a handler to one or more of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content object events.</span></span>

8. <span data-ttu-id="bef77-165">Komunikujte s objektem [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsahu pomocí odkazu, který jste uložili do statického pole pro nastavení vlastností, metod volání atd.</span><span class="sxs-lookup"><span data-stu-id="bef77-165">Communicate with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content object by using the reference that you stored in the static field to set properties, call methods, etc.</span></span>

> [!NOTE]
> <span data-ttu-id="bef77-166">V případě, že vytvoříte samostatné sestavení a následně na něj odkazujete, můžete použít některou z [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] definice třídy obsahu pro krok One v [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] použití výchozí částečné třídy třídy obsahu.</span><span class="sxs-lookup"><span data-stu-id="bef77-166">You can do some or all of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content class definition for Step One in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] using the default partial class of the content class, if you produce a separate assembly and then reference it.</span></span> <span data-ttu-id="bef77-167">I když obvykle zahrnete <xref:System.Windows.Application> objekt jako součást kompilace [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] do sestavení, neukončíte ho pomocí tohoto <xref:System.Windows.Application> jako součást spolupráce, stačí použít jednu nebo více kořenových tříd pro [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] soubory, na které odkazuje aplikace. a odkazují na jejich dílčí třídy.</span><span class="sxs-lookup"><span data-stu-id="bef77-167">Although you typically include an <xref:System.Windows.Application> object as part of compiling the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] into an assembly, you do not end up using that <xref:System.Windows.Application> as part of the interoperation, you just use one or more of the root classes for [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] files referred to by the application and reference their partial classes.</span></span> <span data-ttu-id="bef77-168">Zbytek postupu je v podstatě podobný jako uvedený výše.</span><span class="sxs-lookup"><span data-stu-id="bef77-168">The remainder of the procedure is essentially similar to that outlined above.</span></span>
>
> <span data-ttu-id="bef77-169">Každý z těchto kroků je znázorněn prostřednictvím kódu v tématu [Návod: Hostování obsahu WPF v systému Win32](walkthrough-hosting-wpf-content-in-win32.md).</span><span class="sxs-lookup"><span data-stu-id="bef77-169">Each of these steps is illustrated through code in the topic [Walkthrough: Hosting WPF Content in Win32](walkthrough-hosting-wpf-content-in-win32.md).</span></span>

<a name="hosting_an_hwnd"></a>

## <a name="hosting-a-microsoft-win32-window-in-wpf"></a><span data-ttu-id="bef77-170">Hostování okna Microsoft Win32 v subsystému WPF</span><span class="sxs-lookup"><span data-stu-id="bef77-170">Hosting a Microsoft Win32 Window in WPF</span></span>

<span data-ttu-id="bef77-171">Klíč pro hostování [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]ho okna v rámci jiného obsahu [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] je třída <xref:System.Windows.Interop.HwndHost>.</span><span class="sxs-lookup"><span data-stu-id="bef77-171">The key to hosting a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] window within other [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content is the <xref:System.Windows.Interop.HwndHost> class.</span></span> <span data-ttu-id="bef77-172">Tato třída zalomí okno do [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]ho prvku, který lze přidat do stromu elementu [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bef77-172">This class wraps the window in a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] element which can be added to a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] element tree.</span></span> <span data-ttu-id="bef77-173"><xref:System.Windows.Interop.HwndHost> podporuje také rozhraní API, která umožňují provádět takové úkoly jako zprávy procesu pro hostované okno.</span><span class="sxs-lookup"><span data-stu-id="bef77-173"><xref:System.Windows.Interop.HwndHost> also supports APIs that allow you to do such tasks as process messages for the hosted window.</span></span> <span data-ttu-id="bef77-174">Základní postup je následující:</span><span class="sxs-lookup"><span data-stu-id="bef77-174">The basic procedure is:</span></span>

1. <span data-ttu-id="bef77-175">Vytvořte strom elementu pro [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] aplikaci (může být prostřednictvím kódu nebo kódu).</span><span class="sxs-lookup"><span data-stu-id="bef77-175">Create an element tree for a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application (can be through code or markup).</span></span> <span data-ttu-id="bef77-176">Ve stromové struktuře elementu Najděte příslušný a přípustný bod, kde <xref:System.Windows.Interop.HwndHost> implementaci lze přidat jako podřízený element.</span><span class="sxs-lookup"><span data-stu-id="bef77-176">Find an appropriate and permissible point in the element tree where the <xref:System.Windows.Interop.HwndHost> implementation can be added as a child element.</span></span> <span data-ttu-id="bef77-177">Ve zbývající části tohoto postupu je tento element označován jako reobsluhující element.</span><span class="sxs-lookup"><span data-stu-id="bef77-177">In the remainder of these steps, this element is referred to as the reserving element.</span></span>

2. <span data-ttu-id="bef77-178">Odvodit z <xref:System.Windows.Interop.HwndHost> k vytvoření objektu, který obsahuje obsah [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bef77-178">Derive from <xref:System.Windows.Interop.HwndHost> to create an object that holds your [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] content.</span></span>

3. <span data-ttu-id="bef77-179">V této třídě hostitele přepište <xref:System.Windows.Interop.HwndHost.BuildWindowCore%2A>metody <xref:System.Windows.Interop.HwndHost>.</span><span class="sxs-lookup"><span data-stu-id="bef77-179">In that host class, override the <xref:System.Windows.Interop.HwndHost> method <xref:System.Windows.Interop.HwndHost.BuildWindowCore%2A>.</span></span> <span data-ttu-id="bef77-180">Vrátí HWND hostovaného okna.</span><span class="sxs-lookup"><span data-stu-id="bef77-180">Return the HWND of the hosted window.</span></span> <span data-ttu-id="bef77-181">Můžete chtít zabalit vlastní ovládací prvky jako podřízené okno vráceného okna. zabalení ovládacích prvků v hostitelském okně poskytuje jednoduchý způsob, jak [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] obsah přijímat oznámení z ovládacích prvků.</span><span class="sxs-lookup"><span data-stu-id="bef77-181">You might want to wrap the actual control(s) as a child window of the returned window; wrapping the controls in a host window provides a simple way for your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] content to receive notifications from the controls.</span></span> <span data-ttu-id="bef77-182">Tento postup pomáhá opravovat některé [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] problémy týkající se zpracování zpráv na hranici hostovaného ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="bef77-182">This technique helps correct for some [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] issues regarding message handling at the hosted control boundary.</span></span>

4. <span data-ttu-id="bef77-183">Přepište metody <xref:System.Windows.Interop.HwndHost> <xref:System.Windows.Interop.HwndHost.DestroyWindowCore%2A> a <xref:System.Windows.Interop.HwndHost.WndProc%2A>.</span><span class="sxs-lookup"><span data-stu-id="bef77-183">Override the <xref:System.Windows.Interop.HwndHost> methods <xref:System.Windows.Interop.HwndHost.DestroyWindowCore%2A> and <xref:System.Windows.Interop.HwndHost.WndProc%2A>.</span></span> <span data-ttu-id="bef77-184">Cílem je, aby bylo možné zpracovat vyčištění a odebrat odkazy na hostovaný obsah, zejména pokud jste vytvořili odkazy na nespravované objekty.</span><span class="sxs-lookup"><span data-stu-id="bef77-184">The intention here is to process cleanup and remove references to the hosted content, particularly if you created references to unmanaged objects.</span></span>

5. <span data-ttu-id="bef77-185">V souboru kódu na pozadí vytvořte instanci třídy hostování ovládacího prvku a nastavte ji jako podřízenou pro rezervaci elementu.</span><span class="sxs-lookup"><span data-stu-id="bef77-185">In your code-behind file, create an instance of the control hosting class and make it a child of the reserving element.</span></span> <span data-ttu-id="bef77-186">Obvykle byste použili obslužnou rutinu události, jako je například <xref:System.Windows.FrameworkElement.Loaded>, nebo použít konstruktor částečné třídy.</span><span class="sxs-lookup"><span data-stu-id="bef77-186">Typically you would use an event handler such as <xref:System.Windows.FrameworkElement.Loaded>, or use the partial class constructor.</span></span> <span data-ttu-id="bef77-187">Obsah mezioperace ale můžete také přidat pomocí chování za běhu.</span><span class="sxs-lookup"><span data-stu-id="bef77-187">But you could also add the interoperation content through a runtime behavior.</span></span>

6. <span data-ttu-id="bef77-188">Zpracuje vybrané zprávy okna, například oznámení o řízení.</span><span class="sxs-lookup"><span data-stu-id="bef77-188">Process selected window messages, such as control notifications.</span></span> <span data-ttu-id="bef77-189">Existují dva přístupy.</span><span class="sxs-lookup"><span data-stu-id="bef77-189">There are two approaches.</span></span> <span data-ttu-id="bef77-190">Oba poskytují stejný přístup ke streamu zpráv, takže výběr je převážně věcí pro programování.</span><span class="sxs-lookup"><span data-stu-id="bef77-190">Both provide identical access to the message stream, so your choice is largely a matter of programming convenience.</span></span>

    - <span data-ttu-id="bef77-191">Implementujte zpracování zpráv pro všechny zprávy (nikoli jenom zprávy pro vypnutí) ve vašem přepsání <xref:System.Windows.Interop.HwndHost.WndProc%2A>metody <xref:System.Windows.Interop.HwndHost>.</span><span class="sxs-lookup"><span data-stu-id="bef77-191">Implement message processing for all messages (not just shutdown messages) in your override of the <xref:System.Windows.Interop.HwndHost> method <xref:System.Windows.Interop.HwndHost.WndProc%2A>.</span></span>

    - <span data-ttu-id="bef77-192">Musí [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] hostování elementu zpracovávat zprávy zpracováním události <xref:System.Windows.Interop.HwndHost.MessageHook>.</span><span class="sxs-lookup"><span data-stu-id="bef77-192">Have the hosting [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] element process the messages by handling the <xref:System.Windows.Interop.HwndHost.MessageHook> event.</span></span> <span data-ttu-id="bef77-193">Tato událost je vyvolána pro každou zprávu, která je odeslána do hlavního okna procedury hostovaného okna.</span><span class="sxs-lookup"><span data-stu-id="bef77-193">This event is raised for every message that is sent to the main window procedure of the hosted window.</span></span>

    - <span data-ttu-id="bef77-194">Nemůžete zpracovávat zprávy ze systému Windows, které se nezpracovávají pomocí <xref:System.Windows.Interop.HwndHost.WndProc%2A>.</span><span class="sxs-lookup"><span data-stu-id="bef77-194">You cannot process messages from windows that are out of process using <xref:System.Windows.Interop.HwndHost.WndProc%2A>.</span></span>

7. <span data-ttu-id="bef77-195">Komunikujte s hostovaným oknem pomocí vyvolání platformy pro volání nespravované funkce `SendMessage`.</span><span class="sxs-lookup"><span data-stu-id="bef77-195">Communicate with the hosted window by using platform invoke to call the unmanaged `SendMessage` function.</span></span>

<span data-ttu-id="bef77-196">Pomocí těchto kroků vytvoříte aplikaci, která funguje se vstupem myši.</span><span class="sxs-lookup"><span data-stu-id="bef77-196">Following these steps creates an application that works with mouse input.</span></span> <span data-ttu-id="bef77-197">Můžete přidat podporu tabulátoru pro hostované okno implementací rozhraní <xref:System.Windows.Interop.IKeyboardInputSink>.</span><span class="sxs-lookup"><span data-stu-id="bef77-197">You can add tabbing support for your hosted window by implementing the <xref:System.Windows.Interop.IKeyboardInputSink> interface.</span></span>

<span data-ttu-id="bef77-198">Každý z těchto kroků je znázorněn prostřednictvím kódu v tématu [Návod: hostování ovládacího prvku Win32 v subsystému WPF](walkthrough-hosting-a-win32-control-in-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="bef77-198">Each of these steps is illustrated through code in the topic [Walkthrough: Hosting a Win32 Control in WPF](walkthrough-hosting-a-win32-control-in-wpf.md).</span></span>

### <a name="hwnds-inside-wpf"></a><span data-ttu-id="bef77-199">HWND v rámci WPF</span><span class="sxs-lookup"><span data-stu-id="bef77-199">Hwnds Inside WPF</span></span>

<span data-ttu-id="bef77-200"><xref:System.Windows.Interop.HwndHost> můžete představit jako speciální ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="bef77-200">You can think of <xref:System.Windows.Interop.HwndHost> as a special control.</span></span> <span data-ttu-id="bef77-201">(Technicky, <xref:System.Windows.Interop.HwndHost> je <xref:System.Windows.FrameworkElement> odvozená třída, ne <xref:System.Windows.Controls.Control> odvozená třída, ale může být považována za ovládací prvek pro účely meziprovozu.) <xref:System.Windows.Interop.HwndHost> vyabstrakce základní [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] charakter hostovaného obsahu tak, aby zbytek [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] považovat hostovaný obsah za jiný objekt podobný ovládacímu prvku, který by měl vykreslovat a zpracovat vstup.</span><span class="sxs-lookup"><span data-stu-id="bef77-201">(Technically, <xref:System.Windows.Interop.HwndHost> is a <xref:System.Windows.FrameworkElement> derived class, not a <xref:System.Windows.Controls.Control> derived class, but it can be considered a control for purposes of interoperation.) <xref:System.Windows.Interop.HwndHost> abstracts the underlying [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] nature of the hosted content such that the remainder of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] considers the hosted content to be another control-like object, which should render and process input.</span></span> <span data-ttu-id="bef77-202"><xref:System.Windows.Interop.HwndHost> se obecně chová jako jiné <xref:System.Windows.FrameworkElement>[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], i když jsou důležité rozdíly ve výstupu (kreslení a grafika) a vstup (myš a klávesnice) na základě omezení, co mohou základní HWND podporovat.</span><span class="sxs-lookup"><span data-stu-id="bef77-202"><xref:System.Windows.Interop.HwndHost> generally behaves like any other [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.FrameworkElement>, although there are some important differences around output (drawing and graphics) and input (mouse and keyboard) based on limitations of what the underlying HWNDs can support.</span></span>

#### <a name="notable-differences-in-output-behavior"></a><span data-ttu-id="bef77-203">Významné rozdíly v chování výstupu</span><span class="sxs-lookup"><span data-stu-id="bef77-203">Notable Differences in Output Behavior</span></span>

- <span data-ttu-id="bef77-204"><xref:System.Windows.FrameworkElement>, která je základní třídou <xref:System.Windows.Interop.HwndHost>, má poměrně několik vlastností, které implikují změny uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="bef77-204"><xref:System.Windows.FrameworkElement>, which is the <xref:System.Windows.Interop.HwndHost> base class, has quite a few properties that imply changes to the UI.</span></span> <span data-ttu-id="bef77-205">Mezi tyto vlastnosti patří například <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType>, které mění rozložení prvků v rámci daného prvku jako nadřazené.</span><span class="sxs-lookup"><span data-stu-id="bef77-205">These include properties such as <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType>, which changes the layout of elements within that element as a parent.</span></span> <span data-ttu-id="bef77-206">Většina těchto vlastností ale není namapovaná na možné [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] ekvivalenty, a to i v případě, že tyto ekvivalenty existují.</span><span class="sxs-lookup"><span data-stu-id="bef77-206">However, most of these properties are not mapped to possible [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] equivalents, even if such equivalents might exist.</span></span> <span data-ttu-id="bef77-207">Příliš mnoho těchto vlastností a jejich význam jsou příliš vykreslení – specifické pro technologii pro mapování, aby byly praktické.</span><span class="sxs-lookup"><span data-stu-id="bef77-207">Too many of these properties and their meanings are too rendering-technology specific for mappings to be practical.</span></span> <span data-ttu-id="bef77-208">Proto nastavení vlastností, například <xref:System.Windows.FrameworkElement.FlowDirection%2A> v <xref:System.Windows.Interop.HwndHost> nemá žádný vliv.</span><span class="sxs-lookup"><span data-stu-id="bef77-208">Therefore, setting properties such as <xref:System.Windows.FrameworkElement.FlowDirection%2A> on <xref:System.Windows.Interop.HwndHost> has no effect.</span></span>

- <span data-ttu-id="bef77-209"><xref:System.Windows.Interop.HwndHost> nelze otočit, škálovat, zkosit nebo jinak ovlivněné transformací.</span><span class="sxs-lookup"><span data-stu-id="bef77-209"><xref:System.Windows.Interop.HwndHost> cannot be rotated, scaled, skewed, or otherwise affected by a Transform.</span></span>

- <span data-ttu-id="bef77-210"><xref:System.Windows.Interop.HwndHost> nepodporuje vlastnost <xref:System.Windows.UIElement.Opacity%2A> (alfa míchání).</span><span class="sxs-lookup"><span data-stu-id="bef77-210"><xref:System.Windows.Interop.HwndHost> does not support the <xref:System.Windows.UIElement.Opacity%2A> property (alpha blending).</span></span> <span data-ttu-id="bef77-211">Pokud obsah uvnitř <xref:System.Windows.Interop.HwndHost> provádí <xref:System.Drawing> operace, které zahrnují informace o alfa, což není porušení, ale <xref:System.Windows.Interop.HwndHost> jako celek podporuje pouze krytí = 1,0 (100%).</span><span class="sxs-lookup"><span data-stu-id="bef77-211">If content inside the <xref:System.Windows.Interop.HwndHost> performs <xref:System.Drawing> operations that include alpha information, that is itself not a violation, but the <xref:System.Windows.Interop.HwndHost> as a whole only supports Opacity = 1.0 (100%).</span></span>

- <span data-ttu-id="bef77-212"><xref:System.Windows.Interop.HwndHost> se zobrazí nad ostatními prvky [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] v jednom okně nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="bef77-212"><xref:System.Windows.Interop.HwndHost> will appear on top of other [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elements in the same top-level window.</span></span> <span data-ttu-id="bef77-213">Nabídka <xref:System.Windows.Controls.ToolTip> nebo <xref:System.Windows.Controls.ContextMenu> vygenerovala jako samostatné okno nejvyšší úrovně, takže se v <xref:System.Windows.Interop.HwndHost>správně chová.</span><span class="sxs-lookup"><span data-stu-id="bef77-213">However, a <xref:System.Windows.Controls.ToolTip> or <xref:System.Windows.Controls.ContextMenu> generated menu is a separate top-level window, and so will behave correctly with <xref:System.Windows.Interop.HwndHost>.</span></span>

- <span data-ttu-id="bef77-214"><xref:System.Windows.Interop.HwndHost> nerespektuje oblast oříznutí svého nadřazeného <xref:System.Windows.UIElement>.</span><span class="sxs-lookup"><span data-stu-id="bef77-214"><xref:System.Windows.Interop.HwndHost> does not respect the clipping region of its parent <xref:System.Windows.UIElement>.</span></span> <span data-ttu-id="bef77-215">To může být problém, pokud se pokusíte vložit třídu <xref:System.Windows.Interop.HwndHost> do oblasti pro posouvání nebo <xref:System.Windows.Controls.Canvas>.</span><span class="sxs-lookup"><span data-stu-id="bef77-215">This is potentially an issue if you attempt to put an <xref:System.Windows.Interop.HwndHost> class inside a scrolling region or <xref:System.Windows.Controls.Canvas>.</span></span>

#### <a name="notable-differences-in-input-behavior"></a><span data-ttu-id="bef77-216">Významné rozdíly v chování vstupu</span><span class="sxs-lookup"><span data-stu-id="bef77-216">Notable Differences in Input Behavior</span></span>

- <span data-ttu-id="bef77-217">Obecně platí, že když jsou vstupní zařízení vymezená v <xref:System.Windows.Interop.HwndHost> hostované [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] oblasti, vstupní události se přejdou přímo na [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bef77-217">In general, while input devices are scoped within the <xref:System.Windows.Interop.HwndHost> hosted [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] region, input events go directly to [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)].</span></span>

- <span data-ttu-id="bef77-218">Když je ukazatel myši nad <xref:System.Windows.Interop.HwndHost>, aplikace nepřijímá [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] události myši a hodnota vlastnosti [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.UIElement.IsMouseOver%2A> bude `false`.</span><span class="sxs-lookup"><span data-stu-id="bef77-218">While the mouse is over the <xref:System.Windows.Interop.HwndHost>, your application does not receive [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] mouse events, and the value of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property <xref:System.Windows.UIElement.IsMouseOver%2A> will be `false`.</span></span>

- <span data-ttu-id="bef77-219">I když má <xref:System.Windows.Interop.HwndHost> fokus klávesnice, aplikace nebude přijímat události [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] klávesnice a hodnota vlastnosti [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> bude `false`.</span><span class="sxs-lookup"><span data-stu-id="bef77-219">While the <xref:System.Windows.Interop.HwndHost> has keyboard focus, your application will not receive [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] keyboard events and the value of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> will be `false`.</span></span>

- <span data-ttu-id="bef77-220">Pokud je fokus v rámci <xref:System.Windows.Interop.HwndHost> a změny jiného ovládacího prvku v rámci <xref:System.Windows.Interop.HwndHost>, aplikace nebude přijímat [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]é události <xref:System.Windows.UIElement.GotFocus> nebo <xref:System.Windows.UIElement.LostFocus>.</span><span class="sxs-lookup"><span data-stu-id="bef77-220">When focus is within the <xref:System.Windows.Interop.HwndHost> and changes to another control inside the <xref:System.Windows.Interop.HwndHost>, your application will not receive the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] events <xref:System.Windows.UIElement.GotFocus> or <xref:System.Windows.UIElement.LostFocus>.</span></span>

- <span data-ttu-id="bef77-221">Související vlastnosti a události stylusu jsou analogické a neoznamují informace, když je Stylus nad <xref:System.Windows.Interop.HwndHost>.</span><span class="sxs-lookup"><span data-stu-id="bef77-221">Related stylus properties and events are analogous, and do not report information while the stylus is over <xref:System.Windows.Interop.HwndHost>.</span></span>

<a name="tabbing_mnemonics_accelerators"></a>

## <a name="tabbing-mnemonics-and-accelerators"></a><span data-ttu-id="bef77-222">Tabulátory, klávesové zkratky a akcelerátory</span><span class="sxs-lookup"><span data-stu-id="bef77-222">Tabbing, Mnemonics, and Accelerators</span></span>

<span data-ttu-id="bef77-223">Rozhraní <xref:System.Windows.Interop.IKeyboardInputSink> a <xref:System.Windows.Interop.IKeyboardInputSite> umožňují vytvořit bezproblémové prostředí klávesnice pro smíšené [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] aplikace:</span><span class="sxs-lookup"><span data-stu-id="bef77-223">The <xref:System.Windows.Interop.IKeyboardInputSink> and <xref:System.Windows.Interop.IKeyboardInputSite> interfaces allow you to create a seamless keyboard experience for mixed [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] applications:</span></span>

- <span data-ttu-id="bef77-224">Procházení tabulátorů mezi [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] komponentami</span><span class="sxs-lookup"><span data-stu-id="bef77-224">Tabbing between [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] components</span></span>

- <span data-ttu-id="bef77-225">Klávesové zkratky a akcelerátory, které fungují v případě, že se fokus nachází v rámci součásti systému Win32 a je v rámci komponenty WPF.</span><span class="sxs-lookup"><span data-stu-id="bef77-225">Mnemonics and accelerators that work both when focus is within a Win32 component and when it is within a WPF component.</span></span>

<span data-ttu-id="bef77-226">Třídy <xref:System.Windows.Interop.HwndHost> a <xref:System.Windows.Interop.HwndSource> poskytují implementace <xref:System.Windows.Interop.IKeyboardInputSink>, ale nemusí zpracovávat všechny vstupní zprávy, které chcete mít v pokročilejších scénářích.</span><span class="sxs-lookup"><span data-stu-id="bef77-226">The <xref:System.Windows.Interop.HwndHost> and <xref:System.Windows.Interop.HwndSource> classes both provide implementations of <xref:System.Windows.Interop.IKeyboardInputSink>, but they may not handle all the input messages that you want for more advanced scenarios.</span></span> <span data-ttu-id="bef77-227">Přepište vhodné metody, abyste získali chování klávesnice, které chcete.</span><span class="sxs-lookup"><span data-stu-id="bef77-227">Override the appropriate methods to get the keyboard behavior you want.</span></span>

<span data-ttu-id="bef77-228">Rozhraní poskytují podporu pouze pro to, co se stane s přechodem mezi [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] oblasti.</span><span class="sxs-lookup"><span data-stu-id="bef77-228">The interfaces only provide support for what happens on the transition between the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] regions.</span></span> <span data-ttu-id="bef77-229">V rámci [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] oblasti je chování s kartami zcela řízeno [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] implementací logiky pro procházení tabulátory, pokud existují.</span><span class="sxs-lookup"><span data-stu-id="bef77-229">Within the [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] region, tabbing behavior is entirely controlled by the [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] implemented logic for tabbing, if any.</span></span>

## <a name="see-also"></a><span data-ttu-id="bef77-230">Viz také:</span><span class="sxs-lookup"><span data-stu-id="bef77-230">See also</span></span>

- <xref:System.Windows.Interop.HwndHost>
- <xref:System.Windows.Interop.HwndSource>
- <xref:System.Windows.Interop>
- [<span data-ttu-id="bef77-231">Návod: Hostování ovládacího prvku Win32 v subsystému WPF</span><span class="sxs-lookup"><span data-stu-id="bef77-231">Walkthrough: Hosting a Win32 Control in WPF</span></span>](walkthrough-hosting-a-win32-control-in-wpf.md)
- [<span data-ttu-id="bef77-232">Návod: Hostování obsahu WPF v systému Win32</span><span class="sxs-lookup"><span data-stu-id="bef77-232">Walkthrough: Hosting WPF Content in Win32</span></span>](walkthrough-hosting-wpf-content-in-win32.md)
