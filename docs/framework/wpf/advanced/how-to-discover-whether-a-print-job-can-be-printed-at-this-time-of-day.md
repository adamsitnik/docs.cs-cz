---
title: 'Postupy: Zjištění, jestli jde vytisknout tiskovou úlohu v této denní době'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- print queues [WPF], timing
- printers [WPF], availability
- print jobs [WPF], timing
ms.assetid: 7e9c8ec1-abf6-4b3d-b1c6-33b35d3c4063
ms.openlocfilehash: 7eed5400744f1010cbf52dc8d3b3d0bc24aa4371
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/18/2019
ms.locfileid: "59326863"
---
# <a name="how-to-discover-whether-a-print-job-can-be-printed-at-this-time-of-day"></a><span data-ttu-id="5b6b0-102">Postupy: Zjištění, jestli jde vytisknout tiskovou úlohu v této denní době</span><span class="sxs-lookup"><span data-stu-id="5b6b0-102">How to: Discover Whether a Print Job Can Be Printed At This Time of Day</span></span>
<span data-ttu-id="5b6b0-103">Tiskové fronty nejsou vždycky k dispozici po dobu 24 hodin denně.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-103">Print queues are not always available for 24 hours a day.</span></span> <span data-ttu-id="5b6b0-104">Mají počáteční a koncový čas vlastnosti, které je možné nastavit, aby byly k dispozici v určitých časech den.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-104">They have start and end time properties that can be set to make them unavailable at certain times of day.</span></span> <span data-ttu-id="5b6b0-105">Tato funkce je možné, například pro rezervaci tiskárny pro výhradní použití určitých oddělení po 17: 00.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-105">This feature can be used, for example, to reserve a printer for the exclusive use of a certain department after 5 P.M..</span></span> <span data-ttu-id="5b6b0-106">Toto oddělení by měla mít jinou frontu tiskárny, než jiných oddělení údržby použít.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-106">That department would have a different queue servicing the printer than other departments use.</span></span> <span data-ttu-id="5b6b0-107">Fronta jiných oddělení se nastavuje nedostupnost po 17: 00, zatímco fronty pro dána oddělení může být nastaven na být vždy k dispozici.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-107">The queue for the other departments would be set to be unavailable after 5 P.M., while queue for the favored department could be set to be available at all times.</span></span>  
  
 <span data-ttu-id="5b6b0-108">Navíc je možné nastavit tiskové úlohy, sami bude tisknutelný pouze v rámci dané rozpětí času.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-108">Moreover, print jobs themselves can be set to be printable only within a specified span of time.</span></span>  
  
 <span data-ttu-id="5b6b0-109"><xref:System.Printing.PrintQueue> a <xref:System.Printing.PrintSystemJobInfo> třídy zpřístupněná [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] Microsoft .NET Framework umožňují vzdálené kontroly, zda danou tiskovou úlohu můžete tisknout do dané fronty v současné době.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-109">The <xref:System.Printing.PrintQueue> and <xref:System.Printing.PrintSystemJobInfo> classes exposed in the [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] of Microsoft .NET Framework provide a means for remotely checking whether a given print job can print on a given queue at the current time.</span></span>  
  
## <a name="example"></a><span data-ttu-id="5b6b0-110">Příklad</span><span class="sxs-lookup"><span data-stu-id="5b6b0-110">Example</span></span>  
 <span data-ttu-id="5b6b0-111">Následující příklad je ukázka, můžete diagnostikovat problémy s tiskovou úlohou.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-111">The example below is a sample that can diagnose problems with a print job.</span></span>  
  
 <span data-ttu-id="5b6b0-112">Existují dva hlavní kroky pro tento druh funkce následujícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-112">There are two major steps for this kind of function as follows.</span></span>  
  
1. <span data-ttu-id="5b6b0-113">Přečtěte si <xref:System.Printing.PrintQueue.StartTimeOfDay%2A> a <xref:System.Printing.PrintQueue.UntilTimeOfDay%2A> vlastnosti <xref:System.Printing.PrintQueue> k určení, zda aktuální čas je mezi nimi.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-113">Read the <xref:System.Printing.PrintQueue.StartTimeOfDay%2A> and <xref:System.Printing.PrintQueue.UntilTimeOfDay%2A> properties of the <xref:System.Printing.PrintQueue> to determine whether the current time is between them.</span></span>  
  
2. <span data-ttu-id="5b6b0-114">Přečtěte si <xref:System.Printing.PrintSystemJobInfo.StartTimeOfDay%2A> a <xref:System.Printing.PrintSystemJobInfo.UntilTimeOfDay%2A> vlastnosti <xref:System.Printing.PrintSystemJobInfo> k určení, zda aktuální čas je mezi nimi.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-114">Read the <xref:System.Printing.PrintSystemJobInfo.StartTimeOfDay%2A> and <xref:System.Printing.PrintSystemJobInfo.UntilTimeOfDay%2A> properties of the <xref:System.Printing.PrintSystemJobInfo> to determine whether the current time is between them.</span></span>  
  
 <span data-ttu-id="5b6b0-115">Ale komplikace způsobit skutečnost, že tyto vlastnosti nejsou <xref:System.DateTime> objekty.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-115">But complications arise from the fact that these properties are not <xref:System.DateTime> objects.</span></span> <span data-ttu-id="5b6b0-116">Místo toho jsou <xref:System.Int32> objekty, které je možné vyjádřit jako počet minut od půlnoci denní dobu.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-116">Instead they are <xref:System.Int32> objects that express the time of day as the number of minutes since midnight.</span></span> <span data-ttu-id="5b6b0-117">Kromě toho nejedná o půlnoci v aktuálním časovém pásmu, ale o půlnoci UTC (Coordinated Universal Time).</span><span class="sxs-lookup"><span data-stu-id="5b6b0-117">Moreover, this is not midnight in the current time zone, but midnight UTC (Coordinated Universal Time).</span></span>  
  
 <span data-ttu-id="5b6b0-118">První příklad kódu představuje statickou metodu **ReportQueueAndJobAvailability**, který je předán <xref:System.Printing.PrintSystemJobInfo> a volání pomocné metody k určení, zda v současné době můžete vytisknout úlohy, a pokud ne, při tisku.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-118">The first code example presents the static method **ReportQueueAndJobAvailability**, which is passed a <xref:System.Printing.PrintSystemJobInfo> and calls helper methods to determine whether the job can print at the current time and, if not, when it can print.</span></span> <span data-ttu-id="5b6b0-119">Všimněte si, že <xref:System.Printing.PrintQueue> není předaný metodě.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-119">Notice that a <xref:System.Printing.PrintQueue> is not passed to the method.</span></span> <span data-ttu-id="5b6b0-120">Je to proto, <xref:System.Printing.PrintSystemJobInfo> obsahuje odkaz na frontu v jeho <xref:System.Printing.PrintSystemJobInfo.HostingPrintQueue%2A> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-120">This is because the <xref:System.Printing.PrintSystemJobInfo> includes a reference to the queue in its <xref:System.Printing.PrintSystemJobInfo.HostingPrintQueue%2A> property.</span></span>  
  
 <span data-ttu-id="5b6b0-121">Zahrnout přetížené metody podřízené **ReportAvailabilityAtThisTime** metodu, která můžete provést buď <xref:System.Printing.PrintQueue> nebo <xref:System.Printing.PrintSystemJobInfo> jako parametr.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-121">The subordinate methods include the overloaded **ReportAvailabilityAtThisTime** method which can take either a <xref:System.Printing.PrintQueue> or a <xref:System.Printing.PrintSystemJobInfo> as a parameter.</span></span> <span data-ttu-id="5b6b0-122">K dispozici je také **TimeConverter.ConvertToLocalHumanReadableTime**.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-122">There is also a **TimeConverter.ConvertToLocalHumanReadableTime**.</span></span> <span data-ttu-id="5b6b0-123">Všechny tyto metody jsou popsané dále.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-123">All of these methods are discussed below.</span></span>  
  
 <span data-ttu-id="5b6b0-124">**ReportQueueAndJobAvailability** metoda začíná kontroluje se, pokud se v tuto chvíli není k dispozici fronty nebo tiskové úlohy.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-124">The **ReportQueueAndJobAvailability** method begins by checking to see if either the queue or the print job is unavailable at this time.</span></span> <span data-ttu-id="5b6b0-125">Pokud platí některá z nich není k dispozici, pak zkontroluje a zjistěte, jestli fronta není k dispozici.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-125">If either of them is unavailable, it then checks to see if the queue unavailable.</span></span> <span data-ttu-id="5b6b0-126">Pokud není k dispozici, metodu sestavy tuto skutečnost a čas, kdy fronty bude opět k dispozici.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-126">If it is not available, then the method reports this fact and the time when the queue will become available again.</span></span> <span data-ttu-id="5b6b0-127">Potom zkontroluje úlohy a pokud je k dispozici, oznámí příště span, kdy při tisku.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-127">It then checks the job and if it is unavailable, it reports the next time span when it when it can print.</span></span> <span data-ttu-id="5b6b0-128">Nakonec metoda hlásí Nejdřívější čas, kdy můžete vytisknout úlohy.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-128">Finally, the method reports the earliest time when the job can print.</span></span> <span data-ttu-id="5b6b0-129">Toto je později z následujících dvakrát.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-129">This is the later of following two times.</span></span>  
  
-   <span data-ttu-id="5b6b0-130">Čas, kdy je tiskovou frontu dále k dispozici.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-130">The time when the print queue is next available.</span></span>  
  
-   <span data-ttu-id="5b6b0-131">Čas, kdy je tisková úloha dále k dispozici.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-131">The time when the print job is next available.</span></span>  
  
 <span data-ttu-id="5b6b0-132">Při vytváření sestav denní dobu, <xref:System.DateTime.ToShortTimeString%2A> metodu je také volat, protože tato metoda potlačí roků, měsíců a dnů z výstupu.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-132">When reporting times of day, the <xref:System.DateTime.ToShortTimeString%2A> method is also called because this method suppresses the years, months, and days from the output.</span></span> <span data-ttu-id="5b6b0-133">Dostupnost tiskovou frontu nebo tiskovou úlohu nelze omezit na konkrétní roků, měsíců nebo dokonce dny.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-133">You cannot restrict the availability of either a print queue or a print job to particular years, months, or days.</span></span>  
  
 [!code-cpp[DiagnoseProblematicPrintJob#ReportQueueAndJobAvailability](~/samples/snippets/cpp/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/CPP/Program.cpp#reportqueueandjobavailability)]
 [!code-csharp[DiagnoseProblematicPrintJob#ReportQueueAndJobAvailability](~/samples/snippets/csharp/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/CSharp/Program.cs#reportqueueandjobavailability)]
 [!code-vb[DiagnoseProblematicPrintJob#ReportQueueAndJobAvailability](~/samples/snippets/visualbasic/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/visualbasic/program.vb#reportqueueandjobavailability)]  
  
 <span data-ttu-id="5b6b0-134">Dvě přetížení **ReportAvailabilityAtThisTime** metody jsou stejné s výjimkou předaný k nim, takže pouze typ <xref:System.Printing.PrintQueue> verze je uveden níže.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-134">The two overloads of the **ReportAvailabilityAtThisTime** method are identical except for the type passed to them, so only the <xref:System.Printing.PrintQueue> version is presented below.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5b6b0-135">Fakt, že metody jsou stejné s výjimkou typu vyvolá na otázku, proč vzorku nevytváří žádné obecné metody **ReportAvailabilityAtThisTime\<T >**.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-135">The fact that the methods are identical except for type raises the question of why the sample does not create a generic method **ReportAvailabilityAtThisTime\<T>**.</span></span> <span data-ttu-id="5b6b0-136">Důvodem je, že tato metoda by mohl být omezeny na třídu, která má **StartTimeOfDay** a **UntilTimeOfDay** vlastnosti, které volá metodu, ale obecná metoda může být pouze omezené na jednotné třídy a třídy pouze společné pro <xref:System.Printing.PrintQueue> a <xref:System.Printing.PrintSystemJobInfo> v dědičnosti je strom <xref:System.Printing.PrintSystemObject> která nemá žádné takové vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-136">The reason is that such a method would have to be restricted to a class that has the **StartTimeOfDay** and **UntilTimeOfDay** properties that the method calls, but a generic method can only be restricted to a single class and the only class common to both <xref:System.Printing.PrintQueue> and <xref:System.Printing.PrintSystemJobInfo> in the inheritance tree is <xref:System.Printing.PrintSystemObject> which has no such properties.</span></span>  
  
 <span data-ttu-id="5b6b0-137">**ReportAvailabilityAtThisTime** – metoda (uvedené v následujícím příkladu kódu) začíná inicializace <xref:System.Boolean> proměnnou sentinel `true`.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-137">The **ReportAvailabilityAtThisTime** method (presented in the code example below) begins by initializing a <xref:System.Boolean> sentinel variable to `true`.</span></span> <span data-ttu-id="5b6b0-138">Se resetuje na `false`, pokud není k dispozici do fronty.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-138">It will be reset to `false`, if the queue is not available.</span></span>  
  
 <span data-ttu-id="5b6b0-139">Dále metoda zkontroluje a zjistěte, jestli začátku a "až" časy jsou identické.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-139">Next, the method checks to see if the start and "until" times are identical.</span></span> <span data-ttu-id="5b6b0-140">Pokud jsou, fronta je vždy k dispozici, a tak, aby metoda `true`.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-140">If they are, the queue is always available, so the method returns `true`.</span></span>  
  
 <span data-ttu-id="5b6b0-141">Pokud fronta není k dispozici vždy, metoda používá statickou <xref:System.DateTime.UtcNow%2A> vlastnost k získání aktuálního času jako <xref:System.DateTime> objektu.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-141">If the queue is not available all the time, the method uses the static <xref:System.DateTime.UtcNow%2A> property to get the current time as a <xref:System.DateTime> object.</span></span> <span data-ttu-id="5b6b0-142">(Jsme není nutné místního času, protože <xref:System.Printing.PrintQueue.StartTimeOfDay%2A> a <xref:System.Printing.PrintQueue.UntilTimeOfDay%2A> vlastnosti představují samy o sobě v čase UTC.)</span><span class="sxs-lookup"><span data-stu-id="5b6b0-142">(We do not need local time because the <xref:System.Printing.PrintQueue.StartTimeOfDay%2A> and <xref:System.Printing.PrintQueue.UntilTimeOfDay%2A> properties are themselves in UTC time.)</span></span>  
  
 <span data-ttu-id="5b6b0-143">Ale tyto dvě vlastnosti nejsou <xref:System.DateTime> objekty.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-143">However, these two properties are not <xref:System.DateTime> objects.</span></span> <span data-ttu-id="5b6b0-144">Jsou <xref:System.Int32>s vyjadřuje čas jako počet minut po času UTC půlnoc.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-144">They are <xref:System.Int32>s expressing the time as the number of minutes-after-UTC-midnight.</span></span> <span data-ttu-id="5b6b0-145">Abychom měli převést naše <xref:System.DateTime> objekt minut po půlnoci.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-145">So we do have to convert our <xref:System.DateTime> object to minutes-after-midnight.</span></span> <span data-ttu-id="5b6b0-146">Po dokončení, která metoda jednoduše zkontroluje, můžete zjistit, zda "teď" je mezi počáteční do fronty a "časy, nastaví sentinel na hodnotu false, pokud"teď"se nenachází mezi dvěma časy a vrátí ověřovacích do".</span><span class="sxs-lookup"><span data-stu-id="5b6b0-146">When that is done, the method simply checks to see whether "now" is between the queue's start and "until" times, sets the sentinel to false if "now" is not between the two times, and returns the sentinel.</span></span>  
  
 [!code-cpp[DiagnoseProblematicPrintJob#PrintQueueStartUntil](~/samples/snippets/cpp/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/CPP/Program.cpp#printqueuestartuntil)]
 [!code-csharp[DiagnoseProblematicPrintJob#PrintQueueStartUntil](~/samples/snippets/csharp/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/CSharp/Program.cs#printqueuestartuntil)]
 [!code-vb[DiagnoseProblematicPrintJob#PrintQueueStartUntil](~/samples/snippets/visualbasic/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/visualbasic/program.vb#printqueuestartuntil)]  
  
 <span data-ttu-id="5b6b0-147">**TimeConverter.ConvertToLocalHumanReadableTime** – metoda (uvedené v následujícím příkladu kódu) nepoužívá žádné metody představeny s nástrojem Microsoft .NET Framework, tedy stručný diskuse.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-147">The **TimeConverter.ConvertToLocalHumanReadableTime** method (presented in the code example below) does not use any methods introduced with Microsoft .NET Framework, so the discussion is brief.</span></span> <span data-ttu-id="5b6b0-148">Tato metoda má dvojitý převod úkolu: musíte trvat celé číslo vyjadřující minut po půlnoci a převést ji do čitelné čas a je nutné ji převést na místní čas.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-148">The method has a double conversion task: it must take an integer expressing minutes-after-midnight and convert it to a human-readable time and it must convert this to the local time.</span></span> <span data-ttu-id="5b6b0-149">Provádí se to nejprve <xref:System.DateTime> objekt, který je nastaven na půlnoc UTC a pak používá <xref:System.DateTime.AddMinutes%2A> způsob, jak přidat dobu, po které byly předány metodě.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-149">It accomplishes this by first creating a <xref:System.DateTime> object that is set to midnight UTC and then it uses the <xref:System.DateTime.AddMinutes%2A> method to add the minutes that were passed to the method.</span></span> <span data-ttu-id="5b6b0-150">Vrátí nový <xref:System.DateTime> vyjádření původní čas, který byl předán metodě.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-150">This returns a new <xref:System.DateTime> expressing the original time that was passed to the method.</span></span> <span data-ttu-id="5b6b0-151"><xref:System.DateTime.ToLocalTime%2A> Metoda potom převede na místní čas.</span><span class="sxs-lookup"><span data-stu-id="5b6b0-151">The <xref:System.DateTime.ToLocalTime%2A> method then converts this to local time.</span></span>  
  
 [!code-cpp[DiagnoseProblematicPrintJob#TimeConverter](~/samples/snippets/cpp/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/CPP/Program.cpp#timeconverter)]
 [!code-csharp[DiagnoseProblematicPrintJob#TimeConverter](~/samples/snippets/csharp/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/CSharp/Program.cs#timeconverter)]
 [!code-vb[DiagnoseProblematicPrintJob#TimeConverter](~/samples/snippets/visualbasic/VS_Snippets_Wpf/DiagnoseProblematicPrintJob/visualbasic/program.vb#timeconverter)]  
  
## <a name="see-also"></a><span data-ttu-id="5b6b0-152">Viz také:</span><span class="sxs-lookup"><span data-stu-id="5b6b0-152">See also</span></span>

- <xref:System.DateTime>
- <xref:System.Printing.PrintSystemJobInfo>
- <xref:System.Printing.PrintQueue>
- [<span data-ttu-id="5b6b0-153">Dokumenty v platformě WPF</span><span class="sxs-lookup"><span data-stu-id="5b6b0-153">Documents in WPF</span></span>](documents-in-wpf.md)
- [<span data-ttu-id="5b6b0-154">Přehled tisku</span><span class="sxs-lookup"><span data-stu-id="5b6b0-154">Printing Overview</span></span>](printing-overview.md)
