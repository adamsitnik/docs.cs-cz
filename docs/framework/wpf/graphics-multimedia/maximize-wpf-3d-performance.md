---
title: Maximalizace výkonu WPF 3D
ms.date: 03/30/2017
helpviewer_keywords:
- 3-D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
ms.openlocfilehash: 8629748c37aae8e35bb928c5a8d5a9caa7046942
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/08/2019
ms.locfileid: "59147521"
---
# <a name="maximize-wpf-3d-performance"></a>Maximalizace výkonu WPF 3D
Jaké používáte [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] vytváření 3D ovládací prvky a zahrnout 3D scény ve svých aplikacích, je důležité vzít v úvahu optimalizace výkonu. Toto téma obsahuje seznam 3D třídy a vlastnosti, které mají vliv na výkon pro aplikace, včetně doporučení pro optimalizaci výkonu při jejich použití.  
  
 Toto téma předpokládá, že znáte [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 3D funkcí. Návrhy v tomto dokumentu platí pro "vykreslování vrstvy 2" – zhruba definován jako hardwaru, který podporuje pixel shader verze 2.0 a vertex shader verze 2.0. Další podrobnosti najdete v tématu [vrstvy vykreslování grafiky](../advanced/graphics-rendering-tiers.md).  
  
## <a name="performance-impact-high"></a>Dopad na výkon: Vysoká  
  
|Vlastnost|Doporučení|  
|-|-|  
|<xref:System.Windows.Media.Brush>|Štětec rychlost (nejvyšší k nejnižší):<br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush> (v mezipaměti)<br /><br /> <xref:System.Windows.Media.VisualBrush> (v mezipaměti)<br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush> (bez vyrovnávací paměti)<br /><br /> <xref:System.Windows.Media.VisualBrush> (bez vyrovnávací paměti)|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|Nastavte `Viewport3D.ClipToBounds` na hodnotu false pokaždé, když není potřeba mít [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] explicitně Oříznout obsah <xref:System.Windows.Controls.Viewport3D> na Viewport3D obdélník. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] výstřižek antialiased může být velmi pomalé a `ClipToBounds` (pomalé) ve výchozím nastavení zapnutá na <xref:System.Windows.Controls.Viewport3D>.|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|Nastavte `Viewport3D.IsHitTestVisible` na hodnotu false pokaždé, když není nutné [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] vzít v úvahu obsah <xref:System.Windows.Controls.Viewport3D> testování při průchodu provádí myši.  Přístupů testování 3D obsahu se provádí v softwaru a může být pomalé v sítích s velké mřížky. <xref:System.Windows.UIElement.IsHitTestVisible%2A> (pomalé) ve výchozím nastavení zapnutá na <xref:System.Windows.Controls.Viewport3D>.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|Vytvoření různých modelů jenom v případě, že se vyžadují různé materiálů nebo transformací.  V opačném případě zkuste ke sloučení mnoha <xref:System.Windows.Media.Media3D.GeometryModel3D> instancí se stejnými materiály a transformace do větší několik <xref:System.Windows.Media.Media3D.GeometryModel3D> a <xref:System.Windows.Media.Media3D.MeshGeometry3D> instancí.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Mřížky animace – změny jednotlivé vrcholy sítě na základě na rámce – není vždy efektivní v [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].  Chcete-li minimalizovat dopad na výkon z oznámení o změnách při změně každý vrchol, odpojení sítě z vizuálního stromu před provedením změny na vrcholu.  Jakmile síť byl změněn, ho znovu připojte ke vizuálního stromu.  Také se pokuste pro minimalizaci velikosti mřížky, které bude při animaci pohybovat tímto způsobem.|  
|3D vyhlazení|Chcete-li zvýšit rychlost vykreslování, zakažte multisampling na <xref:System.Windows.Controls.Viewport3D> nastavením připojená vlastnost <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> k `Aliased`.  Ve výchozím nastavení, 3D vyhlazení deaktivovány [!INCLUDE[TLA#tla_winxp](../../../../includes/tlasharptla-winxp-md.md)] povolená na [!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)] s ukázkami 4 na pixel.|  
|Text|Live text ve 3D scéně (live, protože se <xref:System.Windows.Media.DrawingBrush> nebo <xref:System.Windows.Media.VisualBrush>) může být pomalé. Zkuste místo toho použít Image textu (prostřednictvím <xref:System.Windows.Media.Imaging.RenderTargetBitmap>) Pokud se změní text.|  
|<xref:System.Windows.Media.TileBrush>|Pokud je nutné použít <xref:System.Windows.Media.VisualBrush> nebo <xref:System.Windows.Media.DrawingBrush> ve 3D scéně vzhledem k tomu, že obsah štětce není statická, zkuste ukládání do mezipaměti na stopu (nastavení připojená vlastnost <xref:System.Windows.Media.RenderOptions.CachingHint%2A> k `Cache`).  Nastavit minimální a maximální škálování zneplatnění prahové hodnoty (pomocí vlastností připojených <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> a <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>) tak, aby v mezipaměti štětce nebude znovu vygenerovat příliš často, a přitom zachovávat vaše požadovanou úroveň kvality.  Ve výchozím nastavení <xref:System.Windows.Media.DrawingBrush> a <xref:System.Windows.Media.VisualBrush> nejsou uložené v mezipaměti, což znamená, že pokaždé, když se něco překreslit štětcem musí být znovu vykreslené, celý obsah štětec musí nejprve znovu vykreslený zprostředkující plochu.|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<xref:System.Windows.Media.Effects.BitmapEffect> vynutí všechny ovlivněné obsah vykreslený bez hardwarovou akceleraci.  Pro zajištění nejlepšího výkonu, nepoužívejte <xref:System.Windows.Media.Effects.BitmapEffect>.|  
  
## <a name="performance-impact-medium"></a>Dopad na výkon: Střední  
  
|Vlastnost|Doporučení|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Když tyto vrcholy mají stejnou pozici, normal a souřadnice textury sítě je definován jako sousedících trojúhelníky s sdílené vrcholy, definovat každý sdílený vrchol pouze jednou a pak definovat vaše trojúhelníky podle indexu s <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>.|  
|<xref:System.Windows.Media.ImageBrush>|Minimalizovat velikosti textury, až budete mít explicitní kontrolu nad velikost (Pokud používáte <xref:System.Windows.Media.Imaging.RenderTargetBitmap> a/nebo <xref:System.Windows.Media.ImageBrush>).  Všimněte si, že nižší rozlišení textury můžete snížit vizuální kvality, tak se pokusí najít správnou rovnováhu mezi kvality a výkonu.|  
|Míra průhlednosti|Při vykreslování více průchody průsvitných 3D obsahu (jako je například odrazů), použijte vlastnosti krytí štětce nebo materiály (prostřednictvím <xref:System.Windows.Media.Brush.Opacity%2A> nebo <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>) místo vytvoření samostatné více průchody průsvitných <xref:System.Windows.Controls.Viewport3D> nastavením `Viewport3D.Opacity` na hodnotu menší než 1.|  
|<xref:System.Windows.Controls.Viewport3D>|Minimalizujte počet <xref:System.Windows.Controls.Viewport3D> objekty, které používáte ve scéně.  Mnoho 3D modelů umístěte do stejného Viewport3D místo vytvoření samostatných instancí Viewport3D pro každý model.|  
|<xref:System.Windows.Freezable>|Obvykle je vhodné opakovaně používat <xref:System.Windows.Media.Media3D.MeshGeometry3D>, <xref:System.Windows.Media.Media3D.GeometryModel3D>, štětců a materiály.  Jsou všechny multiparentable, protože jste odvozený od `Freezable`.|  
|<xref:System.Windows.Freezable>|Volání <xref:System.Windows.Freezable.Freeze%2A> metodu na Zablokovatelné při jejich vlastnosti zůstane beze změny ve vaší aplikaci.  Zmrazení můžete snížit pracovní sady a zvýšit rychlost.|  
|<xref:System.Windows.Media.Brush>|Použití <xref:System.Windows.Media.ImageBrush> místo <xref:System.Windows.Media.VisualBrush> nebo <xref:System.Windows.Media.DrawingBrush> Pokud nedojde ke změně obsahu stopy.  2D obsah lze převést na <xref:System.Windows.Controls.Image> prostřednictvím <xref:System.Windows.Media.Imaging.RenderTargetBitmap> a potom použít v <xref:System.Windows.Media.ImageBrush>.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|Nepoužívejte <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> Pokud je ve skutečnosti nepotřebujete zobrazíte zpět tváří vaše <xref:System.Windows.Media.Media3D.GeometryModel3D>.|  
|<xref:System.Windows.Media.Media3D.Light>|Světle rychlost (nejvyšší k nejnižší):<br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Zkuste udržovat o velikosti pod tato omezení:<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: využití 20 001 <xref:System.Windows.Media.Media3D.Point3D> instancí<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60,003 <xref:System.Int32> instancí|  
|<xref:System.Windows.Media.Media3D.Material>|Materiál rychlost (nejvyšší k nejnižší):<br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 3D výslovný nesouhlas s neviditelné štětce (černé okolí štětce, jasné, štětců, atd.) konzistentním způsobem.  Vezměte v úvahu vynechání z scéně.|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|Každý <xref:System.Windows.Media.Media3D.Material> v <xref:System.Windows.Media.Media3D.MaterialGroup> způsobí, že jiný pass vykreslování, tedy včetně mnoha materiály, dokonce i jednoduchý materiály, může výrazně zvýšit výplně požadavky na vaši GPU.  Minimalizujte počet přes vaše <xref:System.Windows.Media.Media3D.MaterialGroup>.|  
  
## <a name="performance-impact-low"></a>Dopad na výkon: Nízká  
  
|Vlastnost|Doporučení|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|Pokud nepotřebujete animace nebo vytváření datových vazeb, namísto použití transformace skupina, která obsahuje více transformací pomocí jediné <xref:System.Windows.Media.Media3D.MatrixTransform3D>, nastavení produktu všechny transformace, které by jinak neexistovala nezávisle na sobě ve skupině transformace.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimalizujte počet světla ve scéně. Příliš mnoho světla ve scéně vynutí [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] náhradní softwarové vykreslování.  Omezení jsou zhruba 110 <xref:System.Windows.Media.Media3D.DirectionalLight> objekty, 70 <xref:System.Windows.Media.Media3D.PointLight> objekty nebo 40 <xref:System.Windows.Media.Media3D.SpotLight> objekty.|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|Oddělení přechod objekty ze statických objektů a umístit je do samostatné <xref:System.Windows.Media.Media3D.ModelVisual3D> instancí.  Je "těžší" než ModelVisual3D <xref:System.Windows.Media.Media3D.GeometryModel3D> vzhledem k tomu, že se ukládá do mezipaměti transformovaný hranice.  GeometryModel3D je optimalizovaná na modelu ModelVisual3D je optimalizovaná na uzel scene.  Pomocí ModelVisual3D vložit sdílené instance GeometryModel3D do scény.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimalizujte počet, kolikrát změnit počet světla ve scéně.  Každou změnu počtu světla vynutí opětovné generování shaderu a rekompilace Pokud tuto konfiguraci již dříve (a tedy měli jeho shaderu uložili do mezipaměti).|  
|Světlý|Černé světla nezobrazí, ale bude přidat k vykreslení čas; Vezměte v úvahu vynechání je.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Chcete-li minimalizovat čas vytváření rozsáhlých kolekcí v [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], jako je například MeshGeometry3D <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>, a <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>, předem velikost kolekce před hodnotu základního souboru. Pokud je to možné předejte kolekce konstruktory předem vyplněná datové struktury, například pole nebo seznamy.|  
  
## <a name="see-also"></a>Viz také:

- [Přehled 3D grafiky](3-d-graphics-overview.md)
