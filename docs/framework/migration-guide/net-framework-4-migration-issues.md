---
title: Problémy s migrací rozhraní .NET Framework 4
ms.date: 05/02/2017
helpviewer_keywords:
- .NET Framework 4, migration
- application compatibility
ms.assetid: df478548-8c05-4de2-8ba7-adcdbe1c2a60
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 368d5f7fa2eec8f3526a10b4777a862e8334617c
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/08/2019
ms.locfileid: "59210227"
---
# <a name="net-framework-4-migration-issues"></a>Problémy s migrací rozhraní .NET Framework 4

Toto téma popisuje problémy s migrací mezi verzi rozhraní .NET Framework 3.5 Service Pack 1 a rozhraní .NET Framework verze 4, včetně oprav, změny standardy dodržování předpisů a zabezpečení a změn na základě názorů zákazníků. Většina těchto změn nevyžaduje žádné programové změny v aplikacích. Pro ty, které mohou vyžadovat změny naleznete v tématu Doporučené změny sloupec v tabulce.

Toto téma popisuje důležité změny v následujících oblastech:

* [ASP.NET a Web](#aspnet-and-web)

* [Jádro](#core)

* [Data](#data)

* [Windows Communication Foundation (WCF)](#windows-communication-foundation-wcf)

* [Windows Presentation Foundation (WPF)](#windows-presentation-foundation-wpf)

* [XML](#xml)

Přehled vyšší úrovně problémů v tomto tématu najdete v článku [příručka k migraci na rozhraní .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ff657133%28v=vs.100%29).

Informace o nových funkcích najdete v tématu [co je nového v rozhraní .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms171868%28v=vs.100%29).

## <a name="aspnet-and-web"></a>ASP.NET a Web

Obory názvů: <xref:System.Web>, <xref:System.Web.Mobile>, <xref:System.Web.Security>, <xref:System.Web.UI.WebControls>; sestavení: System.Web (in System.Web.dll)

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **Soubory definice prohlížeče** | Soubory definice prohlížeče se aktualizovaly informace o nových a aktualizovaných prohlížečích a zařízeních. Starší prohlížeče a zařízení, jako jsou Netscape Navigator byly odebrány a novějších prohlížečů a zařízení, jako jsou Google Chrome a Apple iPhone se přidaly.<br><br>Pokud vaše aplikace obsahuje definice vlastních prohlížečů, které dědí z jednoho z definicí prohlížeče, které byly odebrány, zobrazí se chyba.<br><br><xref:System.Web.HttpBrowserCapabilities> Objektu (který je zveřejněný na stránce `Request.Browse` vlastnost) je řízenou soubory definice prohlížeče. Informace, které se vrátí přístupem k vlastnosti tohoto objektu v technologii ASP.NET 4 proto může být jiný než informace, který byl vrácen v dřívější verzi technologie ASP.NET. | Pokud vaše aplikace závisí na původní definice soubory prohlížeče, zkopírujte je z následující složky:<br><br>*Windows\\Microsoft.NET\\Framework\\v2.0.50727\\CONFIG\\Browsers*<br><br>Zkopírujte soubory do odpovídajícího  *\\CONFIG\\prohlížeče* složku pro technologii ASP.NET 4. Po zkopírování souborů, spuštění [Aspnet_regbrowsers.exe](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms229858(v=vs.90)) nástroj příkazového řádku. Další informace najdete v tématu [ https://www.asp.net/mobile ](/aspnet/mobile/overview) webu. |
| **Podřízené aplikace spuštěné v smíšené verze technologie ASP.NET** | ASP.NET 4 aplikací, které jsou nakonfigurovány jako podřízené prvky aplikace, které běží starší verze technologie ASP.NET se nemusí podařit spustit kvůli chybám při konfiguraci nebo kompilaci. Konkrétní chyba, ke které dochází závisí na tom, jestli je aplikace spuštěná v rámci služby IIS 6.0, nebo v rámci služby IIS 7 nebo IIS 7.5. | Konfigurační soubory ovlivněné aplikací můžete měnit, tak, aby konfigurační systém správně rozpozná aplikace ASP.NET 4. Informace o změnách, je třeba provést, najdete v části "Aplikacích technologie ASP.NET 4 podřízené aplikace nezdaří na spuštění při v části ASP.NET 2.0 nebo technologie ASP.NET 3.5" v dokumentu [ASP.NET 4 – nejnovější změny](/aspnet/whitepapers/aspnet4/breaking-changes) na webu technologie ASP.NET. |
| **ClientID změny** | Nové `clientIDMode` nastavení v technologii ASP.NET 4 umožňuje určit, jak technologie ASP.NET generuje `id` atributů elementů HTML. V předchozích verzích technologie ASP.NET, je ekvivalentní výchozí chování `AutoID` nastavení `clientIDMode`. Ve výchozím nastavení je nyní `Predictable`. Další informace najdete v tématu [identifikace ovládacích prvků technologie ASP.NET webové](https://docs.microsoft.com/previous-versions/aspnet/1d04y8ss%28v=vs.100%29). | Pokud používáte sadu Visual Studio k upgradu vaší aplikace v ASP.NET 2.0 nebo technologie ASP.NET 3.5, nástroj automaticky přidá nastavení v souboru Web.config, který uchovává chování starších verzích rozhraní .NET Framework. Ale pokud upgradujete aplikaci tak, že změníte fond aplikací ve službě IIS cílit na rozhraní .NET Framework 4, ASP.NET používá nový režim ve výchozím nastavení. Chcete-li zakázat režim nové ID klienta, přidejte následující nastavení v souboru Web.config:<br><br>`<pages clientIDMode="AutoID" />` |
| **Zabezpečení přístupu kódu (CAS)** | ASP.NET 2.0 čisté funkce, které byly přidány v technologii ASP.NET 3.5 pomocí rozhraní .NET Framework 1.1 a 2.0 rozhraní .NET Framework kód přístup (CAS) modelu zabezpečení. Implementace certifikační Autority v technologii ASP.NET 4 však byla podstatně overhauled. V důsledku toho částečným vztahem důvěryhodnosti aplikace technologie ASP.NET, které spoléhají na důvěryhodný kód spuštěný v globální mezipaměti sestavení může selhat s různými bezpečnostním výjimkám. Částečným vztahem důvěryhodnosti aplikace, které spoléhají na rozsáhlé změny do počítače certifikační Autority zásad může také selhat a vyvolat výjimku zabezpečení. | Můžete se vrátit částečným vztahem důvěryhodnosti aplikace ASP.NET 4 pro chování ASP.NET 1.1 a 2.0 pomocí nových `legacyCasModel` atribut `trust` prvek konfigurace, jak je znázorněno v následujícím příkladu:<br><br>`<trust level= "Medium" legacyCasModel="true" />`<br><br>Důležité: Návrat k starší model certifikačních Autorit může představovat nižší zabezpečení.<br><br>Další informace o modelu zabezpečení přístupu kódu novou technologii ASP.NET 4 najdete v tématu [zabezpečení přístupu kódu v aplikacích ASP.NET 4](https://docs.microsoft.com/previous-versions/dd984947(v=vs.100)). |
| **Konfigurační soubory** | Kořenový konfigurační soubory (soubor machine.config a v kořenovém souboru Web.config) pro technologii ASP.NET 4 a .NET Framework byla aktualizována, aby patří většina standardní informace o konfiguraci, která byla nalezena v souborech Web.config aplikace v ASP.NET 3.5. Z důvodu složitosti spravované služby IIS 7 a IIS 7.5 systémy konfigurace spouštění aplikací technologie ASP.NET 3.5 v technologii ASP.NET 4 a v rámci služby IIS 7 a IIS 7.5 může způsobit chyby technologie ASP.NET nebo IIS chyby. | Upgrade aplikací technologie ASP.NET 3.5 na ASP.NET 4 pomocí nástroje pro upgrade projektu v sadě Visual Studio. Visual Studio 2010 automaticky upraví soubor Web.config aplikace technologie ASP.NET 3.5 tak, aby obsahovala odpovídající nastavení pro technologii ASP.NET 4.<br><br>Však můžete spustit pomocí rozhraní .NET Framework 4 bez opětovnou kompilaci aplikací technologie ASP.NET 3.5. V takovém případě budete muset ručně upravit soubor Web.config aplikace před spuštěním aplikace v rozhraní .NET Framework 4 a IIS 7 nebo IIS 7.5. Konkrétní změny, které je třeba závisí na kombinaci softwaru, které pracujete, včetně verzí Service Pack (SP). Informace o možných softwarové kombinace, které jsou ovlivněny této změně a jak řešit problémy s konkrétní kombinace, najdete v části "Konfigurace chyby související do nové technologie ASP.NET 4 Konfigurace kořenového adresáře" v dokumentu [ Rozbíjející změny v technologii ASP.NET 4](/aspnet/whitepapers/aspnet4/breaking-changes) na webu technologie ASP.NET. |
| **Vykreslování ovládacího prvku** | V předchozích verzích technologie ASP.NET některé ovládací prvky vygenerován kód, který nelze zakázat. Ve výchozím nastavení je tento typ značky generovány už v technologii ASP.NET 4. Vykreslování změny se projeví následující ovládací prvky:<br><br>* Tím `Image` a `ImageButton` už vykreslení ovládacích prvků `border="0"` atribut.<br>* Tím `BaseValidator` třídy a ověřování ovládacích prvků, které jsou odvozeny z něj už vykreslit červený text ve výchozím nastavení.<br>* Tím `HtmlForm` ovládacího prvku nezobrazuje `name` atribut.<br>* Tím `Table` ovládací prvek již vykreslení `border="0"` atribut.<br><br>Ovládací prvky, které nejsou určeny pro uživatelský vstup (například `Label` ovládací prvek) už zobrazovat `disabled="disabled"` atribut, pokud jejich `Enabled` je nastavena na `false` (nebo pokud toto nastavení dědí z ovládacího prvku kontejneru). | Pokud používáte sadu Visual Studio k upgradu vaší aplikace v ASP.NET 2.0 nebo technologie ASP.NET 3.5, nástroj automaticky přidá nastavení v souboru Web.config, které zachovává starší vykreslování. Nicméně pokud upgradujete aplikaci tak, že změníte fond aplikací ve službě IIS cílit na rozhraní .NET Framework 4, ASP.NET používá nový režim vykreslování ve výchozím nastavení. Pokud chcete zakázat nový režim vykreslování, přidejte následující nastavení v souboru Web.config:<br><br>`<pages controlRenderingCompatibilityVersion="3.5" />` |
| **Obslužné rutiny událostí ve výchozích dokumentů.** | ASP.NET 4 vykreslení kódu HTML `form` elementu `action` hodnotu atributu jako prázdný řetězec, když se požadavek na adresu URL bez přípony, který má výchozí dokument k němu mapována. V dřívějších verzích technologie ASP.NET, požadavek na `http://contoso.com` výsledkem by požadavek na stránku Default.aspx. V tomto dokumentu, otevírání `form` by být vykreslen jako v následujícím příkladu:<br><br>`<form action="Default.aspx" />`<br><br>V technologii ASP.NET 4, požadavek na `http://contoso.com` také za následek požadavek na Default.aspx, ale ASP.NET nyní vykreslí otevírání HTML `form` značky jako v následujícím příkladu:<br><br>`<form action="" />`<br><br>Když `action` atributu je prázdný řetězec, IIS `DefaultDocumentModule` objekt vytvoří podřízený požadavek na stránku Default.aspx. Ve většině případů tento podřízený požadavek je transparentní pro kód aplikace a stránku Default.aspx běží normálně. Však může způsobit potenciální interakce mezi spravovaným kódem a IIS 7 nebo IIS 7.5 integrovaného režimu spravované stránky .aspx přestane fungovat správně při podřízeného požadavku. Pokud nastanou následující podmínky, podřízeného požadavku pro výchozí dokument .aspx dojde k chybě nebo neočekávané chování:<br><br>* Stránky .aspx je odesláno prohlížeči s `form` elementu `action` atribut nastaven na "".<br>* Formuláře je odeslána zpět technologie ASP.NET.<br>* Spravovaný modul HTTP načte některá část obsahu entity, jako například `Request.Form` nebo `Request.Params`. To způsobí, že obsah entity požadavku POST k načtení do spravované paměti. V důsledku toho obsahu entity už nejsou k dispozici pro všechny moduly nativní kód, na kterých běží v IIS 7 nebo IIS 7.5 integrovaného režimu.<br>* IIS `DefaultDocumentModule` objekt nakonec spustí a vytvoří podřízený požadavek na dokument Default.aspx. Protože obsah entity je již přečtena zasažené spravovaného kódu, neexistuje však žádný k dispozici k odeslání podřízeného požadavku obsah entity.<br>* Při spuštění kanálu HTTP pro podřízený požadavek, pro soubory ASPX obslužná rutina se spustí ve fázi spuštění obslužné rutiny.<br><br>Protože neexistuje žádný obsah entity, neexistují žádné proměnné formuláře a bez zobrazení stavu. Proto není k dispozici pro obslužnou rutinu stránky ASPX k určení, jaké události (pokud existuje) by měla být zvýšena žádné informace. V důsledku toho žádné obslužné rutiny události postback stránky ASPX ovlivněné spustit. | Informace o způsobech, jak vyřešit problémy, které mohou nastat v důsledku této změny najdete v tématu "Událost obslužné rutiny může není být není vyvolána v výchozí dokument v IIS 7 nebo IIS 7.5 integrovaný režim" v dokumentu [ASP.NET 4 – nejnovější změny](/aspnet/whitepapers/aspnet4/breaking-changes)na webu technologie ASP.NET. |
| **Algoritmus hash** | Technologie ASP.NET používá k zabezpečení dat, jako jsou soubory cookie pro ověřování formulářů a stavu zobrazení šifrování a algoritmy hash. Ve výchozím nastavení, používá technologii ASP.NET 4 <xref:System.Security.Cryptography.HMACSHA256> algoritmus pro hash operace na soubory cookie a stavu zobrazení. Starší verze technologie ASP.NET použita starší <xref:System.Security.Cryptography.HMACSHA1> algoritmus. | Při spuštění aplikace, které kombinovat technologie ASP.NET 2.0 a technologii ASP.NET 4, místo, kde data, jako jsou soubory cookie pro ověřování formuláře musí pracovat ve verzích rozhraní .NET Framework, konfiguraci aplikace ASP.NET 4 Web používat starší <xref:System.Security.Cryptography.HMACSHA1> algoritmus tak, že přidáte následující nastavení v v souboru Web.config:<br><br>`<machineKey validation="SHA1" />` |
| **Hostování ovládacích prvků v aplikaci Internet Explorer** | Můžete už hostitelské ovládací prvky Windows Forms v aplikaci Internet Explorer, protože existují lepších řešení pro hostování ovládacích prvků na webu. Proto sestavení IEHost.dll a IEExec.exe byly odebrány z rozhraní .NET Framework. | Používejte následující technologie pro vývoj vlastních ovládacích prvků ve webových aplikacích:<br><br>* Můžete vytvořit aplikace Silverlight a nakonfigurovat jej pro spuštění mimo prohlížeč. Další informace najdete v tématu [podpora na více instancí prohlížeče](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/dd550721%28v=vs.95%29).<br>* Můžete vytvářet aplikace prohlížeče XAML (XBAP), abyste mohli využívat funkce WPF (vyžaduje rozhraní .NET Framework na klientských počítačích). Další informace najdete v tématu [přehled aplikací prohlížeče WPF XAML](../../../docs/framework/wpf/app-development/wpf-xaml-browser-applications-overview.md). |
| **HtmlEncode a UrlEncode metody** | `HtmlEncode` a `UrlEncode` metody <xref:System.Web.HttpUtility> a <xref:System.Web.HttpServerUtility> třídy byly aktualizovány ke kódování znak jednoduché uvozovky (') následujícím způsobem:<br><br>* Tím `HtmlEncode` metoda kóduje instance jako jednoduché uvozovky `&#39;`<br>* Tím `UrlEncode` metoda kóduje instance jako jednoduché uvozovky `%27` | Prozkoumat kód pro místa, kde používáte `HtmlEncode` a `UrlEncode` metody a ujistěte se, že změna v kódování nemá za následek změny, které má vliv na vaše aplikace. |
| **HttpException chyby v aplikacích technologie ASP.NET 2.0** | Po povolení ASP.NET 4 na IIS 6, aplikace ASP.NET 2.0, které běží na IIS 6 (v systému Windows Server 2003 nebo Windows Server 2003 R2) může způsobit chyby jako je následující: `System.Web.HttpException: Path '/[yourApplicationRoot]/eurl.axd/[Value]' was not found.` | * Pokud technologie ASP.NET 4 není potřeba, abyste mohli spustit na webovém serveru, přemapování lokality tak, aby místo toho použijte technologii ASP.NET 2.0.<br><br>-nebo-<br><br>* Pokud technologie ASP.NET 4 je potřeba ke spuštění webové stránky, přesuňte všechny podřízené ASP.NET 2.0 virtuální adresáře do jiného webu, který je namapovaný na technologii ASP.NET 2.0.<br><br>-nebo-<br><br>* Zakážete adresy URL bez přípony. Další informace najdete v tématu "ASP.NET 2.0 může aplikace generovat chyby HttpException tento odkaz na soubor eurl.axd" v dokumentu [ASP.NET 4 – nejnovější změny](/aspnet/whitepapers/aspnet4/breaking-changes) na webu technologie ASP.NET. |
| **Typy členství** | Některé typy (například <xref:System.Web.Security.MembershipProvider>), která se používají v technologii ASP.NET členství se přesunuly z System.Web.dll System.Web.ApplicationServices.dll sestavení. Aby bylo možné vyřešit závislosti architektury vrstvení mezi typy v klientovi a SKU rozšířené rozhraní .NET Framework se přesunuly typy. | Knihovny tříd, které byly upgradovány z předchozích verzí technologie ASP.NET a používají členství typy, které byly přesunuty se nemusí podařit kompilace při použití v projektu aplikace ASP.NET 4. Pokud ano, přidejte odkaz v projektu knihovny tříd System.Web.ApplicationServices.dll. |
| **Změny ovládacího prvku nabídka** | Změny <xref:System.Web.UI.WebControls.Menu> řídit výsledkem následující chování:<br><br>* Pokud <xref:System.Web.UI.WebControls.MenuRenderingMode> je nastavena na `List`, nebo pokud <xref:System.Web.UI.WebControls.MenuRenderingMode> je nastavena na `Default` a <xref:System.Web.Configuration.PagesSection.ControlRenderingCompatibilityVersion> je nastavena na `4.0` nebo novější, <xref:System.Web.UI.WebControls.MenuItem.PopOutImageUrl> vlastnost nemá žádný vliv.<br>* Pokud cesta, která je nastavena v <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> a <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> vlastnosti obsahuje zpětné lomítko (\\), obrázky nezobrazují. (V předchozích verzích technologie ASP.NET, může zahrnovat cestu zpětné lomítko.) | * Namísto z nastavení <xref:System.Web.UI.WebControls.MenuItem.PopOutImageUrl> nastavenou pro jednotlivé položky nabídky <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> nebo <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> nadřazené <xref:System.Web.UI.WebControls.Menu> ovládacího prvku.<br><br>-nebo-<br><br>Nastavte <xref:System.Web.UI.WebControls.MenuRenderingMode> k `Table`, nebo nastavte <xref:System.Web.UI.WebControls.MenuRenderingMode> k `Default` a nastavte <xref:System.Web.Configuration.PagesSection.ControlRenderingCompatibilityVersion> k `3.5`. Toto nastavení způsobí <xref:System.Web.UI.WebControls.Menu> ovládací prvek a použít založené na tabulce rozložení HTML, která je použita v předchozích verzích technologie ASP.NET.<br>* Pokud cestu <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> nebo <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> vlastnost obsahuje zpětné lomítko (\\), nahradí znak lomítka (/). |
| **Mobilní sestavení v souboru Web.config** | V předchozích verzích technologie ASP.NET, odkaz na sestavení System.Web.Mobile.dll byla zahrnuta v kořenovém souboru Web.config v `assemblies` části `system.web` / `compilation`. Kvůli zvýšení výkonu se byl odebrán odkaz na toto sestavení.<br><br>Poznámka: Sestavení System.Web.Mobile.dll a mobilní ovládací prvky ASP.NET jsou zahrnuty v technologii ASP.NET 4, ale jsou zastaralé. | Pokud chcete použít typy v tomto sestavení, přidejte odkaz na sestavení v buď v kořenovém souboru Web.config nebo v souboru Web.config aplikace. |
| **Ukládání výstupu do mezipaměti** | V technologii ASP.NET 1.0 chybu způsobila stránky v mezipaměti, zadané `Location="ServerAndClient"` jako výstupu€ "nastavení ke generování mezipaměti `Vary:*` hlavičku protokolu HTTP v odpovědi. To mělo vliv na sděluje prohlížeči klientů pro ukládání do mezipaměti nikdy stránce místně. V technologii ASP.NET 1.1 <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A> byla přidána metoda, která mohla být volána, pokud chcete potlačit `Vary:*` záhlaví. Ale zpráv o chybách naznačují, že vývojáři si nejsou vědomi existující `SetOmitVaryStar` chování.<br><br>V technologii ASP.NET 4 `Vary:*` hlavičky protokolu HTTP je již vygenerován z odpovědí, které určují následující direktivy:<br><br>`<%@ OutputCache Location="ServerAndClient" %>`<br><br>V důsledku toho <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A> metody je už je nepotřebujete k potlačení `Vary:*` záhlaví. V aplikacích, které určují "hodnotu ServerAndClient" pro `Location` atribut, stránky budou ukládat do mezipaměti v prohlížeči bez nutnosti volání <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A>. | Pokud stránky v aplikaci musíte vygenerovat `Vary:*`, zavolejte <xref:System.Web.HttpResponse.AppendHeader%2A> způsob, jak je znázorněno v následujícím příkladu:<br><br>`System.Web.HttpResponse.AppendHeader("Vary","*");`<br><br>Alternativně můžete změnit hodnotu ukládání výstupu do mezipaměti `Location` atribut "Server". |
| **Stránka analýza kódu** | Analyzátor stránky pro webové stránky ASP.NET (soubory .aspx) a uživatelských ovládacích prvků (soubory .ascx) je přísnější v technologii ASP.NET 4 než v předchozích verzích technologie ASP.NET, a označí více označí jako neplatný než v předchozích verzích. | Zkontrolujte chybové zprávy, které jsou vytvářeny při spuštění stránky a opravit chyby, které jsou výsledkem neplatný kód. |
| **Typy Passport** | Podpora služby Passport, integrované do ASP.NET 2.0 je zastaralá a není podporována z důvodu změn v účtu služby Passport (teď Live ID SDK). V důsledku toho typy vztahující se ke službě Passport v <xref:System.Web.Security> jsou nyní označeny `ObsoleteAttribute` atribut. | Změnit jakýkoli kód, který používá typy Passport v <xref:System.Web.Security> obor názvů (například <xref:System.Web.Security.PassportIdentity>) použít [SDK](https://go.microsoft.com/fwlink/?LinkId=106346). |
| **Informace o PathInfo ve vlastnosti FilePath** | ASP.NET 4 už obsahuje `PathInfo` hodnotu v vrácení hodnoty z vlastnosti, jako <xref:System.Web.HttpRequest.FilePath>, <xref:System.Web.HttpRequest.AppRelativeCurrentExecutionFilePath>, a <xref:System.Web.HttpRequest.CurrentExecutionFilePath>. Místo toho `PathInfo` informace jsou k dispozici v <xref:System.Web.HttpRequest.PathInfo>. Představte si například následující fragment adresy URL:<br><br>`/testapp/Action.mvc/SomeAction`<br><br>V předchozích verzích technologie ASP.NET <xref:System.Web.HttpRequest> vlastnosti mít následující hodnoty:<br><br>* <xref:System.Web.HttpRequest.FilePath>: `/testapp/Action.mvc/SomeAction`<br>* <xref:System.Web.HttpRequest.PathInfo>: (prázdný)<br><br>V technologii ASP.NET 4 <xref:System.Web.HttpRequest> vlastnosti místo toho mít následující hodnoty:<br><br>* <xref:System.Web.HttpRequest.FilePath>: `/testapp/Action.mvc`<br>* <xref:System.Web.HttpRequest.PathInfo>: `SomeAction` | Prozkoumat kód pro místa, kde se spoléháte na vlastnosti <xref:System.Web.HttpRequest> třídy k vrácení informací o cestě; změňte kód tak, aby odrážely změny v tom, jak se vrátí informace o cestě. |
| **Žádost o ověření** | Ke zlepšení žádost o ověření, je vyvolána ověření žádosti ASP.NET dříve v životním cyklu požadavku. V důsledku toho spustí požadavek na ověření pro požadavky, které nejsou pro soubory ASPX, například pro volání webové služby a pro vlastní obslužné rutiny. Žádost o ověření bude také aktivní, při spouštění vlastních modulů HTTP v kanálu zpracování požadavku.<br><br>V důsledku této změny požadavky na prostředky než soubory .aspx může vyvolat chyby ověření požadavku. Vlastní kód, který běží v požadavku kanálu (například vlastní moduly typu HTTP) také může vyvolat chyby ověření požadavku. | V případě potřeby, můžete se vrátit k původní chování pouze stránky ASPX aktivace žádosti o ověření pomocí následující nastavení v konfiguračním souboru webu:<br><br>`<httpRuntime requestValidationMode="2.0" />`<br><br>Upozornění: Pokud se vrátíte k původní chování, ujistěte se, že veškerý kód existující obslužné rutiny, modulech a další vlastní kód provádí kontroly pro potenciálně nebezpečná vstupy HTTP, které mohou být XSS vektory útoku. |
| **Směrování** | Když vytvoříte web systému souborů v sadě Visual Studio 2010 a webový server je ve složce, která obsahuje tečku (.) ve složce s názvem, směrování adres URL nebudou fungovat spolehlivě. Z některých virtuálních cest vrátí chybu HTTP 404. K tomu dochází, protože Visual Studio 2010 spustí Visual Studio vývojový Server sady pomocí správné cesty pro kořenový virtuální adresář. | * V **vlastnosti** stránku pro web na základě souborů, změny **virtuální cesta** atribut "/".<br><br>-nebo-<br><br>* Vytvoření projektu webové aplikace namísto webového projektu. Projekty webových aplikací není nutné tento problém a směrování adres URL funguje i v případě složky projektu tečku v názvu.<br><br>-nebo-<br><br>* Vytvořte web založený na protokolu HTTP, který je hostovaný ve službě IIS. Webové stránky hostované službou IIS může obsahovat tečky virtuální cestu stejně jako v složce souboru projektu. |
| **Weby služby SharePoint** | Pokud se pokusíte spustit webu technologie ASP.NET 4, který je nasazen jako podřízený web služby SharePoint, který obsahuje vlastní částečným vztahem důvěryhodnosti úroveň s názvem `WSS_Minimal`, zobrazí se následující chyba:<br><br>`Could not find permission set named 'ASP.Net'.` | V současné době žádné verze služby SharePoint jsou kompatibilní s technologií ASP.NET. V důsledku toho by se neměly pokoušet spuštění webu technologie ASP.NET 4 jako podřízený web služby SharePoint. |
| **Standardy XHTML 1.1** | Povolit XHTML 1.1 dodržování předpisů u nových webových serverů, vygeneruje ovládacích prvků technologie ASP.NET v rozhraní .NET Framework 4 XHTML 1.1 kompatibilní s HTML. Tato vykreslení se aktivuje pomocí následující možnost v souboru Web.config uvnitř `<system.Web>` element:<br><br>`<pages controlRenderingCompatibilityVersion="4.0"/>`<br><br>Tato možnost je standardně nastavena na 4.0. Webové projekty, které budou upgradovány ze sady Visual Studio 2008 jste 3.5 nastavení povolena z důvodu kompatibility. | Žádné |

## <a name="core"></a>Jádro

### <a name="general-features"></a>Obecné funkce

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **CardSpace** | Služba Windows CardSpace je již nejsou zahrnuty v rozhraní .NET Framework. se poskytuje samostatně. | Stáhněte si Windows CardSpace z [Microsoft Download Center](https://go.microsoft.com/fwlink/?LinkId=199868). |
| **Konfigurační soubory** | Opravy byly provedeny v jak konfiguračních souborů aplikace přistupuje k rozhraní .NET Framework. | Pokud je název konfiguračního souboru aplikace *aplikace name.config*, přejmenujte ho na *aplikace name.exe.config*. Například přejmenujte *MyApp.config* k *MyApp.exe.config*. |
| **Kompilátor kód jazyka C#** | `Compiler`, `CompilerError`, A `ErrorLevel` třídy, které byly v <xref:Microsoft.CSharp> už nejsou k dispozici obor názvů a sestavení (cscompmgd.dll) je již nejsou zahrnuty v rozhraní .NET Framework. | Použití <xref:System.CodeDom.Compiler.CodeDomProvider> třídy a další třídy v <xref:System.CodeDom.Compiler> oboru názvů. Další informace najdete v tématu [použití modelu CodeDOM](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/y2k85ax6%28v=vs.100%29). |
| **Hostování** (nespravovaného rozhraní API) | Pokud chcete zlepšit možnosti hostování, některé z hostitelských aktivace rozhraní API se již nepoužívají. Vnitroprocesové vedle sebe provádění funkce umožňuje aplikaci načíst a spustit více verzí rozhraní .NET Framework v rámci stejného procesu. Například můžete spustit aplikace, které načítají doplňků (nebo komponenty), které jsou založeny na rozhraní .NET Framework 2.0 SP1 a doplňky, které jsou založeny na rozhraní .NET Framework 4 v rámci stejného procesu. Starší komponenty i nadále používat starší verze rozhraní .NET Framework a nových komponent používat novou verzi rozhraní .NET Framework. | Použít konfiguraci popsané v [vnitroprocesové vedle sebe provádění](../../../docs/framework/deployment/in-process-side-by-side-execution.md). |
| **Nový model zabezpečení** | Zásady zabezpečení (CA) přístupu kódu byla vypnuta a nahradí se zjednodušený model, jak je popsáno v [změny zabezpečení v rozhraní .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd233103%28v=vs.100%29). | Změny mohou být vyžadovány, pokud závisí na certifikačních Autoritách ve svých aplikacích. Další informace najdete v tématu [kompatibilitou zásad zabezpečení přístupu kódu a migrace](../../../docs/framework/misc/code-access-security-policy-compatibility-and-migration.md). |

### <a name="date-and-time"></a>Datum a čas

Namespace: <xref:System>; sestavení: mscorlib (v knihovně mscorlib.dll)

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **Letní** | Aby byla konzistentní se systémové hodiny, čas vlastnosti (například <xref:System.TimeZoneInfo.Local> a <xref:System.DateTime.Now>) místo jiných dat rozhraní .NET Framework teď používat operační systém pravidla pro letní čas operace. | Žádné |
| **Formátování řetězců** | Pro podporu formátování zohledňující jazykovou verzi <xref:System.TimeSpan> struktura zahrnuje nové přetížení `ToString`, `Parse`, a `TryParse` kromě nových metod `ParseExact` a `TryParseExact` metody. | Žádné |

### <a name="globalization"></a>Globalizace

Seznam nových neutrální a specifické jazykové verze, najdete v části [co je nového v globalizace a lokalizace](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd997383%28v=vs.100%29).

Namespace: <xref:System.Globalization>; sestavení: mscorlib (v knihovně mscorlib.dll)

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **Názvech jazykových verzí** | Následující název změny se projeví u němčina, Divehština a Středoafrická jazykové verze:<br><br>* <xref:System.Globalization.CultureAndRegionInfoBuilder.CurrencyEnglishName>: Název měny pro němčina (Švýcarsko) (de-CH) jazykovou verzi změní ze "sFr." na "FN".<br>* <xref:System.Globalization.DateTimeFormatInfo.LongDatePattern>: Vzor dlouhého data pro Divehština (Maledivy) (dv MV) jazykové verze se změnila z "MMMM/dd/yyyy" na "dd/MM/yyyy".<br>* <xref:System.Globalization.DateTimeFormatInfo.PMDesignator>: Odp. označení Afrikánština (Jižní Afrika) (af-ZA) jazykové verze se změnila z "nm" na "Odp.". | Všimněte si změny názvu jazykové verze. |
| **Parametr LCID** | Pro zajištění konzistence s očekávané chování v nastavení serveru automatizace, modul CLR už předá aktuální jazykovou verzi `LCID` parametr nespravované aplikace založené na modelu COM. Místo toho předává 1033 (en-us) pro jazykovou verzi. | Žádné úpravy nezbytné s výjimkou nativní aplikace, které vyžadují zadané jazykové verze. |
| **Jazyková verze zastaralé typy** | <xref:System.Globalization.CultureTypes> a <xref:System.Globalization.CultureTypes> jazykovou verzi typy jsou nyní zastaralé.<br><br>Z důvodu zpětné kompatibility <xref:System.Globalization.CultureTypes> nyní vrací neutrální a specifické jazykové verze, které byly součástí předchozích rozhraní .NET Framework, a <xref:System.Globalization.CultureTypes> nyní vrací prázdný seznam. | Použijte jiné hodnoty <xref:System.Globalization.CultureTypes> výčtu. |
| **Při načítání jazykové verze** | Od verze Windows 7, rozhraní .NET Framework 4 načte informace o jazykové verzi operačního systému místo uložení vlastní data. Kromě toho rozhraní .NET Framework synchronizuje s Windows pro řazení a porovnávání velikostí písmen data. | Žádné |
| **Standardy kódování Unicode 5.1** | Rozhraní .NET Framework nyní podporuje všechny znaky Unicode 5.1 – doplněk přibližně 1400 znaků. Další znaky zahrnují nových symbolů, šipky, diakritiky, interpunkční znaménka, matematické symboly, znaky CJK a ideografickými znaky, další malajálamština a telugština číselné znaky a různé Myanmar, latinka, arabština, řečtina, Mongolština a cyrilice znaky. Jsou podporovány následující nové skripty Unicode 5.1: Sundánské písmo lepčské písmo, Ol Chiki, písmo Vai, Saurashtra, Kayah Li, Rejang, Gurmukhi, Udijština, Tamilské, telugština, malajálamština znaky a a Cham. | Žádné |

### <a name="exceptions"></a>Výjimky

Obory názvů: <xref:System>, <xref:System.Runtime.ExceptionServices>; sestavení: mscorlib (v knihovně mscorlib.dll)

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **Výjimky pro poškozený stav procesu** | Výjimky pro poškozený stav procesu CLR již poskytuje obslužné rutiny výjimek ve spravovaném kódu. | Tyto výjimky signalizují, že byla poškozena stav procesu. Nedoporučujeme spouštět aplikace v tomto stavu.<br><br>Další informace najdete v tématu <xref:System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute> a položka [zpracování výjimek poškozený stav](https://go.microsoft.com/fwlink/?LinkID=179681) blog in the uvnitř mimo CLR. |
| **Zpracování výjimek modulu** | <xref:System.ExecutionEngineException> je zastaralá, protože zachytitelné výjimky vám umožní nestabilní procesu nadále spouštět. Tato změna zvyšuje předvídatelnost a spolehlivostí v modulu runtime. | Použití <xref:System.InvalidOperationException> který signalizuje, že podmínka. |

### <a name="reflection"></a>Reflexe

Namespace: <xref:System.Reflection>; sestavení: mscorlib (v knihovně mscorlib.dll)

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **Algoritmy hash sestavení** | <xref:System.Reflection.AssemblyName.HashAlgorithm> Vlastnosti nyní vrátí <xref:System.Configuration.Assemblies.AssemblyHashAlgorithm>, protože modul runtime neví hashovacího algoritmu sestavení odkazované sestavení není načteno. (To se vztahuje na použití vlastnosti v odkazovaném sestavení vrácený rutinou <xref:System.Reflection.Assembly.GetReferencedAssemblies%2A> metoda.) | Žádné |
| **Načítání sestavení** | Aby se zabránilo nadbytečné načítání sestavení a uložíte virtuální adresní prostor, CLR se teď načte sestavení pomocí pouze Win32 `MapViewOfFile` funkce. Volá už také `LoadLibrary` funkce.<br><br>Tato změna ovlivní diagnostiky aplikace následujícími způsoby:<br><br>* A <xref:System.Diagnostics.ProcessModuleCollection> již nemusí obsahovat všechny moduly, které z knihovny tříd (soubor .dll), získaný z volání `Process.GetCurrentProcess().Modules`.<br>* Win32 – aplikace, které používají `EnumProcessModules` funkce se nezobrazí všechny spravované moduly, které jsou uvedené. | Žádné |
| **Deklarující typ** | <xref:System.Type.DeclaringType> Vlastnost nyní správně vrací hodnotu null typu nemá deklarujícího typu. | Žádné |
| **Delegáty** | Nyní vyvolá delegáta <xref:System.ArgumentNullException> místo <xref:System.NullReferenceException> při hodnotu null je předán konstruktoru delegáta. | Ujistěte se, že jakékoli zpracování výjimky zachytí <xref:System.ArgumentNullException>. |
| **Změna umístění mezipaměti globálního sestavení** | Pro sestavení rozhraní .NET Framework 4 byl přesunut do globální mezipaměti sestavení v adresáři Windows (% WINDIR %) do podadresáře Microsoft.Net (*% WINDIR %\\Microsoft.Net*). Sestavení ze starší verze, zůstanou v adresáři starší.<br><br>Nespravovanou [ASM_CACHE_FLAGS](../unmanaged-api/fusion/asm-cache-flags-enumeration.md) výčet obsahuje nové `ASM_CACHE_ROOT_EX` příznak. Tento příznak získá umístění mezipaměti pro sestavení rozhraní .NET Framework 4, které je možné získat [GetCachePath](../unmanaged-api/fusion/getcachepath-function.md) funkce. | Žádné, za předpokladu, že aplikace nepoužívejte explicitní cesty k sestavením, která není doporučený postup. |
| **Nástroj globální mezipaměti sestavení** | [Gacutil.exe (Global Assembly Cache Tool)](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ex0ss12c%28v=vs.100%29) už podporuje modul plug-in prohlížeče prostředí. | Žádné |

### <a name="interoperability"></a>Interoperabilita

Namespace: <xref:System.Runtime.InteropServices>; sestavení: mscorlib (v knihovně mscorlib.dll)

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **Délka vyrovnávací paměti** (nespravovaného rozhraní API) | Uložte paměť, funkce pro `pBufferLengthOffset` parametr pro [ICorProfilerInfo2::GetStringLayout](../unmanaged-api/profiling/icorprofilerinfo2-getstringlayout-method.md) metoda byla změněna tak, aby odpovídaly `pStringLengthOffset` parametru. Oba parametry, které jsou nyní směřují ke posunu umístění délku řetězce. Délka vyrovnávací paměti byla odebrána z reprezentace třída string. | Odeberte závislost na velikost vyrovnávací paměti. |
| **Ladění JIT** | Pro zjednodušení registrace pro ladění just-in-time (JIT), ladicí program rozhraní .NET Framework teď používá jenom AeDebug klíči registru, které řídí chování pro nativní kód ladění za běhu. Tato změna způsobí následující:<br><br>* Je už můžete zaregistrovat dva rozdílné ladicí programy pro spravovaný a nativní kód.<br>* Můžete už spustit ladicí program automaticky pro neinteraktivního procesu, ale může vyzvat uživatele k interaktivní proces.<br>* Budete už upozorněni, když ladicí program se nepodaří spustit, nebo když neexistuje žádné registrované ladicí program, který by měl být spuštěn.<br>* Automaticky spouštět zásady, které jsou závislé na interakce aplikace se už nepodporují. | Operace ladění podle potřeby upravte. |
| **Vyvolání platformy** | Kvůli zvýšení výkonu v vzájemná funkční spolupráce s nespravovaným kódem se správné konvence volání na platformě vyvolat nyní způsobí selhání aplikace. V předchozích verzích zařazování vrstvy vyřešit tyto chyby zásobníkem. | Ladění aplikací v sadě Microsoft Visual Studio vás upozorní na tyto chyby, můžete je vyřešit.<br><br>Pokud máte binární soubory, které se nedá aktualizovat, můžete zahrnout [ \<netfx40_pinvokestackresilience – >](../configure-apps/file-schema/runtime/netfx40-pinvokestackresilience-element.md) element v konfiguračním souboru aplikace umožňující volání chyby vyřešit zásobníkem jako v starší verze. Nicméně to může mít vliv výkon vaší aplikace. |
| **Odebrat rozhraní** (nespravovaného rozhraní API) | Aby nedocházelo k záměně pro vývojáře, byla odebrána následující rozhraní, protože se neposkytl žádné vhodné scénáře za běhu, a CLR neposkytl ani přijmout implementacemi:<br><br>* **INativeImageINativeImageDependency**<br>* **INativeImageInstallInfo**<br>* **INativeImageEvaluate**<br>* **INativeImageConverter**<br>* **ICorModule**<br>* **IMetaDataConverter** | Žádné |

## <a name="data"></a>Data

Tato část popisuje problémy s migrací pomocí datových sad a klienti SQL, Entity Framework LINQ to SQL a datové servery WCF (dříve označované jako služby ADO.NET Data Services).

### <a name="dataset-and-sql-client"></a>Datové sady a klient SQL

Následující tabulka popisuje vylepšení funkcí, které dříve měly omezení nebo jiné problémy.

Obory názvů: <xref:System.Data>, <xref:System.Data.Objects.DataClasses>, <xref:System.Data.SqlClient>; sestavení: System.Data (v System.Data.dll), System.Data.Entity (v knihovně System.Data.Entity.dll)

| Funkce | Rozdíl oproti 3.5 SP1 |
| ------- | ------------------------ |
| **Objektů POCO scénáře** | <xref:System.Data.Objects.DataClasses.IRelatedEnd> Rozhraní poskytuje nové způsoby lepší použitelnost ve scénářích prostý staré CLR objektů POCO. Tyto nové metody přijímají <xref:System.Object> místo <xref:System.Data.Objects.DataClasses.IEntityWithRelationships> entity jako parametr. |
| **Úprava řádků** | <xref:System.Collections.IList.IndexOf%2A> Způsob, jak je implementované <xref:System.Data.DataView> třídy, nyní správně vrací hodnotu v řádku, který se právě upravuje, místo hodnoty -1. |
| **Události** | <xref:System.Data.DataRowView.PropertyChanged> Událost je nyní vyvolá, když je řádek v změny stavu a <xref:System.Data.DataRow.RejectChanges%2A> metoda je volána. Tato změna usnadňuje vytvoření ovládacích prvků uživatelského rozhraní, které zpřístupní obsah <xref:System.Data.DataSet> objektu. |
| **Výjimky** | <xref:System.Data.SqlClient.SqlCommand.Prepare%2A> Nyní vyvolá metodu <xref:System.InvalidOperationException> při připojení není nastavena nebo je otevřít místo <xref:System.NullReferenceException>. |
| **Zobrazení mapování** | Chyby mapování zobrazení dotazu se nyní zachycena v době návrhu namísto vyvolání <xref:System.NullReferenceException> v době běhu.<br><br>Mapování ověření teď zachytí chyby, které vložíte dvě sady v Konceptuální schéma (CSDL) jsou namapovány na stejný sloupec. |
| **Transakce** | Pokud se aplikace pokusí po dokončení transakce (včetně bylo přerušeno nebo souhrn zpět), provedení příkazu na připojení <xref:System.InvalidOperationException> nyní je vyvolána výjimka. Předchozí verze není vyvolání výjimky a umožňují spustit další příkazy i v případě, že transakce byla přerušena. |

### <a name="entity-framework"></a>Entity Framework

Následující tabulka popisuje vylepšení funkcí, které dříve měly omezení nebo jiné problémy.

Obory názvů: <xref:System.Data>, <xref:System.Data.Objects>, <xref:System.Data.Objects.DataClasses>; sestavení: System.Data.Entity (v knihovně System.Data.Entity.dll)

| Funkce | Rozdíl oproti 3.5 SP1 |
| ------- | ------------------------ |
| **Objekty entity** | Rozdíly mezi už <xref:System.Data.Objects.ObjectContext.Detach%2A> metoda a stavu entity objektu při <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> metoda je volána. Tato vylepšená konzistence zabraňuje neočekávané výjimky z je vyvolána výjimka. |
| **Entity SQL** | Byly vylepšeny pravidla pro rozlišení identifikátoru v Entity SQL.<br><br>Analyzátor Entity SQL vylepšili logiku pro řešení s více částmi. identifikátory. |
| **Strukturální poznámky** | Rozhraní Entity Framework rozpoznává nyní strukturální poznámky. |
| **Dotazy** | V dotazech byly provedeny následující vylepšení:<br><br>* A `GroupBy` dotazu pomocí nulového klíče přes prázdnou kolekci nebudou nalezeny žádné řádky, bez ohledu na to pokud neexistují žádné další vybere v dotazu.<br>* Ve výchozím nastavení dotazy SQL vygenerované v LINQ a Entity SQL nyní zpracovávají parametry řetězců jako hodnoty kódování Unicode. |

### <a name="linq-to-sql"></a>Technologie LINQ to SQL

Následující tabulka popisuje vylepšení funkcí, které dříve měly omezení nebo jiné problémy.

Namespace: <xref:System.Data.Linq>; sestavení: System.Data.Linq (v knihovně System.Data.Linq.dll)

| Funkce | Rozdíl oproti 3.5 SP1 |
| ------- | ------------------------ |
| **Události** | A <xref:System.Data.Linq.EntitySet%601> vyvolá nyní kolekce <xref:System.Data.Linq.EntitySet%601.ListChanged> pro přidání a odstranění operací, pokud <xref:System.Data.Linq.EntitySet%601> je uvolněna, kromě vyvolání události při načtení kolekce. |
| **Dotazy** | `Skip(0)` je již ignorován v technologii LINQ dotazy SQL. Dotazy, které mají tuto metodu v důsledku toho může chovat jinak. V některých případech, například `OrderBy` je požadován spolu s klauzulí `Skip(0)`, a dotaz se vyvolají <xref:System.NotSupportedException> výjimka pokud `OrderBy` klauzule není zahrnutý. |

### <a name="wcf-data-services"></a>WCF Data Services

Následující tabulka popisuje vylepšení funkcí, které dříve měly omezení nebo jiné problémy.

Obory názvů: <xref:System.Data.Services>, <xref:System.Data.Services.Client>, <xref:System.Data.Services.Common>, <xref:System.Data.Services.Providers>; sestavení: System.Data.Services (v knihovně System.Data.Services.dll), System.Data.Services.Client (v knihovně System.Data.Services.Client.dll)

| Funkce | Rozdíl oproti 3.5 SP1 |
| ------- | ------------------------ |
| **Dávkové binární obsah** | Služby WCF Data Services nyní podporuje dávkové binární obsah v žádosti a odpovědi. |
| **Změna zachycovacích dotazů** | Změna zachycovacích dotazů jsou nyní provést pro žádost o odstranění.<br><br>Změna zachycování je metoda, která se spustí při každém přijetí požadavku serverem upravit entity v sadě entit. Spustí se před provedením příchozího požadavku. Změna zachycování poskytuje přístup k entity, která mění a operace, která se provádí na něm. |
| **Výjimky** | Následující podmínky, vyvolají další užitečné výjimky namísto <xref:System.NullReferenceException>:<br><br>* A <xref:System.ServiceProcess.TimeoutException> při volání datové služby vyprší časový limit.<br>* A <xref:System.Data.Services.Client.DataServiceRequestException> při provedení chybné žádosti datové služby.<br><br>Ve svých aplikacích měli byste změnit zpracování výjimek pro zachycení nové výjimky. |
| **Záhlaví** | Hlavičky byly provedeny následující vylepšení:<br><br>* WCF Data Services nyní správně odmítne `eTag` hlavičku, která má neurčené hodnotu.<br>* WCF Data Services nyní vrátí chybu a nespustí žádost pro žádost o odstranění propojení při `if-*` záhlaví je v požadavku.<br>* WCF Data Services nyní vrátí chybu do klienta ve formátu (Atom, JSON), který klienta zadaná v hlavičce Accept. |
| **JSON Reader** | Čtečky JavaScript Object Notation (JSON) nyní správně vrátí chybu při čtení jedno zpětné lomítko ("\\") řídicí znak, při zpracování datové části JSON odeslán na službu WCF Data Service. |
| **Sloučení** | Byly provedeny následující vylepšení <xref:System.Data.Services.Client.MergeOption> výčtu:<br><br>* Tím <xref:System.Data.Services.Client.MergeOption> možnost sloučení už upraví entita na straně klienta při následné odpověď od datové služby.<br>* Tím <xref:System.Data.Services.Client.MergeOption> možnost je teď konzistentní mezi dynamické SQL a uložené procedury aktualizace. |
| **Požadavky** | <xref:System.Data.Services.DataService%601.OnStartProcessingRequest%2A> Před zpracováním žádosti do datové služby je nyní volána metoda. To umožňuje žádost o fungovat správně při použití <xref:System.Data.Services.Providers.ServiceOperation> služby. |
| **Datové proudy** | Služby WCF Data Services již zavře základní stream pro operace čtení a zápisu. |
| **Identifikátory URI** | Úniku identifikátorů URI pomocí klienta WCF Data Services Chyba byla opravena. |

## <a name="windows-communication-foundation-wcf"></a>Windows Communication Foundation (WCF)

Následující tabulka popisuje vylepšení funkcí, které dříve měly omezení nebo jiné problémy.

| Funkce | Rozdíl oproti 3.5 SP1 |
| ------- | ------------------------ |
| **Konfigurační soubory** | Pokud chcete povolit dědičnosti chování prostřednictvím hierarchie konfiguračního souboru, WCF teď podporuje sloučení v konfiguračních souborech.<br><br>Konfigurační model dědičnosti rozbalen teď umožňuje uživatelům definovat chování, které se použijí pro všechny služby, které jsou spuštěny v počítači.<br><br>Změny chování může dojít, pokud existují chování na různých úrovních v hierarchii se stejným názvem. |
| **Služby hostování** | Už můžete zadat `<serviceHostingEnvironment>` element konfigurace na úrovni služby tak, že přidáte atribut `allowDefinition="MachineToApplication"` do definice prvku.<br><br>Zadání `<serviceHostingEnvironment>` element na úrovni služby, je technicky nesprávné a povede k nekonzistentnímu chování. |

## <a name="windows-presentation-foundation-wpf"></a>Windows Presentation Foundation (WPF)

### <a name="applications"></a>Aplikace

Obory názvů: <xref:System.Windows>, <xref:System.Windows.Controls>; sestavení: PresentationFramework (v knihovně PresentationFramework.dll)

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **Zpracování výjimek** | Povolit chyby zjistit dříve, vyvolá WPF <xref:System.Reflection.TargetInvocationException> a nastaví <xref:System.Exception.InnerException> vlastnost kritické výjimky, například <xref:System.NullReferenceException>, <xref:System.OutOfMemoryException>, <xref:System.StackOverflowException>, a <xref:System.Security.SecurityException>, namísto původní výjimku. | Žádné |
| **Propojené prostředky** | Aby propojení prostředků jednodušší, soubory (jako jsou obrázky), které se nacházejí v umístění než strukturu složek projektu použít úplnou cestu souboru prostředků místo pouhého názvu souboru jako ID prostředku když je aplikace sestavená. Aplikace se nebude moci najít soubory v době běhu. | Žádné |
| **Aplikace s částečným vztahem důvěryhodnosti** | Požadavky na zabezpečení, aplikace pro systém Windows, na kterých běží v režimu částečné důvěryhodnosti a obsahující <xref:System.Windows.Controls.WebBrowser> ovládací prvek nebo <xref:System.Windows.Controls.Frame> vyvolá výjimku ovládací prvek, který obsahuje kód HTML <xref:System.Security.SecurityException> při vytvoření ovládacího prvku.<br><br>Aplikace prohlížeče se vyvolat výjimku a zobrazit zprávu, pokud jsou splněny všechny následující podmínky:<br><br>* Aplikace běží v aplikaci Firefox.<br>* Aplikace běží v částečném vztahu důvěryhodnosti v zóně Internet z jiných důvěryhodných lokalit.<br>* Aplikace obsahuje <xref:System.Windows.Controls.WebBrowser> ovládací prvek nebo <xref:System.Windows.Controls.Frame> ovládací prvek, který obsahuje kód HTML.<br><br>Všimněte si, že to nebude mít vliv spouštěné z důvěryhodných webů nebo ze zóny intranetu. | V aplikacích prohlížeče můžete tuto změnu zmírnit provedením jedné z následujících akcí:<br><br>* Spustíte aplikaci prohlížeče v režimu plné důvěryhodnosti.<br>* Mají zákazníci přidat aplikace do zóny důvěryhodných serverů.<br>* Mají zákazníci spouštět aplikace v aplikaci Internet Explorer. |
| **Slovníky sloučených prostředků** | Zvýšit úroveň motiv zdrojových slovnících a zabránit ve změně, freezable – prostředky, které jsou definované ve slovníku prostředků a jejich sloučení do slovníku motiv úrovni jsou teď vždy označené jako zmrazené a jsou neměnné. Toto je očekávané chování u zablokovatelných prostředky. | Aplikace, které upravit prostředek, který je definován v úrovni motiv sloučeného slovníku by měl klonovat zdroj a upravit klonované kopie. Alternativně je možné označit prostředek `x:Shared="false"` tak, aby <xref:System.Windows.ResourceDictionary> vytvoří novou kopii pokaždé, když je dotazován prostředku. |
| **Windows 7** | Chcete-li aplikace WPF ve Windows 7, fungují lépe, byly provedeny následující vylepšení oprava chování okna:<br><br>* Ukotvit ovládání a ovládání gesty stavy nyní pracují jako očekávané na základě uživatelské interakce.<br>* Příkazy na hlavním panelu **sebe, Zobrazit okna skládaný**, a **zobrazit okna vedle sebe** Teď máte správné chování a aktualizujte příslušné vlastnosti.<br>* Tím `Top`, `Left`, `Width`, a `Height` vlastnosti pro minimalizované nebo maximalizované okno nyní obsahovat správné obnovení umístění okna místo jiné hodnoty, v závislosti na monitorování. | Žádné |
| **Styl Windows a transparentnost** | <xref:System.InvalidOperationException> Je vyvolána, pokud se pokusíte nastavit <xref:System.Windows.Window.WindowStyle> hodnotu jinou než <xref:System.Windows.WindowStyle> při <xref:System.Windows.Window.AllowsTransparency> je `true` a <xref:System.Windows.WindowState> je <xref:System.Windows.WindowState>. | Pokud potřebujete změnit <xref:System.Windows.Window.WindowStyle> při <xref:System.Windows.Window.AllowsTransparency> je `true`, můžete volat rozhraní Win32 `SetWindowLongPtr` funkce. |
| **Prohlížeč XPS** | WPF nezahrnuje Microsoft XML Paper specifikace Essentials aktualizací Service Pack (XPSEP). XPSEP je součástí systému Windows 7 a Windows Vista.<br><br>Na počítači se systémem Windows XP bez nainstalované rozhraní .NET Framework 3.5 SP1, tisk pomocí rozhraní API WPF než ty, které v <xref:System.Windows.Controls.PrintDialog> spoléhat na WINSPOOL. Nebudou hlášeny některé možnosti tiskárny a některá nastavení tiskárny se nepoužijí při tisku. | V případě potřeby nainstalujte [Microsoft XML Paper Specification Essentials Pack](https://go.microsoft.com/fwlink/?LinkId=178895). |

### <a name="controls"></a>Ovládací prvky

Obory názvů: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; sestavení: PresentationFramework (v knihovně PresentationFramework.dll), PresentationCore (v PresentationCore.dll), WindowsBase (v knihovně WindowsBase.dll)

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **Dialogová okna** | Kvůli vyšší spolehlivosti <xref:Microsoft.Win32.CommonDialog.ShowDialog%2A> metoda je volána ve stejném vlákně, kterou vytvořili <xref:Microsoft.Win32.FileDialog> ovládacího prvku. | Je potřeba vytvořit <xref:Microsoft.Win32.FileDialog> řídit a volat <xref:Microsoft.Win32.CommonDialog.ShowDialog%2A> metoda ve stejném vlákně. |
| **Plovoucí okna** | Chcete-li vyřešit detailní obnovení logiku, která udržuje nesprávně opětovná aktivace plovoucí okno (takže se zobrazí jako modální dialogové okno), detailní obnovení teď předchází Pokud kandidát není podřízená položka okna. | Žádné |
| **Položky v kolekcích** | Při přesunutí nebo přidat do zdrojové kolekce položky se zobrazí v <xref:System.Windows.Data.CollectionView> ve stejné relativní umístění v Pokud <xref:System.Windows.Data.CollectionView> není seřazen. To poskytuje konzistenci mezi pozici položky v kolekci a v souvisejících <xref:System.Windows.Data.CollectionView>. | Použití <xref:System.Windows.Controls.ItemContainerGenerator.ContainerFromItem%2A> nebo <xref:System.Windows.Data.CollectionView.IndexOf%2A> metody k vyhledání umístění položky v <xref:System.Windows.Data.CollectionView> aniž byste museli spoléhat na pevné umístění položky. |
| **Rozložení** | Eliminovat zbytečné opětovné rozložení, změna <xref:System.Windows.Controls.Page.ShowsNavigationUI> už zruší platnost rozložení nebo způsobí jiný předání rozložení. | Pokud očekáváte, že změna <xref:System.Windows.Controls.Page.ShowsNavigationUI> způsobí, že jiné rozložení předat, zavolejte <xref:System.Windows.UIElement.InvalidateVisual%2A> po nastavení vlastnosti. |
| **Nabídky** | Povolit ClearType textu v nabídce automaticky otevíraná okna, byly provedeny změny <xref:System.Windows.Controls.ControlTemplate> třídy a <xref:System.Windows.Controls.MenuItem> řízení a další ovládací prvky. | Aplikace, neměli byste tedy spoléhat na vizuální struktury šablon ovládacích prvků. Pouze s názvem částí <xref:System.Windows.Controls.ControlTemplate> jsou součástí veřejného kontraktu. Pokud aplikace potřebuje najít objekt v <xref:System.Windows.Controls.ControlTemplate>, vyhledání ve vizuálním stromu pro konkrétní typ, aniž byste museli spoléhat na pevné umístění objektu ve stromové struktuře. |
| **Navigace** | Pokud <xref:System.Windows.Controls.Frame> přímo přejde do umístění, <xref:System.Windows.Navigation.NavigatingCancelEventArgs.IsNavigationInitiator> vlastnost `true` po počáteční navigaci. Tato změna zabraňuje dalších událostí vyvolaných během spuštění scénáře. | Žádné |
| **Automaticky otevíraná okna** | <xref:System.Windows.Controls.Primitives.CustomPopupPlacementCallback> Delegáta teď může být volána více než jednou při předání rozložení namísto pouze jednou. | Pokud vaše <xref:System.Windows.Controls.Primitives.CustomPopupPlacementCallback> delegáta vypočítá pozice <xref:System.Windows.Controls.Primitives.Popup> založené na jeho předchozí umístění, Přepočítat pozice, pouze pokud hodnoty `popupSize`, `targetSize`, nebo `offset` změnit parametry. |
| **Hodnoty vlastností** | <xref:System.Windows.DependencyObject.SetCurrentValue%2A> Metoda teď umožňuje nastavit vlastnost na platnou hodnotu, i když bude selhávat i nadále respektuje všechny vazby, styl nebo aktivační událost, která má vliv na vlastnost. | Ovládací prvek autoři by měli používat <xref:System.Windows.DependencyObject.SetCurrentValue%2A> pokaždé, když se změní hodnota vlastnosti jako vedlejší efekt nějakou jinou akci, včetně manipulace uživatele. |
| **Textová pole** | Požadavky na zabezpečení <xref:System.Windows.Forms.TextBoxBase.Copy%2A> a <xref:System.Windows.Forms.TextBoxBase.Cut%2A> metody tiše skončit neúspěchem, pokud jsou volány v částečném vztahu důvěryhodnosti.<br><br>Kromě toho programové spuštění <xref:System.Windows.Input.ApplicationCommands.Copy> nebo <xref:System.Windows.Input.ApplicationCommands.Cut> vlastnost na ovládací prvek, který dědí z <xref:System.Windows.Controls.Primitives.TextBoxBase> zablokuje v částečném vztahu důvěryhodnosti. Ale uživatelem iniciované kopírování a vyjmutí příkazy, jako je kliknutí na tlačítko jehož <xref:System.Windows.Controls.Primitives.ButtonBase.Command> vlastnost je vázána na jednoho z těchto příkazů, bude fungovat. Standardní kopie a vyjmutí pomocí klávesové zkratky a v místní nabídce budou i nadále fungovat jako předtím v částečném vztahu důvěryhodnosti. | Vytvoření vazby <xref:System.Windows.Input.ApplicationCommands.Copy> nebo <xref:System.Windows.Input.ApplicationCommands.Cut> příkaz uživatelem iniciované akce, jako je kliknutí na tlačítko. |

### <a name="graphics"></a>Grafika

Obory názvů: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>, <xref:System.Windows.Media.Effects>; sestavení: PresentationFramework (v knihovně PresentationFramework.dll), PresentationCore (v PresentationCore.dll), WindowsBase (v knihovně WindowsBase.dll)

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **Bitmapové efekty** | Kvůli zvýšení výkonu, <xref:System.Windows.Media.Effects.BitmapEffect> třídy a třídy, které dědí <xref:System.Windows.Media.Effects.BitmapEffect> třídy, ale stále k dispozici, jsou zakázané. Účinek se vykreslit pomocí kanálu hardwarově urychlené vykreslování, pokud jsou splněny následující podmínky:<br><br>* Aplikace používá <xref:System.Windows.Media.Effects.DropShadowBitmapEffect> nebo <xref:System.Windows.Media.Effects.BlurBitmapEffect> , že má radius set pro vlastnost DIÚ kratší než 100.<br>* Grafické karty na počítači, na kterém běží aplikace podporuje pixel shaderu 2.0.<br><br>Nejsou-li tyto podmínky splněny, <xref:System.Windows.Media.Effects.BitmapEffect> objekt nebude mít žádný efekt.<br><br>Také, Visual Studio vytvoří upozornění kompilátoru při narazí <xref:System.Windows.Media.Effects.BitmapEffect> objektu nebo podtřídou.<br><br><xref:System.Windows.Media.DrawingContext.PushEffect%2A> Metoda je označena jako zastaralá. | Můžete přestat používat starší <xref:System.Windows.Media.Effects.BitmapEffect> a odvozené třídy a místo toho použít nové třídy odvozené od <xref:System.Windows.Media.Effects.Effect>: <xref:System.Windows.Media.Effects.BlurEffect>, <xref:System.Windows.Media.Effects.DropShadowEffect>, a <xref:System.Windows.Media.Effects.ShaderEffect>.<br><br>Můžete také vytvořit vlastní efekty děděním z <xref:System.Windows.Media.Effects.ShaderEffect> třídy. |
| **Rastrový obrázek rámce** | Klonované <xref:System.Windows.Media.Imaging.BitmapFrame> nyní obdrží objekty <xref:System.Windows.Media.Imaging.BitmapSource.DownloadProgress>, <xref:System.Windows.Media.Imaging.BitmapSource.DownloadCompleted>, a <xref:System.Windows.Media.Imaging.BitmapSource.DownloadFailed> události. To umožňuje bitové kopie, které budou staženy z webu a implementovány do <xref:System.Windows.Controls.Image> řídit prostřednictvím <xref:System.Windows.Style> fungovat správně.<br><br>Změny v chování se zobrazí jenom v případě, že jsou splněny všechny následující příkazy:<br><br>* Přihlásíte k odběru <xref:System.Windows.Media.Imaging.BitmapSource.DownloadProgress>, <xref:System.Windows.Media.Imaging.BitmapSource.DownloadCompleted>, nebo <xref:System.Windows.Media.Imaging.BitmapSource.DownloadFailed> událostí.<br>* Zdroj <xref:System.Windows.Media.Imaging.BitmapFrame> je z webu.<br>* Tím <xref:System.Windows.Media.Imaging.BitmapFrame> naklonování při stahování stále probíhá. | Zkontrolujte odesílatele v obslužné rutině události a provést akci pouze v případě, že odesílatel je původní <xref:System.Windows.Media.Imaging.BitmapFrame>. |
| **Dekódování obrázků** | Aby se zabránilo <xref:System.IO.IOException> zpracován, když nemůže dekódovat imagí, <xref:System.Windows.Media.Imaging.BitmapSource> třída vyvolá <xref:System.Windows.Media.Imaging.BitmapSource.DecodeFailed> událost, když se nedá dekódovat bitovou kopii. | Odebrat všechna zpracování výjimek pro <xref:System.IO.IOException>a použít <xref:System.Windows.Media.Imaging.BitmapSource.DecodeFailed> selhání dekódování událostí ke kontrole. |

### <a name="input"></a>Vstup

Obory názvů: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; sestavení: PresentationFramework (v knihovně PresentationFramework.dll), PresentationCore (v PresentationCore.dll), WindowsBase (v knihovně WindowsBase.dll)

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **Instance příkazu vazeb** | Mechanismus k vytvoření vazby instancí na základě zobrazení modelu příkazu vstupní gesta zobrazení založená <xref:System.Windows.Input.InputBinding> třída nyní dědí z <xref:System.Windows.Freezable> místo <xref:System.Windows.DependencyObject>. Vlastnosti závislosti jsou teď následující vlastnosti:<br><br>* <xref:System.Windows.Input.InputBinding.Command><br>* <xref:System.Windows.Input.InputBinding.CommandParameter><br>* <xref:System.Windows.Input.InputBinding.CommandTarget><br><br>Tato změna způsobí následující:<br><br>* K <xref:System.Windows.Input.InputBinding> objektu je zmrazen teď po registraci místo zbývající mutable.<br>* Nelze získat přístup na úrovni instance <xref:System.Windows.Input.InputBinding> objektů z více vláken, z důvodu omezení <xref:System.Windows.DependencyObject> třídy.<br>* Nelze mutovat vstupní vazby na úrovni třídy po jejich registraci, a to z důvodu omezení <xref:System.Windows.Freezable> třídy.<br>* Vstupní vazby nelze zadat v příkazu instance, které jsou vytvořené v modelu zobrazení. | Vytvoření samostatných instancí <xref:System.Windows.Input.InputBinding> třídy v samostatných vláknech vazby jsou-li být proměnlivá, nebo je jinak ukotvit. Neprovádějte statické třídy úrovni <xref:System.Windows.Input.InputBinding> po registraci. |
| **Aplikace prohlížeče** | Aplikace prohlížeče WPF (. Klíče události procesu XBAP) teď stejně jako samostatné aplikace WPF, tak, aby objekty dostávat směrovaných událostí klíče ve správném pořadí. | Žádné |
| **Kombinace znaménková klávesa.** | WPF zastírá dead klíče, které nevytvářejí viditelné znaky, ale místo toho indikuje, že klíč se zkombinuje s další písmenem vytvoří jeden znak. Klíč vstupní události, například <xref:System.Windows.Input.Keyboard.KeyDownEvent> událost, sestavě, když je klíč znaménková klávesa. nastavením <xref:System.Windows.Input.KeyEventArgs.Key> vlastnost <xref:System.Windows.Input.Key> hodnotu. To je obvykle očekávané chování, protože aplikace obvykle nemáte v úmyslu reagovat na vstup z klávesnice, který vytvoří kombinovaných znaků. | Aplikace, které očekávají čtení klíče, které byly součástí kombinovaných znaků můžete získat pomocí nyní zastaralý klíč <xref:System.Windows.Input.KeyEventArgs.DeadCharProcessedKey> vlastnost. |
| **Správce aktivace** | Když <xref:System.Windows.Input.FocusManager.GetFocusedElement(System.Windows.DependencyObject)?displayProperty=nameWithType> metodě je předána element, který má [IsFocusScope](xref:System.Windows.Input.FocusManager.IsFocusScope%2A) přidružená vlastnost nastavena na `true`, metoda vrátí element, který je posledním prvkem klávesnice fokus v daném oboru fokus, pokud a pouze v případě Vrátí element patří do stejné <xref:System.Windows.PresentationSource> objektu jako element, který je předán metodě. | Žádné |

### <a name="ui-automation"></a>automatizace uživatelského rozhraní

Namespace: <xref:System.Windows>, <xref:System.Windows.Automation.Peers>, <xref:System.Windows.Automation.Provider>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; sestavení: PresentationFramework (in PresentationFramework.dll), PresentationCore (in PresentationCore.dll), UIAutomationProvider (in UIAutomationProvider.dll), WindowsBase (in WindowsBase.dll)

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **Hierarchie třídy zobrazení** | <xref:System.Windows.Automation.Peers.TreeViewAutomationPeer> a <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer> třídy dědí <xref:System.Windows.Automation.Peers.ItemsControlAutomationPeer> místo <xref:System.Windows.Automation.Peers.FrameworkElementAutomationPeer>. | Pokud je zděděn z <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer> třídy a přepsat <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer.GetChildrenCore%2A> metody, zvažte vrácení objektu, která dědí z nové <xref:System.Windows.Automation.Peers.TreeViewDataItemAutomationPeer> třídy. |
| **Kontejnery mimo obrazovku** | Chcete-li vyřešit nesprávnou návratovou hodnotu, <xref:System.Windows.Automation.Peers.UIElementAutomationPeer.IsOffscreenCore%2A> metoda nyní správně vrátí `false` pro kontejnery položek, které jsou posunu mimo zobrazení. Hodnota metody navíc nemá vliv uzavření ostatní okna, nebo zda elementu je viditelný na konkrétní monitorování. | Žádné |
| **Nabídky a podřízené objekty** | Povolení automatizace uživatelského rozhraní nabídek, které obsahují podřízené objekty jiných než <xref:System.Windows.Controls.MenuItem> objekty, <xref:System.Windows.Automation.Peers.MenuItemAutomationPeer.GetChildrenCore%2A> metody nyní vrací <xref:System.Windows.Automation.Peers.AutomationPeer> objektu pro podřízenou položku <xref:System.Windows.UIElement> objektu, namísto <xref:System.Windows.Automation.Peers.MenuItemAutomationPeer> objektu. | Žádné |
| **Nové rozhraní a sestavení** | Pokud chcete povolit nové funkce pro automatizaci uživatelského rozhraní, byly přidány následující rozhraní:<br><br>* <xref:System.Windows.Automation.Provider.IItemContainerProvider><br>* <xref:System.Windows.Automation.Provider.ISynchronizedInputProvider><br>* <xref:System.Windows.Automation.Provider.IVirtualizedItemProvider> | Každý projekt, který vytváří automationpeer WPF, musíte přidat explicitní odkaz na UIAutomationProvider.dll. |
| **Thumbs** | <xref:System.Windows.Automation.Peers.ThumbAutomationPeer.GetClassNameCore%2A> Vrátí metoda hodnotu namísto hodnoty null. Proto se ovládací prvky jako například <xref:System.Windows.Controls.GridSplitter> , která dědí z <xref:System.Windows.Controls.Primitives.Thumb> třídy oznámí název pro automatizaci uživatelského rozhraní. | Žádné |
| **Virtualizované elementy** | Kvůli zvýšení výkonu, <xref:System.Windows.Automation.Peers.UIElementAutomationPeer.GetChildrenCore%2A> metoda vrátí pouze podřízené objekty, které jsou ve skutečnosti ve vizuálním stromu, ne všechny podřízené objekty, bez ohledu na to, zda jsou virtualizované. | Použití <xref:System.Windows.Automation.ItemContainerPattern> k iteraci přes všechny položky <xref:System.Windows.Automation.Peers.ItemsControlAutomationPeer>. |

### <a name="xaml"></a>XAML

Obory názvů: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>, <xref:System.Windows.Markup>; sestavení: PresentationFramework (v knihovně PresentationFramework.dll), PresentationCore (v PresentationCore.dll), WindowsBase (v knihovně WindowsBase.dll)

| Funkce | Rozdíl oproti 3.5 SP1 | Doporučené změny |
| ------- | ------------------------ | ------------------- |
| **Rozšíření značek** | WPF nyní správně vždy používá hodnotu z <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> metoda místo vrácení <xref:System.Windows.Markup.MarkupExtension> objektu v některých případech, kdy rozšíření značek se používá k nastavení vlastnosti nebo k vytvoření položky v kolekci. V některých případech sám může vrátit rozšíření značek. | Pokud vaše aplikace přistupuje k prostředku, který se vrátil <xref:System.Windows.Markup.MarkupExtension> objektu v dřívějších verzích, odkazovat na objekt, který je vrácen z <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>, místo <xref:System.Windows.Markup.MarkupExtension> objektu. |
| **Analýza atributů** | Atributy v XAML teď můžou mít jenom jednu tečku. Například následující jsou platné:<br><br>`<Button Background="Red"/>` (žádné období)<br><br>`<Button Button.Background = "Red"/>` (jednu tečku)<br><br>Následující již není platný:<br><br>`<Button Control.Button.Background = "Red"/>` (více než jednu tečku) | Správné atributy XAML, které mají více než jednu tečku. |

## <a name="xml"></a>XML

Řádky v této tabulce popisují vylepšení funkcí, které dříve měly omezení nebo jiné problémy.

### <a name="schema-and-transforms"></a>Schéma a transformace

Obory názvů: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; sestavení: (V System.Xml.dll) System.Xml, System.Xml.Linq (v knihovně System.Xml.Linq.dll)

| Funkce | Rozdíl oproti 3.5 SP1 |
| ------- | ------------------------ |
| **Schémata Chameleon** | Chcete-li zabránit poškození dat, chameleon schémata jsou nyní klonovat správně při jsou zahrnuty s více schématy.<br><br>Schémata Chameleon schémata, které nemají žádný cílový obor názvů, a když jsou zahrnuty do jiného souboru XSD, trvat na import schématu cílový obor názvů. Často se používají na běžné typy do schématu. |
| **ID funkce** | Soubor XSLT [id funkce](/sql/xquery/functions-on-sequences-id) nyní vrací správnou hodnotu místo null v případě <xref:System.Xml.XmlReader> objekt je předán do XLST vztahuje.<br><br>Pokud uživatel vytvořil <xref:System.Xml.XmlReader> objekt z LINQ na třídy XML pomocí <xref:System.Xml.Linq.XNode.CreateReader%2A> metoda a to <xref:System.Xml.XmlReader> byl předán objekt XSLT, jakékoli instance `id` funkce v souboru XSLT předtím vrátila hodnotu null. Toto není povolená návratová hodnota pro `id` funkce. |
| **Atribut Namespace** | Chcete-li zabránit poškození dat, <xref:System.Xml.XPath.XPathNavigator> objekt nyní vrátí místní název `x:xmlns` atribut správně. |
| **Deklarace Namespace** | <xref:System.Xml.XmlReader> Objektu na dílčí stromu už vytvoří duplicitní obor názvů deklarace v rámci jednoho elementu XML. |
| **Ověřování schématu** | Aby se zabránilo chybné schémat, <xref:System.Xml.Schema.XmlSchemaSet> třída umožňuje schémata XSD se zkompiluje správnou a konzistentní. Tato schémata lze zahrnout jiná schémata; například `A.xsd` může zahrnovat `B.xsd`, což může zahrnovat `C.xsd`. Kompilace jednoho z těchto příčin tento graf závislosti a procházet. |
| **Funkce skriptu** | [Funkce dostupné funkce](https://msdn.microsoft.com/library/ms256124(v=vs.110).aspx) již nesprávně vrací `false` při funkce je ve skutečnosti k dispozici. |
| **Identifikátory URI** | <xref:System.Xml.Linq.XElement.Load%2A> Metody nyní vrací správnou BaseURI v dotazech LINQ. |

### <a name="validation"></a>Ověřování

Obory názvů: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; sestavení: (V System.Xml.dll) System.Xml, System.Xml.Linq (v knihovně System.Xml.Linq.dll)

| Funkce | Rozdíl oproti 3.5 SP1 |
| ------- | ------------------------ |
| **Překladače Namespace** | <xref:System.Xml.XmlReader.ReadContentAs%2A> Metoda už ignoruje <xref:System.Xml.IXmlNamespaceResolver> do něho předaný překladač.<br><br>V předchozích verzích, byla ignorována překladač určený obor názvů a <xref:System.Xml.XmlReader> byla místo toho použita. |
| **Prázdné znaky** | Aby se zabránilo ztrátě dat při vytváření čtecí zařízení, <xref:System.Xml.XmlReader.Create%2A> metoda již neodstraňuje významných mezer.<br><br>Ověření XML rozpozná smíšený obsah režim, ve kterém může být text míchán pomocí kódu XML. Všechny prázdné znaky ve smíšeném režimu, je důležité a by se měly hlásit. |

### <a name="writing"></a>Zápis

Obory názvů: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; sestavení: (V System.Xml.dll) System.Xml, System.Xml.Linq (v knihovně System.Xml.Linq.dll)

| Funkce | Rozdíl oproti 3.5 SP1 |
| ------- | ------------------------ |
| **Odkazy na entity** | Chcete-li zabránit poškození dat, odkazy na entity jsou vytvářeny už dvakrát v atributy ve formátu XML.<br><br>Pokud uživatel se pokusil zapsat entity do `xmlns` atribut nebo do `xml:lang` nebo `xml:space` atribut s použitím <xref:System.Xml.XmlWriter.WriteEntityRef%2A> metoda entita byla převedena na entitu dvakrát ve výstupu, proto došlo k poškození dat. |
| **Zpracování nového řádku** | Chcete-li zabránit poškození dat, <xref:System.Xml.XmlWriter> objekty ohledu <xref:System.Xml.NewLineHandling> možnost. |

## <a name="see-also"></a>Viz také:

### <a name="reference"></a>Odkaz

- [Nové typy a členy v rozhraní .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ff641764%28v=vs.100%29)

### <a name="concepts"></a>Koncepty

- [Příručka k migraci na rozhraní .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ff657133%28v=vs.100%29)
- [Co je nového v rozhraní .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms171868%28v=vs.100%29)
- [Kompatibilita verzí v rozhraní .NET Framework](../../../docs/framework/migration-guide/version-compatibility.md)
- [Migrace řešení Office na rozhraní .NET Framework 4](/visualstudio/vsto/migrating-office-solutions-to-the-dotnet-framework-4-or-later)

### <a name="other-resources"></a>Další zdroje

- [Zastaralé položky v knihovně tříd rozhraní .NET Framework](../whats-new/whats-obsolete.md)
