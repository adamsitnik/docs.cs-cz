---
title: Čítače výkonu a vnitroprocesorové souběžné aplikace
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- performance counters
- performance counters,and in-process side-by-side applications
- performance,.NET Framework applications
- performance monitoring,counters
ms.assetid: 6888f9be-c65b-4b03-a07b-df7ebdee2436
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: c50132be2755119b19e38d94919eb4b0ab28d994
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/28/2019
ms.locfileid: "64614324"
---
# <a name="performance-counters-and-in-process-side-by-side-applications"></a><span data-ttu-id="62051-102">Čítače výkonu a vnitroprocesorové souběžné aplikace</span><span class="sxs-lookup"><span data-stu-id="62051-102">Performance Counters and In-Process Side-By-Side Applications</span></span>
<span data-ttu-id="62051-103">Použití nástroje Sledování výkonu (Perfmon.exe), je možné odlišit od čítače výkonu na základě za běhu.</span><span class="sxs-lookup"><span data-stu-id="62051-103">Using the Performance Monitor (Perfmon.exe), it is possible to differentiate the performance counters on a per-runtime basis.</span></span> <span data-ttu-id="62051-104">Toto téma popisuje změny registru potřebná k povolení této funkce.</span><span class="sxs-lookup"><span data-stu-id="62051-104">This topic describes the registry change needed to enable this functionality.</span></span>  
  
## <a name="the-default-behavior"></a><span data-ttu-id="62051-105">Výchozí chování</span><span class="sxs-lookup"><span data-stu-id="62051-105">The Default Behavior</span></span>  
 <span data-ttu-id="62051-106">Ve výchozím nastavení zobrazí Monitor výkonu čítače výkonu na základě jednotlivých aplikací.</span><span class="sxs-lookup"><span data-stu-id="62051-106">By default, the Performance Monitor displays performance counters on a per-application basis.</span></span> <span data-ttu-id="62051-107">Nicméně existují dva scénáře, ve kterých je to problematické:</span><span class="sxs-lookup"><span data-stu-id="62051-107">However, there are two scenarios in which this is problematic:</span></span>  
  
- <span data-ttu-id="62051-108">Když monitorujete dvě aplikace, které mají stejný název.</span><span class="sxs-lookup"><span data-stu-id="62051-108">When you monitor two applications that have the same name.</span></span> <span data-ttu-id="62051-109">Například, pokud obě aplikace jsou s názvem myapp.exe, zobrazí se některá jako **myapp** a ostatní jako **myapp č. 1** v **Instance** sloupce.</span><span class="sxs-lookup"><span data-stu-id="62051-109">For example, if both applications are named myapp.exe, one will be displayed as **myapp** and the other as **myapp#1** in the **Instance** column.</span></span> <span data-ttu-id="62051-110">V takovém případě je tak, aby odpovídaly čítače výkonu ke konkrétní aplikaci.</span><span class="sxs-lookup"><span data-stu-id="62051-110">In this case, it is difficult to match a performance counter to a particular application.</span></span> <span data-ttu-id="62051-111">Není jasné, jestli se data shromažďována pro **myapp č. 1** odkazuje na první myapp.exe nebo druhý myapp.exe.</span><span class="sxs-lookup"><span data-stu-id="62051-111">It is not clear whether the data collected for **myapp#1** refers to the first myapp.exe or the second myapp.exe.</span></span>  
  
- <span data-ttu-id="62051-112">Pokud aplikace používá více instancí modulu common language runtime.</span><span class="sxs-lookup"><span data-stu-id="62051-112">When an application uses multiple instances of the common language runtime.</span></span> <span data-ttu-id="62051-113">[!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] Podporuje vnitroprocesové vedle sebe scénáře hostingu; to znamená, může jeden proces nebo aplikace načítají více instancí modulu common language runtime.</span><span class="sxs-lookup"><span data-stu-id="62051-113">The [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] supports in-process side-by-side hosting scenarios; that is, a single process or application can load multiple instances of the common language runtime.</span></span> <span data-ttu-id="62051-114">Pokud si jednu aplikaci s názvem myapp.exe zatížení dvě instance modulu runtime, ve výchozím nastavení, budou označeny v **Instance** jako sloupec **myapp** a **myapp č. 1**.</span><span class="sxs-lookup"><span data-stu-id="62051-114">If a single application named myapp.exe loads two runtime instances, by default, they will be designated in the **Instance** column as **myapp** and **myapp#1**.</span></span> <span data-ttu-id="62051-115">V takovém případě není jasné, jestli **myapp** a **myapp č. 1** označovat dvě aplikace se stejným názvem nebo stejnou aplikaci pomocí dvou modulů runtime.</span><span class="sxs-lookup"><span data-stu-id="62051-115">In this case, it is not clear whether **myapp** and **myapp#1** refer to two applications with the same name, or to the same application with two runtimes.</span></span> <span data-ttu-id="62051-116">Pokud více aplikací se stejným názvem načíst různými moduly runtime, je ještě lepší nejednoznačnost.</span><span class="sxs-lookup"><span data-stu-id="62051-116">If multiple applications with the same name load multiple runtimes, the ambiguity is even greater.</span></span>  
  
 <span data-ttu-id="62051-117">Můžete nastavit klíč registru, chcete-li odstranit tuto nejednoznačnost.</span><span class="sxs-lookup"><span data-stu-id="62051-117">You can set a registry key to eliminate this ambiguity.</span></span> <span data-ttu-id="62051-118">U aplikací vyvinutých pomocí [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], tato změna registru přidá identifikátor procesu, za nímž následuje identifikátor instance modulu runtime pro název aplikace **Instance** sloupce.</span><span class="sxs-lookup"><span data-stu-id="62051-118">For applications developed using the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], this registry change adds a process identifier followed by a runtime instance identifier to the application name in the **Instance** column.</span></span> <span data-ttu-id="62051-119">Místo *aplikace* nebo *aplikace*#1, aplikace je nyní označena jako *aplikace*_`p`*processID* \_ `r` *runtimeID* v **Instance** sloupce.</span><span class="sxs-lookup"><span data-stu-id="62051-119">Instead of *application* or *application*#1, the application is now identified as *application*_`p`*processID*\_`r`*runtimeID* in the **Instance** column.</span></span> <span data-ttu-id="62051-120">Pokud aplikace byla vyvinutá pomocí předchozí verze common language runtime, že instance reprezentována jako *aplikace\_*`p`*processID* za předpokladu, že [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] je nainstalována.</span><span class="sxs-lookup"><span data-stu-id="62051-120">If an application was developed using a previous version of the common language runtime, that instance is represented as *application\_*`p`*processID* provided that the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] is installed.</span></span>  
  
## <a name="performance-counters-for-in-process-side-by-side-applications"></a><span data-ttu-id="62051-121">Čítače výkonu pro aplikace vedle sebe v procesu</span><span class="sxs-lookup"><span data-stu-id="62051-121">Performance Counters for In-Process Side-by-Side Applications</span></span>  
 <span data-ttu-id="62051-122">Pro zpracování čítače výkonu pro více common language runtime verze, které jsou hostované v jedné aplikaci, je nutné změnit klíč jednoho registru nastavení, jak je znázorněno v následující tabulce.</span><span class="sxs-lookup"><span data-stu-id="62051-122">To handle performance counters for multiple common language runtime versions that are hosted in a single application, you must change a single registry key setting, as shown in the following table.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="62051-123">Název klíče</span><span class="sxs-lookup"><span data-stu-id="62051-123">Key name</span></span>|<span data-ttu-id="62051-124">HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\\.NETFramework\Performance</span><span class="sxs-lookup"><span data-stu-id="62051-124">HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\\.NETFramework\Performance</span></span>|  
|<span data-ttu-id="62051-125">Název hodnoty</span><span class="sxs-lookup"><span data-stu-id="62051-125">Value name</span></span>|<span data-ttu-id="62051-126">ProcessNameFormat</span><span class="sxs-lookup"><span data-stu-id="62051-126">ProcessNameFormat</span></span>|  
|<span data-ttu-id="62051-127">Typ hodnoty</span><span class="sxs-lookup"><span data-stu-id="62051-127">Value type</span></span>|<span data-ttu-id="62051-128">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="62051-128">REG_DWORD</span></span>|  
|<span data-ttu-id="62051-129">Value</span><span class="sxs-lookup"><span data-stu-id="62051-129">Value</span></span>|<span data-ttu-id="62051-130">1 (0x00000001)</span><span class="sxs-lookup"><span data-stu-id="62051-130">1 (0x00000001)</span></span>|  
  
 <span data-ttu-id="62051-131">Hodnota 0 pro `ProcessNameFormat` označuje, že výchozí chování je povoleno; který je Perfmon.exe zobrazuje čítače výkonu na základě jednotlivých aplikací.</span><span class="sxs-lookup"><span data-stu-id="62051-131">A value of 0 for `ProcessNameFormat` indicates that the default behavior is enabled; that is, Perfmon.exe displays performance counters on a per-application basis.</span></span> <span data-ttu-id="62051-132">Když nastavíte tuto hodnotu na 1, Perfmon.exe umožňuje rozlišit několik verzí aplikace a poskytuje čítače výkonu na základě za běhu.</span><span class="sxs-lookup"><span data-stu-id="62051-132">When you set this value to 1, Perfmon.exe disambiguates multiple versions of an application and provides performance counters on a per-runtime basis.</span></span> <span data-ttu-id="62051-133">Jakákoli jiná hodnota parametru `ProcessNameFormat` nastavení klíče registru se neposkytuje podpora a vyhrazené pro budoucí použití.</span><span class="sxs-lookup"><span data-stu-id="62051-133">Any other value for the `ProcessNameFormat` registry key setting is unsupported and reserved for future use.</span></span>  
  
 <span data-ttu-id="62051-134">Po aktualizaci `ProcessNameFormat` klíč registru nastavení, nebo je nutné restartovat Perfmon.exe ostatní uživatelé čítačů výkonu tak, aby nové instance pojmenování funkce funguje správně.</span><span class="sxs-lookup"><span data-stu-id="62051-134">After you update the `ProcessNameFormat` registry key setting, you must restart Perfmon.exe or any other consumers of performance counters so that the new instance naming feature works correctly.</span></span>  
  
 <span data-ttu-id="62051-135">Následující příklad ukazuje, jak změnit `ProcessNameFormat` hodnotu prostřednictvím kódu programu.</span><span class="sxs-lookup"><span data-stu-id="62051-135">The following example shows how to change the `ProcessNameFormat` value programmatically.</span></span>  
  
 [!code-csharp[Conceptual.PerfCounters.InProSxS#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.perfcounters.inprosxs/cs/regsetting1.cs#1)]
 [!code-vb[Conceptual.PerfCounters.InProSxS#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.perfcounters.inprosxs/vb/regsetting1.vb#1)]  
  
 <span data-ttu-id="62051-136">Pokud tuhle změnu registru provádíte, Perfmon.exe zobrazí názvy aplikací, které se zaměřují [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] jako *aplikace*_`p`*processID* \_ `r` *runtimeID*, kde *aplikace* je název aplikace, *processID* je identifikátor procesu aplikace, a  *runtimeID* je obecný identifikátor modulu runtime jazyka.</span><span class="sxs-lookup"><span data-stu-id="62051-136">When you make this registry change, Perfmon.exe displays the names of applications that target the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] as *application*_`p`*processID*\_`r`*runtimeID*, where *application* is the name of the application, *processID* is the application's process identifier, and *runtimeID* is a common language runtime identifier.</span></span> <span data-ttu-id="62051-137">Například pokud aplikace s názvem myapp.exe zatížení dvě instance modulu common language runtime, Perfmon.exe může určit jednu instanci jako myapp_p1416_r10 a druhý jako myapp_p3160_r10.</span><span class="sxs-lookup"><span data-stu-id="62051-137">For example, if an application named myapp.exe loads two instances of the common language runtime, Perfmon.exe may identify one instance as myapp_p1416_r10 and the second as myapp_p3160_r10.</span></span> <span data-ttu-id="62051-138">Identifikátor modulu runtime umožňuje rozlišit pouze moduly Runtime v rámci procesu. neposkytuje žádné další informace o modulu runtime.</span><span class="sxs-lookup"><span data-stu-id="62051-138">The runtime identifier only disambiguates the runtimes within a process; it does not provide any other information about the runtime.</span></span> <span data-ttu-id="62051-139">(Například ID modulu runtime nemá žádný vztah k verzi nebo SKU modulu runtime.)</span><span class="sxs-lookup"><span data-stu-id="62051-139">(For example, the runtime ID has no relation to the version or the SKU of the runtime.)</span></span>  
  
 <span data-ttu-id="62051-140">Pokud [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] je nainstalovaný, registru změna také ovlivní aplikace, které byly vytvořeny pomocí dřívějších verzích rozhraní .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="62051-140">If the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] is installed, the registry change also affects applications that were developed using earlier versions of the .NET Framework.</span></span> <span data-ttu-id="62051-141">Zobrazují se v Perfmon.exe jako *application_*`p`*processID*, kde *aplikace* je název aplikace a *processID* je identifikátor procesu.</span><span class="sxs-lookup"><span data-stu-id="62051-141">These appear in Perfmon.exe as *application_*`p`*processID*, where *application* is the application name and *processID* is the process identifier.</span></span> <span data-ttu-id="62051-142">Například pokud dvě aplikace s názvem myapp.exe čítače výkonu jsou monitorovány, jeden se může zobrazit jako myapp_p23900 a druhý jako myapp_p24908.</span><span class="sxs-lookup"><span data-stu-id="62051-142">For example, if the performance counters of two applications named myapp.exe are monitored, one might appear as myapp_p23900 and the other as myapp_p24908.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="62051-143">Identifikátor procesu eliminuje nejednoznačnost řešení dvě aplikace se stejným názvem, které používají starší verze modulu runtime.</span><span class="sxs-lookup"><span data-stu-id="62051-143">The process identifier eliminates the ambiguity of resolving two applications with the same name that use earlier versions of the runtime.</span></span> <span data-ttu-id="62051-144">Identifikátor modulu runtime se nevyžaduje pro předchozí verze, protože předchozí verze common language runtime nepodporují scénáře vedle sebe.</span><span class="sxs-lookup"><span data-stu-id="62051-144">A runtime identifier is not required for previous versions, because previous versions of the common language runtime do not support side-by-side scenarios.</span></span>  
  
 <span data-ttu-id="62051-145">Pokud [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] není k dispozici nebo se odinstaluje, nastavení klíče registru nemá žádný vliv.</span><span class="sxs-lookup"><span data-stu-id="62051-145">If the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] is not present or was uninstalled, setting the registry key has no effect.</span></span> <span data-ttu-id="62051-146">To znamená, že dvě aplikace se stejným názvem, bude i nadále zobrazovat v Perfmon.exe jako *aplikace* a *aplikace č. 1* (například jako **myapp** a **myapp č. 1**).</span><span class="sxs-lookup"><span data-stu-id="62051-146">This means that two applications with the same name will continue to appear in Perfmon.exe as *application* and *application#1* (for example, as **myapp** and **myapp#1**).</span></span>
