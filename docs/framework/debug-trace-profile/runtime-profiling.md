---
title: Běhová profilace
ms.date: 03/30/2017
helpviewer_keywords:
- performance counters
- common language runtime, profiling
- Perfmon.exe
- System Monitor
- profiling
- runtime, profiling
- profiling applications
- Performance Console
ms.assetid: ccd68284-f3a8-47b8-bc3f-92e5fe3a1640
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 2486316cf582da09eaa8998d06efb8a4e4ea3a88
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/22/2019
ms.locfileid: "69967215"
---
# <a name="runtime-profiling"></a><span data-ttu-id="957ad-102">Běhová profilace</span><span class="sxs-lookup"><span data-stu-id="957ad-102">Runtime Profiling</span></span>
<span data-ttu-id="957ad-103">Profilace je metoda shromažďování údajů o výkonu ve scénáři vývoje nebo nasazení.</span><span class="sxs-lookup"><span data-stu-id="957ad-103">Profiling is a method of gathering performance data in any development or deployment scenario.</span></span> <span data-ttu-id="957ad-104">Tato část je určená pro vývojáře a správce systému, kteří chtějí shromažďovat informace o výkonu aplikace.</span><span class="sxs-lookup"><span data-stu-id="957ad-104">This section is for developers and system administrators who want to gather information about application performance.</span></span>  
  
## <a name="tracking-performance-using-the-performance-monitor-perfmonexe"></a><span data-ttu-id="957ad-105">Sledování výkonu pomocí nástroje sledování výkonu (Perfmon. exe)</span><span class="sxs-lookup"><span data-stu-id="957ad-105">Tracking Performance Using the Performance Monitor (Perfmon.exe)</span></span>  
 <span data-ttu-id="957ad-106">Nástroj Sledování výkonu je nejjednodušším nástrojem, který slouží k profilování aplikace .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="957ad-106">The Performance Monitor is the easiest tool to use to profile your .NET Framework application.</span></span> <span data-ttu-id="957ad-107">Monitor výkonu graficky reprezentuje data zjištěná v .NET Frameworkch čítačích výkonu, které jsou nainstalovány s modulem CLR (Common Language Runtime) a Windows SDK.</span><span class="sxs-lookup"><span data-stu-id="957ad-107">The Performance Monitor graphically represents data found in the .NET Framework performance counters that are installed with the common language runtime and the Windows SDK.</span></span> <span data-ttu-id="957ad-108">Tyto čítače lze použít k monitorování všeho od správy paměti až po výkon kompilátoru JIT (just-in-time).</span><span class="sxs-lookup"><span data-stu-id="957ad-108">These counters can be used to monitor everything from memory management to just-in-time (JIT) compiler performance.</span></span> <span data-ttu-id="957ad-109">Poskytují informace o prostředcích, které vaše aplikace používá, což je nepřímá míra výkonu vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="957ad-109">They tell you about the resources your application uses, which is an indirect measure of your application's performance.</span></span> <span data-ttu-id="957ad-110">Pomocí těchto čítačů můžete pochopit, jak vaše aplikace funguje interně.</span><span class="sxs-lookup"><span data-stu-id="957ad-110">Use these counters to understand how your application works internally.</span></span>  
  
#### <a name="to-run-perfmonexe-on-windows-vista-and-later-versions"></a><span data-ttu-id="957ad-111">Spuštění programu Perfmon. exe v systému Windows Vista a novějších verzích</span><span class="sxs-lookup"><span data-stu-id="957ad-111">To run Perfmon.exe on Windows Vista and later versions</span></span>  
  
1. <span data-ttu-id="957ad-112">Do příkazového řádku zadejte **perfmon**.</span><span class="sxs-lookup"><span data-stu-id="957ad-112">At the command prompt, type **perfmon**.</span></span> <span data-ttu-id="957ad-113">Zobrazí se konzola **nástroje sledování výkonu** .</span><span class="sxs-lookup"><span data-stu-id="957ad-113">The **Performance Monitor** console appears.</span></span>  
  
2. <span data-ttu-id="957ad-114">Ve složce **Nástroje pro sledování** klikněte na **sledování výkonu**.</span><span class="sxs-lookup"><span data-stu-id="957ad-114">In the **Monitoring Tools** folder, click **Performance Monitor**.</span></span>  
  
3. <span data-ttu-id="957ad-115">Na panelu nástrojů sledování výkonu klikněte na ikonu **Přidat** (znaménko plus), pokud je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="957ad-115">In the Performance Monitor toolbar, click the **Add** icon (the plus sign), if it is present.</span></span> <span data-ttu-id="957ad-116">Pokud není k dispozici, klikněte pravým tlačítkem myši v okně monitorování a vyberte možnost **Přidat čítače** .</span><span class="sxs-lookup"><span data-stu-id="957ad-116">If it is not present, right-click in the monitor window and select the **Add Counters** option.</span></span>  
  
     <span data-ttu-id="957ad-117">Tím se otevře dialogové okno **Přidat čítače** .</span><span class="sxs-lookup"><span data-stu-id="957ad-117">This opens the **Add Counters** dialog box.</span></span> <span data-ttu-id="957ad-118">Seznam **Dostupné čítače** zobrazuje dostupné objekty výkonu.</span><span class="sxs-lookup"><span data-stu-id="957ad-118">The **Available counters** list box displays the available performance objects.</span></span> <span data-ttu-id="957ad-119">K dispozici je řada předdefinovaných objektů pro .NET Framework aplikace, včetně funkcí pro správu paměti (**paměť .NET CLR**), interoperability (**zprostředkovatel komunikace .NET CLR**), zpracování výjimek (**výjimky .NET CLR**) a Multithreading ( **.NET CLR LocksAndThreads**).</span><span class="sxs-lookup"><span data-stu-id="957ad-119">There are a number of predefined objects for .NET Framework applications, including those for memory management (**.NET CLR Memory**), interoperability (**.NET CLR Interop**), exception handling (**.NET CLR Exceptions**), and multithreading (**.NET CLR LocksAndThreads**).</span></span> <span data-ttu-id="957ad-120">Každý objekt výkonu obsahuje počet jednotlivých čítačů výkonu.</span><span class="sxs-lookup"><span data-stu-id="957ad-120">Each performance object includes a number of individual performance counters.</span></span> <span data-ttu-id="957ad-121">Seznam čítačů výkonu dostupných v nástroji Sledování výkonu najdete v tématu [čítače výkonu](../../../docs/framework/debug-trace-profile/performance-counters.md).</span><span class="sxs-lookup"><span data-stu-id="957ad-121">For a list of the performance counters available in Performance Monitor, see [Performance Counters](../../../docs/framework/debug-trace-profile/performance-counters.md).</span></span>  
  
4. <span data-ttu-id="957ad-122">Zaškrtněte políčko vedle názvu objektu výkonu, chcete-li zobrazit seznam jednotlivých čítačů výkonu, které podporuje.</span><span class="sxs-lookup"><span data-stu-id="957ad-122">Select the check box next to a performance object's name to view the list of individual performance counters that it supports.</span></span>  
  
5. <span data-ttu-id="957ad-123">Klikněte na čítač výkonu, který chcete zobrazit.</span><span class="sxs-lookup"><span data-stu-id="957ad-123">Click the performance counter you want to view.</span></span>  
  
6. <span data-ttu-id="957ad-124">V seznamu **instance vybraného objektu** klikněte na možnost  **\<všechny instance >** a určete tak, že chcete monitorovat čítač výkonu pro modul CLR (Common Language Runtime) globálně (tj. v celém systému).</span><span class="sxs-lookup"><span data-stu-id="957ad-124">In the **Instances of selected object** list box, click **\<All instances>** to specify that you want to monitor the performance counter for the common language runtime globally (that is, on a system-wide basis).</span></span>  
  
     <span data-ttu-id="957ad-125">-nebo-</span><span class="sxs-lookup"><span data-stu-id="957ad-125">-or-</span></span>  
  
     <span data-ttu-id="957ad-126">V poli se seznamem **instancí vybraného objektu** klikněte na název aplikace a sledujte čítač výkonu této aplikace.</span><span class="sxs-lookup"><span data-stu-id="957ad-126">In the **Instances of selected object** list box, click an application name to monitor the performance counter for that application.</span></span>  
  
     <span data-ttu-id="957ad-127">Chcete-li odlišit více verzí modulu runtime nebo rozlišit více aplikací se stejným názvem, je nutné také upravit klíč registru.</span><span class="sxs-lookup"><span data-stu-id="957ad-127">To differentiate multiple versions of the runtime, or to disambiguate multiple applications with the same name, you must also modify a registry key.</span></span> <span data-ttu-id="957ad-128">Další informace najdete v tématu [čítače výkonu a vnitroprocesové souběžné aplikace](../../../docs/framework/debug-trace-profile/performance-counters-and-in-process-side-by-side-applications.md).</span><span class="sxs-lookup"><span data-stu-id="957ad-128">For more information, see [Performance Counters and In-Process Side-By-Side Applications](../../../docs/framework/debug-trace-profile/performance-counters-and-in-process-side-by-side-applications.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="957ad-129">Když se při spuštění konzoly výkonu nainstalují nové čítače výkonu, zastavte a restartujte konzolu výkonu, aby se nové čítače zobrazily.</span><span class="sxs-lookup"><span data-stu-id="957ad-129">When new performance counters are installed while the Performance console is running, stop and restart the Performance console to make the new counters visible.</span></span>  
  
 <span data-ttu-id="957ad-130">Chcete-li profilovat sestavení, které existuje v zóně nebo na vzdálené sdílené složce, ujistěte se, že má vzdálené sestavení v počítači, který spouští čítače výkonu, úplný vztah důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="957ad-130">If you want to profile an assembly that exists in a zone or on a remote share, make sure that the remote assembly has full trust on the computer that runs the performance counters.</span></span> <span data-ttu-id="957ad-131">Pokud sestavení nemá dostatečný vztah důvěryhodnosti, čítače výkonu nebudou fungovat.</span><span class="sxs-lookup"><span data-stu-id="957ad-131">If the assembly does not have sufficient trust, the performance counters will not work.</span></span> <span data-ttu-id="957ad-132">Informace o udělení důvěryhodnosti do různých zón naleznete v tématu [Caspol. exe (Nástroj pro zásady zabezpečení přístupu kódu)](../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="957ad-132">For information about granting trust to different zones, see [Caspol.exe (Code Access Security Policy Tool)](../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="957ad-133">V systémech, na kterých je nainstalován .NET Framework 4, nemusí monitor výkonu zobrazovat data pro čítače výkonu v některých kategoriích, jako jsou **data .NET CLR** a **sítě .NET CLR**, pro aplikace, které byly vyvinuty pomocí rozhraní .NET. Rozhraní 1,1.</span><span class="sxs-lookup"><span data-stu-id="957ad-133">On systems on which the .NET Framework 4 is installed, the Performance Monitor may not display data for performance counters in some categories, such as **.NET CLR Data** and **.NET CLR Networking**, for applications that were developed using the .NET Framework 1.1.</span></span> <span data-ttu-id="957ad-134">Pokud se jedná o tento případ, můžete nakonfigurovat nástroj sledování výkonu pro zobrazení těchto dat přidáním [ \<prvku forcePerformanceCounterUniqueSharedMemoryReads >](../../../docs/framework/configure-apps/file-schema/runtime/forceperformancecounteruniquesharedmemoryreads-element.md) do konfiguračního souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="957ad-134">If this is the case, you can configure Performance Monitor to display this data by adding the [\<forcePerformanceCounterUniqueSharedMemoryReads>](../../../docs/framework/configure-apps/file-schema/runtime/forceperformancecounteruniquesharedmemoryreads-element.md) element to the application's configuration file.</span></span>  
  
## <a name="reading-and-creating-performance-counters-programmatically"></a><span data-ttu-id="957ad-135">Načítání a vytváření čítačů výkonu prostřednictvím kódu programu</span><span class="sxs-lookup"><span data-stu-id="957ad-135">Reading and Creating Performance Counters Programmatically</span></span>  
 <span data-ttu-id="957ad-136">.NET Framework poskytuje třídy, které lze použít k programovému přístupu ke stejným informacím o výkonu, které jsou k dispozici v konzole výkon.</span><span class="sxs-lookup"><span data-stu-id="957ad-136">The .NET Framework provides classes you can use to programmatically access the same performance information that is available in the Performance console.</span></span> <span data-ttu-id="957ad-137">Tyto třídy můžete použít také k vytvoření vlastních čítačů výkonu.</span><span class="sxs-lookup"><span data-stu-id="957ad-137">You can also use these classes to create custom performance counters.</span></span> <span data-ttu-id="957ad-138">Následující tabulka popisuje některé třídy monitorování výkonu, které jsou k dispozici v .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="957ad-138">The following table describes some of the performance monitoring classes that are provided in the .NET Framework.</span></span>  
  
|<span data-ttu-id="957ad-139">Třída</span><span class="sxs-lookup"><span data-stu-id="957ad-139">Class</span></span>|<span data-ttu-id="957ad-140">Popis</span><span class="sxs-lookup"><span data-stu-id="957ad-140">Description</span></span>|  
|-----------|-----------------|  
|<xref:System.Diagnostics.PerformanceCounter?displayProperty=nameWithType>|<span data-ttu-id="957ad-141">Představuje součást čítače výkonu systému Windows NT.</span><span class="sxs-lookup"><span data-stu-id="957ad-141">Represents a Windows NT performance counter component.</span></span> <span data-ttu-id="957ad-142">Tato třída se používá ke čtení existujících předdefinovaných nebo vlastních čítačů a k publikování (zápisu) údajů o výkonu do vlastních čítačů.</span><span class="sxs-lookup"><span data-stu-id="957ad-142">Use this class to read existing predefined or custom counters and publish (write) performance data to custom counters.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterCategory?displayProperty=nameWithType>|<span data-ttu-id="957ad-143">Poskytuje několik metod pro interakci s čítači a kategoriemi čítačů v počítači.</span><span class="sxs-lookup"><span data-stu-id="957ad-143">Provides several methods for interacting with counters and categories of counters on the computer.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterInstaller?displayProperty=nameWithType>|<span data-ttu-id="957ad-144">Určuje instalační program pro `PerformanceCounter` komponentu.</span><span class="sxs-lookup"><span data-stu-id="957ad-144">Specifies an installer for the `PerformanceCounter` component.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterType?displayProperty=nameWithType>|<span data-ttu-id="957ad-145">Určuje vzorec pro výpočet `NextValue` metody `PerformanceCounter`pro.</span><span class="sxs-lookup"><span data-stu-id="957ad-145">Specifies the formula to calculate the `NextValue` method for a `PerformanceCounter`.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="957ad-146">Viz také:</span><span class="sxs-lookup"><span data-stu-id="957ad-146">See also</span></span>

- [<span data-ttu-id="957ad-147">Čítače výkonu</span><span class="sxs-lookup"><span data-stu-id="957ad-147">Performance Counters</span></span>](../../../docs/framework/debug-trace-profile/performance-counters.md)
