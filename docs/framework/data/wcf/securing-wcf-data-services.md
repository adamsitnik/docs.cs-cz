---
title: Zabezpečení služeb WCF Data Services
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- securing application [WCF Data Services]
- WCF Data Services, security
ms.assetid: 99fc2baa-a040-4549-bc4d-f683d60298af
ms.openlocfilehash: 6efcb6947917ba3d16f562d24e8deefbe1d6e955
ms.sourcegitcommit: 16aefeb2d265e69c0d80967580365fabf0c5d39a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/16/2019
ms.locfileid: "58125964"
---
# <a name="securing-wcf-data-services"></a><span data-ttu-id="18d4a-102">Zabezpečení služeb WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="18d4a-102">Securing WCF Data Services</span></span>
<span data-ttu-id="18d4a-103">Toto téma popisuje důležité informace o zabezpečení, které jsou specifické pro vývoj, nasazování a spouštění datové služby WCF a aplikací tento přístup ke službám, které podporují Open Data Protocol (OData).</span><span class="sxs-lookup"><span data-stu-id="18d4a-103">This topic describes security considerations that are specific to developing, deploying, and running WCF Data Services and applications that access services that support the Open Data Protocol (OData).</span></span> <span data-ttu-id="18d4a-104">Také postupujte podle doporučení pro vytváření zabezpečených aplikací rozhraní .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="18d4a-104">You should also follow recommendations for creating secure .NET Framework applications.</span></span>  
  
<span data-ttu-id="18d4a-105">Při plánování zabezpečení služby OData na základě služeb WCF Data Services, je třeba vyřešit proces zjišťování a ověření identity objektu zabezpečení, ověřování a autorizace, procesu, který určuje, zda je ověřený objekt zabezpečení povolen přístup k požadovaným prostředkům.</span><span class="sxs-lookup"><span data-stu-id="18d4a-105">When planning how to secure a WCF Data Services-based OData service, you must address both authentication, the process of discovering and verifying the identity of a principal, and authorization, the process of determining whether an authenticated principal is allowed to access the requested resources.</span></span> <span data-ttu-id="18d4a-106">Dále je vhodné zvážit, zda chcete zprávy šifrovat pomocí protokolu SSL.</span><span class="sxs-lookup"><span data-stu-id="18d4a-106">You should also consider whether to encrypt the message by using SSL.</span></span>  
  
## <a name="authenticating-client-requests"></a><span data-ttu-id="18d4a-107">Ověřování požadavků klientů</span><span class="sxs-lookup"><span data-stu-id="18d4a-107">Authenticating Client Requests</span></span>  
<span data-ttu-id="18d4a-108">Služby WCF Data Services neimplementuje jakéhokoli druhu ověřování vlastní, ale využívá ověřování poskytované hostitele datové služby.</span><span class="sxs-lookup"><span data-stu-id="18d4a-108">WCF Data Services does not implement any kind of authentication of its own, but rather relies on the authentication provisions of the data service host.</span></span> <span data-ttu-id="18d4a-109">To znamená, že služba předpokládá, že všechny požadavky, které obdrží, již byly ověřeny síťovým hostitelem a že hostitel správně vyhodnotil objekt zabezpečení požadavku prostřednictvím rozhraní poskytovaných službou WCF Data Services.</span><span class="sxs-lookup"><span data-stu-id="18d4a-109">This means that the service assumes that any request that it receives has already been authenticated by the network host and that the host has correctly identified the principle for the request appropriately via the interfaces provided by WCF Data Services.</span></span> <span data-ttu-id="18d4a-110">Tyto možnosti ověřování a přístupy jsou podrobně popsány v multipart [OData a ověřovací série](https://devblogs.microsoft.com/odata/?s=%22OData+and+authentication%22).</span><span class="sxs-lookup"><span data-stu-id="18d4a-110">These authentication options and approaches are detailed in the multipart [OData and Authentication series](https://devblogs.microsoft.com/odata/?s=%22OData+and+authentication%22).</span></span>  
  
### <a name="authentication-options-for-a-wcf-data-service"></a><span data-ttu-id="18d4a-111">Možnosti ověřování ve službě WCF Data</span><span class="sxs-lookup"><span data-stu-id="18d4a-111">Authentication Options for a WCF Data Service</span></span>  
 <span data-ttu-id="18d4a-112">Následující tabulka shrnuje některé mechanismy, které jsou k dispozici pro ověřování požadavků na službu WCF Data Service.</span><span class="sxs-lookup"><span data-stu-id="18d4a-112">The following table lists some of the authentication mechanisms that are available to help you authenticate requests to a WCF Data Service.</span></span>  
  
|<span data-ttu-id="18d4a-113">Možnosti ověřování</span><span class="sxs-lookup"><span data-stu-id="18d4a-113">Authentication Options</span></span>|<span data-ttu-id="18d4a-114">Popis</span><span class="sxs-lookup"><span data-stu-id="18d4a-114">Description</span></span>|  
|----------------------------|-----------------|  
|<span data-ttu-id="18d4a-115">Anonymní ověření</span><span class="sxs-lookup"><span data-stu-id="18d4a-115">Anonymous authentication</span></span>|<span data-ttu-id="18d4a-116">Pokud je aktivováno anonymní ověřování HTTP, může se k datové službě připojit libovolný objekt zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="18d4a-116">When HTTP anonymous authentication is enabled, any principle is able to connect to the data service.</span></span> <span data-ttu-id="18d4a-117">U anonymního přístupu nejsou požadována pověření.</span><span class="sxs-lookup"><span data-stu-id="18d4a-117">Credentials are not required for anonymous access.</span></span> <span data-ttu-id="18d4a-118">Tuto možnost použijte pouze v případě, že chcete přístup k datové službě povolit všem uživatelům.</span><span class="sxs-lookup"><span data-stu-id="18d4a-118">Use this option only when you want to allow anyone to access the data service.</span></span>|  
|<span data-ttu-id="18d4a-119">Základní ověřování a ověřování algoritmem Digest</span><span class="sxs-lookup"><span data-stu-id="18d4a-119">Basic and digest authentication</span></span>|<span data-ttu-id="18d4a-120">Pro ověření jsou vyžadována pověření, která sestávají z uživatelského jména a hesla.</span><span class="sxs-lookup"><span data-stu-id="18d4a-120">Credentials consisting of a user name and password are required for authentication.</span></span> <span data-ttu-id="18d4a-121">Podporuje ověřování klientů jiných platforem než Windows.</span><span class="sxs-lookup"><span data-stu-id="18d4a-121">Supports authentication of non-Windows clients.</span></span> <span data-ttu-id="18d4a-122">**Poznámka k zabezpečení:**  Základní pověření pro ověřování (uživatelské jméno a heslo) se odesílají v nešifrované podobě a může dojít k jejich zachycení.</span><span class="sxs-lookup"><span data-stu-id="18d4a-122">**Security Note:**  Basic authentication credentials (user name and password) are sent in the clear and can be intercepted.</span></span> <span data-ttu-id="18d4a-123">Ověřování algoritmem Digest odešle hodnotu hash vycházející ze zadaných pověření. Je tedy bezpečnější než základní ověřování.</span><span class="sxs-lookup"><span data-stu-id="18d4a-123">Digest authentication sends a hash based-on the supplied credentials, which makes it more secure than basic authentication.</span></span> <span data-ttu-id="18d4a-124">Oba zmíněné typy ověřování jsou však náchylné k útoku prostředníkem (man-in-the-middle).</span><span class="sxs-lookup"><span data-stu-id="18d4a-124">Both are susceptible to man-in-the-middle attacks.</span></span> <span data-ttu-id="18d4a-125">Při použití těchto metod ověřování je vhodné zvážit šifrování komunikace mezi klientem a datovou službou pomocí protokolu SSL (Secure Sockets Layer).</span><span class="sxs-lookup"><span data-stu-id="18d4a-125">When using these authentication methods, you should consider encrypting communication between client and the data service by using the Secure Sockets Layer (SSL).</span></span> <br /><br /> <span data-ttu-id="18d4a-126">Implementace obou basic poskytuje Microsoft Internetové informační služby (IIS) a ověřování algoritmem digest pro protokol HTTP požadavků v aplikaci technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="18d4a-126">Microsoft Internet Information Services (IIS) provides an implementation of both basic and digest authentication for HTTP requests in an ASP.NET application.</span></span> <span data-ttu-id="18d4a-127">Tato implementace poskytovatele ověřování systému Windows umožňuje klientské aplikaci rozhraní .NET Framework vložit pověření do hlavičky HTTP požadavku na datovou službu. Dovoluje tak bez problémů vyjednat ověření uživatele systému Windows.</span><span class="sxs-lookup"><span data-stu-id="18d4a-127">This Windows Authentication Provider implementation enables a .NET Framework client application to supply credentials in the HTTP header of the request to the data service to seamlessly negotiate authentication of a Windows user.</span></span> <span data-ttu-id="18d4a-128">Další informace najdete v tématu [technické informace o ověřování algoritmem Digest](https://go.microsoft.com/fwlink/?LinkId=200408).</span><span class="sxs-lookup"><span data-stu-id="18d4a-128">For more information, see [Digest Authentication Technical Reference](https://go.microsoft.com/fwlink/?LinkId=200408).</span></span><br /><br /> <span data-ttu-id="18d4a-129">Pokud chcete, aby vaše data služba používala základní ověřování založené na některé vlastní ověřovací službě, nikoli přihlašovací údaje Windows, musíte implementovat vlastní modul HTTP ADP.NET pro ověřování.</span><span class="sxs-lookup"><span data-stu-id="18d4a-129">When you want to have your data service use basic authentication based on some custom authentication service and not Windows credentials, you must implement a custom ADP.NET HTTP Module for authentication.</span></span><br /><br /> <span data-ttu-id="18d4a-130">Příklad toho, jak pomocí služeb WCF Data Services vlastního schématu základního ověřování najdete v článku [blogový příspěvek</span><span class="sxs-lookup"><span data-stu-id="18d4a-130">For an example of how to use a custom basic authentication scheme with WCF Data Services, see the blog post [</span></span>
<span data-ttu-id="18d4a-131">OData a ověřování – část 6 – vlastní základní ověřování] (https://devblogs.microsoft.com/odata/odata-and-authentication-part-6-custom-basic-authentication/)].</span><span class="sxs-lookup"><span data-stu-id="18d4a-131">OData and Authentication – Part 6 – Custom Basic Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-6-custom-basic-authentication/)].</span></span>|  
|<span data-ttu-id="18d4a-132">Ověřování systému Windows</span><span class="sxs-lookup"><span data-stu-id="18d4a-132">Windows authentication</span></span>|<span data-ttu-id="18d4a-133">Pověření systému Windows se vyměňují pomocí protokolu NTLM nebo Kerberos.</span><span class="sxs-lookup"><span data-stu-id="18d4a-133">Windows-based credentials are exchanged by using NTLM or Kerberos.</span></span> <span data-ttu-id="18d4a-134">Tento mechanismus je bezpečnější než základní ověřování nebo ověřování algoritmem Digest, vyžaduje však, aby klientská aplikace byla založena na systému Windows.</span><span class="sxs-lookup"><span data-stu-id="18d4a-134">This mechanism is more secure than basic or digest authentication, but it requires that the client be a Windows-based application.</span></span> <span data-ttu-id="18d4a-135">Služba IIS zároveň poskytuje implementaci ověřování Windows pro požadavky HTTP v aplikaci technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="18d4a-135">IIS also provides an implementation of Windows authentication for HTTP requests in an ASP.NET application.</span></span> <span data-ttu-id="18d4a-136">Další informace najdete v tématu [Přehled ověřování formulářů ASP.NET](https://docs.microsoft.com/previous-versions/aspnet/7t6b43z4(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="18d4a-136">For more information, see [ASP.NET Forms Authentication Overview](https://docs.microsoft.com/previous-versions/aspnet/7t6b43z4(v=vs.100)).</span></span><br /><br /> <span data-ttu-id="18d4a-137">Příklad toho, jak používat ověřování Windows pomocí služby WCF Data Services, najdete v příspěvku blogu [OData a ověřování – část 2 – ověření Windows](https://devblogs.microsoft.com/odata/odata-and-authentication-part-2-windows-authentication/).</span><span class="sxs-lookup"><span data-stu-id="18d4a-137">For an example of how to use Windows authentication with WCF Data Services, see the blog post [OData and Authentication – Part 2 – Windows Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-2-windows-authentication/).</span></span>|  
|<span data-ttu-id="18d4a-138">Ověřování pomocí formulářů ASP.NET</span><span class="sxs-lookup"><span data-stu-id="18d4a-138">ASP.NET forms authentication</span></span>|<span data-ttu-id="18d4a-139">Ověřování pomocí formulářů umožňuje ověřovat uživatele pomocí vlastního kódu a poté uchovat ověřovací token v souboru cookie nebo v adrese URL stránky.</span><span class="sxs-lookup"><span data-stu-id="18d4a-139">Forms authentication lets you authenticate users by using your own code and then maintain an authentication token in a cookie or in the page URL.</span></span> <span data-ttu-id="18d4a-140">Uživatelská jména a hesla uživatelů se ověřují pomocí přihlašovacího formuláře, který vytvoříte.</span><span class="sxs-lookup"><span data-stu-id="18d4a-140">You authenticate the user name and password of your users using a login form that you create.</span></span> <span data-ttu-id="18d4a-141">Neověřené požadavky jsou přesměrovány na přihlašovací stránku, kde uživatel poskytne své údaje a formulář odešle.</span><span class="sxs-lookup"><span data-stu-id="18d4a-141">Unauthenticated requests are redirected to a login page, where the user provides credentials and submits the form.</span></span> <span data-ttu-id="18d4a-142">Pokud aplikace požadavek ověří, systém vydá ověřovací lístek obsahující klíč k ověření identity následných požadavků.</span><span class="sxs-lookup"><span data-stu-id="18d4a-142">If the application authenticates the request, the system issues a ticket that contains a key for reestablishing the identity for subsequent requests.</span></span> <span data-ttu-id="18d4a-143">Další informace najdete v tématu [zprostředkovatele ověřování formulářů](https://docs.microsoft.com/previous-versions/aspnet/9wff0kyh(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="18d4a-143">For more information, see [Forms Authentication Provider](https://docs.microsoft.com/previous-versions/aspnet/9wff0kyh(v=vs.100)).</span></span> <span data-ttu-id="18d4a-144">**Poznámka k zabezpečení:**  Ve výchozím nastavení není zabezpečená souboru cookie, který obsahuje ověřovací lístek při použití ověřování pomocí formulářů v ASP.NET Web application.</span><span class="sxs-lookup"><span data-stu-id="18d4a-144">**Security Note:**  By default, the cookie that contains the forms authentication ticket is not secured when you use forms authentication in a ASP.NET Web application.</span></span> <span data-ttu-id="18d4a-145">Je vhodné zvážit, že budete vyžadovat protokol SSL, což zajistí ochranu ověřovacího lístku i počátečních přihlašovacích pověření.</span><span class="sxs-lookup"><span data-stu-id="18d4a-145">You should consider requiring SSL to protect both the authentication ticket and the initial login credentials.</span></span> <br /><br /> <span data-ttu-id="18d4a-146">Příklad použití ověřování pomocí formulářů s WCF Data Services najdete v článku [blogový příspěvek</span><span class="sxs-lookup"><span data-stu-id="18d4a-146">For an example of how to use forms authentication with WCF Data Services, see the blog post [</span></span>
<span data-ttu-id="18d4a-147">OData a ověřování – část 7 – ověřování pomocí formulářů] (https://devblogs.microsoft.com/odata/odata-and-authentication-part-7-forms-authentication/).</span><span class="sxs-lookup"><span data-stu-id="18d4a-147">OData and Authentication – Part 7 – Forms Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-7-forms-authentication/).</span></span>|  
|<span data-ttu-id="18d4a-148">Ověřování na základě deklarací</span><span class="sxs-lookup"><span data-stu-id="18d4a-148">Claims-based authentication</span></span>|<span data-ttu-id="18d4a-149">Při ověřování nezaloženého na deklaracích datové služby spoléhá na důvěryhodné identit "třetí strany" poskytovatele služby k ověření uživatele.</span><span class="sxs-lookup"><span data-stu-id="18d4a-149">In claims-based authentication, the data service relies on a trusted "third-party" identity provider service to authenticate the user.</span></span> <span data-ttu-id="18d4a-150">Tento poskytovatel identit pozitivně ověřuje uživatele, který žádá o přístup k prostředkům datové služby, a vydá token zajišťující přístup k požadovaným prostředkům.</span><span class="sxs-lookup"><span data-stu-id="18d4a-150">The identity provider positively authenticates the user that is requesting access to data service resources and issues a token that grants access to the requested resources.</span></span> <span data-ttu-id="18d4a-151">Tento token se pak předává datové službě, která udělí uživateli přístup na základě vztahu důvěry se službou identit, jež přístupový token vydala.</span><span class="sxs-lookup"><span data-stu-id="18d4a-151">This token is then presented to the data service, which then grants access to the user based on the trust relationship with the identity service that issued the access token.</span></span><br /><br /> <span data-ttu-id="18d4a-152">Výhodou poskytovatele ověřování na základě deklarací je, že ho lze použít k ověřování různých typů klientů napříč důvěryhodnými doménami.</span><span class="sxs-lookup"><span data-stu-id="18d4a-152">The benefit of using a claims-based authentication provider is that they can be used to authenticate various types of clients across trust domains.</span></span> <span data-ttu-id="18d4a-153">Díky použití takového poskytovatele třetí strany může datová služba předat požadavky na údržbu a ověřování uživatelů.</span><span class="sxs-lookup"><span data-stu-id="18d4a-153">By employing such a third-party provider, a data service can offload the requirements of maintaining and authenticating users.</span></span> <span data-ttu-id="18d4a-154">OAuth 2.0 je ověřovací protokol založený na deklaracích podporovaný službou AppFabric Access Control na platformě Microsoft Azure, který je určen pro federované ověřování poskytované jako služba.</span><span class="sxs-lookup"><span data-stu-id="18d4a-154">OAuth 2.0 is a claims-based authentication protocol that is supported by Windows Azure AppFabric Access Control for federated authorization as a service.</span></span> <span data-ttu-id="18d4a-155">Tento protokol podporuje služby založené na technologii REST.</span><span class="sxs-lookup"><span data-stu-id="18d4a-155">This protocol supports REST-based services.</span></span> <span data-ttu-id="18d4a-156">Příklad toho, jak pomocí služeb WCF Data Services OAuth 2.0 naleznete v tématu [blogový příspěvek</span><span class="sxs-lookup"><span data-stu-id="18d4a-156">For an example of how to use OAuth 2.0 with WCF Data Services, see the blog post [</span></span>
<span data-ttu-id="18d4a-157">OData a ověřování – část 8 – OAuth OBTÉKÁNÍ] (https://devblogs.microsoft.com/odata/odata-and-authentication-part-8-oauth-wrap/).</span><span class="sxs-lookup"><span data-stu-id="18d4a-157">OData and Authentication – Part 8 – OAuth WRAP](https://devblogs.microsoft.com/odata/odata-and-authentication-part-8-oauth-wrap/).</span></span>|  
  
<a name="clientAuthentication"></a>   
### <a name="authentication-in-the-client-library"></a><span data-ttu-id="18d4a-158">Ověřování v knihovně klienta</span><span class="sxs-lookup"><span data-stu-id="18d4a-158">Authentication in the Client Library</span></span>  
 <span data-ttu-id="18d4a-159">Ve výchozím nastavení klientské knihovny služby WCF Data Services neposkytuje přihlašovací údaje při požadavku na službu OData.</span><span class="sxs-lookup"><span data-stu-id="18d4a-159">By default, the WCF Data Services client library does not supply credentials when making a request to an OData service.</span></span> <span data-ttu-id="18d4a-160">Pokud jsou přihlašovací údaje jsou povinné datová služba k ověření uživatele, lze je zadat tyto přihlašovací údaje v <xref:System.Net.NetworkCredential> k němu přistupovat z <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> vlastnost <xref:System.Data.Services.Client.DataServiceContext>, jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="18d4a-160">When login credentials are required by the data service to authenticate a user, these credentials can be supplied in a <xref:System.Net.NetworkCredential> accessed from the <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>, as in the following example:</span></span>  
  
```csharp  
// Set the client authentication credentials.  
context.Credentials =  
    new NetworkCredential(userName, password, domain);  
```  
  
```vb  
' Set the client authentication credentials.  
context.Credentials = _  
    New NetworkCredential(userName, password, domain)  
```  
  
 <span data-ttu-id="18d4a-161">Další informace najdete v tématu [jak: Zadání přihlašovacích údajů klienta požadavku na datovou službu](../../../../docs/framework/data/wcf/specify-client-creds-for-a-data-service-request-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="18d4a-161">For more information, see [How to: Specify Client Credentials for a Data Service Request](../../../../docs/framework/data/wcf/specify-client-creds-for-a-data-service-request-wcf.md).</span></span>  
  
 <span data-ttu-id="18d4a-162">Pokud datová služba vyžaduje přihlašovací pověření, která nelze zadat s použitím <xref:System.Net.NetworkCredential> objektu, jako jsou založené na deklaracích token nebo soubor cookie, je nutné ručně nastavit hlavičky v požadavku HTTP, obvykle `Authorization` a `Cookie` záhlaví.</span><span class="sxs-lookup"><span data-stu-id="18d4a-162">When the data service requires login credentials that cannot be specified by using a <xref:System.Net.NetworkCredential> object, such as a claims-based token or cookie, you must manually set headers in the HTTP request, usually the `Authorization` and `Cookie` headers.</span></span> <span data-ttu-id="18d4a-163">Další informace o tomto typu scénáře ověřování naleznete v příspěvku blogu [ OData a ověřování – část 3 – na straně klienta háky](https://devblogs.microsoft.com/odata/odata-and-authentication-part-3-clientside-hooks/).</span><span class="sxs-lookup"><span data-stu-id="18d4a-163">For more information about this kind of authentication scenario, see the blog post [ OData and Authentication – Part 3 – ClientSide Hooks](https://devblogs.microsoft.com/odata/odata-and-authentication-part-3-clientside-hooks/).</span></span> <span data-ttu-id="18d4a-164">Příklad nastavení hlaviček HTTP ve zprávě požadavku naleznete v tématu [jak: Nastavit hlavičky v požadavku klienta](../../../../docs/framework/data/wcf/how-to-set-headers-in-the-client-request-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="18d4a-164">For an example of how to set HTTP headers in a request message, see [How to: Set Headers in the Client Request](../../../../docs/framework/data/wcf/how-to-set-headers-in-the-client-request-wcf-data-services.md).</span></span>  
  
## <a name="impersonation"></a><span data-ttu-id="18d4a-165">Zosobnění</span><span class="sxs-lookup"><span data-stu-id="18d4a-165">Impersonation</span></span>  
 <span data-ttu-id="18d4a-166">Obecně platí, že datová služba přistupuje k požadovaným prostředkům, například k souborům na serveru nebo v databázi, pomocí pověření pracovního procesu, který je hostitelem datové služby.</span><span class="sxs-lookup"><span data-stu-id="18d4a-166">Generally, the data service accesses required resources, such as files on the server or a database, by using the credentials of the worker process that is hosting the data service.</span></span> <span data-ttu-id="18d4a-167">Při použití zosobnění se [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] aplikace můžete spustit s použitím identity Windows (uživatelský účet) uživatele, který zadal žádost.</span><span class="sxs-lookup"><span data-stu-id="18d4a-167">When using impersonation, [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] applications can execute with the Windows identity (user account) of the user making the request.</span></span> <span data-ttu-id="18d4a-168">Zosobnění se běžně používá v aplikacích, které k ověření uživatele využívají službu IIS, a pro přístup k požadovaným prostředkům se používají pověření tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="18d4a-168">Impersonation is commonly used in applications that rely on IIS to authenticate the user, and the credentials of this principle are used to access the required resources.</span></span> <span data-ttu-id="18d4a-169">Další informace najdete v tématu [zosobnění technologie ASP.NET](https://docs.microsoft.com/previous-versions/aspnet/xh507fc5(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="18d4a-169">For more information, see [ASP.NET Impersonation](https://docs.microsoft.com/previous-versions/aspnet/xh507fc5(v=vs.100)).</span></span>  
  
## <a name="configuring-data-service-authorization"></a><span data-ttu-id="18d4a-170">Konfigurace autorizace datové služby</span><span class="sxs-lookup"><span data-stu-id="18d4a-170">Configuring Data Service Authorization</span></span>  
 <span data-ttu-id="18d4a-171">Autorizace představuje udělení přístupu k prostředkům aplikace pro objekt zabezpečení nebo proces, který je identifikován na základě dřívějšího úspěšného ověření.</span><span class="sxs-lookup"><span data-stu-id="18d4a-171">Authorization is the granting of access to application resources to a principle or process that is identified based on a previously successful authentication.</span></span> <span data-ttu-id="18d4a-172">Obecně platí, že uživatelům datové služby je vhodné udělit pouze práva dostatečná k provedení operací vyžadovaných klientskými aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="18d4a-172">As a general practice, you should only grant sufficient rights to users of the data service to perform the operations required by client applications.</span></span>  
  
### <a name="restrict-access-to-data-service-resources"></a><span data-ttu-id="18d4a-173">Omezení přístupu k prostředkům datové služby</span><span class="sxs-lookup"><span data-stu-id="18d4a-173">Restrict Access to Data Service Resources</span></span>  
 <span data-ttu-id="18d4a-174">Ve výchozím nastavení, služby WCF Data Services vám umožní udělit běžné přístup pro čtení a zápis proti prostředkům datové služby (entity nastavit a operace služby) kterémukoli uživateli, který je možné získat přístup ke službě data.</span><span class="sxs-lookup"><span data-stu-id="18d4a-174">By default, WCF Data Services enables you to grant common read and write access against data service resources (entity set and service operations) to any user that is able to access the data service.</span></span> <span data-ttu-id="18d4a-175">Pravidla určující přístup pro čtení a zápis lze definovat samostatně pro každou sadu entit, která je datovou službou vystavena, a pro jakékoli operace služby.</span><span class="sxs-lookup"><span data-stu-id="18d4a-175">Rules that define read and write access can be defined separately for each entity set exposed by the data service, as well as to any service operations.</span></span> <span data-ttu-id="18d4a-176">Doporučujeme omezit přístup pro čtení a zápis pouze na prostředky vyžadované klientskou aplikací.</span><span class="sxs-lookup"><span data-stu-id="18d4a-176">We recommend limiting both read and write access to only the resources required by the client application.</span></span> <span data-ttu-id="18d4a-177">Další informace najdete v tématu [minimální požadavky na přístup prostředků](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md#accessRequirements).</span><span class="sxs-lookup"><span data-stu-id="18d4a-177">For more information, see [Minimum Resource Access Requirements](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md#accessRequirements).</span></span>  
  
### <a name="implement-role-based-interceptors"></a><span data-ttu-id="18d4a-178">Implementace zachycovacích dotazů založených na rolích</span><span class="sxs-lookup"><span data-stu-id="18d4a-178">Implement Role-Based Interceptors</span></span>  
 <span data-ttu-id="18d4a-179">Zachycovací dotazy umožňují zachytit požadavky na prostředky datové služby předtím, než je datová služba vykoná.</span><span class="sxs-lookup"><span data-stu-id="18d4a-179">Interceptors enable you to intercept requests against data service resources before they are acted on by the data service.</span></span> <span data-ttu-id="18d4a-180">Další informace najdete v tématu [sběrače](../../../../docs/framework/data/wcf/interceptors-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="18d4a-180">For more information, see [Interceptors](../../../../docs/framework/data/wcf/interceptors-wcf-data-services.md).</span></span> <span data-ttu-id="18d4a-181">Zachycovací dotazy dovolují přijímat rozhodnutí o autorizaci na základě ověřeného uživatele, který požadavek zadává.</span><span class="sxs-lookup"><span data-stu-id="18d4a-181">Interceptors enable you to make authorization decisions based the authenticated user that is making the request.</span></span> <span data-ttu-id="18d4a-182">Příklad toho, jak omezit přístup k prostředkům datové služby podle identity ověřeného uživatele, najdete v části [jak: Zachycování zpráv datové služby](../../../../docs/framework/data/wcf/how-to-intercept-data-service-messages-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="18d4a-182">For an example of how to restrict access to data service resources based on an authenticated user identity, see [How to: Intercept Data Service Messages](../../../../docs/framework/data/wcf/how-to-intercept-data-service-messages-wcf-data-services.md).</span></span>  
  
### <a name="restrict-access-to-the-persisted-data-store-and-local-resources"></a><span data-ttu-id="18d4a-183">Omezení přístupu k trvalému úložišti dat a místním prostředkům</span><span class="sxs-lookup"><span data-stu-id="18d4a-183">Restrict Access to the Persisted Data Store and Local Resources</span></span>  
 <span data-ttu-id="18d4a-184">Účtům používaným pro přístup k trvalému úložišti je vhodné poskytnout pouze dostatečná práva pro databázi nebo systém souborů tak, aby byly podporovány požadavky datové služby.</span><span class="sxs-lookup"><span data-stu-id="18d4a-184">The accounts that are used to access the persisted store should be granted only enough rights in a database or the file system to support the requirements of the data service.</span></span> <span data-ttu-id="18d4a-185">Pokud se používá anonymní ověřování, slouží právě tento účet ke spouštění hostitelské aplikace.</span><span class="sxs-lookup"><span data-stu-id="18d4a-185">When anonymous authentication is used, this is the account used to run the hosting application.</span></span> <span data-ttu-id="18d4a-186">Další informace najdete v tématu [jak: Vývoj datové služby WCF ve službě IIS](../../../../docs/framework/data/wcf/how-to-develop-a-wcf-data-service-running-on-iis.md).</span><span class="sxs-lookup"><span data-stu-id="18d4a-186">For more information, see [How to: Develop a WCF Data Service Running on IIS](../../../../docs/framework/data/wcf/how-to-develop-a-wcf-data-service-running-on-iis.md).</span></span> <span data-ttu-id="18d4a-187">Při použití zosobnění musí být k těmto prostředkům udělen přístup ověřeným uživatelům, obvykle v rámci skupiny systému Windows.</span><span class="sxs-lookup"><span data-stu-id="18d4a-187">When impersonation is used, authenticated users must be granted access to these resources, usually as part of a Windows group.</span></span>  
  
## <a name="other-security-considerations"></a><span data-ttu-id="18d4a-188">Další informace o zabezpečení</span><span class="sxs-lookup"><span data-stu-id="18d4a-188">Other Security Considerations</span></span>  
  
### <a name="secure-the-data-in-the-payload"></a><span data-ttu-id="18d4a-189">Zabezpečení dat v datové části</span><span class="sxs-lookup"><span data-stu-id="18d4a-189">Secure the Data in the Payload</span></span>  
<span data-ttu-id="18d4a-190">OData je založené na protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="18d4a-190">OData is based on the HTTP protocol.</span></span> <span data-ttu-id="18d4a-191">Hlavička zprávy HTTP může v závislosti na typu ověřování implementovaného datovou službou obsahovat důležitá uživatelská pověření.</span><span class="sxs-lookup"><span data-stu-id="18d4a-191">In an HTTP message, the header may contain valuable user credentials, depending on the authentication implemented by the data service.</span></span> <span data-ttu-id="18d4a-192">Cenná zákaznická data, která je třeba ochránit, mohou být obsažena také v textu zprávy.</span><span class="sxs-lookup"><span data-stu-id="18d4a-192">The message body may also contain valuable customer data that must be protected.</span></span> <span data-ttu-id="18d4a-193">V obou těchto případech doporučujeme k ochraně informací přenášených v síti používat protokol SSL.</span><span class="sxs-lookup"><span data-stu-id="18d4a-193">In both of these cases, we recommend that you use SSL to protect this information over the wire.</span></span>  
  
### <a name="ignored-message-headers-and-cookies"></a><span data-ttu-id="18d4a-194">Ignorované hlavičky zpráv a soubory cookie</span><span class="sxs-lookup"><span data-stu-id="18d4a-194">Ignored Message Headers and Cookies</span></span>  
 <span data-ttu-id="18d4a-195">Hlavičky požadavků HTTP s výjimkou těch, které deklarují typy obsahu a umístění prostředků, se ignorují a datová služba je nenastavuje.</span><span class="sxs-lookup"><span data-stu-id="18d4a-195">HTTP request headers, other than those that declare content types and resource locations, are ignored and are never set by the data service.</span></span>  
  
 <span data-ttu-id="18d4a-196">Soubory cookie slouží jako součást ověřovacího schématu, jako například ASP.NET s ověřováním pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="18d4a-196">Cookies can be used as part of an authentication scheme, such as with ASP.NET Forms Authentication.</span></span> <span data-ttu-id="18d4a-197">Všechny soubory cookie HTTP, nastavte pro příchozí požadavek se však ignorují WCF DataServices.</span><span class="sxs-lookup"><span data-stu-id="18d4a-197">However, any HTTP cookies set on an incoming request are ignored by WCF DataServices.</span></span> <span data-ttu-id="18d4a-198">Hostitele datové služby může soubor cookie zpracovat, ale modul runtime WCF Data Services neanalyzuje ani nevrací soubory cookie.</span><span class="sxs-lookup"><span data-stu-id="18d4a-198">The host of a data service may process the cookie, but the WCF Data Services runtime never analyzes or returns cookies.</span></span> <span data-ttu-id="18d4a-199">Klientská knihovna služby WCF Data Services nezpracovává ani soubory cookie odesílané v odpovědi.</span><span class="sxs-lookup"><span data-stu-id="18d4a-199">The WCF Data Services client library also does not process cookies sent in the response.</span></span>  
  
### <a name="custom-hosting-requirements"></a><span data-ttu-id="18d4a-200">Vlastní požadavky na hostování</span><span class="sxs-lookup"><span data-stu-id="18d4a-200">Custom Hosting Requirements</span></span>  
 <span data-ttu-id="18d4a-201">Ve výchozím nastavení služby WCF Data Services se vytvoří jako aplikace ASP.NET hostované ve službě IIS.</span><span class="sxs-lookup"><span data-stu-id="18d4a-201">By default, WCF Data Services is created as an ASP.NET application hosted in IIS.</span></span> <span data-ttu-id="18d4a-202">To datové službě dovoluje těžit z bezpečného chování této platformy.</span><span class="sxs-lookup"><span data-stu-id="18d4a-202">This enables the data service to leverage the secure behaviors of this platform.</span></span> <span data-ttu-id="18d4a-203">Můžete definovat datové služby WCF, které jsou hostované u vlastního hostitele.</span><span class="sxs-lookup"><span data-stu-id="18d4a-203">You can define WCF Data Services that are hosted by a custom host.</span></span> <span data-ttu-id="18d4a-204">Další informace najdete v tématu [hostitelem datové služby](../../../../docs/framework/data/wcf/hosting-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="18d4a-204">For more information, see [Hosting the Data Service](../../../../docs/framework/data/wcf/hosting-the-data-service-wcf-data-services.md).</span></span> <span data-ttu-id="18d4a-205">Součásti a platforma hostující datovou službu musí jako prevenci proti útokům na datovou službu zajistit následující bezpečnostní chování:</span><span class="sxs-lookup"><span data-stu-id="18d4a-205">The components and platform hosting a data service must ensure the following security behaviors to prevent attacks on the data service:</span></span>  
  
-   <span data-ttu-id="18d4a-206">Omezení délky identifikátoru URI přijímaného v požadavku na datovou službu pro všechny možné operace.</span><span class="sxs-lookup"><span data-stu-id="18d4a-206">Limit the length of the URI accepted in a data service request for all possible operations.</span></span>  
  
-   <span data-ttu-id="18d4a-207">Omezení velikosti příchozí a odchozí zprávy HTTP.</span><span class="sxs-lookup"><span data-stu-id="18d4a-207">Limit the size of both incoming and outgoing HTTP messages.</span></span>  
  
-   <span data-ttu-id="18d4a-208">Omezení celkového počtu nevyřízených požadavků v kterémkoli okamžiku.</span><span class="sxs-lookup"><span data-stu-id="18d4a-208">Limit the total number of outstanding requests at any given time.</span></span>  
  
-   <span data-ttu-id="18d4a-209">Omezení velikosti hlaviček protokolu HTTP a jejich hodnoty a služby WCF Data Services přístup k údajům v hlavičce.</span><span class="sxs-lookup"><span data-stu-id="18d4a-209">Limit the size of HTTP headers and their values, and provide WCF Data Services access to header data.</span></span>  
  
-   <span data-ttu-id="18d4a-210">Rozpoznání a odvracení známých útoků, jako jsou útoky TCP SYN a útoky pomocí opakovaného přehrávání zprávy.</span><span class="sxs-lookup"><span data-stu-id="18d4a-210">Detect and counter known attacks, such as TCP SYN and message replay attacks.</span></span>  
  
### <a name="values-are-not-further-encoded"></a><span data-ttu-id="18d4a-211">Hodnoty se dále nešifrují</span><span class="sxs-lookup"><span data-stu-id="18d4a-211">Values Are Not Further Encoded</span></span>  
 <span data-ttu-id="18d4a-212">Hodnoty vlastností odesílané datové službě dále nešifrují modul runtime WCF Data Services.</span><span class="sxs-lookup"><span data-stu-id="18d4a-212">Property values sent to the data service are not further encoded by the WCF Data Services runtime.</span></span> <span data-ttu-id="18d4a-213">Pokud například řetězcová vlastnost entity obsahuje formátovaný obsah ve formátu HTML, jeho značky nejsou datovou službou zašifrovány do jazyka HTML.</span><span class="sxs-lookup"><span data-stu-id="18d4a-213">For example, when a string property of an entity contains formatted HTML content, the tags are not HTML encoded by the data service.</span></span> <span data-ttu-id="18d4a-214">Datová služby zároveň dále nešifruje hodnoty vlastností v odezvě.</span><span class="sxs-lookup"><span data-stu-id="18d4a-214">The data service also does not further encode property values in the response.</span></span> <span data-ttu-id="18d4a-215">Další šifrování neprovádí ani knihovna klienta.</span><span class="sxs-lookup"><span data-stu-id="18d4a-215">The client library also does not perform any additional encoding.</span></span>  
  
### <a name="considerations-for-client-applications"></a><span data-ttu-id="18d4a-216">Důležité informace o klientských aplikacích</span><span class="sxs-lookup"><span data-stu-id="18d4a-216">Considerations for Client Applications</span></span>  
 <span data-ttu-id="18d4a-217">Pro aplikace, které používají klienta WCF Data Services pro přístup ke službám OData, platí následující aspekty zabezpečení:</span><span class="sxs-lookup"><span data-stu-id="18d4a-217">The following security considerations apply to applications that use the WCF Data Services client to access OData services:</span></span>  
  
-   <span data-ttu-id="18d4a-218">Knihovna klienta předpokládá, že protokoly použité k přístupu k datové službě poskytují odpovídající úroveň zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="18d4a-218">The client library assumes that the protocols used to access the data service provide an appropriate level of security.</span></span>  
  
-   <span data-ttu-id="18d4a-219">Knihovna klienta používá veškeré výchozí hodnoty pro časové limity a možnosti analýzy transportních zásobníků poskytovaných podkladovou platformou.</span><span class="sxs-lookup"><span data-stu-id="18d4a-219">The client library uses all the default values for timeouts and parsing options of the underlying platform-provided transport stacks.</span></span>  
  
-   <span data-ttu-id="18d4a-220">Knihovna klienta nenačítá žádná nastavení z konfiguračních souborů aplikace.</span><span class="sxs-lookup"><span data-stu-id="18d4a-220">The client library does not read any settings from application configuration files.</span></span>  
  
-   <span data-ttu-id="18d4a-221">Knihovna klienta neimplementuje žádné mechanismy přístupu napříč doménami.</span><span class="sxs-lookup"><span data-stu-id="18d4a-221">The client library does not implement any cross domain access mechanisms.</span></span> <span data-ttu-id="18d4a-222">Místo toho využívá mechanismy poskytované podkladovým zásobníkem HTTP.</span><span class="sxs-lookup"><span data-stu-id="18d4a-222">Instead, it relies on the mechanisms provided by the underlying HTTP stack.</span></span>  
  
-   <span data-ttu-id="18d4a-223">Knihovna klienta neobsahuje žádné prvky uživatelského rozhraní a nikdy se nepokouší zobrazit ani vykreslit data, která přijímá nebo odesílá.</span><span class="sxs-lookup"><span data-stu-id="18d4a-223">The client library has no user interface elements, and it never tries to display or render the data that it receives or sends.</span></span>  
  
-   <span data-ttu-id="18d4a-224">Doporučujeme, aby klientské aplikace vždy ověřovaly uživatelské vstupy i údaje přijímané z nedůvěryhodných služeb.</span><span class="sxs-lookup"><span data-stu-id="18d4a-224">We recommend that client applications always validate user input as well as data accepted from untrusted services.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="18d4a-225">Viz také:</span><span class="sxs-lookup"><span data-stu-id="18d4a-225">See also</span></span>
- [<span data-ttu-id="18d4a-226">Definování datových služeb WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="18d4a-226">Defining WCF Data Services</span></span>](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)
- [<span data-ttu-id="18d4a-227">Klientská knihovna pro WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="18d4a-227">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)
