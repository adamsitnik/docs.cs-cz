---
title: Konfigurace datové služby (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, configuring
ms.assetid: 59efd4c8-cc7a-4800-a0a4-d3f8abe6c55c
ms.openlocfilehash: dec42a19f3e265f440ec03164ebc1ece9b6d5ce3
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/23/2019
ms.locfileid: "61793481"
---
# <a name="configuring-the-data-service-wcf-data-services"></a>Konfigurace datové služby (WCF Data Services)
S [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], můžete vytvořit datové služby, která zpřístupňují [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] informační kanály. Data v těchto kanálech mohou pocházet z různých datových zdrojů. [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] Zprostředkovatelé dat používá k získání těchto dat jako [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] informačního kanálu. Tito poskytovatelé patří [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] poskytovatele, zprostředkovatel reflexe a sadu vlastních dat rozhraní poskytovatele služeb. Implementace zprostředkovatele definuje datový model pro službu. Další informace najdete v tématu [zprostředkovatelé dat služby](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md).  
  
 V [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], je třída, která dědí z datové služby <xref:System.Data.Services.DataService%601> třídy, kde typ datové služby je kontejner entit datového modelu. Tento kontejner entity má jednu nebo více vlastností, které vracejí <xref:System.Linq.IQueryable%601>, které se používají pro přístup k entitě nastaví v datovém modelu.  
  
 Chování datové služby jsou definované jako objekty její členové <xref:System.Data.Services.DataServiceConfiguration> třídy a členové <xref:System.Data.Services.DataServiceBehavior> třídy, ke kterému přistupují z <xref:System.Data.Services.DataServiceConfiguration.DataServiceBehavior%2A> vlastnost <xref:System.Data.Services.DataServiceConfiguration> třídy. <xref:System.Data.Services.DataServiceConfiguration> Třídy je předán `InitializeService` metodu, která je implementována datovou službou, stejně jako v následující implementaci datová služba Northwind:  
  
[!code-csharp[Astoria Northwind Service#DataServiceConfigComplete](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_service/cs/northwind.svc.cs#dataserviceconfigcomplete)]  
[!code-vb[Astoria Northwind Service#DataServiceConfigComplete](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_service/vb/northwind.svc.vb#dataserviceconfigcomplete)]  
  
## <a name="data-service-configuration-settings"></a>Nastavení konfigurace datové služby  
 <xref:System.Data.Services.DataServiceConfiguration> Třídy vám umožní zadat následující chování služby dat:  
  
|Člen|Chování|  
|------------|--------------|  
|<xref:System.Data.Services.DataServiceBehavior.AcceptCountRequests%2A>|Umožňuje zakázat počet požadavků, které odesílají na datovou službu s použitím `$count` segmentu cesty a `$inlinecount` možnosti dotazu. Další informace najdete v tématu [OData: Identifikátor URI konvence](https://go.microsoft.com/fwlink/?LinkId=185564).|  
|<xref:System.Data.Services.DataServiceBehavior.AcceptProjectionRequests%2A>|Umožňuje zakázat podporu pro data projekce v požadavcích, které jsou odeslány datové služby pomocí `$select` možnosti dotazu. Další informace najdete v tématu [OData: Identifikátor URI konvence](https://go.microsoft.com/fwlink/?LinkId=185564).|  
|<xref:System.Data.Services.DataServiceConfiguration.EnableTypeAccess%2A>|Povolí datový typ zpřístupní v metadatech pro zprostředkovatele dynamická metadata definované pomocí <xref:System.Data.Services.Providers.IDataServiceMetadataProvider> rozhraní.|  
|<xref:System.Data.Services.DataServiceConfiguration.EnableTypeConversion%2A>|Umožňuje určit, jestli by měl modul runtime služby data převést na typ, který je obsažen v datové části typu skutečné vlastnosti, která je zadaná v žádosti.|  
|<xref:System.Data.Services.DataServiceBehavior.InvokeInterceptorsOnLinkDelete%2A>|Umožňuje určit, zda zaregistrovaný Změna zachycovacích dotazů jsou vyvolány na související entity při odstranění propojení vztah mezi dvěma entitami.|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxBatchCount%2A>|Umožňuje omezit počet sad změn a dotazování operací, které jsou povoleny v jedné dávce. Další informace najdete v tématu [OData: Batch](https://go.microsoft.com/fwlink/?LinkId=185602) a [operace dávkování](../../../../docs/framework/data/wcf/batching-operations-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxChangesetCount%2A>|Umožňuje omezit počet změn, které mohou být součástí jedné sady změn. Další informace najdete v tématu [jak: Povolit stránkování výsledků datové služby](../../../../docs/framework/data/wcf/how-to-enable-paging-of-data-service-results-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxExpandCount%2A>|Umožňuje omezit tím, že omezíte počet související entity, které mohou být součástí jedné žádosti pomocí velikost odpovědi `$expand` – operátor dotazu. Další informace najdete v tématu [OData: Identifikátor URI konvence](https://go.microsoft.com/fwlink/?LinkId=185564) a [načtení odloženého obsahu](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxExpandDepth%2A>|Umožňuje omezit tím, že omezíte hloubky grafu související entity, které mohou být součástí jedné žádosti pomocí velikost odpovědi `$expand` – operátor dotazu. Další informace najdete v tématu [OData: Identifikátor URI konvence](https://go.microsoft.com/fwlink/?LinkId=185564) a [načtení odloženého obsahu](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxObjectCountOnInsert%2A>|Umožňuje omezit počet entit, které má být vložen, které mohou být obsaženy v jednom požadavku POST.|  
|<xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A>|Určuje verzi protokolu Atom, který se používá datová služba. Když hodnoty <xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A> je nastavena na hodnotu menší než maximální hodnota <xref:System.Data.Services.Common.DataServiceProtocolVersion>, nejnovější funkce [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] není k dispozici klientům přístup k datové službě. Další informace najdete v tématu [Správa verzí datové služby](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxResultsPerCollection%2A>|Umožňuje omezit velikost odpovědi tím, že omezíte počet entit v každé sadě entit, která je vrácena jako datový kanál.|  
|<xref:System.Data.Services.DataServiceConfiguration.RegisterKnownType%2A>|Datový typ přidá na seznam typů, které jsou rozpoznány modulem pro službu data.|  
|<xref:System.Data.Services.DataServiceConfiguration.SetEntitySetAccessRule%2A>|Nastaví přístupová práva pro entitu nastavit prostředky, které jsou k dispozici na datovou službu. Hvězdičku (`*`) můžete zadána hodnota pro parametr name, nastavte na stejnou úroveň přístupu pro všechny zbývající sady entit. Doporučujeme nastavit přístup k sad entit k poskytování nejnižších oprávnění přístupu k prostředkům datové služby, které jsou potřebné pro klientské aplikace. Další informace najdete v tématu [zabezpečení služeb WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md). Příklady minimální přístupová práva potřebná pro danou akci identifikátor URI a HTTP, najdete v tabulce v [minimální požadavky na přístup k prostředku](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md#accessRequirements) oddílu.|  
|<xref:System.Data.Services.DataServiceConfiguration.SetEntitySetPageSize%2A>|Nastaví maximální velikost stránky pro entitu nastavení prostředku. Další informace najdete v tématu [jak: Povolit stránkování výsledků datové služby](../../../../docs/framework/data/wcf/how-to-enable-paging-of-data-service-results-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.SetServiceOperationAccessRule%2A>|Nastaví přístupová práva pro operace služby, které jsou definovány na datovou službu. Další informace najdete v tématu [operací služby](../../../../docs/framework/data/wcf/service-operations-wcf-data-services.md). Hvězdičku (`*`) můžete zadána hodnota pro parametr name nastavení přístupu pro všechny operace služby na stejné úrovni. Doporučujeme nastavit přístup k operacím služby k poskytování nejnižších oprávnění přístupu k prostředkům datové služby, které jsou potřebné pro klientské aplikace. Další informace najdete v tématu [zabezpečení služeb WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.UseVerboseErrors%2A>|Tato vlastnost konfigurace umožňuje snadněji řešit datové služby tak, že vrací další informace v chybové zprávě odpovědi. Tato možnost není určena pro použití v produkčním prostředí. Další informace najdete v tématu [vývoj a nasazení služeb WCF Data Services](../../../../docs/framework/data/wcf/developing-and-deploying-wcf-data-services.md).|  
  
<a name="accessRequirements"></a>   
## <a name="minimum-resource-access-requirements"></a>Požadavky na přístup minimální prostředků  
 Následující tabulky Podrobnosti sady entit minimální oprávnění, která musí být udělena pro provedení určité operace. Příklady cesty jsou založeny na datová služba Northwind, který je vytvořen po dokončení [rychlý Start](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md). Vzhledem k tomu, jak <xref:System.Data.Services.EntitySetRights> výčet a <xref:System.Data.Services.ServiceOperationRights> výčtu jsou definované pomocí <xref:System.FlagsAttribute>, můžete zadat více oprávnění pro sadu jedné entity nebo operace logického operátoru OR. Další informace najdete v tématu [jak: Povolení přístupu k datové službě](../../../../docs/framework/data/wcf/how-to-enable-access-to-the-data-service-wcf-data-services.md).  
  
|Cesta nebo akce|`GET`|`DELETE`|`MERGE`|`POST`|`PUT`|  
|------------------|-----------|--------------|-------------|------------|-----------|  
|`/Customers`|<xref:System.Data.Services.EntitySetRights.ReadMultiple>|Není podporováno|Není podporováno|<xref:System.Data.Services.EntitySetRights.WriteAppend>|Není podporováno|  
|`/Customers('ALFKI')`|<xref:System.Data.Services.EntitySetRights.ReadSingle>|<xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteDelete>|<xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteMerge>|není k dispozici|<xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers('ALFKI')/Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|Není podporováno|Není podporováno|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteMerge> nebo <xref:System.Data.Services.EntitySetRights.WriteReplace><br /><br /> - a -<br /><br /> `Orders` `:` a <xref:System.Data.Services.EntitySetRights.WriteAppend>|Není podporováno|  
|`/Customers('ALFKI')/Orders(10643)`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteDelete>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteMerge>|Není podporováno|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Orders(10643)/Customer`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteDelete><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteMerge>;<br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.WriteAppend><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.WriteAppend> a <xref:System.Data.Services.EntitySetRights.ReadSingle>|Není podporováno|  
|`/Customers('ALFKI')/$links/Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|Není podporováno|Není podporováno|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteMerge> nebo <xref:System.Data.Services.EntitySetRights.WriteReplace><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|Není podporováno|  
|`/Customers('ALFKI')/$links/Orders(10643)`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteMerge> nebo <xref:System.Data.Services.EntitySetRights.WriteReplace><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|Není podporováno|Není podporováno|Není podporováno|  
|`/Orders(10643)/$links/Customer`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteMerge> nebo <xref:System.Data.Services.EntitySetRights.WriteReplace>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteMerge>|Není podporováno|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle>;<br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers/$count`|<xref:System.Data.Services.EntitySetRights.ReadMultiple>|Není podporováno|Není podporováno|Není podporováno|Není podporováno|  
|`/Customers('ALFKI')/ContactName`|<xref:System.Data.Services.EntitySetRights.ReadSingle>|Není podporováno|<xref:System.Data.Services.EntitySetRights.WriteMerge>|Není podporováno|<xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers('ALFKI')/Address/StreetAddress/$value` <sup>1</sup>|<xref:System.Data.Services.EntitySetRights.ReadSingle>|<xref:System.Data.Services.EntitySetRights.WriteDelete>|Není podporováno|Není podporováno|Není podporováno|  
|`/Customers('ALFKI')/ContactName/$value`|<xref:System.Data.Services.EntitySetRights.ReadSingle>|<xref:System.Data.Services.EntitySetRights.ReadSingle> a <xref:System.Data.Services.EntitySetRights.WriteDelete>|<xref:System.Data.Services.EntitySetRights.WriteMerge>|Není podporováno|<xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers('ALFKI')/$value` <sup>2</sup>|<xref:System.Data.Services.EntitySetRights.ReadSingle>|Není podporováno|Není podporováno|Není podporováno|<xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers?$select=Orders/*&$expand=Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|Není podporováno|Není podporováno|`Customers`: <xref:System.Data.Services.EntitySetRights.WriteAppend>|Není podporováno|  
|`/Customers('ALFKI')?$select=Orders/*&$expand=Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - a -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|Není podporováno|Není podporováno|Není podporováno|Není podporováno|  
  
 <sup>1</sup> v tomto příkladu `Address` představuje komplexní vlastnost `Customers` entita, která má vlastnost s názvem `StreetAddress`. Model používaný v datové služby Northwind explicitně nedefinuje tohoto komplexního typu. Pokud datový model je definován pomocí [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] poskytovatele, můžete použít [!INCLUDE[adonet_edm](../../../../includes/adonet-edm-md.md)] nástroje definice komplexního typu. Další informace najdete v tématu [jak: Vytvoření a úprava komplexní typy](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd456820(v=vs.100)).  
  
 <sup>2</sup> tento identifikátor URI je podporováno, pokud vlastnost, která vrací binární velkých objektů (BLOB) je definován jako mediální zdroj, který patří do entity, která je položku media link entry, což je v tomto případě `Customers`. Další informace najdete v tématu [streamování poskytovatele](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).  
  
<a name="versioning"></a>   
## <a name="versioning-requirements"></a>Požadavky na správu verzí  
 Následující konfigurace chování služby dat vyžadují verzi 2 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protokol nebo novější verze:  
  
- Podpora pro počet požadavků.  
  
- Podpora pro možnost dotazu $select pro projekci.  
  
 Další informace najdete v tématu [Správa verzí datové služby](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).  
  
## <a name="see-also"></a>Viz také:

- [Definování datových služeb WCF Data Services](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)
- [Hostování datové služby](../../../../docs/framework/data/wcf/hosting-the-data-service-wcf-data-services.md)
