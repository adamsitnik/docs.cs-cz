---
title: Načtení odloženého obsahu (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, deferred content
- WCF Data Services, loading data
ms.assetid: 32f9b588-c832-44c4-a7e0-fcce635df59a
ms.openlocfilehash: ee7b0b40d74d908dc4f25372273f852662370df0
ms.sourcegitcommit: 680a741667cf6859de71586a0caf6be14f4f7793
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/12/2019
ms.locfileid: "59518003"
---
# <a name="loading-deferred-content-wcf-data-services"></a><span data-ttu-id="59709-102">Načtení odloženého obsahu (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="59709-102">Loading Deferred Content (WCF Data Services)</span></span>
<span data-ttu-id="59709-103">Ve výchozím nastavení [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] omezuje množství dat, které dotaz vrátí.</span><span class="sxs-lookup"><span data-stu-id="59709-103">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] limits the amount of data that a query returns.</span></span> <span data-ttu-id="59709-104">Můžete však explicitně načíst další data, včetně souvisejících entit, data stránkované odpovědi a binární datové proudy z datové služby, když ho nepotřebují.</span><span class="sxs-lookup"><span data-stu-id="59709-104">However, you can explicitly load additional data, including related entities, paged response data, and binary data streams, from the data service when it is needed.</span></span> <span data-ttu-id="59709-105">Toto téma popisuje, jak načíst takového odloženého obsahu do vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="59709-105">This topic describes how to load such deferred content into your application.</span></span>  
  
## <a name="related-entities"></a><span data-ttu-id="59709-106">Související entity</span><span class="sxs-lookup"><span data-stu-id="59709-106">Related Entities</span></span>  
 <span data-ttu-id="59709-107">Při spouštění dotazu budou vráceny pouze entity v sadě entit adresovaný.</span><span class="sxs-lookup"><span data-stu-id="59709-107">When you execute a query, only entities in the addressed entity set are returned.</span></span> <span data-ttu-id="59709-108">Když dotaz proti datová služba Northwind například vrátí `Customers` entity, ve výchozím nastavení související `Orders` nejsou vráceny entity, i když existuje vztah mezi `Customers` a `Orders`.</span><span class="sxs-lookup"><span data-stu-id="59709-108">For example, when a query against the Northwind data service returns `Customers` entities, by default the related `Orders` entities are not returned, even though there is a relationship between `Customers` and `Orders`.</span></span> <span data-ttu-id="59709-109">Také když je stránkování povoleno v datové službě, je nutné explicitně načíst stránky následná data ze služby.</span><span class="sxs-lookup"><span data-stu-id="59709-109">Also, when paging is enabled in the data service, you must explicitly load subsequent data pages from the service.</span></span> <span data-ttu-id="59709-110">Existují dva způsoby, jak načíst související entity:</span><span class="sxs-lookup"><span data-stu-id="59709-110">There are two ways to load related entities:</span></span>  
  
-   <span data-ttu-id="59709-111">**Předběžné načítání**: Můžete použít `$expand` možností dotazu žádosti, že dotaz vrátí entity, které se týkají přidružení k entitě nastavte požadovaný dotaz.</span><span class="sxs-lookup"><span data-stu-id="59709-111">**Eager loading**: You can use the `$expand` query option to request that the query return entities that are related by an association to the entity set that the query requested.</span></span> <span data-ttu-id="59709-112">Použití <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> metodu na <xref:System.Data.Services.Client.DataServiceQuery%601> přidáte `$expand` možnost Dotaz odeslaný do služby data.</span><span class="sxs-lookup"><span data-stu-id="59709-112">Use the <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> method on the <xref:System.Data.Services.Client.DataServiceQuery%601> to add the `$expand` option to the query that is sent to the data service.</span></span> <span data-ttu-id="59709-113">Můžete požádat o více související entity sady oddělených čárkou, jako v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="59709-113">You can request multiple related entity sets by separating them by a comma, as in the following example.</span></span> <span data-ttu-id="59709-114">Všechny entity požadoval dotaz se vrátí v jedné odezvě.</span><span class="sxs-lookup"><span data-stu-id="59709-114">All entities requested by the query are returned in a single response.</span></span> <span data-ttu-id="59709-115">Následující příklad vrátí `Order_Details` a `Customers` spolu s `Orders` sady entit:</span><span class="sxs-lookup"><span data-stu-id="59709-115">The following example returns `Order_Details` and `Customers` together with the `Orders` entity set:</span></span>  
  
     [!code-csharp[Astoria Northwind Client#ExpandOrderDetailsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#expandorderdetailsspecific)]
     [!code-vb[Astoria Northwind Client#ExpandOrderDetailsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#expandorderdetailsspecific)]  
  
     [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="59709-116">omezuje počet sad entit, které mohou být zahrnuty v jediném dotazu pomocí 12 `$expand` možnosti dotazu.</span><span class="sxs-lookup"><span data-stu-id="59709-116">limits to 12 the number of entity sets that can be included in a single query by using the `$expand` query option.</span></span>  
  
-   <span data-ttu-id="59709-117">**Explicitní načtení**: Můžete volat <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> metodu <xref:System.Data.Services.Client.DataServiceContext> instance pro explicitní načtení souvisejících entit.</span><span class="sxs-lookup"><span data-stu-id="59709-117">**Explicit loading**: You can call the <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance to explicitly load related entities.</span></span> <span data-ttu-id="59709-118">Každé volání <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> metoda vytvoří samostatnou žádost o datové služby.</span><span class="sxs-lookup"><span data-stu-id="59709-118">Each call to the <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> method creates a separate request to the data service.</span></span> <span data-ttu-id="59709-119">Následující příklad načte explicitně `Order_Details` pro `Orders` entity:</span><span class="sxs-lookup"><span data-stu-id="59709-119">The following example explicitly loads `Order_Details` for an `Orders` entity:</span></span>  
  
     [!code-csharp[Astoria Northwind Client#LoadRelatedOrderDetailsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#loadrelatedorderdetailsspecific)]
     [!code-vb[Astoria Northwind Client#LoadRelatedOrderDetailsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#loadrelatedorderdetailsspecific)]  
  
 <span data-ttu-id="59709-120">Při zvažování možnost dobré si uvědomíte, že je kompromis mezi počet požadavků ve službě data a množství dat, která je vrácena v jedné odezvě.</span><span class="sxs-lookup"><span data-stu-id="59709-120">When you consider which option to use, realize that there is a tradeoff between the number of requests to the data service and the amount of data that is returned in a single response.</span></span> <span data-ttu-id="59709-121">Použijte nemůžou dočkat, až načítání, pokud vaše aplikace vyžaduje přidružených objektů a chcete se vyhnout přidání latence dalších požadavků je explicitně načítat.</span><span class="sxs-lookup"><span data-stu-id="59709-121">Use eager loading when your application requires associated objects and you want to avoid the added latency of additional requests to explicitly retrieve them.</span></span> <span data-ttu-id="59709-122">Nicméně pokud existují případy, když aplikace potřebuje pouze data pro instance konkrétní související entity, měli byste zvážit explicitně voláním načítání entit <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="59709-122">However, if there are cases when the application only needs the data for specific related entity instances, you should consider explicitly loading those entities by calling the <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> method.</span></span> <span data-ttu-id="59709-123">Další informace najdete v tématu [jak: Načtení souvisejících entit](../../../../docs/framework/data/wcf/how-to-load-related-entities-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="59709-123">For more information, see [How to: Load Related Entities](../../../../docs/framework/data/wcf/how-to-load-related-entities-wcf-data-services.md).</span></span>  
  
## <a name="paged-content"></a><span data-ttu-id="59709-124">Stránkovaná obsahu</span><span class="sxs-lookup"><span data-stu-id="59709-124">Paged Content</span></span>  
 <span data-ttu-id="59709-125">Pokud je stránkování povoleno v datové službě, je omezen počet položek v informačním kanálu, které služba data vrátí konfigurace datové služby.</span><span class="sxs-lookup"><span data-stu-id="59709-125">When paging is enabled in the data service, the number of entries in the feed that the data service returns is limited by the configuration of the data service.</span></span> <span data-ttu-id="59709-126">Stránka omezení můžete nastavit zvlášť pro každou sadu entit.</span><span class="sxs-lookup"><span data-stu-id="59709-126">Page limits can be set separately for each entity set.</span></span> <span data-ttu-id="59709-127">Další informace najdete v tématu [konfigurace datové služby](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="59709-127">For more information, see [Configuring the Data Service](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md).</span></span> <span data-ttu-id="59709-128">Když je povoleno stránkování, poslední položku v informačním kanálu obsahuje odkaz na další stránku data.</span><span class="sxs-lookup"><span data-stu-id="59709-128">When paging is enabled, the final entry in the feed contains a link to the next page of data.</span></span> <span data-ttu-id="59709-129">Tento odkaz je součástí <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> objektu.</span><span class="sxs-lookup"><span data-stu-id="59709-129">This link is contained in a <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> object.</span></span> <span data-ttu-id="59709-130">Získat identifikátor URI další stránky dat voláním <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> metodu na <xref:System.Data.Services.Client.QueryOperationResponse%601> vrácena, když <xref:System.Data.Services.Client.DataServiceQuery%601> provádí.</span><span class="sxs-lookup"><span data-stu-id="59709-130">You obtain the URI to the next page of data by calling the <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> method on the <xref:System.Data.Services.Client.QueryOperationResponse%601> returned when the <xref:System.Data.Services.Client.DataServiceQuery%601> is executed.</span></span> <span data-ttu-id="59709-131">Vrácený <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> objekt se pak použije k načtení další stránky výsledků.</span><span class="sxs-lookup"><span data-stu-id="59709-131">The returned <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> object is then used to load the next page of results.</span></span> <span data-ttu-id="59709-132">Před voláním musí vytvořit výčet výsledků dotazu <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="59709-132">You must enumerate the query result before you call the <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> method.</span></span> <span data-ttu-id="59709-133">Zvažte použití `do…while` cyklu nejprve vytvořit výčet výsledku dotazu a pak vyhledejte `non-null` hodnotu odkazu na další stránku.</span><span class="sxs-lookup"><span data-stu-id="59709-133">Consider using a `do…while` loop to first enumerate the query result and then check for a `non-null` next link value.</span></span> <span data-ttu-id="59709-134">Když <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> vrátí metoda `null` (`Nothing` v jazyce Visual Basic), nejsou žádné další výsledek stránky pro původní dotaz.</span><span class="sxs-lookup"><span data-stu-id="59709-134">When the <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> method returns `null` (`Nothing` in Visual Basic), there are no additional result pages for the original query.</span></span> <span data-ttu-id="59709-135">Následující příklad ukazuje `do…while` smyčku, která načte stránkovaného zákaznická data z ukázkové datová služba Northwind.</span><span class="sxs-lookup"><span data-stu-id="59709-135">The following example shows a `do…while` loop that loads paged customer data from the Northwind sample data service.</span></span>  
  
 [!code-csharp[Astoria Northwind Client#LoadNextLink](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#loadnextlink)]
 [!code-vb[Astoria Northwind Client#LoadNextLink](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#loadnextlink)]  
  
 <span data-ttu-id="59709-136">Když požadavků na dotazy související entity jsou vráceny v odpověď o jedné spolu s sady požadovaná entita, omezení stránkování může mít vliv na vnořené informační kanály, které jsou zahrnuty vložené s odpovědí.</span><span class="sxs-lookup"><span data-stu-id="59709-136">When a query requests that related entities are returned in a single response together with the requested entity set, paging limits may affect nested feeds that are included inline with the response.</span></span> <span data-ttu-id="59709-137">Například pokud stránkování omezení nastaveno ve vzorku datová služba Northwind pro `Customers` sadu entit, nezávislé omezení stránkování lze také nastavit pro související `Orders` entity nastavení, jako v následujícím příkladu od Northwind.svc.cs souboru, který Definuje ukázková datová služba Northwind.</span><span class="sxs-lookup"><span data-stu-id="59709-137">For example, when a paging limit is set in the Northwind sample data service for the `Customers` entity set, an independent paging limit can also be set for the related `Orders` entity set, as in the following example from the Northwind.svc.cs file that defines the Northwind sample data service.</span></span>  
  
 [!code-csharp[Astoria Northwind Service#DataServiceConfigPaging](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_service/cs/northwind.svc.cs#dataserviceconfigpaging)]
 [!code-vb[Astoria Northwind Service#DataServiceConfigPaging](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_service/vb/northwind.svc.vb#dataserviceconfigpaging)]  
  
 <span data-ttu-id="59709-138">V takovém případě je nutné implementovat stránkování pro obě na nejvyšší úrovni `Customers` a vnořeného `Orders` informační kanály entity.</span><span class="sxs-lookup"><span data-stu-id="59709-138">In this case, you must implement paging for both the top-level `Customers` and the nested `Orders` entity feeds.</span></span> <span data-ttu-id="59709-139">Následující příklad ukazuje `while` smyčky použitá k načtení stránky `Orders` související entity vybranému `Customers` entity.</span><span class="sxs-lookup"><span data-stu-id="59709-139">The following example shows the `while` loop used to load pages of `Orders` entities related to a selected `Customers` entity.</span></span>  
  
 [!code-csharp[Astoria Northwind Client#LoadNextOrdersLink](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#loadnextorderslink)]
 [!code-vb[Astoria Northwind Client#LoadNextOrdersLink](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#loadnextorderslink)]  
  
 <span data-ttu-id="59709-140">Další informace najdete v tématu [jak: Načtení stránkovaných výsledků](../../../../docs/framework/data/wcf/how-to-load-paged-results-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="59709-140">For more information, see [How to: Load Paged Results](../../../../docs/framework/data/wcf/how-to-load-paged-results-wcf-data-services.md).</span></span>  
  
## <a name="binary-data-streams"></a><span data-ttu-id="59709-141">Binární datové proudy</span><span class="sxs-lookup"><span data-stu-id="59709-141">Binary Data Streams</span></span>  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="59709-142">umožňuje přístup k datům binárních rozsáhlých objektů (BLOB) jako datový proud.</span><span class="sxs-lookup"><span data-stu-id="59709-142">enables you to access binary large object (BLOB) data as a data stream.</span></span> <span data-ttu-id="59709-143">Streamování odloží načítání binárních dat, dokud je to potřeba, a klient může zpracovávat efektivněji tato data.</span><span class="sxs-lookup"><span data-stu-id="59709-143">Streaming defers the loading of binary data until it is needed, and the client can more efficiently process this data.</span></span> <span data-ttu-id="59709-144">Aby bylo možné tuto funkci využít, musí implementovat datové služby <xref:System.Data.Services.Providers.IDataServiceStreamProvider> zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="59709-144">In order to take advantage of this functionality, the data service must implement the <xref:System.Data.Services.Providers.IDataServiceStreamProvider> provider.</span></span> <span data-ttu-id="59709-145">Další informace najdete v tématu [streamování poskytovatele](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="59709-145">For more information, see [Streaming Provider](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).</span></span> <span data-ttu-id="59709-146">Pokud je povoleno vysílání datového proudu, typy entit jsou vráceny bez související binární data.</span><span class="sxs-lookup"><span data-stu-id="59709-146">When streaming is enabled, entity types are returned without the related binary data.</span></span> <span data-ttu-id="59709-147">V takovém případě musíte použít <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> metodu <xref:System.Data.Services.Client.DataServiceContext> pro přístup k datový proud pro binární data ze služby.</span><span class="sxs-lookup"><span data-stu-id="59709-147">In this case, you must use the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method of the <xref:System.Data.Services.Client.DataServiceContext> class to access the data stream for the binary data from the service.</span></span> <span data-ttu-id="59709-148">Podobně lze použít <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> metoda pro přidání nebo změnu binární data konkrétní entity jako datový proud.</span><span class="sxs-lookup"><span data-stu-id="59709-148">Similarly, use the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method to add or change binary data for an entity as a stream.</span></span> <span data-ttu-id="59709-149">Další informace najdete v tématu [práce s binárními daty](../../../../docs/framework/data/wcf/working-with-binary-data-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="59709-149">For more information, see [Working with Binary Data](../../../../docs/framework/data/wcf/working-with-binary-data-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="59709-150">Viz také:</span><span class="sxs-lookup"><span data-stu-id="59709-150">See also</span></span>

- [<span data-ttu-id="59709-151">Klientská knihovna pro WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="59709-151">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)
- [<span data-ttu-id="59709-152">Dotazování v datové službě</span><span class="sxs-lookup"><span data-stu-id="59709-152">Querying the Data Service</span></span>](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)
