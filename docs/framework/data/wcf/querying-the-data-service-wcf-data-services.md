---
title: Dotazování na datovou službu (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
- WCF Data Services, accessing data
ms.assetid: 823e9444-27aa-4f1f-be8e-0486d67f54c0
ms.openlocfilehash: cc0e8a5e7d254fc4b34566d2252869a2da4af3db
ms.sourcegitcommit: 5ae5a1a9520b8b8b6164ad728d396717f30edafc
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/11/2019
ms.locfileid: "70894292"
---
# <a name="querying-the-data-service-wcf-data-services"></a><span data-ttu-id="9dbeb-102">Dotazování na datovou službu (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="9dbeb-102">Querying the Data Service (WCF Data Services)</span></span>

<span data-ttu-id="9dbeb-103">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] Klientská knihovna umožňuje spouštět dotazy na datovou službu pomocí známých .NET Framework programovacích vzorů, včetně použití jazyka LINQ (Language Integrated Query).</span><span class="sxs-lookup"><span data-stu-id="9dbeb-103">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library enables you to execute queries against a data service by using familiar .NET Framework programming patterns, including using language integrated query (LINQ).</span></span> <span data-ttu-id="9dbeb-104">Klientská knihovna překládá dotaz, který je definován v klientovi jako instance <xref:System.Data.Services.Client.DataServiceQuery%601> třídy, do zprávy požadavku HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-104">The client library translates a query, which is defined on the client as an instance of the <xref:System.Data.Services.Client.DataServiceQuery%601> class, into an HTTP GET request message.</span></span> <span data-ttu-id="9dbeb-105">Knihovna obdrží zprávu s odpovědí a přeloží ji do instancí tříd služby Klient data Service.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-105">The library receives the response message and translates it into instances of client data service classes.</span></span> <span data-ttu-id="9dbeb-106">Tyto třídy jsou sledovány <xref:System.Data.Services.Client.DataServiceContext> třídou, do <xref:System.Data.Services.Client.DataServiceQuery%601> které patří.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-106">These classes are tracked by the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span>

## <a name="data-service-queries"></a><span data-ttu-id="9dbeb-107">Dotazy na datovou službu</span><span class="sxs-lookup"><span data-stu-id="9dbeb-107">Data Service Queries</span></span>

<span data-ttu-id="9dbeb-108"><xref:System.Data.Services.Client.DataServiceQuery%601> Obecná třída reprezentuje dotaz, který vrací kolekci nula nebo více instancí typu entity.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-108">The <xref:System.Data.Services.Client.DataServiceQuery%601> generic class represents a query that returns a collection of zero or more entity type instances.</span></span> <span data-ttu-id="9dbeb-109">Dotaz datové služby vždy patří do stávajícího kontextu datové služby.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-109">A data service query always belongs to an existing data service context.</span></span> <span data-ttu-id="9dbeb-110">Tento kontext udržuje informace o identifikátorech URI a metadatech služby, které jsou nutné k vytvoření a spuštění dotazu.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-110">This context maintains the service URI and metadata information that is required to compose and execute the query.</span></span>

<span data-ttu-id="9dbeb-111">Při použití dialogového okna **Přidat odkaz na službu** k přidání datové služby do klientské aplikace založené na .NET Framework je vytvořena třída kontejneru entity, která dědí z <xref:System.Data.Services.Client.DataServiceContext> třídy.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-111">When you use the **Add Service Reference** dialog to add a data service to a .NET Framework-based client application, an entity container class is created that inherits from the <xref:System.Data.Services.Client.DataServiceContext> class.</span></span> <span data-ttu-id="9dbeb-112">Tato třída obsahuje vlastnosti, které vracejí <xref:System.Data.Services.Client.DataServiceQuery%601> typované instance.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-112">This class includes properties that return typed <xref:System.Data.Services.Client.DataServiceQuery%601> instances.</span></span> <span data-ttu-id="9dbeb-113">Pro každou sadu entit, kterou datová služba zpřístupňuje, existuje jedna vlastnost.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-113">There is one property for each entity set that the data service exposes.</span></span> <span data-ttu-id="9dbeb-114">Tyto vlastnosti usnadňují vytvoření instance <xref:System.Data.Services.Client.DataServiceQuery%601>typu.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-114">These properties make it easier to create an instance of a typed <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>

<span data-ttu-id="9dbeb-115">Dotaz se spustí v následujících scénářích:</span><span class="sxs-lookup"><span data-stu-id="9dbeb-115">A query is executed in the following scenarios:</span></span>

- <span data-ttu-id="9dbeb-116">Při implicitním vyčíslení výsledků, jako například:</span><span class="sxs-lookup"><span data-stu-id="9dbeb-116">When results are enumerated implicitly, such as:</span></span>

  - <span data-ttu-id="9dbeb-117">Když je vyhodnocena <xref:System.Data.Services.Client.DataServiceContext> vlastnost v, která představuje a sada entit, například `foreach` během smyčky (C#) nebo `For Each` (Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="9dbeb-117">When a property on the <xref:System.Data.Services.Client.DataServiceContext> that represents and entity set is enumerated, such as during a `foreach` (C#) or `For Each` (Visual Basic) loop.</span></span>

  - <span data-ttu-id="9dbeb-118">Když se dotaz přiřadí do `List` kolekce.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-118">When the query is assigned to a `List` collection.</span></span>

- <span data-ttu-id="9dbeb-119">, Pokud je <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> Metoda neboexplicitněvolána.<xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A></span><span class="sxs-lookup"><span data-stu-id="9dbeb-119">When the <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A> or <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> method is explicitly called.</span></span>

- <span data-ttu-id="9dbeb-120">V případě, že je volán operátor spuštění dotazu <xref:System.Linq.Enumerable.First%2A> LINQ <xref:System.Linq.Enumerable.Single%2A> , například nebo.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-120">When a LINQ query execution operator, such as <xref:System.Linq.Enumerable.First%2A> or <xref:System.Linq.Enumerable.Single%2A> is called.</span></span>

<span data-ttu-id="9dbeb-121">Následující dotaz, když se spustí, vrátí všechny `Customers` entity ve službě Northwind data Service:</span><span class="sxs-lookup"><span data-stu-id="9dbeb-121">The following query, when it is executed, returns all `Customers` entities in the Northwind data service:</span></span>

[!code-csharp[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#getallcustomersspecific)]
[!code-vb[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#getallcustomersspecific)]

<span data-ttu-id="9dbeb-122">Další informace najdete v tématu [jak: Spusťte dotazy](how-to-execute-data-service-queries-wcf-data-services.md)datové služby.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-122">For more information, see [How to: Execute Data Service Queries](how-to-execute-data-service-queries-wcf-data-services.md).</span></span>

<span data-ttu-id="9dbeb-123">Klient podporuje dotazy na objekty s pozdní vazbou, například při použití *dynamického* typu v C# [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</span><span class="sxs-lookup"><span data-stu-id="9dbeb-123">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client supports queries for late-bound objects, such as when you use the *dynamic* type in C#.</span></span> <span data-ttu-id="9dbeb-124">Z důvodu výkonu byste však měli vždy vytvářet dotazy silného typu proti datové službě.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-124">However, for performance reasons you should always compose strongly-typed queries against the data service.</span></span> <span data-ttu-id="9dbeb-125"><xref:System.Tuple> Typ a dynamické objekty nejsou klientem podporovány.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-125">The <xref:System.Tuple> type and dynamic objects are not supported by the client.</span></span>

## <a name="linq-queries"></a><span data-ttu-id="9dbeb-126">Dotazy LINQ</span><span class="sxs-lookup"><span data-stu-id="9dbeb-126">LINQ Queries</span></span>

<span data-ttu-id="9dbeb-127">Vzhledem k <xref:System.Data.Services.Client.DataServiceQuery%601> tomu, že <xref:System.Linq.IQueryable%601> třída implementuje rozhraní definované technologií LINQ [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] , může Klientská knihovna transformovat dotazy LINQ proti sadě entit na identifikátor URI, který představuje výraz dotazu vyhodnocený proti datové službě. partner.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-127">Because the <xref:System.Data.Services.Client.DataServiceQuery%601> class implements the <xref:System.Linq.IQueryable%601> interface defined by LINQ, the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library is able to transform LINQ queries against entity set data into a URI that represents a query expression evaluated against a data service resource.</span></span> <span data-ttu-id="9dbeb-128">V následujícím příkladu je dotaz LINQ, který je ekvivalentní předchozímu <xref:System.Data.Services.Client.DataServiceQuery%601> , který vrací `Orders` náklady na dopravné více než $30 a objedná výsledky podle nákladů na dopravu:</span><span class="sxs-lookup"><span data-stu-id="9dbeb-128">The following example is a LINQ query that is equivalent to the previous <xref:System.Data.Services.Client.DataServiceQuery%601> that returns `Orders` that have a freight cost of more than $30 and orders the results by the freight cost:</span></span>

[!code-csharp[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionslinqspecific)]
[!code-vb[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionslinqspecific)]

<span data-ttu-id="9dbeb-129">Tento dotaz LINQ se převede na následující identifikátor URI dotazu, který se spustí pro službu [rychlého](quickstart-wcf-data-services.md) startu dat založenou na Northwind:</span><span class="sxs-lookup"><span data-stu-id="9dbeb-129">This LINQ query is translated into the following query URI that is executed against the Northwind-based [quickstart](quickstart-wcf-data-services.md) data service:</span></span>

```http
http://localhost:12345/Northwind.svc/Orders?Orderby=ShippedDate&?filter=Freight gt 30
```

> [!NOTE]
> <span data-ttu-id="9dbeb-130">Sada dotazů vyhodnotit ve syntaxi LINQ je širší než ty, které jsou povolené v syntaxi URI representationed state transfer (REST), která je používána datovými službami.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-130">The set of queries expressible in the LINQ syntax is broader than those enabled in the representational state transfer (REST)-based URI syntax that is used by data services.</span></span> <span data-ttu-id="9dbeb-131"><xref:System.NotSupportedException> Je vyvolána, když dotaz nelze namapovat na identifikátor URI v cílové datové službě.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-131">A <xref:System.NotSupportedException> is raised when the query cannot be mapped to a URI in the target data service.</span></span>

<span data-ttu-id="9dbeb-132">Další informace najdete v tématu věnovaném [hlediskům LINQ](linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="9dbeb-132">For more information, see [LINQ Considerations](linq-considerations-wcf-data-services.md).</span></span>

## <a name="adding-query-options"></a><span data-ttu-id="9dbeb-133">Přidání možností dotazu</span><span class="sxs-lookup"><span data-stu-id="9dbeb-133">Adding Query Options</span></span>

<span data-ttu-id="9dbeb-134">Dotazy na datové služby podporují všechny možnosti dotazů, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]které s nabízí.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-134">Data service queries support all the query options that [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]s provides.</span></span> <span data-ttu-id="9dbeb-135">Zavoláte <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> metodu pro připojení možností dotazu <xref:System.Data.Services.Client.DataServiceQuery%601> k instanci.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-135">You call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method to append query options to a <xref:System.Data.Services.Client.DataServiceQuery%601> instance.</span></span> <span data-ttu-id="9dbeb-136"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A>Vrátí novou <xref:System.Data.Services.Client.DataServiceQuery%601> instanci, která je ekvivalentní původnímu dotazu, ale s nastavenou možností nového dotazu.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-136"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> returns a new <xref:System.Data.Services.Client.DataServiceQuery%601> instance that is equivalent to the original query but with the new query option set.</span></span> <span data-ttu-id="9dbeb-137">Následující dotaz, pokud je proveden, vrátí `Orders` `Freight` `OrderID`hodnoty, které jsou filtrovány podle hodnoty a seřazeny sestupně:</span><span class="sxs-lookup"><span data-stu-id="9dbeb-137">The following query, when executed, returns `Orders` that are filtered by the `Freight` value and ordered by the `OrderID`, descending:</span></span>

[!code-csharp[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionsspecific)]
[!code-vb[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionsspecific)]

<span data-ttu-id="9dbeb-138">Možnost `$orderby` dotazu můžete použít pro řazení a filtrování dotazu založeného na jedné vlastnosti, jako v následujícím příkladu, který filtruje a řadí vrácené `Orders` objekty na základě hodnoty `Freight` vlastnosti:</span><span class="sxs-lookup"><span data-stu-id="9dbeb-138">You can use the `$orderby` query option to both order and filter a query based on a single property, as in the following example that filters and orders the returned `Orders` objects based on the value of the `Freight` property:</span></span>

[!code-csharp[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#orderwithfilter)]
[!code-vb[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#orderwithfilter)]

<span data-ttu-id="9dbeb-139">Můžete zavolat <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> metodu po sobě a vytvořit složité výrazy dotazu.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-139">You can call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method consecutively to construct complex query expressions.</span></span> <span data-ttu-id="9dbeb-140">Další informace najdete v tématu [jak: Přidejte možnosti dotazu do dotazu](how-to-add-query-options-to-a-data-service-query-wcf-data-services.md)datové služby.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-140">For more information, see [How to: Add Query Options to a Data Service Query](how-to-add-query-options-to-a-data-service-query-wcf-data-services.md).</span></span>

<span data-ttu-id="9dbeb-141">Možnosti dotazu poskytují další způsob, jak vyjádřit syntaktické komponenty dotazu LINQ.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-141">Query options give you another way to express the syntactic components of a LINQ query.</span></span> <span data-ttu-id="9dbeb-142">Další informace najdete v tématu věnovaném [hlediskům LINQ](linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="9dbeb-142">For more information, see [LINQ Considerations](linq-considerations-wcf-data-services.md).</span></span>

> [!NOTE]
> <span data-ttu-id="9dbeb-143">Možnost dotazu nelze přidat k identifikátoru URI dotazu <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> pomocí metody. `$select`</span><span class="sxs-lookup"><span data-stu-id="9dbeb-143">The `$select` query option cannot be added to a query URI by using the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method.</span></span> <span data-ttu-id="9dbeb-144">Doporučujeme použít metodu LINQ <xref:System.Linq.Enumerable.Select%2A> , pokud má klient `$select` generovat možnost dotazu v identifikátoru URI požadavku.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-144">We recommend that you use the LINQ <xref:System.Linq.Enumerable.Select%2A> method to have the client generate the `$select` query option in the request URI.</span></span>

<a name="executingQueries"></a>

## <a name="client-versus-server-execution"></a><span data-ttu-id="9dbeb-145">Spuštění klienta versus serveru</span><span class="sxs-lookup"><span data-stu-id="9dbeb-145">Client versus Server Execution</span></span>

<span data-ttu-id="9dbeb-146">Klient spustí dotaz ve dvou částech.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-146">The client executes a query in two parts.</span></span> <span data-ttu-id="9dbeb-147">Kdykoli je to možné, výrazy v dotazu se nejprve vyhodnotí na klientovi a pak se vygeneruje dotaz založený na identifikátorech URI a pošle se do datové služby pro vyhodnocení dat ve službě.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-147">Whenever possible, expressions in a query are first evaluated on the client, and then a URI-based query is generated and sent to the data service for evaluation against data in the service.</span></span> <span data-ttu-id="9dbeb-148">Vezměte v úvahu následující dotaz LINQ:</span><span class="sxs-lookup"><span data-stu-id="9dbeb-148">Consider the following LINQ query:</span></span>

[!code-csharp[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqqueryclientevalspecific)]
[!code-vb[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqqueryclientevalspecific)]

<span data-ttu-id="9dbeb-149">V tomto příkladu je výraz `(basePrice – (basePrice * discount))` vyhodnocen na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-149">In this example, the expression `(basePrice – (basePrice * discount))` is evaluated on the client.</span></span> <span data-ttu-id="9dbeb-150">Z tohoto důvodu skutečný identifikátor URI `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)` dotazu, který je odeslán do datové služby, obsahuje již počítanou desítkovou `90` hodnotu v klauzuli Filter.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-150">Because of this, the actual query URI `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)` that is sent to the data service contains the already calculated decimal value of `90` in the filter clause.</span></span> <span data-ttu-id="9dbeb-151">Ostatní části filtrovacího výrazu, včetně výrazu podřetězce, jsou vyhodnocovány datovou službou.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-151">The other parts of the filtering expression, including the substring expression, are evaluated by the data service.</span></span> <span data-ttu-id="9dbeb-152">Výrazy, které jsou vyhodnocovány v klientovi, následují sémantiku modulu CLR (Common Language Runtime), zatímco výrazy odesílané datové službě spoléhají na implementaci [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protokolu datové služby.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-152">Expressions that are evaluated on the client follow common language runtime (CLR) semantics, while expressions sent to the data service rely on the data service implementation of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Protocol.</span></span> <span data-ttu-id="9dbeb-153">Měli byste si také uvědomit scénáře, kdy může toto samostatné vyhodnocení způsobit neočekávané výsledky, například když klient i služba provádějí vyhodnocení na základě času v různých časových pásmech.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-153">You should also be aware of scenarios where this separate evaluation may cause unexpected results, such as when both the client and service perform time-based evaluations in different time zones.</span></span>

## <a name="query-responses"></a><span data-ttu-id="9dbeb-154">Odpovědi na dotazy</span><span class="sxs-lookup"><span data-stu-id="9dbeb-154">Query Responses</span></span>

<span data-ttu-id="9dbeb-155">Po spuštění <xref:System.Data.Services.Client.DataServiceQuery%601> <xref:System.Collections.Generic.IEnumerable%601> vrátí funkce požadovaný typ entity.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-155">When executed, the <xref:System.Data.Services.Client.DataServiceQuery%601> returns an <xref:System.Collections.Generic.IEnumerable%601> of the requested entity type.</span></span> <span data-ttu-id="9dbeb-156">Tento výsledek dotazu lze přetypovat na <xref:System.Data.Services.Client.QueryOperationResponse%601> objekt, jak je uvedeno v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="9dbeb-156">This query result can be cast to a <xref:System.Data.Services.Client.QueryOperationResponse%601> object, as in the following example:</span></span>

[!code-csharp[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#getresponsespecific)]
[!code-vb[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#getresponsespecific)]

<span data-ttu-id="9dbeb-157">Instance typu entity, které představují entity v datové službě, jsou vytvořeny v klientovi pomocí procesu nazývaného materializace objektů.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-157">The entity type instances that represent entities in the data service are created on the client by a process called object materialization.</span></span> <span data-ttu-id="9dbeb-158">Další informace naleznete v tématu [materializace objektů](object-materialization-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="9dbeb-158">For more information, see [Object Materialization](object-materialization-wcf-data-services.md).</span></span> <span data-ttu-id="9dbeb-159"><xref:System.Data.Services.Client.QueryOperationResponse%601> Objekt implementuje<xref:System.Collections.Generic.IEnumerable%601> k poskytnutí přístupu k výsledkům dotazu.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-159">The <xref:System.Data.Services.Client.QueryOperationResponse%601> object implements <xref:System.Collections.Generic.IEnumerable%601> to provide access to the results of the query.</span></span>

<span data-ttu-id="9dbeb-160">Má <xref:System.Data.Services.Client.QueryOperationResponse%601> také následující členy, kteří vám umožní získat přístup k dalším informacím o výsledku dotazu:</span><span class="sxs-lookup"><span data-stu-id="9dbeb-160">The <xref:System.Data.Services.Client.QueryOperationResponse%601> also has the following members that enable you to access additional information about a query result:</span></span>

- <span data-ttu-id="9dbeb-161"><xref:System.Data.Services.Client.OperationResponse.Error%2A>– Načte chybu vyvolanou operací, pokud k nějakému došlo.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-161"><xref:System.Data.Services.Client.OperationResponse.Error%2A> - gets an error thrown by the operation, if any has occurred.</span></span>

- <span data-ttu-id="9dbeb-162"><xref:System.Data.Services.Client.OperationResponse.Headers%2A>-obsahuje kolekci hlaviček HTTP odpovědi přidružených k odpovědi na dotaz.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-162"><xref:System.Data.Services.Client.OperationResponse.Headers%2A> - contains the collection of HTTP response headers associated with the query response.</span></span>

- <span data-ttu-id="9dbeb-163"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A>– Získá originál <xref:System.Data.Services.Client.DataServiceQuery%601> , který <xref:System.Data.Services.Client.QueryOperationResponse%601>vygeneroval.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-163"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A> - gets the original <xref:System.Data.Services.Client.DataServiceQuery%601> that generated the <xref:System.Data.Services.Client.QueryOperationResponse%601>.</span></span>

- <span data-ttu-id="9dbeb-164"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A>– Získá kód odpovědi HTTP pro odpověď na dotaz.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-164"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A> - gets the HTTP response code for the query response.</span></span>

- <span data-ttu-id="9dbeb-165"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A>– Získá celkový počet entit v sadě entit, když <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> byla metoda volána <xref:System.Data.Services.Client.DataServiceQuery%601>na.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-165"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> - gets the total number of entities in the entity set when the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method was called on the <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>

- <span data-ttu-id="9dbeb-166"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A>-Vrátí <xref:System.Data.Services.Client.DataServiceQueryContinuation> objekt, který obsahuje identifikátor URI další stránky výsledků.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-166"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A> - returns a <xref:System.Data.Services.Client.DataServiceQueryContinuation> object that contains the URI of the next page of results.</span></span>

<span data-ttu-id="9dbeb-167">Ve výchozím nastavení [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] vrací jenom data, která jsou explicitně vybraná pomocí identifikátoru URI dotazu.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-167">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] only returns data that is explicitly selected by the query URI.</span></span> <span data-ttu-id="9dbeb-168">Díky tomu máte možnost explicitně načíst další data z datové služby, když je to potřeba.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-168">This gives you the option to explicitly load additional data from the data service when it is needed.</span></span> <span data-ttu-id="9dbeb-169">Požadavek se pošle do datové služby pokaždé, když explicitně načtete data z datové služby.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-169">A request is sent to the data service each time you explicitly load data from the data service.</span></span> <span data-ttu-id="9dbeb-170">Data, která je možné explicitně načíst, zahrnují související entity, data stránkované odpovědi a binární datové proudy.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-170">Data that can be explicitly loaded includes related entities, paged response data, and binary data streams.</span></span>

> [!NOTE]
> <span data-ttu-id="9dbeb-171">Vzhledem k tomu, že datová služba může vracet stránkované odpovědi, doporučujeme, aby vaše aplikace používala programovací model pro zpracování odpovědi stránkované datové služby.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-171">Because a data service may return a paged response, we recommend that your application use the programming pattern to handle a paged data service response.</span></span> <span data-ttu-id="9dbeb-172">Další informace najdete v tématu [načítání odloženého obsahu](loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="9dbeb-172">For more information, see [Loading Deferred Content](loading-deferred-content-wcf-data-services.md).</span></span>

<span data-ttu-id="9dbeb-173">Množství dat vrácených dotazem se může také snížit tak, že se v odpovědi vrátí jenom některé vlastnosti entity.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-173">The amount of data returned by a query can also be reduced by specifying that only certain properties of an entity are returned in the response.</span></span> <span data-ttu-id="9dbeb-174">Další informace najdete v tématu [projekce dotazů](query-projections-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="9dbeb-174">For more information, see [Query Projections](query-projections-wcf-data-services.md).</span></span>

## <a name="getting-a-count-of-the-total-number-of-entities-in-the-set"></a><span data-ttu-id="9dbeb-175">Získává se celkový počet entit v sadě.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-175">Getting a Count of the Total Number of Entities in the Set</span></span>

<span data-ttu-id="9dbeb-176">V některých scénářích je užitečné znát celkový počet entit v sadě entit a nikoli pouze počet vrácený dotazem.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-176">In some scenarios, it is helpful to know the total number of entities in an entity set and not merely the number returned by the query.</span></span> <span data-ttu-id="9dbeb-177"><xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> Zavolejte metodu<xref:System.Data.Services.Client.DataServiceQuery%601> na pro požadavek, aby tento celkový počet entit v sadě zahrnoval výsledek dotazu.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-177">Call the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method on the <xref:System.Data.Services.Client.DataServiceQuery%601> to request that this total count of entities in the set be included with the query result.</span></span> <span data-ttu-id="9dbeb-178">V tomto případě <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> vrátí vlastnost vrácenou <xref:System.Data.Services.Client.QueryOperationResponse%601> celkový počet entit v sadě.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-178">In this case, the <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> property of the returned <xref:System.Data.Services.Client.QueryOperationResponse%601> returns the total number of entities in the set.</span></span>

<span data-ttu-id="9dbeb-179">Můžete také získat celkový počet entit v sadě <xref:System.Int32> jako nebo <xref:System.Int64> jako hodnotu voláním <xref:System.Linq.Enumerable.Count%2A> metod nebo <xref:System.Linq.Enumerable.LongCount%2A> v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-179">You can also get only the total count of entities in the set either as an <xref:System.Int32> or as a <xref:System.Int64> value by calling the <xref:System.Linq.Enumerable.Count%2A> or <xref:System.Linq.Enumerable.LongCount%2A> methods respectively.</span></span> <span data-ttu-id="9dbeb-180">Při volání těchto metod se nevrátí <xref:System.Data.Services.Client.QueryOperationResponse%601> a vrátí se jenom hodnota Count.</span><span class="sxs-lookup"><span data-stu-id="9dbeb-180">When these methods are called, a <xref:System.Data.Services.Client.QueryOperationResponse%601> is not returned; only the count value is returned.</span></span> <span data-ttu-id="9dbeb-181">Další informace najdete v tématu [jak: Určete počet entit vrácených dotazem](number-of-entities-returned-by-a-query-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="9dbeb-181">For more information, see [How to: Determine the Number of Entities Returned by a Query](number-of-entities-returned-by-a-query-wcf.md).</span></span>

## <a name="in-this-section"></a><span data-ttu-id="9dbeb-182">V tomto oddílu</span><span class="sxs-lookup"><span data-stu-id="9dbeb-182">In This Section</span></span>

- [<span data-ttu-id="9dbeb-183">Projekce dotazů</span><span class="sxs-lookup"><span data-stu-id="9dbeb-183">Query Projections</span></span>](query-projections-wcf-data-services.md)

- [<span data-ttu-id="9dbeb-184">Materializace objektů</span><span class="sxs-lookup"><span data-stu-id="9dbeb-184">Object Materialization</span></span>](object-materialization-wcf-data-services.md)

- [<span data-ttu-id="9dbeb-185">Aspekty LINQ</span><span class="sxs-lookup"><span data-stu-id="9dbeb-185">LINQ Considerations</span></span>](linq-considerations-wcf-data-services.md)

- [<span data-ttu-id="9dbeb-186">Postupy: Spouštění dotazů datové služby</span><span class="sxs-lookup"><span data-stu-id="9dbeb-186">How to: Execute Data Service Queries</span></span>](how-to-execute-data-service-queries-wcf-data-services.md)

- [<span data-ttu-id="9dbeb-187">Postupy: Přidání možností dotazu do dotazu datové služby</span><span class="sxs-lookup"><span data-stu-id="9dbeb-187">How to: Add Query Options to a Data Service Query</span></span>](how-to-add-query-options-to-a-data-service-query-wcf-data-services.md)

- [<span data-ttu-id="9dbeb-188">Postupy: Určení počtu entit vrácených dotazem</span><span class="sxs-lookup"><span data-stu-id="9dbeb-188">How to: Determine the Number of Entities Returned by a Query</span></span>](number-of-entities-returned-by-a-query-wcf.md)

- [<span data-ttu-id="9dbeb-189">Postupy: Zadání přihlašovacích údajů klienta pro žádost datové služby</span><span class="sxs-lookup"><span data-stu-id="9dbeb-189">How to: Specify Client Credentials for a Data Service Request</span></span>](specify-client-creds-for-a-data-service-request-wcf.md)

- [<span data-ttu-id="9dbeb-190">Postupy: Nastavení hlaviček v žádosti klienta</span><span class="sxs-lookup"><span data-stu-id="9dbeb-190">How to: Set Headers in the Client Request</span></span>](how-to-set-headers-in-the-client-request-wcf-data-services.md)

- [<span data-ttu-id="9dbeb-191">Postupy: Výsledky dotazu projektu</span><span class="sxs-lookup"><span data-stu-id="9dbeb-191">How to: Project Query Results</span></span>](how-to-project-query-results-wcf-data-services.md)

## <a name="see-also"></a><span data-ttu-id="9dbeb-192">Viz také:</span><span class="sxs-lookup"><span data-stu-id="9dbeb-192">See also</span></span>

- [<span data-ttu-id="9dbeb-193">Klientská knihovna pro WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="9dbeb-193">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
