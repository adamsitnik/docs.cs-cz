---
title: 'Optimistická metoda souběžného zpracování: Přehled'
ms.date: 03/30/2017
ms.assetid: c2e38512-d0c8-4807-b30a-cb7e30338694
ms.openlocfilehash: 8f3bd35cc1391339d99d5aa0a4021e29fa81756c
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/23/2019
ms.locfileid: "61767485"
---
# <a name="optimistic-concurrency-overview"></a><span data-ttu-id="9f66e-102">Optimistická metoda souběžného zpracování: Přehled</span><span class="sxs-lookup"><span data-stu-id="9f66e-102">Optimistic Concurrency: Overview</span></span>
[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] <span data-ttu-id="9f66e-103">podporuje optimistického řízení souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="9f66e-103">supports optimistic concurrency control.</span></span> <span data-ttu-id="9f66e-104">Následující tabulka popisuje podmínky, které se vztahují k optimistického řízení souběžnosti v [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] dokumentaci:</span><span class="sxs-lookup"><span data-stu-id="9f66e-104">The following table describes terms that apply to optimistic concurrency in [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] documentation:</span></span>  
  
|<span data-ttu-id="9f66e-105">Podmínky</span><span class="sxs-lookup"><span data-stu-id="9f66e-105">Terms</span></span>|<span data-ttu-id="9f66e-106">Popis</span><span class="sxs-lookup"><span data-stu-id="9f66e-106">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="9f66e-107">souběžnost</span><span class="sxs-lookup"><span data-stu-id="9f66e-107">concurrency</span></span>|<span data-ttu-id="9f66e-108">Situace, ve kterém dvě nebo více uživatelů současně pokusí aktualizovat na stejném řádku databáze.</span><span class="sxs-lookup"><span data-stu-id="9f66e-108">The situation in which two or more users at the same time try to update the same database row.</span></span>|  
|<span data-ttu-id="9f66e-109">ke konfliktu souběžnosti</span><span class="sxs-lookup"><span data-stu-id="9f66e-109">concurrency conflict</span></span>|<span data-ttu-id="9f66e-110">Situace, ve kterém dvě nebo více uživatelů současně pokusí odeslat konfliktní hodnoty pro jeden nebo více sloupců řádků.</span><span class="sxs-lookup"><span data-stu-id="9f66e-110">The situation in which two or more users at the same time try to submit conflicting values to one or more columns of a row.</span></span>|  
|<span data-ttu-id="9f66e-111">kontrola souběžnosti</span><span class="sxs-lookup"><span data-stu-id="9f66e-111">concurrency control</span></span>|<span data-ttu-id="9f66e-112">Metoda používaná k řešení konfliktů souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="9f66e-112">The technique used to resolve concurrency conflicts.</span></span>|  
|<span data-ttu-id="9f66e-113">Optimistického řízení souběžnosti</span><span class="sxs-lookup"><span data-stu-id="9f66e-113">optimistic concurrency control</span></span>|<span data-ttu-id="9f66e-114">Technika, který nejprve prověří, zda ostatní transakce změnily hodnoty v řádku před umožňující změny k odeslání.</span><span class="sxs-lookup"><span data-stu-id="9f66e-114">The technique that first investigates whether other transactions have changed values in a row before permitting changes to be submitted.</span></span><br /><br /> <span data-ttu-id="9f66e-115">Rozdíl oproti *pesimistické řízení souběžnosti*, které se uzamkne záznamu, aby nedocházelo ke konfliktům souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="9f66e-115">Contrast with *pessimistic concurrency control*, which locks the record to avoid concurrency conflicts.</span></span><br /><br /> <span data-ttu-id="9f66e-116">*Optimistická* protože považuje za šance na jednu transakci zasahovala do jiného a pravděpodobně nebude tak jako ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="9f66e-116">*Optimistic* control is so termed because it considers the chances of one transaction interfering with another to be unlikely.</span></span>|  
|<span data-ttu-id="9f66e-117">Řešení konfliktů</span><span class="sxs-lookup"><span data-stu-id="9f66e-117">conflict resolution</span></span>|<span data-ttu-id="9f66e-118">Proces aktualizace konfliktní položku znovu dotazování na databázi a potom sjednocování rozdílů.</span><span class="sxs-lookup"><span data-stu-id="9f66e-118">The process of refreshing a conflicting item by querying the database again and then reconciling differences.</span></span><br /><br /> <span data-ttu-id="9f66e-119">Při aktualizaci objektu [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] modul sledování změny obsahuje následující data:</span><span class="sxs-lookup"><span data-stu-id="9f66e-119">When an object is refreshed, the [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] change tracker holds the following data:</span></span><br /><br /> <span data-ttu-id="9f66e-120">-Zkontrolujte hodnoty původně přijatých z databáze a použít pro aktualizaci.</span><span class="sxs-lookup"><span data-stu-id="9f66e-120">-   The values originally taken from the database and used for the update check.</span></span><br /><span data-ttu-id="9f66e-121">-Nových hodnot v databázi z dalších dotazů.</span><span class="sxs-lookup"><span data-stu-id="9f66e-121">-   The new database values from the subsequent query.</span></span><br /><br /> [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] <span data-ttu-id="9f66e-122">pak určuje, zda je objekt v konfliktu (to znamená, zda jeden nebo více hodnot členů změnil).</span><span class="sxs-lookup"><span data-stu-id="9f66e-122">then determines whether the object is in conflict (that is, whether one or more of its member values has changed).</span></span> <span data-ttu-id="9f66e-123">Pokud objekt je v konfliktu, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] vedle Určuje, které její členy jsou v konfliktu.</span><span class="sxs-lookup"><span data-stu-id="9f66e-123">If the object is in conflict, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] next determines which of its members are in conflict.</span></span><br /><br /> <span data-ttu-id="9f66e-124">Každý člen v konfliktu, který [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] zjišťuje se přidá do seznamu ke konfliktu.</span><span class="sxs-lookup"><span data-stu-id="9f66e-124">Any member conflict that [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] discovers is added to a conflict list.</span></span>|  
  
 <span data-ttu-id="9f66e-125">V [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] objektový model *optimistického řízení souběžnosti konflikt* nastane, pokud jsou splněny obě následující podmínky:</span><span class="sxs-lookup"><span data-stu-id="9f66e-125">In the [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] object model, an *optimistic concurrency conflict* occurs when both of the following conditions are true:</span></span>  
  
- <span data-ttu-id="9f66e-126">Klient se pokusí odeslat změny do databáze.</span><span class="sxs-lookup"><span data-stu-id="9f66e-126">The client tries to submit changes to the database.</span></span>  
  
- <span data-ttu-id="9f66e-127">Jeden nebo více hodnot kontrolu aktualizací v databázi byly aktualizovány od klienta posledního čtení.</span><span class="sxs-lookup"><span data-stu-id="9f66e-127">One or more update-check values have been updated in the database since the client last read them.</span></span>  
  
 <span data-ttu-id="9f66e-128">Řešení konfliktu obsahuje zjišťování, které členy objektu je v konfliktu a potom rozhodování o tom, co chcete udělat.</span><span class="sxs-lookup"><span data-stu-id="9f66e-128">Resolution of this conflict includes discovering which members of the object are in conflict, and then deciding what you want to do about it.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="9f66e-129">Pouze členové mapován jako <xref:System.Data.Linq.Mapping.UpdateCheck.Always> nebo <xref:System.Data.Linq.Mapping.UpdateCheck.WhenChanged> účastnit kontroly optimistické souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="9f66e-129">Only members mapped as <xref:System.Data.Linq.Mapping.UpdateCheck.Always> or <xref:System.Data.Linq.Mapping.UpdateCheck.WhenChanged> participate in optimistic concurrency checks.</span></span> <span data-ttu-id="9f66e-130">Není žádná kontrola se provádí pro členy označené <xref:System.Data.Linq.Mapping.UpdateCheck.Never>.</span><span class="sxs-lookup"><span data-stu-id="9f66e-130">No check is performed for members marked <xref:System.Data.Linq.Mapping.UpdateCheck.Never>.</span></span> <span data-ttu-id="9f66e-131">Další informace naleznete v tématu <xref:System.Data.Linq.Mapping.UpdateCheck>.</span><span class="sxs-lookup"><span data-stu-id="9f66e-131">For more information, see <xref:System.Data.Linq.Mapping.UpdateCheck>.</span></span>  
  
## <a name="example"></a><span data-ttu-id="9f66e-132">Příklad</span><span class="sxs-lookup"><span data-stu-id="9f66e-132">Example</span></span>  
 <span data-ttu-id="9f66e-133">Například v následujícím scénáři User1 začne připravit aktualizace dotazování na databázi pro řádek.</span><span class="sxs-lookup"><span data-stu-id="9f66e-133">For example, in the following scenario, User1 starts to prepare an update by querying the database for a row.</span></span> <span data-ttu-id="9f66e-134">Uživatel1 obdrží řádek s hodnotami Alfreds, Marie a prodej.</span><span class="sxs-lookup"><span data-stu-id="9f66e-134">User1 receives a row with values of Alfreds, Maria, and Sales.</span></span>  
  
 <span data-ttu-id="9f66e-135">Chcete-li změnit hodnotu sloupce správce Alfred a hodnota sloupce oddělení marketingu chce, aby User1.</span><span class="sxs-lookup"><span data-stu-id="9f66e-135">User1 wants to change the value of the Manager column to Alfred and the value of the Department column to Marketing.</span></span> <span data-ttu-id="9f66e-136">Předtím, než tyto změny můžete odeslat uživatel1, uživatel2 odeslal změny v databázi.</span><span class="sxs-lookup"><span data-stu-id="9f66e-136">Before User1 can submit those changes, User2 has submitted changes to the database.</span></span> <span data-ttu-id="9f66e-137">Takže teď hodnotu sloupce Pomocníka s nastavením se změnil na Marie a hodnota sloupce oddělení do služby.</span><span class="sxs-lookup"><span data-stu-id="9f66e-137">So now the value of the Assistant column has been changed to Mary and the value of the Department column to Service.</span></span>  
  
 <span data-ttu-id="9f66e-138">Když User1 se nyní pokusí odeslat změny, odesílání selže a <xref:System.Data.Linq.ChangeConflictException> je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="9f66e-138">When User1 now tries to submit changes, the submission fails and a <xref:System.Data.Linq.ChangeConflictException> exception is thrown.</span></span> <span data-ttu-id="9f66e-139">Tato situace nastane, protože pro oddělení a Pomocníka s nastavením sloupec hodnot v databázi nejsou ty, které nebyly očekávány.</span><span class="sxs-lookup"><span data-stu-id="9f66e-139">This result occurs because the database values for the Assistant column and the Department column are not those that were expected.</span></span> <span data-ttu-id="9f66e-140">Představuje sloupci Pomocníka s nastavením a oddělení členy jsou v konfliktu.</span><span class="sxs-lookup"><span data-stu-id="9f66e-140">Members representing the Assistant and Department columns are in conflict.</span></span> <span data-ttu-id="9f66e-141">Následující tabulka shrnuje situace.</span><span class="sxs-lookup"><span data-stu-id="9f66e-141">The following table summarizes the situation.</span></span>  
  
||<span data-ttu-id="9f66e-142">Správce</span><span class="sxs-lookup"><span data-stu-id="9f66e-142">Manager</span></span>|<span data-ttu-id="9f66e-143">Pomocníka s nastavením</span><span class="sxs-lookup"><span data-stu-id="9f66e-143">Assistant</span></span>|<span data-ttu-id="9f66e-144">Oddělení</span><span class="sxs-lookup"><span data-stu-id="9f66e-144">Department</span></span>|  
|------|-------------|---------------|----------------|  
|<span data-ttu-id="9f66e-145">Původní stav</span><span class="sxs-lookup"><span data-stu-id="9f66e-145">Original state</span></span>|<span data-ttu-id="9f66e-146">Alfreds</span><span class="sxs-lookup"><span data-stu-id="9f66e-146">Alfreds</span></span>|<span data-ttu-id="9f66e-147">Maria</span><span class="sxs-lookup"><span data-stu-id="9f66e-147">Maria</span></span>|<span data-ttu-id="9f66e-148">Prodej</span><span class="sxs-lookup"><span data-stu-id="9f66e-148">Sales</span></span>|  
|<span data-ttu-id="9f66e-149">User1</span><span class="sxs-lookup"><span data-stu-id="9f66e-149">User1</span></span>|<span data-ttu-id="9f66e-150">Alfred</span><span class="sxs-lookup"><span data-stu-id="9f66e-150">Alfred</span></span>||<span data-ttu-id="9f66e-151">Marketing</span><span class="sxs-lookup"><span data-stu-id="9f66e-151">Marketing</span></span>|  
|<span data-ttu-id="9f66e-152">User2</span><span class="sxs-lookup"><span data-stu-id="9f66e-152">User2</span></span>||<span data-ttu-id="9f66e-153">Mary</span><span class="sxs-lookup"><span data-stu-id="9f66e-153">Mary</span></span>|<span data-ttu-id="9f66e-154">Služba</span><span class="sxs-lookup"><span data-stu-id="9f66e-154">Service</span></span>|  
  
 <span data-ttu-id="9f66e-155">Konflikt takovou situaci můžete vyřešit různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="9f66e-155">You can resolve conflicts such as this in different ways.</span></span> <span data-ttu-id="9f66e-156">Další informace najdete v tématu [jak: Správa konfliktů změn](../../../../../../docs/framework/data/adonet/sql/linq/how-to-manage-change-conflicts.md).</span><span class="sxs-lookup"><span data-stu-id="9f66e-156">For more information, see [How to: Manage Change Conflicts](../../../../../../docs/framework/data/adonet/sql/linq/how-to-manage-change-conflicts.md).</span></span>  
  
## <a name="conflict-detection-and-resolution-checklist"></a><span data-ttu-id="9f66e-157">Kontrolní seznam řešení a zjišťování konfliktů</span><span class="sxs-lookup"><span data-stu-id="9f66e-157">Conflict Detection and Resolution Checklist</span></span>  
 <span data-ttu-id="9f66e-158">Můžete zjišťovat a řešit konflikty na libovolné úrovni podrobností.</span><span class="sxs-lookup"><span data-stu-id="9f66e-158">You can detect and resolve conflicts at any level of detail.</span></span> <span data-ttu-id="9f66e-159">Na jeden extreme, můžete vyřešit všechny konflikty v jednom ze tří způsobů (viz <xref:System.Data.Linq.RefreshMode>) bez pečlivě zvážit.</span><span class="sxs-lookup"><span data-stu-id="9f66e-159">At one extreme, you can resolve all conflicts in one of three ways (see <xref:System.Data.Linq.RefreshMode>) without additional consideration.</span></span> <span data-ttu-id="9f66e-160">V jiných extreme můžete určit konkrétní akci pro každý typ konfliktu na každého člena v konfliktu.</span><span class="sxs-lookup"><span data-stu-id="9f66e-160">At the other extreme, you can designate a specific action for each type of conflict on every member in conflict.</span></span>  
  
- <span data-ttu-id="9f66e-161">Zadejte nebo revidovat <xref:System.Data.Linq.Mapping.UpdateCheck> možnosti v objektovém modelu.</span><span class="sxs-lookup"><span data-stu-id="9f66e-161">Specify or revise <xref:System.Data.Linq.Mapping.UpdateCheck> options in your object model.</span></span>  
  
     <span data-ttu-id="9f66e-162">Další informace najdete v tématu [jak: Zadejte, kteří členové jsou testovat na konflikty souběžnosti](../../../../../../docs/framework/data/adonet/sql/linq/how-to-specify-which-members-are-tested-for-concurrency-conflicts.md).</span><span class="sxs-lookup"><span data-stu-id="9f66e-162">For more information, see [How to: Specify Which Members are Tested for Concurrency Conflicts](../../../../../../docs/framework/data/adonet/sql/linq/how-to-specify-which-members-are-tested-for-concurrency-conflicts.md).</span></span>  
  
- <span data-ttu-id="9f66e-163">V bloku try/catch – volání <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, určete, kdy chcete výjimky, která je vyvolána.</span><span class="sxs-lookup"><span data-stu-id="9f66e-163">In the try/catch block of your call to <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, specify at what point you want exceptions to be thrown.</span></span>  
  
     <span data-ttu-id="9f66e-164">Další informace najdete v tématu [jak: Zadejte mají objevit výjimky souběžnosti při](../../../../../../docs/framework/data/adonet/sql/linq/how-to-specify-when-concurrency-exceptions-are-thrown.md).</span><span class="sxs-lookup"><span data-stu-id="9f66e-164">For more information, see [How to: Specify When Concurrency Exceptions are Thrown](../../../../../../docs/framework/data/adonet/sql/linq/how-to-specify-when-concurrency-exceptions-are-thrown.md).</span></span>  
  
- <span data-ttu-id="9f66e-165">Určit, kolik detailů konflikt, které chcete načíst a zahrnutí kódu do vašeho bloku try/catch odpovídajícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="9f66e-165">Determine how much conflict detail you want to retrieve, and include code in your try/catch block accordingly.</span></span>  
  
     <span data-ttu-id="9f66e-166">Další informace najdete v tématu [jak: Načtení informací o konfliktech entit](../../../../../../docs/framework/data/adonet/sql/linq/how-to-retrieve-entity-conflict-information.md) a [jak: Načtení informací o konfliktech členů](../../../../../../docs/framework/data/adonet/sql/linq/how-to-retrieve-member-conflict-information.md).</span><span class="sxs-lookup"><span data-stu-id="9f66e-166">For more information, see [How to: Retrieve Entity Conflict Information](../../../../../../docs/framework/data/adonet/sql/linq/how-to-retrieve-entity-conflict-information.md) and [How to: Retrieve Member Conflict Information](../../../../../../docs/framework/data/adonet/sql/linq/how-to-retrieve-member-conflict-information.md).</span></span>  
  
- <span data-ttu-id="9f66e-167">Zahrnout do vaší `try` / `catch` kódu, jak chcete vyřešit konflikty různých zjistíte.</span><span class="sxs-lookup"><span data-stu-id="9f66e-167">Include in your `try`/`catch` code how you want to resolve the various conflicts you discover.</span></span>  
  
     <span data-ttu-id="9f66e-168">Další informace najdete v tématu [jak: Řešení konfliktů zachováním hodnot v databázi](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-retaining-database-values.md), [jak: Řešení konfliktů přepsáním hodnot v databázi](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-overwriting-database-values.md), a [jak: Řešení konfliktů sloučení s hodnotami v databázi](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-merging-with-database-values.md).</span><span class="sxs-lookup"><span data-stu-id="9f66e-168">For more information, see [How to: Resolve Conflicts by Retaining Database Values](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-retaining-database-values.md), [How to: Resolve Conflicts by Overwriting Database Values](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-overwriting-database-values.md), and [How to: Resolve Conflicts by Merging with Database Values](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-merging-with-database-values.md).</span></span>  
  
## <a name="linq-to-sql-types-that-support-conflict-discovery-and-resolution"></a><span data-ttu-id="9f66e-169">Technologie LINQ to SQL typy, které podporují konflikt zjišťování a řešení</span><span class="sxs-lookup"><span data-stu-id="9f66e-169">LINQ to SQL Types That Support Conflict Discovery and Resolution</span></span>  
 <span data-ttu-id="9f66e-170">Třídy a funkce, které podporují řešení konfliktů v optimistického řízení souběžnosti v [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] patří následující:</span><span class="sxs-lookup"><span data-stu-id="9f66e-170">Classes and features to support the resolution of conflicts in optimistic concurrency in [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] include the following:</span></span>  
  
- <xref:System.Data.Linq.ObjectChangeConflict?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.MemberChangeConflict?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.ChangeConflictCollection?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.ChangeConflictException?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.DataContext.ChangeConflicts%2A?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.DataContext.SubmitChanges%2A?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.DataContext.Refresh%2A?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.Mapping.ColumnAttribute.UpdateCheck%2A?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.Mapping.UpdateCheck?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.RefreshMode?displayProperty=nameWithType>  
  
## <a name="see-also"></a><span data-ttu-id="9f66e-171">Viz také:</span><span class="sxs-lookup"><span data-stu-id="9f66e-171">See also</span></span>

- [<span data-ttu-id="9f66e-172">Postupy: Správa konfliktů změn</span><span class="sxs-lookup"><span data-stu-id="9f66e-172">How to: Manage Change Conflicts</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/how-to-manage-change-conflicts.md)
