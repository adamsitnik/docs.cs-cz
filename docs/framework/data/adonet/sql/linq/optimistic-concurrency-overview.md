---
title: 'Optimistická metoda souběžného zpracování: Přehled'
ms.date: 03/30/2017
ms.assetid: c2e38512-d0c8-4807-b30a-cb7e30338694
ms.openlocfilehash: a61d4c5b35f3797539fe845045b8a959b0351350
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/22/2019
ms.locfileid: "69938628"
---
# <a name="optimistic-concurrency-overview"></a><span data-ttu-id="372fb-102">Optimistická metoda souběžného zpracování: Přehled</span><span class="sxs-lookup"><span data-stu-id="372fb-102">Optimistic Concurrency: Overview</span></span>
[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="372fb-103">podporuje optimistické řízení souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="372fb-103">supports optimistic concurrency control.</span></span> <span data-ttu-id="372fb-104">Následující tabulka popisuje podmínky, které platí pro optimistickou souběžnost [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] v dokumentaci:</span><span class="sxs-lookup"><span data-stu-id="372fb-104">The following table describes terms that apply to optimistic concurrency in [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] documentation:</span></span>  
  
|<span data-ttu-id="372fb-105">Uvedenými</span><span class="sxs-lookup"><span data-stu-id="372fb-105">Terms</span></span>|<span data-ttu-id="372fb-106">Popis</span><span class="sxs-lookup"><span data-stu-id="372fb-106">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="372fb-107">souběžnost</span><span class="sxs-lookup"><span data-stu-id="372fb-107">concurrency</span></span>|<span data-ttu-id="372fb-108">Situace, kdy se dva nebo více uživatelů současně pokusí aktualizovat stejný řádek databáze.</span><span class="sxs-lookup"><span data-stu-id="372fb-108">The situation in which two or more users at the same time try to update the same database row.</span></span>|  
|<span data-ttu-id="372fb-109">konflikt souběžnosti</span><span class="sxs-lookup"><span data-stu-id="372fb-109">concurrency conflict</span></span>|<span data-ttu-id="372fb-110">Situace, kdy se dva nebo více uživatelů ve stejnou chvíli pokusí odeslat konfliktní hodnoty do jednoho nebo více sloupců řádku.</span><span class="sxs-lookup"><span data-stu-id="372fb-110">The situation in which two or more users at the same time try to submit conflicting values to one or more columns of a row.</span></span>|  
|<span data-ttu-id="372fb-111">kontrola souběžnosti</span><span class="sxs-lookup"><span data-stu-id="372fb-111">concurrency control</span></span>|<span data-ttu-id="372fb-112">Technika používaná k vyřešení konfliktů souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="372fb-112">The technique used to resolve concurrency conflicts.</span></span>|  
|<span data-ttu-id="372fb-113">optimistické řízení souběžnosti</span><span class="sxs-lookup"><span data-stu-id="372fb-113">optimistic concurrency control</span></span>|<span data-ttu-id="372fb-114">Technika, která nejprve prověří, zda jiné transakce změnily hodnoty v řádku před tím, než povolí změny, které se mají odeslat.</span><span class="sxs-lookup"><span data-stu-id="372fb-114">The technique that first investigates whether other transactions have changed values in a row before permitting changes to be submitted.</span></span><br /><br /> <span data-ttu-id="372fb-115">Naproti tomu *pesimistické řízení souběžnosti*, které uzamkne záznam, aby nedocházelo ke konfliktům souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="372fb-115">Contrast with *pessimistic concurrency control*, which locks the record to avoid concurrency conflicts.</span></span><br /><br /> <span data-ttu-id="372fb-116">*Optimistický* ovládací prvek je tak považován za nepravděpodobné, že by to mělo vliv na jednu transakci, která je v konfliktu s jiným.</span><span class="sxs-lookup"><span data-stu-id="372fb-116">*Optimistic* control is so termed because it considers the chances of one transaction interfering with another to be unlikely.</span></span>|  
|<span data-ttu-id="372fb-117">řešení konfliktů</span><span class="sxs-lookup"><span data-stu-id="372fb-117">conflict resolution</span></span>|<span data-ttu-id="372fb-118">Proces aktualizace konfliktní položky opakovaným dotazem na databázi a následným sjednocením rozdílů.</span><span class="sxs-lookup"><span data-stu-id="372fb-118">The process of refreshing a conflicting item by querying the database again and then reconciling differences.</span></span><br /><br /> <span data-ttu-id="372fb-119">Když je objekt aktualizován, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] sledování změn obsahuje následující data:</span><span class="sxs-lookup"><span data-stu-id="372fb-119">When an object is refreshed, the [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] change tracker holds the following data:</span></span><br /><br /> <span data-ttu-id="372fb-120">– Hodnoty původně odebrané z databáze a použité pro kontrolu aktualizací.</span><span class="sxs-lookup"><span data-stu-id="372fb-120">-   The values originally taken from the database and used for the update check.</span></span><br /><span data-ttu-id="372fb-121">– Nové hodnoty databáze z následujícího dotazu.</span><span class="sxs-lookup"><span data-stu-id="372fb-121">-   The new database values from the subsequent query.</span></span><br /><br /> [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="372fb-122">pak určuje, zda je objekt v konfliktu (tj. zda došlo ke změně jedné nebo více hodnot jeho členů).</span><span class="sxs-lookup"><span data-stu-id="372fb-122">then determines whether the object is in conflict (that is, whether one or more of its member values has changed).</span></span> <span data-ttu-id="372fb-123">Pokud je objekt v konfliktu, další [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] určuje, který z jeho členů je v konfliktu.</span><span class="sxs-lookup"><span data-stu-id="372fb-123">If the object is in conflict, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] next determines which of its members are in conflict.</span></span><br /><br /> <span data-ttu-id="372fb-124">Všechny konflikty členů, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] které zjišťují, jsou přidány do seznamu konfliktů.</span><span class="sxs-lookup"><span data-stu-id="372fb-124">Any member conflict that [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] discovers is added to a conflict list.</span></span>|  
  
 <span data-ttu-id="372fb-125">V objektovém modelu dochází *ke konfliktu optimistické souběžnosti* , pokud jsou splněny obě následující podmínky: [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</span><span class="sxs-lookup"><span data-stu-id="372fb-125">In the [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] object model, an *optimistic concurrency conflict* occurs when both of the following conditions are true:</span></span>  
  
- <span data-ttu-id="372fb-126">Klient se pokusí odeslat změny do databáze.</span><span class="sxs-lookup"><span data-stu-id="372fb-126">The client tries to submit changes to the database.</span></span>  
  
- <span data-ttu-id="372fb-127">Jedna nebo více hodnot kontroly aktualizace byly v databázi aktualizovány, protože je klient naposledy přečetl.</span><span class="sxs-lookup"><span data-stu-id="372fb-127">One or more update-check values have been updated in the database since the client last read them.</span></span>  
  
 <span data-ttu-id="372fb-128">Řešení tohoto konfliktu zahrnuje zjišťování, které členy objektu jsou v konfliktu, a pak rozhodnutí o tom, co chcete dělat.</span><span class="sxs-lookup"><span data-stu-id="372fb-128">Resolution of this conflict includes discovering which members of the object are in conflict, and then deciding what you want to do about it.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="372fb-129">Pouze členové, kteří <xref:System.Data.Linq.Mapping.UpdateCheck.Always> jsou <xref:System.Data.Linq.Mapping.UpdateCheck.WhenChanged> mapováni nebo zapojeni do kontroly optimistického řízení souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="372fb-129">Only members mapped as <xref:System.Data.Linq.Mapping.UpdateCheck.Always> or <xref:System.Data.Linq.Mapping.UpdateCheck.WhenChanged> participate in optimistic concurrency checks.</span></span> <span data-ttu-id="372fb-130">U označených <xref:System.Data.Linq.Mapping.UpdateCheck.Never>členů není provedena žádná kontroler.</span><span class="sxs-lookup"><span data-stu-id="372fb-130">No check is performed for members marked <xref:System.Data.Linq.Mapping.UpdateCheck.Never>.</span></span> <span data-ttu-id="372fb-131">Další informace naleznete v tématu <xref:System.Data.Linq.Mapping.UpdateCheck>.</span><span class="sxs-lookup"><span data-stu-id="372fb-131">For more information, see <xref:System.Data.Linq.Mapping.UpdateCheck>.</span></span>  
  
## <a name="example"></a><span data-ttu-id="372fb-132">Příklad</span><span class="sxs-lookup"><span data-stu-id="372fb-132">Example</span></span>  
 <span data-ttu-id="372fb-133">Například v následujícím scénáři uživatel1 začíná připraví aktualizaci o dotazování databáze na řádek.</span><span class="sxs-lookup"><span data-stu-id="372fb-133">For example, in the following scenario, User1 starts to prepare an update by querying the database for a row.</span></span> <span data-ttu-id="372fb-134">Uživatel1 obdrží řádek s hodnotami Alfreds, Marie a Sales.</span><span class="sxs-lookup"><span data-stu-id="372fb-134">User1 receives a row with values of Alfreds, Maria, and Sales.</span></span>  
  
 <span data-ttu-id="372fb-135">Uživatel1 chce změnit hodnotu sloupce nadřízený na Alfred a hodnotu sloupce oddělení na marketing.</span><span class="sxs-lookup"><span data-stu-id="372fb-135">User1 wants to change the value of the Manager column to Alfred and the value of the Department column to Marketing.</span></span> <span data-ttu-id="372fb-136">Aby mohl uživatel user1 odeslat tyto změny, uživatel2 odeslal změny do databáze.</span><span class="sxs-lookup"><span data-stu-id="372fb-136">Before User1 can submit those changes, User2 has submitted changes to the database.</span></span> <span data-ttu-id="372fb-137">Takže teď se hodnota sloupce asistent změnila na Marie a hodnota sloupce oddělení na službu.</span><span class="sxs-lookup"><span data-stu-id="372fb-137">So now the value of the Assistant column has been changed to Mary and the value of the Department column to Service.</span></span>  
  
 <span data-ttu-id="372fb-138">Když se uživatel1 nyní pokusí odeslat změny, odeslání se nepovede a <xref:System.Data.Linq.ChangeConflictException> vyvolá se výjimka.</span><span class="sxs-lookup"><span data-stu-id="372fb-138">When User1 now tries to submit changes, the submission fails and a <xref:System.Data.Linq.ChangeConflictException> exception is thrown.</span></span> <span data-ttu-id="372fb-139">K tomuto výsledku dochází, protože hodnoty databáze pro sloupec asistent a sloupec oddělení nejsou očekávané.</span><span class="sxs-lookup"><span data-stu-id="372fb-139">This result occurs because the database values for the Assistant column and the Department column are not those that were expected.</span></span> <span data-ttu-id="372fb-140">Členové, kteří představují sloupce asistenta a oddělení, jsou v konfliktu.</span><span class="sxs-lookup"><span data-stu-id="372fb-140">Members representing the Assistant and Department columns are in conflict.</span></span> <span data-ttu-id="372fb-141">Následující tabulka shrnuje situaci.</span><span class="sxs-lookup"><span data-stu-id="372fb-141">The following table summarizes the situation.</span></span>  
  
||<span data-ttu-id="372fb-142">Správce</span><span class="sxs-lookup"><span data-stu-id="372fb-142">Manager</span></span>|<span data-ttu-id="372fb-143">Pomocníka</span><span class="sxs-lookup"><span data-stu-id="372fb-143">Assistant</span></span>|<span data-ttu-id="372fb-144">Oddělení</span><span class="sxs-lookup"><span data-stu-id="372fb-144">Department</span></span>|  
|------|-------------|---------------|----------------|  
|<span data-ttu-id="372fb-145">Původní stav</span><span class="sxs-lookup"><span data-stu-id="372fb-145">Original state</span></span>|<span data-ttu-id="372fb-146">Alfreds</span><span class="sxs-lookup"><span data-stu-id="372fb-146">Alfreds</span></span>|<span data-ttu-id="372fb-147">Maria</span><span class="sxs-lookup"><span data-stu-id="372fb-147">Maria</span></span>|<span data-ttu-id="372fb-148">Prodej</span><span class="sxs-lookup"><span data-stu-id="372fb-148">Sales</span></span>|  
|<span data-ttu-id="372fb-149">User1</span><span class="sxs-lookup"><span data-stu-id="372fb-149">User1</span></span>|<span data-ttu-id="372fb-150">Alfred</span><span class="sxs-lookup"><span data-stu-id="372fb-150">Alfred</span></span>||<span data-ttu-id="372fb-151">Marketing</span><span class="sxs-lookup"><span data-stu-id="372fb-151">Marketing</span></span>|  
|<span data-ttu-id="372fb-152">Přidal</span><span class="sxs-lookup"><span data-stu-id="372fb-152">User2</span></span>||<span data-ttu-id="372fb-153">Marie</span><span class="sxs-lookup"><span data-stu-id="372fb-153">Mary</span></span>|<span data-ttu-id="372fb-154">Služba</span><span class="sxs-lookup"><span data-stu-id="372fb-154">Service</span></span>|  
  
 <span data-ttu-id="372fb-155">Tyto konflikty můžete vyřešit různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="372fb-155">You can resolve conflicts such as this in different ways.</span></span> <span data-ttu-id="372fb-156">Další informace najdete v tématu [jak: Spravujte konflikty](../../../../../../docs/framework/data/adonet/sql/linq/how-to-manage-change-conflicts.md)změn.</span><span class="sxs-lookup"><span data-stu-id="372fb-156">For more information, see [How to: Manage Change Conflicts](../../../../../../docs/framework/data/adonet/sql/linq/how-to-manage-change-conflicts.md).</span></span>  
  
## <a name="conflict-detection-and-resolution-checklist"></a><span data-ttu-id="372fb-157">Kontrolní seznam pro detekci konfliktů a rozlišení</span><span class="sxs-lookup"><span data-stu-id="372fb-157">Conflict Detection and Resolution Checklist</span></span>  
 <span data-ttu-id="372fb-158">Konflikty můžete detekovat a řešit na libovolné úrovni podrobností.</span><span class="sxs-lookup"><span data-stu-id="372fb-158">You can detect and resolve conflicts at any level of detail.</span></span> <span data-ttu-id="372fb-159">V jednom krajním případě můžete vyřešit všechny konflikty jedním ze tří způsobů (viz <xref:System.Data.Linq.RefreshMode>) bez dalšího zvážení.</span><span class="sxs-lookup"><span data-stu-id="372fb-159">At one extreme, you can resolve all conflicts in one of three ways (see <xref:System.Data.Linq.RefreshMode>) without additional consideration.</span></span> <span data-ttu-id="372fb-160">V ostatních extrémních případech můžete určit určitou akci pro každý typ konfliktu u každého člena v konfliktu.</span><span class="sxs-lookup"><span data-stu-id="372fb-160">At the other extreme, you can designate a specific action for each type of conflict on every member in conflict.</span></span>  
  
- <span data-ttu-id="372fb-161">Zadejte nebo opravte <xref:System.Data.Linq.Mapping.UpdateCheck> možnosti v objektovém modelu.</span><span class="sxs-lookup"><span data-stu-id="372fb-161">Specify or revise <xref:System.Data.Linq.Mapping.UpdateCheck> options in your object model.</span></span>  
  
     <span data-ttu-id="372fb-162">Další informace najdete v tématu [jak: Určete, kteří členové jsou testováni pro konflikty](../../../../../../docs/framework/data/adonet/sql/linq/how-to-specify-which-members-are-tested-for-concurrency-conflicts.md)souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="372fb-162">For more information, see [How to: Specify Which Members are Tested for Concurrency Conflicts](../../../../../../docs/framework/data/adonet/sql/linq/how-to-specify-which-members-are-tested-for-concurrency-conflicts.md).</span></span>  
  
- <span data-ttu-id="372fb-163">V bloku try/catch volání metody <xref:System.Data.Linq.DataContext.SubmitChanges%2A>určete, kde má být vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="372fb-163">In the try/catch block of your call to <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, specify at what point you want exceptions to be thrown.</span></span>  
  
     <span data-ttu-id="372fb-164">Další informace najdete v tématu [jak: Určete, kdy jsou vyvolány](../../../../../../docs/framework/data/adonet/sql/linq/how-to-specify-when-concurrency-exceptions-are-thrown.md)výjimky souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="372fb-164">For more information, see [How to: Specify When Concurrency Exceptions are Thrown](../../../../../../docs/framework/data/adonet/sql/linq/how-to-specify-when-concurrency-exceptions-are-thrown.md).</span></span>  
  
- <span data-ttu-id="372fb-165">Určete, kolik podrobností o konfliktech chcete načíst, a odpovídajícím způsobem zahrňte kód do bloku try/catch.</span><span class="sxs-lookup"><span data-stu-id="372fb-165">Determine how much conflict detail you want to retrieve, and include code in your try/catch block accordingly.</span></span>  
  
     <span data-ttu-id="372fb-166">Další informace najdete v tématu [jak: Načtení informací o](../../../../../../docs/framework/data/adonet/sql/linq/how-to-retrieve-entity-conflict-information.md) konfliktech [entit a postupy: Načte informace o](../../../../../../docs/framework/data/adonet/sql/linq/how-to-retrieve-member-conflict-information.md)konfliktu členů.</span><span class="sxs-lookup"><span data-stu-id="372fb-166">For more information, see [How to: Retrieve Entity Conflict Information](../../../../../../docs/framework/data/adonet/sql/linq/how-to-retrieve-entity-conflict-information.md) and [How to: Retrieve Member Conflict Information](../../../../../../docs/framework/data/adonet/sql/linq/how-to-retrieve-member-conflict-information.md).</span></span>  
  
- <span data-ttu-id="372fb-167">Dokóduzahrňtezpůsob,jakýmchcetevyřešitrůznékonflikty,kteréjstezjistili./ `try` `catch`</span><span class="sxs-lookup"><span data-stu-id="372fb-167">Include in your `try`/`catch` code how you want to resolve the various conflicts you discover.</span></span>  
  
     <span data-ttu-id="372fb-168">Další informace najdete v tématu [jak: Vyřešte konflikty tím, že zachováte hodnoty](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-retaining-database-values.md)databáze a [postupy: Řešení konfliktů přepsáním hodnot](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-overwriting-database-values.md)databáze a [postupy: Vyřešte konflikty sloučením s hodnotami](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-merging-with-database-values.md)databáze.</span><span class="sxs-lookup"><span data-stu-id="372fb-168">For more information, see [How to: Resolve Conflicts by Retaining Database Values](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-retaining-database-values.md), [How to: Resolve Conflicts by Overwriting Database Values](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-overwriting-database-values.md), and [How to: Resolve Conflicts by Merging with Database Values](../../../../../../docs/framework/data/adonet/sql/linq/how-to-resolve-conflicts-by-merging-with-database-values.md).</span></span>  
  
## <a name="linq-to-sql-types-that-support-conflict-discovery-and-resolution"></a><span data-ttu-id="372fb-169">LINQ to SQL typy, které podporují zjišťování a řešení konfliktů</span><span class="sxs-lookup"><span data-stu-id="372fb-169">LINQ to SQL Types That Support Conflict Discovery and Resolution</span></span>  
 <span data-ttu-id="372fb-170">Třídy a funkce pro podporu řešení konfliktů v rámci optimistická souběžnosti v [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] systému zahrnují následující:</span><span class="sxs-lookup"><span data-stu-id="372fb-170">Classes and features to support the resolution of conflicts in optimistic concurrency in [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] include the following:</span></span>  
  
- <xref:System.Data.Linq.ObjectChangeConflict?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.MemberChangeConflict?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.ChangeConflictCollection?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.ChangeConflictException?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.DataContext.ChangeConflicts%2A?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.DataContext.SubmitChanges%2A?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.DataContext.Refresh%2A?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.Mapping.ColumnAttribute.UpdateCheck%2A?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.Mapping.UpdateCheck?displayProperty=nameWithType>  
  
- <xref:System.Data.Linq.RefreshMode?displayProperty=nameWithType>  
  
## <a name="see-also"></a><span data-ttu-id="372fb-171">Viz také:</span><span class="sxs-lookup"><span data-stu-id="372fb-171">See also</span></span>

- [<span data-ttu-id="372fb-172">Postupy: Správa konfliktů změn</span><span class="sxs-lookup"><span data-stu-id="372fb-172">How to: Manage Change Conflicts</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/how-to-manage-change-conflicts.md)
