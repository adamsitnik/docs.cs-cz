---
title: Mapování vlastních typů SQL a CLR
ms.date: 03/30/2017
ms.assetid: d916c7fb-4b56-4214-acbe-5e23365047b2
ms.openlocfilehash: 8901998533ec14e733ea072dd1a69b465e596328
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/07/2019
ms.locfileid: "70781082"
---
# <a name="sql-clr-custom-type-mappings"></a><span data-ttu-id="69abf-102">Mapování vlastních typů SQL a CLR</span><span class="sxs-lookup"><span data-stu-id="69abf-102">SQL-CLR Custom Type Mappings</span></span>
<span data-ttu-id="69abf-103">Mapování typů mezi SQL Server a modulem CLR (Common Language Runtime) je automaticky zadáno při použití nástroje příkazového řádku SQLMetal Návrhář relací objektů (O/R Designer).</span><span class="sxs-lookup"><span data-stu-id="69abf-103">Type mapping between SQL Server and the common language runtime (CLR) is automatically specified when you use the SQLMetal command-line tool, Object Relational Designer (O/R Designer).</span></span>  
  
 <span data-ttu-id="69abf-104">Pokud není provedeno žádné přizpůsobené mapování, tyto nástroje přiřadí výchozí mapování typů, jak je popsáno v [mapování typu SQL-CLR](sql-clr-type-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="69abf-104">When no customized mapping is performed, these tools assign default type mappings as described in [SQL-CLR Type Mapping](sql-clr-type-mapping.md).</span></span> <span data-ttu-id="69abf-105">Pokud chcete zadat mapování odlišně od těchto výchozích hodnot, je nutné provést některé vlastní nastavení mapování typů.</span><span class="sxs-lookup"><span data-stu-id="69abf-105">If you want to type mappings differently from these defaults, you need to do some customization of the type mappings.</span></span>  
  
 <span data-ttu-id="69abf-106">Při přizpůsobování mapování typů je doporučeným přístupem udělat změny v souboru. DBML.</span><span class="sxs-lookup"><span data-stu-id="69abf-106">When customizing type mappings, the recommended approach is to make the changes in an intermediary DBML file.</span></span> <span data-ttu-id="69abf-107">Přizpůsobený soubor DBML by pak měl být použit při vytváření kódu a mapování souborů pomocí návrháře SQLMetal nebo O/R.</span><span class="sxs-lookup"><span data-stu-id="69abf-107">Then, your customized DBML file should be used when you create you code and mapping files with SQLMetal or O/R Designer.</span></span>  
  
 <span data-ttu-id="69abf-108">Po vytvoření instance <xref:System.Data.Linq.DataContext> objektu z kódu a mapování souborů <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> Metoda vytvoří databázi na základě mapování typů, které jsou zadány.</span><span class="sxs-lookup"><span data-stu-id="69abf-108">Once you instantiate the <xref:System.Data.Linq.DataContext> object from the code and mapping files, the <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> method creates a database based on the type mappings that are specified.</span></span> <span data-ttu-id="69abf-109">Pokud v mapování nejsou zadány žádné atributy CLR `type` , budou použity výchozí mapování typů.</span><span class="sxs-lookup"><span data-stu-id="69abf-109">If there are no CLR `type` attributes specified in the mappings, the default type mappings will be used.</span></span>  
  
## <a name="customization-with-sqlmetal-or-or-designer"></a><span data-ttu-id="69abf-110">Přizpůsobení pomocí SQLMetal nebo O/R návrháře</span><span class="sxs-lookup"><span data-stu-id="69abf-110">Customization with SQLMetal or O/R Designer</span></span>  
 <span data-ttu-id="69abf-111">Pomocí SQLMetal a O/R designeru můžete automaticky vytvořit objektový model, který obsahuje informace o mapování typů uvnitř nebo vně souboru kódu.</span><span class="sxs-lookup"><span data-stu-id="69abf-111">With SQLMetal and O/R Designer, you can automatically create an object model that includes the type mapping information inside or outside the code file.</span></span> <span data-ttu-id="69abf-112">Vzhledem k tomu, že jsou tyto soubory přepsány návrhářem SQLMetal nebo O/R, pokaždé, když znovu vytvoříte mapování, doporučený postup pro určení vlastního mapování typů je přizpůsobení souboru DBML.</span><span class="sxs-lookup"><span data-stu-id="69abf-112">Because these files are overwritten by SQLMetal or O/R Designer, each time you recreate your mappings, the recommended approach to specifying custom type mappings is to customize a DBML file.</span></span>  
  
 <span data-ttu-id="69abf-113">Chcete-li přizpůsobit mapování typů pomocí SQLMetal nebo O/R návrháře, nejprve vygenerujte soubor DBML.</span><span class="sxs-lookup"><span data-stu-id="69abf-113">To customize type mappings with SQLMetal or O/R Designer, first generate a DBML file.</span></span> <span data-ttu-id="69abf-114">Před vygenerováním souboru kódu nebo mapováním souboru upravte soubor DBML tak, aby identifikoval požadovaná mapování typů.</span><span class="sxs-lookup"><span data-stu-id="69abf-114">Then, before generating the code file or mapping file, modify the DBML file to identify the desired type mappings.</span></span> <span data-ttu-id="69abf-115">Pomocí SQLMetal je nutné ručně změnit `Type` atributy a `DbType` v souboru DBML, aby bylo možné přizpůsobit mapování typů.</span><span class="sxs-lookup"><span data-stu-id="69abf-115">With SQLMetal, you have to manually change the `Type` and `DbType` attributes in the DBML file to make your type mapping customizations.</span></span> <span data-ttu-id="69abf-116">Pomocí jazyka O/R Designer můžete provádět změny v návrháři.</span><span class="sxs-lookup"><span data-stu-id="69abf-116">With O/R Designer, you can make your changes within the Designer.</span></span> <span data-ttu-id="69abf-117">Další informace o použití návrháře O/R naleznete v tématu [nástroje LINQ to SQL v aplikaci Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).</span><span class="sxs-lookup"><span data-stu-id="69abf-117">For more information about using the O/R Designer, see [LINQ to SQL Tools in Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="69abf-118">Některé mapování typů může způsobit přetečení nebo výjimky ztráty dat při převodu do nebo z databáze.</span><span class="sxs-lookup"><span data-stu-id="69abf-118">Some type mappings may result in overflow or data loss exceptions while translating to or from the database.</span></span> <span data-ttu-id="69abf-119">Před provedením jakýchkoli úprav pečlivě zkontrolujte matrici chování mapování typů v [mapování typu SQL-CLR](sql-clr-type-mapping.md) .</span><span class="sxs-lookup"><span data-stu-id="69abf-119">Carefully review the Type Mapping Run-time Behavior Matrix in [SQL-CLR Type Mapping](sql-clr-type-mapping.md) before making any customizations.</span></span>  
  
 <span data-ttu-id="69abf-120">Aby bylo přizpůsobení mapování typů rozpoznáno návrhářem SQLMetal nebo O/R, je nutné zajistit, aby tyto nástroje byly dodány s cestou k vlastnímu souboru DBML při generování souboru kódu nebo externího souboru mapování.</span><span class="sxs-lookup"><span data-stu-id="69abf-120">In order for your type mapping customizations to be recognized by SQLMetal or O/R Designer, you need to make sure that these tools are supplied with the path to your custom DBML file when you generate your code file or external mapping file.</span></span> <span data-ttu-id="69abf-121">I když není vyžadováno pro přizpůsobení mapování typů, je doporučeno vždy oddělit informace mapování typů ze souboru kódu a vytvořit další soubor mapování externího typu.</span><span class="sxs-lookup"><span data-stu-id="69abf-121">Although not required for type mapping customization, it is recommended that you always separate your type mapping information from your code file and generate the additional external type mapping file.</span></span> <span data-ttu-id="69abf-122">Tím dojde k větší flexibilitě tím, že nebudete muset znovu kompilovat soubor kódu.</span><span class="sxs-lookup"><span data-stu-id="69abf-122">Doing so will leave some flexibility by not requiring that the code file be recompiled.</span></span>  
  
## <a name="incorporating-database-changes"></a><span data-ttu-id="69abf-123">Zahrnutí změn databáze</span><span class="sxs-lookup"><span data-stu-id="69abf-123">Incorporating Database Changes</span></span>  
 <span data-ttu-id="69abf-124">Když se databáze změní, budete muset aktualizovat svůj soubor DBML, aby odrážel tyto změny.</span><span class="sxs-lookup"><span data-stu-id="69abf-124">When your database changes, you will need to update your DBML file to reflect those changes.</span></span> <span data-ttu-id="69abf-125">Jedním ze způsobů, jak to provést, je automaticky vytvořit nový soubor DBML a pak znovu provést vlastní nastavení mapování typů.</span><span class="sxs-lookup"><span data-stu-id="69abf-125">One way to do this is to automatically create a new DBML file and then re-do your type mapping customizations.</span></span> <span data-ttu-id="69abf-126">Alternativně můžete porovnat rozdíly mezi novým souborem DBML a vlastním souborem DBML a ručně aktualizovat vlastní soubor DBML, aby odrážel změnu databáze.</span><span class="sxs-lookup"><span data-stu-id="69abf-126">Alternatively, you could compare the differences between your new DBML file and your customized DBML file and update your custom DBML file manually to reflect the database change.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="69abf-127">Viz také:</span><span class="sxs-lookup"><span data-stu-id="69abf-127">See also</span></span>

- [<span data-ttu-id="69abf-128">Mapování typů SQL a CLR</span><span class="sxs-lookup"><span data-stu-id="69abf-128">SQL-CLR Type Mapping</span></span>](sql-clr-type-mapping.md)
- [<span data-ttu-id="69abf-129">Generování kódu v LINQ to SQL</span><span class="sxs-lookup"><span data-stu-id="69abf-129">Code Generation in LINQ to SQL</span></span>](code-generation-in-linq-to-sql.md)
