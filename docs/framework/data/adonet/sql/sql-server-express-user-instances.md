---
title: Uživatelské instance SQL Serveru Express
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 00c12376-cb26-4317-86ad-e6e9c089be57
ms.openlocfilehash: fabd9b94b8c0a3f0e0db220e84d6c2eca3537c50
ms.sourcegitcommit: 5ae5a1a9520b8b8b6164ad728d396717f30edafc
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/11/2019
ms.locfileid: "70894416"
---
# <a name="sql-server-express-user-instances"></a><span data-ttu-id="4f317-102">Uživatelské instance SQL Serveru Express</span><span class="sxs-lookup"><span data-stu-id="4f317-102">SQL Server Express User Instances</span></span>
<span data-ttu-id="4f317-103">Edice Microsoft SQL Server Express (SQL Server Express) podporuje funkci uživatelské instance, která je k dispozici pouze při použití .NET Framework Zprostředkovatel dat pro SQL Server (`SqlClient`).</span><span class="sxs-lookup"><span data-stu-id="4f317-103">Microsoft SQL Server Express Edition (SQL Server Express) supports the user instance feature, which is only available when using the .NET Framework Data Provider for SQL Server (`SqlClient`).</span></span> <span data-ttu-id="4f317-104">Uživatelská instance je samostatná instance SQL Server Express databázového stroje, který je generován nadřazenou instancí.</span><span class="sxs-lookup"><span data-stu-id="4f317-104">A user instance is a separate instance of the SQL Server Express Database Engine that is generated by a parent instance.</span></span> <span data-ttu-id="4f317-105">Uživatelské instance umožňují uživatelům, kteří nejsou správci na místních počítačích, připojovat se k SQL Server Express databází a připojovat se k nim.</span><span class="sxs-lookup"><span data-stu-id="4f317-105">User instances allow users who are not administrators on their local computers to attach and connect to SQL Server Express databases.</span></span> <span data-ttu-id="4f317-106">Každá instance se spouští v rámci kontextu zabezpečení jednotlivého uživatele, a to na základě jednoho jednotlivého uživatele.</span><span class="sxs-lookup"><span data-stu-id="4f317-106">Each instance runs under the security context of the individual user, on a one-instance-per-user basis.</span></span>  
  
## <a name="user-instance-capabilities"></a><span data-ttu-id="4f317-107">Možnosti uživatelské instance</span><span class="sxs-lookup"><span data-stu-id="4f317-107">User Instance Capabilities</span></span>  
 <span data-ttu-id="4f317-108">Uživatelské instance jsou užitečné pro uživatele, kteří používají Windows pod uživatelským účtem s minimálním oprávněním (lua), protože každý uživatel má SQL Server`sysadmin`oprávnění správce systému () nad instancí běžící na svém počítači, aniž by bylo nutné spouštět jako Windows. také správce.</span><span class="sxs-lookup"><span data-stu-id="4f317-108">User instances are useful for users who are running Windows under a least-privilege user account (LUA) because each user has SQL Server system administrator (`sysadmin`) privileges over the instance running on her computer without needing to run as a Windows administrator as well.</span></span> <span data-ttu-id="4f317-109">Software spuštěný na uživatelské instanci s omezenými oprávněními nemůže provádět změny v rámci systému, protože instance SQL Server Express je spuštěna v účtu uživatele systému Windows bez oprávnění správce, nikoli jako služba.</span><span class="sxs-lookup"><span data-stu-id="4f317-109">Software executing on a user instance with limited permissions cannot make system-wide changes because the instance of SQL Server Express is running under the non-administrator Windows account of the user, not as a service.</span></span> <span data-ttu-id="4f317-110">Každá uživatelská instance je izolovaná od své nadřazené instance a ze všech ostatních uživatelských instancí spuštěných ve stejném počítači.</span><span class="sxs-lookup"><span data-stu-id="4f317-110">Each user instance is isolated from its parent instance and from any other user instances running on the same computer.</span></span> <span data-ttu-id="4f317-111">Databáze běžící v uživatelské instanci se otevírají pouze v jednouživatelském režimu a není možné, aby se k databázím spuštěným v uživatelské instanci připojovali více uživatelů.</span><span class="sxs-lookup"><span data-stu-id="4f317-111">Databases running on a user instance are opened in single-user mode only, and it is not possible for multiple users to connect to databases running on a user instance.</span></span> <span data-ttu-id="4f317-112">Replikace a distribuované dotazy jsou taky pro uživatelské instance zakázané.</span><span class="sxs-lookup"><span data-stu-id="4f317-112">Replication and distributed queries are also disabled for user instances.</span></span>  
  
 <span data-ttu-id="4f317-113">Další informace najdete v části "uživatelské instance" v tématu SQL Server Books Online.</span><span class="sxs-lookup"><span data-stu-id="4f317-113">For more information, see "User Instances" in SQL Server Books Online.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="4f317-114">Uživatelské instance nejsou nutné pro uživatele, kteří jsou již správci na svých počítačích, nebo pro scénáře zahrnující více uživatelů databáze.</span><span class="sxs-lookup"><span data-stu-id="4f317-114">User instances are not needed for users who are already administrators on their own computers, or for scenarios involving multiple database users.</span></span>  
  
## <a name="enabling-user-instances"></a><span data-ttu-id="4f317-115">Povolení uživatelských instancí</span><span class="sxs-lookup"><span data-stu-id="4f317-115">Enabling User Instances</span></span>  
 <span data-ttu-id="4f317-116">Aby bylo možné generovat uživatelské instance, musí být spuštěná Nadřazená instance SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="4f317-116">To generate user instances, a parent instance of SQL Server Express must be running.</span></span> <span data-ttu-id="4f317-117">Uživatelské instance jsou ve výchozím nastavení povolené, když je nainstalovaná SQL Server Express a může je explicitně povolit nebo zakázat Správce systému, který spouští systémovou uloženou proceduru **sp_configure** u nadřazené instance.</span><span class="sxs-lookup"><span data-stu-id="4f317-117">User instances are enabled by default when SQL Server Express is installed, and they can be explicitly enabled or disabled by a system administrator executing the **sp_configure** system stored procedure on the parent instance.</span></span>  
  
```sql  
-- Enable user instances.  
sp_configure 'user instances enabled','1'
  
-- Disable user instances.  
sp_configure 'user instances enabled','0'  
```  
  
 <span data-ttu-id="4f317-118">Síťový protokol pro uživatelské instance musí být místní pojmenované kanály.</span><span class="sxs-lookup"><span data-stu-id="4f317-118">The network protocol for user instances must be local Named Pipes.</span></span> <span data-ttu-id="4f317-119">Uživatelskou instanci nelze spustit ve vzdálené instanci SQL Server a přihlášení SQL Server nejsou povolena.</span><span class="sxs-lookup"><span data-stu-id="4f317-119">A user instance cannot be started on a remote instance of SQL Server, and SQL Server logins are not allowed.</span></span>  
  
## <a name="connecting-to-a-user-instance"></a><span data-ttu-id="4f317-120">Připojení k uživatelské instanci</span><span class="sxs-lookup"><span data-stu-id="4f317-120">Connecting to a User Instance</span></span>  
 <span data-ttu-id="4f317-121">Klíčová `AttachDBFilename` slova a<xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A>umožňují připojení<xref:System.Data.SqlClient.SqlConnection> k uživatelské instanci. `User Instance`</span><span class="sxs-lookup"><span data-stu-id="4f317-121">The `User Instance` and `AttachDBFilename`<xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A> keywords allow a <xref:System.Data.SqlClient.SqlConnection> to connect to a user instance.</span></span> <span data-ttu-id="4f317-122">Uživatelské instance jsou podporovány <xref:System.Data.SqlClient.SqlConnectionStringBuilder> `UserInstance` také vlastnostmi a `AttachDBFilename` .</span><span class="sxs-lookup"><span data-stu-id="4f317-122">User instances are also supported by the <xref:System.Data.SqlClient.SqlConnectionStringBuilder>`UserInstance` and `AttachDBFilename` properties.</span></span>  
  
 <span data-ttu-id="4f317-123">Všimněte si následujícího ukázkového připojovacího řetězce, který vidíte níže:</span><span class="sxs-lookup"><span data-stu-id="4f317-123">Note the following about the sample connection string shown below:</span></span>  
  
- <span data-ttu-id="4f317-124">`Data Source` Klíčové slovo odkazuje na nadřazenou instanci SQL Server Express, která generuje uživatelskou instanci.</span><span class="sxs-lookup"><span data-stu-id="4f317-124">The `Data Source` keyword refers to the parent instance of SQL Server Express that is generating the user instance.</span></span> <span data-ttu-id="4f317-125">Výchozí instance je .\SQLEXPRESS.</span><span class="sxs-lookup"><span data-stu-id="4f317-125">The default instance is .\sqlexpress.</span></span>  
  
- <span data-ttu-id="4f317-126">`Integrated Security`je nastaven na `true`.</span><span class="sxs-lookup"><span data-stu-id="4f317-126">`Integrated Security` is set to `true`.</span></span> <span data-ttu-id="4f317-127">Pro připojení k uživatelské instanci je vyžadováno ověřování systému Windows. Přihlašovací jména SQL Server nejsou podporovaná.</span><span class="sxs-lookup"><span data-stu-id="4f317-127">To connect to a user instance, Windows Authentication is required; SQL Server logins are not supported.</span></span>  
  
- <span data-ttu-id="4f317-128">Je nastaven na `true`, který vyvolá uživatelskou instanci. `User Instance`</span><span class="sxs-lookup"><span data-stu-id="4f317-128">The `User Instance` is set to `true`, which invokes a user instance.</span></span> <span data-ttu-id="4f317-129">(Výchozí hodnota je `false`.)</span><span class="sxs-lookup"><span data-stu-id="4f317-129">(The default is `false`.)</span></span>  
  
- <span data-ttu-id="4f317-130">Klíčové `AttachDbFileName` slovo připojovacího řetězce se používá pro připojení primárního databázového souboru (. mdf), který musí obsahovat úplný název cesty.</span><span class="sxs-lookup"><span data-stu-id="4f317-130">The `AttachDbFileName` connection string keyword is used to attach the primary database file (.mdf), which must include the full path name.</span></span> <span data-ttu-id="4f317-131">`AttachDbFileName`také odpovídá klíčům "rozšířené vlastnosti" a "prvotnímu názvu souboru" v <xref:System.Data.SqlClient.SqlConnection> připojovacím řetězci.</span><span class="sxs-lookup"><span data-stu-id="4f317-131">`AttachDbFileName` also corresponds to the "extended properties" and "initial file name" keys within a <xref:System.Data.SqlClient.SqlConnection> connection string.</span></span>  
  
- <span data-ttu-id="4f317-132">`|DataDirectory|` Náhradní řetězec uzavřený v symbolech kanálu označuje datový adresář aplikace, který otevírá připojení, a poskytuje relativní cestu, která označuje umístění databáze. mdf a. ldf a souborů protokolu.</span><span class="sxs-lookup"><span data-stu-id="4f317-132">The `|DataDirectory|` substitution string enclosed in the pipe symbols refers to the data directory of the application opening the connection and provides a relative path indicating the location of the .mdf and .ldf database and log files.</span></span> <span data-ttu-id="4f317-133">Pokud chcete tyto soubory najít jinde, musíte zadat úplnou cestu k souborům.</span><span class="sxs-lookup"><span data-stu-id="4f317-133">If you want to locate these files elsewhere, you must provide the full path to the files.</span></span>  
  
```text
Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;AttachDBFilename=|DataDirectory|\InstanceDB.mdf;  
Initial Catalog=InstanceDB;  
```  
  
> [!NOTE]
> <span data-ttu-id="4f317-134">Můžete také použít <xref:System.Data.SqlClient.SqlConnectionStringBuilder> <xref:System.Data.SqlClient.SqlConnectionStringBuilder.UserInstance%2A> vlastnosti a <xref:System.Data.SqlClient.SqlConnectionStringBuilder.AttachDBFilename%2A> k sestavení připojovacího řetězce v době běhu.</span><span class="sxs-lookup"><span data-stu-id="4f317-134">You can also use the <xref:System.Data.SqlClient.SqlConnectionStringBuilder><xref:System.Data.SqlClient.SqlConnectionStringBuilder.UserInstance%2A> and <xref:System.Data.SqlClient.SqlConnectionStringBuilder.AttachDBFilename%2A> properties to build a connection string at run time.</span></span>  
  
### <a name="using-the-124datadirectory124-substitution-string"></a><span data-ttu-id="4f317-135">&#124;Použití náhradního řetězce&#124; DataDirectory</span><span class="sxs-lookup"><span data-stu-id="4f317-135">Using the &#124;DataDirectory&#124; Substitution String</span></span>  
 <span data-ttu-id="4f317-136">`AttachDbFileName`bylo rozšířeno v ADO.NET 2,0 s úvodním `|DataDirectory|` řetězcem (uzavřeným v symbolech kanálu).</span><span class="sxs-lookup"><span data-stu-id="4f317-136">`AttachDbFileName` was extended in ADO.NET 2.0 with the introduction of the `|DataDirectory|` (enclosed in pipe symbols) substitution string.</span></span> <span data-ttu-id="4f317-137">`DataDirectory`používá se ve spojení s `AttachDbFileName` nástrojem k označení relativní cesty k datovému souboru a umožňuje vývojářům vytvářet připojovací řetězce, které jsou založeny na relativní cestě ke zdroji dat místo nutnosti zadat úplnou cestu.</span><span class="sxs-lookup"><span data-stu-id="4f317-137">`DataDirectory` is used in conjunction with `AttachDbFileName` to indicate a relative path to a data file, allowing developers to create connection strings that are based on a relative path to the data source instead of being required to specify a full path.</span></span>  
  
 <span data-ttu-id="4f317-138">Fyzické umístění, na `DataDirectory` které odkazuje, závisí na typu aplikace.</span><span class="sxs-lookup"><span data-stu-id="4f317-138">The physical location that `DataDirectory` points to depends on the type of application.</span></span> <span data-ttu-id="4f317-139">V tomto příkladu je soubor Northwind. mdf, který se má připojit, umístěný ve složce \App_Data aplikace.</span><span class="sxs-lookup"><span data-stu-id="4f317-139">In this example, the Northwind.mdf file to be attached is located in the application's \app_data folder.</span></span>  
  
```text
Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;  
AttachDBFilename=|DataDirectory|\app_data\Northwind.mdf;  
Initial Catalog=Northwind;  
```  
  
 <span data-ttu-id="4f317-140">Když `DataDirectory` se použije, výsledná cesta k souboru nemůže být vyšší v adresářové struktuře než adresář, na který odkazuje náhradní řetězec.</span><span class="sxs-lookup"><span data-stu-id="4f317-140">When `DataDirectory` is used, the resulting file path cannot be higher in the directory structure than the directory pointed to by the substitution string.</span></span> <span data-ttu-id="4f317-141">Pokud je například plně rozbalený `DataDirectory` C:\AppDirectory\app_data, pak vzorový připojovací řetězec zobrazený výše funguje, protože je pod c:\AppDirectory.</span><span class="sxs-lookup"><span data-stu-id="4f317-141">For example, if the fully expanded `DataDirectory` is C:\AppDirectory\app_data, then the sample connection string shown above works because it is below c:\AppDirectory.</span></span> <span data-ttu-id="4f317-142">Ale pokus o zadání `DataDirectory` jako `|DataDirectory|\..\data` způsobí chybu, protože \Data není podadresářem \AppDirectory.</span><span class="sxs-lookup"><span data-stu-id="4f317-142">However, attempting to specify `DataDirectory` as `|DataDirectory|\..\data` will result in an error because \data is not a subdirectory of \AppDirectory.</span></span>  
  
 <span data-ttu-id="4f317-143">Pokud je v připojovacím řetězci nesprávně formátovaný řetězec nahrazení, <xref:System.ArgumentException> bude vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="4f317-143">If the connection string has an improperly formatted substitution string, an <xref:System.ArgumentException> will be thrown.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="4f317-144"><xref:System.Data.SqlClient>přeloží nahrazující řetězce na úplné cesty proti systému souborů místního počítače.</span><span class="sxs-lookup"><span data-stu-id="4f317-144"><xref:System.Data.SqlClient> resolves the substitution strings into full paths against the local computer file system.</span></span> <span data-ttu-id="4f317-145">Proto se názvy vzdáleného serveru, protokolu HTTP a cesty UNC nepodporují.</span><span class="sxs-lookup"><span data-stu-id="4f317-145">Therefore, remote server, HTTP, and UNC path names are not supported.</span></span> <span data-ttu-id="4f317-146">Pokud se server nenachází v místním počítači, vyvolá se při otevření připojení výjimka.</span><span class="sxs-lookup"><span data-stu-id="4f317-146">An exception is thrown when the connection is opened if the server is not located on the local computer.</span></span>  
  
 <span data-ttu-id="4f317-147"><xref:System.Data.SqlClient.SqlConnection> Když je otevřen, je přesměrován z výchozí instance SQL Server Express do spuštěné instance spuštěné v rámci účtu volajícího.</span><span class="sxs-lookup"><span data-stu-id="4f317-147">When the <xref:System.Data.SqlClient.SqlConnection> is opened, it is redirected from the default SQL Server Express instance to a run-time initiated instance running under the caller's account.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="4f317-148">Může být nutné zvýšit hodnotu, <xref:System.Data.SqlClient.SqlConnection.ConnectionTimeout%2A> protože instance uživatelů mohou trvat déle než běžné instance.</span><span class="sxs-lookup"><span data-stu-id="4f317-148">It may be necessary to increase the <xref:System.Data.SqlClient.SqlConnection.ConnectionTimeout%2A> value since user instances may take longer to load than regular instances.</span></span>  
  
 <span data-ttu-id="4f317-149">Následující fragment kódu otevře nový `SqlConnection`, zobrazí připojovací řetězec v okně konzoly a pak ukončí připojení při ukončení `using` bloku kódu.</span><span class="sxs-lookup"><span data-stu-id="4f317-149">The following code fragment opens a new `SqlConnection`, displays the connection string in the console window, and then closes the connection when exiting the `using` code block.</span></span>  
  
```vb  
Private Sub OpenSqlConnection()  
    ' Retrieve the connection string.  
    Dim connectionString As String = GetConnectionString()  
  
    Using connection As New SqlConnection(connectionString)  
        connection.Open()  
        Console.WriteLine("ConnectionString: {0}", _  
           connection.ConnectionString)  
    End Using  
End Sub  
```  
  
```csharp  
private static void OpenSqlConnection()  
{  
    // Retrieve the connection string.  
    string connectionString = GetConnectionString();  
  
    using (SqlConnection connection =   
        new SqlConnection(connectionString))  
    {  
        connection.Open();  
        Console.WriteLine("ConnectionString: {0}",   
             connection.ConnectionString);  
    }  
}  
```  
  
> [!NOTE]
> <span data-ttu-id="4f317-150">Uživatelské instance nejsou podporovány v modulu CLR (Common Language Runtime), který je spuštěn v rámci SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4f317-150">User instances are not supported in common language runtime (CLR) code that is running inside of SQL Server.</span></span> <span data-ttu-id="4f317-151">Je vyvolána výjimka, `Open` Pokud je volána na <xref:System.Data.SqlClient.SqlConnection> typu, `User Instance=true` který obsahuje připojovací řetězec. <xref:System.InvalidOperationException></span><span class="sxs-lookup"><span data-stu-id="4f317-151">An <xref:System.InvalidOperationException> is thrown if `Open` is called on a <xref:System.Data.SqlClient.SqlConnection> that has `User Instance=true` in the connection string.</span></span>  
  
## <a name="lifetime-of-a-user-instance-connection"></a><span data-ttu-id="4f317-152">Doba života připojení uživatelské instance</span><span class="sxs-lookup"><span data-stu-id="4f317-152">Lifetime of a User Instance Connection</span></span>  
 <span data-ttu-id="4f317-153">Na rozdíl od verzí SQL Server spouštěných jako služba nemusí být instance SQL Server Express spouštěna a zastavena ručně.</span><span class="sxs-lookup"><span data-stu-id="4f317-153">Unlike versions of SQL Server that run as a service, SQL Server Express instances do not need to be manually started and stopped.</span></span> <span data-ttu-id="4f317-154">Pokaždé, když se uživatel přihlásí a připojí k uživatelské instanci, spustí se instance uživatele, pokud ještě není spuštěná.</span><span class="sxs-lookup"><span data-stu-id="4f317-154">Each time a user logs in and connects to a user instance, the user instance is started if it is not already running.</span></span> <span data-ttu-id="4f317-155">Databáze uživatelské instance mají `AutoClose` nastavenou možnost, aby se databáze automaticky ukončila po určité době nečinnosti.</span><span class="sxs-lookup"><span data-stu-id="4f317-155">User instance databases have the `AutoClose` option set so that the database is automatically shut down after a period of inactivity.</span></span> <span data-ttu-id="4f317-156">Proces soubor Sqlservr. exe, který je spuštěný, je spuštěný po dobu omezeného časového limitu po zavření posledního připojení k instanci, takže není potřeba ho restartovat, pokud se před vypršením časového limitu otevře jiné připojení.</span><span class="sxs-lookup"><span data-stu-id="4f317-156">The sqlservr.exe process that is started is kept running for a limited time-out period after the last connection to the instance is closed, so it does not need to be restarted if another connection is opened before the time-out has expired.</span></span> <span data-ttu-id="4f317-157">Uživatelská instance se automaticky vypne, pokud se žádné nové připojení neotevře před uplynutím časového limitu.</span><span class="sxs-lookup"><span data-stu-id="4f317-157">The user instance automatically shuts down if no new connection opens before that time-out period has expired.</span></span> <span data-ttu-id="4f317-158">Správce systému v nadřazené instanci může nastavit dobu trvání časového limitu pro uživatelskou instanci pomocí **procedury sp_configure** pro změnu **časového limitu uživatelské instance** .</span><span class="sxs-lookup"><span data-stu-id="4f317-158">A system administrator on the parent instance can set the duration of the time-out period for a user instance by using **sp_configure** to change the **user instance timeout** option.</span></span> <span data-ttu-id="4f317-159">Výchozí hodnota je 60 minut.</span><span class="sxs-lookup"><span data-stu-id="4f317-159">The default is 60 minutes.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="4f317-160">Pokud `Min Pool Size` se používá v připojovacím řetězci s hodnotou větší než nula, připojení Pooler vždycky udržuje několik otevřených připojení a uživatelská instance se automaticky nevypne.</span><span class="sxs-lookup"><span data-stu-id="4f317-160">If `Min Pool Size` is used in the connection string with a value greater than zero, the connection pooler will always maintain a few opened connections, and the user instance will not automatically shut down.</span></span>  
  
## <a name="how-user-instances-work"></a><span data-ttu-id="4f317-161">Jak fungují uživatelské instance</span><span class="sxs-lookup"><span data-stu-id="4f317-161">How User Instances Work</span></span>  
 <span data-ttu-id="4f317-162">Při prvním vygenerování uživatelské instance pro každého uživatele jsou **Hlavní** databáze a systémové databáze **msdb** zkopírovány ze složky data šablony do cesty v adresáři úložiště místních dat aplikace uživatele pro výhradní použití instancí uživatele.</span><span class="sxs-lookup"><span data-stu-id="4f317-162">The first time a user instance is generated for each user, the **master** and **msdb** system databases are copied from the Template Data folder to a path under the user's local application data repository directory for exclusive use by the user instance.</span></span> <span data-ttu-id="4f317-163">Tato cesta je obvykle `C:\Documents and Settings\<UserName>\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS`.</span><span class="sxs-lookup"><span data-stu-id="4f317-163">This path is typically `C:\Documents and Settings\<UserName>\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS`.</span></span> <span data-ttu-id="4f317-164">Po spuštění uživatelské instance se do tohoto adresáře zapisují také soubory **tempdb**, log a Trace.</span><span class="sxs-lookup"><span data-stu-id="4f317-164">When a user instance starts up, the **tempdb**, log, and trace files are also written to this directory.</span></span> <span data-ttu-id="4f317-165">Pro instanci je vygenerován název, který zaručuje, že bude jedinečný pro každého uživatele.</span><span class="sxs-lookup"><span data-stu-id="4f317-165">A name is generated for the instance, which is guaranteed to be unique for each user.</span></span>  
  
 <span data-ttu-id="4f317-166">Ve výchozím nastavení mají všichni členové skupiny Windows Builtin\Users oprávnění k připojení k místní instanci a oprávnění ke čtení a spouštění pro SQL Server binárních souborů.</span><span class="sxs-lookup"><span data-stu-id="4f317-166">By default all members of the Windows Builtin\Users group are granted permissions to connect on the local instance as well as read and execute permissions on the SQL Server binaries.</span></span> <span data-ttu-id="4f317-167">Po ověření přihlašovacích údajů volajícího uživatele hostujícího uživatelskou instanci se tento uživatel `sysadmin` v této instanci stala.</span><span class="sxs-lookup"><span data-stu-id="4f317-167">Once the credentials of the calling user hosting the user instance have been verified, that user becomes the `sysadmin` on that instance.</span></span> <span data-ttu-id="4f317-168">Pro uživatelské instance je povolena pouze sdílená paměť, což znamená, že jsou možné pouze operace na místním počítači.</span><span class="sxs-lookup"><span data-stu-id="4f317-168">Only shared memory is enabled for user instances, which means that only operations on the local machine are possible.</span></span>  
  
 <span data-ttu-id="4f317-169">Uživatelům musí být udělena oprávnění ke čtení i zápisu u souborů. mdf a. ldf zadaných v připojovacím řetězci.</span><span class="sxs-lookup"><span data-stu-id="4f317-169">Users must be granted both read and write permissions on the .mdf and .ldf files specified in the connection string.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="4f317-170">Soubory. mdf a. ldf reprezentují databázi a soubory protokolů, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="4f317-170">The .mdf and .ldf files represent the database and log files, respectively.</span></span> <span data-ttu-id="4f317-171">Tyto dva soubory jsou odpovídající sadou, proto je třeba dbát na to, aby se operace zálohování a obnovení provedla.</span><span class="sxs-lookup"><span data-stu-id="4f317-171">These two files are a matched set, so care must be taken during backup and restore operations.</span></span> <span data-ttu-id="4f317-172">Databázový soubor obsahuje informace o přesné verzi souboru protokolu a databáze se neotevře, pokud je spojena s nesprávným souborem protokolu.</span><span class="sxs-lookup"><span data-stu-id="4f317-172">The database file contains information about the exact version of the log file, and the database will not open if it is coupled with the wrong log file.</span></span>  
  
 <span data-ttu-id="4f317-173">Aby nedošlo k poškození dat, otevře se databáze v uživatelské instanci s výhradním přístupem.</span><span class="sxs-lookup"><span data-stu-id="4f317-173">To avoid data corruption, a database in the user instance is opened with exclusive access.</span></span> <span data-ttu-id="4f317-174">Pokud dvě různé uživatelské instance sdílejí stejnou databázi na stejném počítači, uživatel první instance musí databázi zavřít, aby ji bylo možné otevřít v druhé instanci.</span><span class="sxs-lookup"><span data-stu-id="4f317-174">If two different user instances share the same database on the same computer, the user on the first instance must close the database before it can be opened in a second instance.</span></span>  
  
## <a name="user-instance-scenarios"></a><span data-ttu-id="4f317-175">Scénáře uživatelské instance</span><span class="sxs-lookup"><span data-stu-id="4f317-175">User Instance Scenarios</span></span>  
 <span data-ttu-id="4f317-176">Uživatelské instance poskytují vývojářům databázových aplikací SQL Server úložiště dat, které nezávisí na vývojářích, kteří mají na svých vývojových počítačích účty pro správu.</span><span class="sxs-lookup"><span data-stu-id="4f317-176">User instances provide developers of database applications with a SQL Server data store that does not depend on developers having administrative accounts on their development computers.</span></span> <span data-ttu-id="4f317-177">Uživatelské instance jsou založené na modelu Access/jet, kde se databázová aplikace jednoduše připojuje k souboru a uživatel má automaticky úplná oprávnění ke všem databázovým objektům, aniž by museli udělit zásah správce systému. nastaven.</span><span class="sxs-lookup"><span data-stu-id="4f317-177">User instances are based on the Access/Jet model, where the database application simply connects to a file, and the user automatically has full permissions on all of the database objects without needing the intervention of a system administrator to grant permissions.</span></span> <span data-ttu-id="4f317-178">Má fungovat v situacích, kdy uživatel běží pod uživatelským účtem s minimálním oprávněním (LUA) a nemá oprávnění správce na serveru nebo v místním počítači, a proto musí vytvářet databázové objekty a aplikace.</span><span class="sxs-lookup"><span data-stu-id="4f317-178">It is intended to work in situations where the user is running under a least-privilege user account (LUA) and does not have administrative privileges on the server or local machine, yet needs to create database objects and applications.</span></span> <span data-ttu-id="4f317-179">Uživatelské instance umožňují uživatelům vytvářet instance v době běhu, která běží pod vlastním kontextem zabezpečení uživatele, a ne v kontextu zabezpečení přísnější systémové služby.</span><span class="sxs-lookup"><span data-stu-id="4f317-179">User instances allow users to create instances at run time that run under the user's own security context, and not in the security context of a more privileged system service.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="4f317-180">Uživatelské instance by se měly používat jenom ve scénářích, kde jsou všechny aplikace, které ji používají, plně důvěryhodné.</span><span class="sxs-lookup"><span data-stu-id="4f317-180">User instances should only be used in scenarios where all the applications using it are fully trusted.</span></span>  
  
 <span data-ttu-id="4f317-181">Mezi scénáře uživatelské instance patří:</span><span class="sxs-lookup"><span data-stu-id="4f317-181">User instance scenarios include:</span></span>  
  
- <span data-ttu-id="4f317-182">Libovolná aplikace s jedním uživatelem, kde se nevyžadují sdílení dat.</span><span class="sxs-lookup"><span data-stu-id="4f317-182">Any single-user application where sharing data is not required.</span></span>  
  
- <span data-ttu-id="4f317-183">Nasazení ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="4f317-183">ClickOnce deployment.</span></span> <span data-ttu-id="4f317-184">Pokud jsou v cílovém počítači již nainstalovány .NET Framework 2,0 (nebo novější) a SQL Server Express, instalační balíček stažený jako výsledek akce ClickOnce může být nainstalován a používán uživateli bez oprávnění správce.</span><span class="sxs-lookup"><span data-stu-id="4f317-184">If the .NET Framework 2.0 (or later) and SQL Server Express are already installed on the target computer, the installation package downloaded as a result of a ClickOnce action can be installed and used by non-administrator users.</span></span> <span data-ttu-id="4f317-185">Všimněte si, že správce musí nainstalovat SQL Server Express, pokud je součástí instalačního programu.</span><span class="sxs-lookup"><span data-stu-id="4f317-185">Note that an administrator must install SQL Server Express if that is part of the setup.</span></span> <span data-ttu-id="4f317-186">Další informace naleznete v tématu [nasazení ClickOnce pro model Windows Forms](../../../winforms/clickonce-deployment-for-windows-forms.md).</span><span class="sxs-lookup"><span data-stu-id="4f317-186">For more information, see [ClickOnce Deployment for Windows Forms](../../../winforms/clickonce-deployment-for-windows-forms.md).</span></span>
  
- <span data-ttu-id="4f317-187">Vyhrazené hostování ASP.NET pomocí ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="4f317-187">Dedicated ASP.NET hosting using Windows Authentication.</span></span> <span data-ttu-id="4f317-188">Jedna instance SQL Server Express může být hostována v intranetu.</span><span class="sxs-lookup"><span data-stu-id="4f317-188">A single SQL Server Express instance can be hosted on an intranet.</span></span> <span data-ttu-id="4f317-189">Aplikace se připojuje pomocí účtu ASPNET systému Windows, nikoli pomocí zosobnění.</span><span class="sxs-lookup"><span data-stu-id="4f317-189">The application connects using the ASPNET Windows account, not by using impersonation.</span></span> <span data-ttu-id="4f317-190">Uživatelské instance by se neměly používat pro scénáře třetích stran nebo sdílené hostování, kde by všechny aplikace sdílely stejnou instanci uživatele a už by nezůstaly izolované od sebe.</span><span class="sxs-lookup"><span data-stu-id="4f317-190">User instances should not be used for third-party or shared hosting scenarios where all applications would share the same user instance and would no longer remain isolated from each other.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4f317-191">Viz také:</span><span class="sxs-lookup"><span data-stu-id="4f317-191">See also</span></span>

- [<span data-ttu-id="4f317-192">SQL Server a ADO.NET</span><span class="sxs-lookup"><span data-stu-id="4f317-192">SQL Server and ADO.NET</span></span>](index.md)
- [<span data-ttu-id="4f317-193">Připojovací řetězce</span><span class="sxs-lookup"><span data-stu-id="4f317-193">Connection Strings</span></span>](../connection-strings.md)
- [<span data-ttu-id="4f317-194">Připojení ke zdroji dat</span><span class="sxs-lookup"><span data-stu-id="4f317-194">Connecting to a Data Source</span></span>](../connecting-to-a-data-source.md)
- [<span data-ttu-id="4f317-195">Přehled ADO.NET</span><span class="sxs-lookup"><span data-stu-id="4f317-195">ADO.NET Overview</span></span>](../ado-net-overview.md)
