---
title: Principy problémů a výjimek WebRequest
ms.date: 03/30/2017
ms.assetid: 74a361a5-e912-42d3-8f2e-8e9a96880a2b
ms.openlocfilehash: 3a6dc06ed7abdbb6a28f9d6c09eda079157493d9
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/23/2019
ms.locfileid: "61704216"
---
# <a name="understanding-webrequest-problems-and-exceptions"></a>Principy problémů a výjimek WebRequest
<xref:System.Net.WebRequest> a odvozené třídy (<xref:System.Net.HttpWebRequest>, <xref:System.Net.FtpWebRequest>, a <xref:System.Net.FileWebRequest>) vyvolat výjimky pro signalizaci nestandardní podmínky. Někdy není zřejmé řešení těchto problémů.  
  
## <a name="solutions"></a>Řešení  
 Zkontrolujte <xref:System.Net.WebException.Status%2A> vlastnost <xref:System.Net.WebException> ke zjištění problému. Následující tabulka obsahuje několik hodnot stavu a některé možná řešení.  
  
|Stav|Podrobnosti|Řešení|  
|------------|-------------|--------------|  
|<xref:System.Net.WebExceptionStatus.SendFailure><br /><br /> -nebo-<br /><br /> <xref:System.Net.WebExceptionStatus.ReceiveFailure>|Je nějaký problém s základního soketu. Připojení byl resetován.|Opětovné připojení a odešlete požadavek znovu.<br /><br /> Ujistěte se, že je nainstalovaný nejnovější aktualizaci service pack.<br /><br /> Zvyšte hodnotu <xref:System.Net.ServicePointManager.MaxServicePointIdleTime%2A?displayProperty=nameWithType> vlastnost.<br /><br /> Nastavte <xref:System.Net.HttpWebRequest.KeepAlive%2A?displayProperty=nameWithType> k `false`.<br /><br /> Zvýšit číslo s maximální počet připojení <xref:System.Net.ServicePointManager.DefaultConnectionLimit%2A> vlastnost.<br /><br /> Zkontrolujte konfiguraci proxy serveru.<br /><br /> Pokud používáte protokol SSL, ujistěte se, že proces serveru má oprávnění pro přístup k úložišti certifikátů.<br /><br /> Pokud odesílání velkých objemů dat, nastavte <xref:System.Net.HttpWebRequest.AllowWriteStreamBuffering%2A> k `false`.|  
|<xref:System.Net.WebExceptionStatus.TrustFailure>|Nebylo možné ověřit certifikát serveru.|Došlo k pokusu o otevření identifikátoru URI pomocí aplikace Internet Explorer. Vyřešte všechny výstrahy zabezpečení aplikace Internet Explorer zobrazí. Pokud nelze vyřešit výstrahu zabezpečení, pak můžete vytvořit třídu Zásady certifikátů, která implementuje <xref:System.Net.ICertificatePolicy> , která vrací `true`a předat ho metodě <xref:System.Net.ServicePointManager.CertificatePolicy%2A>.<br /><br /> Odkazovat na <https://support.microsoft.com/?id=823177>.<br /><br /> Ujistěte se, že certifikát certifikační autority, který podepsaný certifikát serveru se přidá do seznamu Důvěryhodné certifikační autority v aplikaci Internet Explorer.<br /><br /> Ujistěte se, že název hostitele v adrese URL odpovídá běžný název v certifikátu serveru.|  
|<xref:System.Net.WebExceptionStatus.SecureChannelFailure>|Došlo k chybě v transakci SSL, nebo dojde k problému certifikátu.|Rozhraní .NET Framework verze 1.1 podporuje jenom SSL verze 3.0. Pokud server používá jenom TLS verze 1.0 nebo SSL verze 2.0, je vyvolána výjimka. Upgradujte na rozhraní .NET Framework verze 2.0 a nastavit <xref:System.Net.ServicePointManager.SecurityProtocol%2A> tak, aby odpovídaly na serveru.<br /><br /> Klientský certifikát byl podepsán pomocí certifikační autority (CA), že server nedůvěřuje. Certifikát Certifikační autority nainstalujte na server. Viz <https://support.microsoft.com/?id=332077>.<br /><br /> Ujistěte se, že máte nainstalované nejnovější aktualizace service pack.|  
|<xref:System.Net.WebExceptionStatus.ConnectFailure>|Spojení bylo přerušeno.|Připojení je blokováno bránou firewall nebo proxy serveru. Upravte brány firewall nebo proxy, aby bylo připojení.<br /><br /> Explicitně určit, <xref:System.Net.WebProxy> v klientské aplikaci pomocí volání <xref:System.Net.WebProxy> konstruktoru (WebServiceProxyClass.Proxy = nové WebProxy ([http://server:80](http://server/), true)).<br /><br /> Spustit Filemon nebo Regmon a ujistěte se, že identita pracovního procesu mají potřebná oprávnění pro přístup WSPWSP.dll, HKLM\System\CurrentControlSet\Services\DnsCache nebo HKLM\System\CurrentControlSet\Services\WinSock2.|  
|<xref:System.Net.WebExceptionStatus.NameResolutionFailure>|Název služby domény nešlo přeložit název hostitele.|Konfigurace proxy serveru správně. Viz <https://support.microsoft.com/?id=318140>.<br /><br /> Ujistěte se, že všechny nainstalované antivirový software nebo brána firewall neblokuje připojení.|  
|<xref:System.Net.WebExceptionStatus.RequestCanceled>|<xref:System.Net.WebRequest.Abort%2A> bylo volání, a chybu došlo k chybě.|Tento problém může být způsobena případě velkého zatížení u klienta nebo serveru. Snížení zatížení.<br /><br /> Zvětšit <xref:System.Net.ServicePointManager.DefaultConnectionLimit%2A> nastavení.<br /><br /> Zobrazit <https://support.microsoft.com/?id=821268> k úpravě nastavení výkonu webové služby.|  
|<xref:System.Net.WebExceptionStatus.ConnectionClosed>|Aplikace se pokusila o zápis do soketu, který byl již uzavřen.|Klient nebo server je přetížený. Snížení zatížení.<br /><br /> Zvětšit <xref:System.Net.ServicePointManager.DefaultConnectionLimit%2A> nastavení.<br /><br /> Zobrazit <https://support.microsoft.com/?id=821268> k úpravě nastavení výkonu webové služby.|  
|<xref:System.Net.WebExceptionStatus.MessageLengthLimitExceeded>|Stanovený limit (<xref:System.Net.HttpWebRequest.MaximumResponseHeadersLength%2A>) ve zprávě byla překročena délka.|Zvyšte hodnotu <xref:System.Net.HttpWebRequest.MaximumResponseHeadersLength%2A> vlastnost.|  
|<xref:System.Net.WebExceptionStatus.ProxyNameResolutionFailure>|Název služby domény nešlo přeložit název hostitele proxy serveru.|Konfigurace proxy serveru správně. Viz <https://support.microsoft.com/?id=318140>.<br /><br /> Platnost <xref:System.Net.HttpWebRequest> použít žádný proxy server tak, že nastavíte <xref:System.Net.HttpWebRequest.Proxy%2A> vlastnost `null`.|  
|<xref:System.Net.WebExceptionStatus.ServerProtocolViolation>|Odpověď ze serveru není platná odpověď HTTP. Tento problém nastane, pokud rozhraní .NET Framework detekuje, že odpověď serveru není v souladu s HTTP 1.1 RFC. Tomuto problému může dojít, když odpověď obsahuje nesprávné hlavičky nebo nesprávným obsahem záhlaví oddělovače. RFC 2616 definuje HTTP 1.1 a platný formát pro odpověď ze serveru. Další informace najdete v tématu [RFC 2616 – protokol HTTP - HTTP/1.1](https://go.microsoft.com/fwlink/?LinkID=147388) na [Engineering Task Force IETF (Internet)](https://www.ietf.org/) webu.|Získání síťového trasování transakce a prověří hlavičky v odpovědi.<br /><br /> Pokud vaše aplikace vyžaduje odpověď serveru bez (může se jednat o problém zabezpečení) a sada `useUnsafeHeaderParsing` k `true` v konfiguračním souboru. Zobrazit [ \<httpWebRequest > – Element (nastavení sítě)](../../../docs/framework/configure-apps/file-schema/network/httpwebrequest-element-network-settings.md).|  
  
## <a name="see-also"></a>Viz také:

- <xref:System.Net.HttpWebRequest>
- <xref:System.Net.HttpWebResponse>
- <xref:System.Net.Dns>
