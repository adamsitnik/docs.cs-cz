---
title: Osvědčené postupy TLS (Transport Layer Security) s .NET Framework
description: Popisuje osvědčené postupy pomocí protokolu TLS (Transport Layer Security) s .NET Framework.
ms.date: 10/22/2018
helpviewer_keywords:
- sending data, Internet security
- protocols, Internet security
- Network security
- network resources, Internet security
- receiving data, Internet security
- authentication [.NET Framework], Internet security
- Internet, security
- security [.NET Framework], Internet
- permissions [.NET Framework], Internet
ms.openlocfilehash: f3b0fe20ae9f6eb50f26d044f18e02214ce97757
ms.sourcegitcommit: cf9515122fce716bcfb6618ba366e39b5a2eb81e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/15/2019
ms.locfileid: "69038460"
---
# <a name="transport-layer-security-tls-best-practices-with-the-net-framework"></a><span data-ttu-id="f0c4c-103">Osvědčené postupy TLS (Transport Layer Security) s .NET Framework</span><span class="sxs-lookup"><span data-stu-id="f0c4c-103">Transport Layer Security (TLS) best practices with the .NET Framework</span></span>

<span data-ttu-id="f0c4c-104">Protokol TLS (Transport Layer Security) je oborovým standardem, který pomáhá chránit soukromí informací přenášených přes Internet.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-104">The Transport Layer Security (TLS) protocol is an industry standard designed to help protect the privacy of information communicated over the Internet.</span></span> <span data-ttu-id="f0c4c-105">[TLS 1,2](https://tools.ietf.org/html/rfc5246) je standard, který poskytuje vylepšení zabezpečení v předchozích verzích.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-105">[TLS 1.2](https://tools.ietf.org/html/rfc5246) is a standard that provides security improvements over previous versions.</span></span> <span data-ttu-id="f0c4c-106">Protokol TLS 1,2 bude nakonec nahrazen nejnovějším vydaným standardem [tls 1,3](https://tools.ietf.org/html/rfc8446) , který je rychlejší a má vyšší zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-106">TLS 1.2 will eventually be replaced by the newest released standard [TLS 1.3](https://tools.ietf.org/html/rfc8446) which is faster and has improved security.</span></span> <span data-ttu-id="f0c4c-107">Tento článek obsahuje doporučení pro zabezpečení .NET Frameworkch aplikací, které používají protokol TLS.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-107">This article presents recommendations to secure .NET Framework applications that use the TLS protocol.</span></span>

<span data-ttu-id="f0c4c-108">Aby se zajistilo, že .NET Framework aplikace zůstanou zabezpečené, neměla by být verze TLS pevně zakódované.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-108">To ensure .NET Framework applications remain secure, the TLS version should **not** be hardcoded.</span></span> <span data-ttu-id="f0c4c-109">.NET Framework aplikace by měly používat verzi TLS, kterou operační systém (OS) podporuje.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-109">.NET Framework applications should use the TLS version the operating system (OS) supports.</span></span>

<span data-ttu-id="f0c4c-110">Tento dokument cílí na vývojáře, kteří jsou:</span><span class="sxs-lookup"><span data-stu-id="f0c4c-110">This document targets developers who are:</span></span>

- <span data-ttu-id="f0c4c-111">Přímo pomocí <xref:System.Net> rozhraní API ( <xref:System.Net.Http.HttpClient?displayProperty=nameWithType> například a <xref:System.Net.Security.SslStream?displayProperty=nameWithType>).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-111">Directly using the <xref:System.Net> APIs (for example, <xref:System.Net.Http.HttpClient?displayProperty=nameWithType> and <xref:System.Net.Security.SslStream?displayProperty=nameWithType>).</span></span>
- <span data-ttu-id="f0c4c-112">Přímo pomocí klientů a služeb WCF pomocí <xref:System.ServiceModel?displayProperty=nameWithType> oboru názvů.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-112">Directly using WCF clients and services using the <xref:System.ServiceModel?displayProperty=nameWithType> namespace.</span></span>
- <span data-ttu-id="f0c4c-113">Použití webových a pracovních rolí [Azure Cloud Services](https://azure.microsoft.com/services/cloud-services/) k hostování a spuštění vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-113">Using [Azure Cloud Services](https://azure.microsoft.com/services/cloud-services/) Web and Worker roles to host and run your application.</span></span> <span data-ttu-id="f0c4c-114">Podívejte se na část [Azure Cloud Services](#azure-cloud-services) .</span><span class="sxs-lookup"><span data-stu-id="f0c4c-114">See the [Azure Cloud Services](#azure-cloud-services) section.</span></span>

<span data-ttu-id="f0c4c-115">Doporučujeme:</span><span class="sxs-lookup"><span data-stu-id="f0c4c-115">We recommend that you:</span></span>

- <span data-ttu-id="f0c4c-116">Cílová verze .NET Framework 4,7 nebo novější ve vašich aplikacích.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-116">Target .NET Framework 4.7 or later versions on your apps.</span></span> <span data-ttu-id="f0c4c-117">Cílová .NET Framework 4.7.1 nebo novější verze v aplikacích WCF.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-117">Target .NET Framework 4.7.1 or later versions on your WCF apps.</span></span>
- <span data-ttu-id="f0c4c-118">Nezadávejte verzi TLS.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-118">Do not specify the TLS version.</span></span> <span data-ttu-id="f0c4c-119">Nakonfigurujte kód tak, aby se operační systém mohl rozhodnout o verzi TLS.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-119">Configure your code to let the OS decide on the TLS version.</span></span>
- <span data-ttu-id="f0c4c-120">Proveďte důkladné audit kódu, abyste ověřili, že neurčíte verzi TLS nebo SSL.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-120">Perform a thorough code audit to verify you're not specifying a TLS or SSL version.</span></span>

<span data-ttu-id="f0c4c-121">Když aplikace umožňuje operačnímu systému zvolit verzi TLS:</span><span class="sxs-lookup"><span data-stu-id="f0c4c-121">When your app lets the OS choose the TLS version:</span></span>

- <span data-ttu-id="f0c4c-122">Automaticky využívá nové protokoly přidané v budoucnu, jako je třeba TLS 1,3.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-122">It automatically takes advantage of new protocols added in the future, such as TLS 1.3.</span></span>
- <span data-ttu-id="f0c4c-123">Operační systém blokuje protokoly, které jsou zjištěny jako nezabezpečené.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-123">The OS blocks protocols that are discovered not to be secure.</span></span>

<span data-ttu-id="f0c4c-124">Část [audit kódu a provádění změn kódu](#audit-your-code-and-make-code-changes) pokrývá auditování a aktualizaci kódu.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-124">The section [Audit your code and make code changes](#audit-your-code-and-make-code-changes) covers auditing and updating your code.</span></span>

<span data-ttu-id="f0c4c-125">Tento článek vysvětluje, jak povolit nejsilnější zabezpečení, které je k dispozici pro verzi .NET Framework, na které vaše aplikace cílí a běží.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-125">This article explains how to enable the strongest security available for the version of the .NET Framework that your app targets and runs on.</span></span> <span data-ttu-id="f0c4c-126">Když aplikace explicitně nastaví protokol a verzi zabezpečení, výslovný se z jakékoli jiné alternativy a výslovný z .NET Framework a výchozí chování operačního systému.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-126">When an app explicitly sets a security protocol and version, it opts out of any other alternative, and opts out of .NET Framework and OS default behavior.</span></span> <span data-ttu-id="f0c4c-127">Pokud chcete, aby aplikace mohla vyjednávat připojení TLS 1,2, explicitní nastavení na nižší verzi TLS brání připojení TLS 1,2.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-127">If you want your app to be able to negotiate a TLS 1.2 connection, explicitly setting to a lower TLS version prevents a TLS 1.2 connection.</span></span>

<span data-ttu-id="f0c4c-128">Pokud se nemůžete vyhnout zakódujeme verze protokolu, důrazně doporučujeme zadat TLS 1,2.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-128">If you can't avoid hardcoding a protocol version, we strongly recommend that you specify TLS 1.2.</span></span> <span data-ttu-id="f0c4c-129">Pokyny k identifikaci a odebrání závislostí TLS 1,0 najdete v dokumentu White Paper [k řešení potíží s protokolem tls 1,0](https://www.microsoft.com/download/details.aspx?id=55266) .</span><span class="sxs-lookup"><span data-stu-id="f0c4c-129">For guidance on identifying and removing TLS 1.0 dependencies, download the [Solving the TLS 1.0 Problem](https://www.microsoft.com/download/details.aspx?id=55266) whitepaper.</span></span>

<span data-ttu-id="f0c4c-130">WCF podporuje TLS 1.0, 1,1 a 1,2 jako výchozí v .NET Framework 4,7.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-130">WCF Supports TLS1.0, 1.1 and 1.2 as the default in .NET Framework 4.7.</span></span> <span data-ttu-id="f0c4c-131">Počínaje .NET Framework 4.7.1 se standardně pro WCF používá nakonfigurovaná verze operačního systému.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-131">Starting with .NET Framework 4.7.1, WCF defaults to the operating system configured version.</span></span> <span data-ttu-id="f0c4c-132">Pokud je aplikace explicitně nakonfigurovaná pomocí `SslProtocols.None`, WCF při použití přenosu NetTcp použije výchozí nastavení operačního systému.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-132">If an application is explicitly configured with `SslProtocols.None`, WCF uses the operating system default setting when using the NetTcp transport.</span></span>

<span data-ttu-id="f0c4c-133">Otázky k tomuto dokumentu můžete klást v doporučených postupech pro [zabezpečení TLS (Transport Layer Security)](https://github.com/dotnet/docs/issues/4675)na githubu .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-133">You can ask questions about this document in the GitHub issue [Transport Layer Security (TLS) best practices with the .NET Framework](https://github.com/dotnet/docs/issues/4675).</span></span>

## <a name="audit-your-code-and-make-code-changes"></a><span data-ttu-id="f0c4c-134">Audit kódu a provádění změn kódu</span><span class="sxs-lookup"><span data-stu-id="f0c4c-134">Audit your code and make code changes</span></span>

<span data-ttu-id="f0c4c-135">V případě aplikací `<system.web><httpRuntime targetFramework>` ASP.NET zkontrolujte element _Web. config_ a ověřte, že používáte zamýšlenou verzi .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-135">For ASP.NET applications, inspect the `<system.web><httpRuntime targetFramework>` element of _web.config_ to verify you're using the intended version of the .NET Framework.</span></span>

<span data-ttu-id="f0c4c-136">Informace o model Windows Forms a dalších aplikacích naleznete [v tématu How to: Cílí na verzi .NET Framework](/visualstudio/ide/how-to-target-a-version-of-the-dotnet-framework).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-136">For Windows Forms and other applications, see [How to: Target a Version of the .NET Framework](/visualstudio/ide/how-to-target-a-version-of-the-dotnet-framework).</span></span>

<span data-ttu-id="f0c4c-137">Pomocí následujících částí ověříte, že nepoužíváte konkrétní verzi TLS nebo SSL.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-137">Use the following sections to verify you're not using a specific TLS or SSL version.</span></span>

## <a name="if-your-app-targets-net-framework-47-or-later-versions"></a><span data-ttu-id="f0c4c-138">Pokud vaše aplikace cílí na .NET Framework 4,7 nebo novějších verzí</span><span class="sxs-lookup"><span data-stu-id="f0c4c-138">If your app targets .NET Framework 4.7 or later versions</span></span>

<span data-ttu-id="f0c4c-139">V následujících částech se dozvíte, jak ověřit, že nepoužíváte konkrétní verzi TLS nebo SSL.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-139">The following sections show how to verify you're not using a specific TLS or SSL version.</span></span>

### <a name="for-http-networking"></a><span data-ttu-id="f0c4c-140">Pro sítě HTTP</span><span class="sxs-lookup"><span data-stu-id="f0c4c-140">For HTTP networking</span></span>

<span data-ttu-id="f0c4c-141"><xref:System.Net.ServicePointManager>, pomocí .NET Framework 4,7 a novějších verzí se ve výchozím nastavení používá operační systém, který vybírá nejlepší protokol zabezpečení a verzi.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-141"><xref:System.Net.ServicePointManager>, using .NET Framework 4.7 and later versions, defaults to the OS choosing the best security protocol and version.</span></span> <span data-ttu-id="f0c4c-142">Pokud je to možné, získáte výchozí nejlepší volbu pro <xref:System.Net.ServicePointManager.SecurityProtocol> operační systém, pokud je to možné, nenastavíte hodnotu vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-142">To get the default OS best choice, if possible, don't set a value for the <xref:System.Net.ServicePointManager.SecurityProtocol> property.</span></span> <span data-ttu-id="f0c4c-143">V opačném případě ji <xref:System.Net.SecurityProtocolType.SystemDefault>nastavte na.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-143">Otherwise, set it to <xref:System.Net.SecurityProtocolType.SystemDefault>.</span></span>

<span data-ttu-id="f0c4c-144">Zbývající část tohoto článku není relevantní, pokud cílíte .NET Framework 4,7 nebo novějších verzí pro sítě HTTP.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-144">The remainder of this article is not relevant when targeting .NET Framework 4.7 or later versions for HTTP networking.</span></span>

### <a name="for-tcp-sockets-networking"></a><span data-ttu-id="f0c4c-145">Pro sítě TCP Sockets</span><span class="sxs-lookup"><span data-stu-id="f0c4c-145">For TCP sockets networking</span></span>

<span data-ttu-id="f0c4c-146"><xref:System.Net.Security.SslStream>, pomocí .NET Framework 4,7 a novějších verzí se ve výchozím nastavení používá operační systém, který vybírá nejlepší protokol zabezpečení a verzi.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-146"><xref:System.Net.Security.SslStream>, using .NET Framework 4.7 and later versions, defaults to the OS choosing the best security protocol and version.</span></span> <span data-ttu-id="f0c4c-147">Chcete-li získat výchozí nejlepší volbu pro operační systém, pokud je to možné, nepoužívejte přetížení <xref:System.Net.Security.SslStream> metod, které přebírají explicitní <xref:System.Security.Authentication.SslProtocols> parametr.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-147">To get the default OS best choice, if possible, don't use the method overloads of <xref:System.Net.Security.SslStream> that take an explicit <xref:System.Security.Authentication.SslProtocols> parameter.</span></span> <span data-ttu-id="f0c4c-148">V opačném <xref:System.Security.Authentication.SslProtocols.None?displayProperty=nameWithType>případě předejte.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-148">Otherwise, pass <xref:System.Security.Authentication.SslProtocols.None?displayProperty=nameWithType>.</span></span> <span data-ttu-id="f0c4c-149">Doporučujeme nepoužívat <xref:System.Security.Authentication.SslProtocols.Default>. nastavení `SslProtocols.Default` vynutí použití protokolu SSL 3,0/TLS 1,0 a zabraňuje TLS 1,2.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-149">We recommend that you don't use <xref:System.Security.Authentication.SslProtocols.Default>; setting `SslProtocols.Default` forces the use of SSL 3.0 /TLS 1.0 and prevents TLS 1.2.</span></span>

<span data-ttu-id="f0c4c-150">Nenastavujte hodnotu <xref:System.Net.ServicePointManager.SecurityProtocol> vlastnosti (pro sítě http).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-150">Don't set a value for the <xref:System.Net.ServicePointManager.SecurityProtocol> property (for HTTP networking).</span></span>

<span data-ttu-id="f0c4c-151">Nepoužívejte přetížení <xref:System.Net.Security.SslStream> metod, které přebírají explicitní <xref:System.Security.Authentication.SslProtocols> parametr (u sítě TCP Sockets).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-151">Don't use the method overloads of <xref:System.Net.Security.SslStream> that take an explicit <xref:System.Security.Authentication.SslProtocols> parameter (for TCP sockets networking).</span></span> <span data-ttu-id="f0c4c-152">Když změníte cíl aplikace na .NET Framework 4,7 nebo novější, budete postupovat podle doporučení k osvědčeným postupům.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-152">When you retarget your app to .NET Framework 4.7 or later versions, you'll be following the best practices recommendation.</span></span>

<span data-ttu-id="f0c4c-153">Zbývající část tohoto tématu není relevantní, pokud cílíte .NET Framework 4,7 nebo novějších verzí pro sítě TCP Sockets.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-153">The remainder of this topic is not relevant when targeting .NET Framework 4.7 or later versions for TCP sockets networking.</span></span>

<a name="wcf-tcp-cert"></a>

### <a name="for-wcf-tcp-transport-using-transport-security-with-certificate-credentials"></a><span data-ttu-id="f0c4c-154">Pro přenos WCF TCP pomocí zabezpečení přenosu s přihlašovacími údaji certifikátu</span><span class="sxs-lookup"><span data-stu-id="f0c4c-154">For WCF TCP transport using transport security with certificate credentials</span></span>

<span data-ttu-id="f0c4c-155">WCF používá stejný zásobník sítě jako zbytek .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-155">WCF uses the same networking stack as the rest of the .NET Framework.</span></span>

<span data-ttu-id="f0c4c-156">Pokud cílíte na 4.7.1, služba WCF je nakonfigurovaná tak, aby umožňovala operačnímu systému zvolit nejlepší protokol zabezpečení, pokud se explicitně nenakonfigurovala tato hodnota:</span><span class="sxs-lookup"><span data-stu-id="f0c4c-156">If you are targeting 4.7.1, WCF is configured to allow the OS to choose the best security protocol by default unless explicitly configured:</span></span>

- <span data-ttu-id="f0c4c-157">V konfiguračním souboru aplikace.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-157">In your application configuration file.</span></span>
- <span data-ttu-id="f0c4c-158">**Nebo**v aplikaci ve zdrojovém kódu.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-158">**Or**, in your application in the source code.</span></span>

<span data-ttu-id="f0c4c-159">Ve výchozím nastavení je .NET Framework 4,7 a novější verze nakonfigurovaná na používání protokolu TLS 1,2 a umožňuje připojení pomocí protokolu TLS 1,1 nebo TLS 1,0.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-159">By default, .NET Framework 4.7 and later versions is configured to use TLS 1.2 and allows connections using TLS 1.1 or TLS 1.0.</span></span> <span data-ttu-id="f0c4c-160">Nakonfigurujte WCF tak, aby operační systém mohl zvolit nejlepší protokol zabezpečení nakonfigurováním vaší vazby na použití <xref:System.Security.Authentication.SslProtocols.None?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-160">Configure WCF to allow the OS to choose the best security protocol by configuring your binding to use <xref:System.Security.Authentication.SslProtocols.None?displayProperty=nameWithType>.</span></span> <span data-ttu-id="f0c4c-161">Dá se nastavit na <xref:System.ServiceModel.TcpTransportSecurity.SslProtocols>.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-161">This can be set on <xref:System.ServiceModel.TcpTransportSecurity.SslProtocols>.</span></span> <span data-ttu-id="f0c4c-162">`SslProtocols.None`lze použít z <xref:System.ServiceModel.NetTcpSecurity.Transport>.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-162">`SslProtocols.None` can be accessed from <xref:System.ServiceModel.NetTcpSecurity.Transport>.</span></span> <span data-ttu-id="f0c4c-163">`NetTcpSecurity.Transport`lze použít z <xref:System.ServiceModel.NetTcpBinding.Security>.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-163">`NetTcpSecurity.Transport` can be accessed from <xref:System.ServiceModel.NetTcpBinding.Security>.</span></span>

<span data-ttu-id="f0c4c-164">Pokud používáte vlastní vazbu:</span><span class="sxs-lookup"><span data-stu-id="f0c4c-164">If you're using a custom binding:</span></span>

- <span data-ttu-id="f0c4c-165">Nakonfigurujte WCF tak, aby operační systém mohl zvolit nejlepší protokol <xref:System.ServiceModel.Channels.SslStreamSecurityBindingElement.SslProtocols> zabezpečení nastavením použít. <xref:System.Security.Authentication.SslProtocols.None?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="f0c4c-165">Configure WCF to allow the OS to choose the best security protocol by setting <xref:System.ServiceModel.Channels.SslStreamSecurityBindingElement.SslProtocols> to use <xref:System.Security.Authentication.SslProtocols.None?displayProperty=nameWithType>.</span></span>
- <span data-ttu-id="f0c4c-166">**Nebo** nakonfigurujte protokol použitý s cestou `system.serviceModel/bindings/customBinding/binding/sslStreamSecurity:sslProtocols`konfigurace.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-166">**Or** configure the protocol used with the configuration path `system.serviceModel/bindings/customBinding/binding/sslStreamSecurity:sslProtocols`.</span></span>

<span data-ttu-id="f0c4c-167">Pokud nepoužíváte vlastní vazbu **a** nakonfigurujete vazbu WCF pomocí konfigurace, nastavte protokol použitý s cestou `system.serviceModel/bindings/netTcpBinding/binding/security/transport:sslProtocols`konfigurace.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-167">If you're **not** using a custom binding **and** you're setting your WCF binding using configuration, set the protocol used with the configuration path `system.serviceModel/bindings/netTcpBinding/binding/security/transport:sslProtocols`.</span></span>

### <a name="for-wcf-message-security-with-certificate-credentials"></a><span data-ttu-id="f0c4c-168">Pro zabezpečení zpráv WCF s přihlašovacími údaji certifikátu</span><span class="sxs-lookup"><span data-stu-id="f0c4c-168">For WCF Message Security with certificate credentials</span></span>

<span data-ttu-id="f0c4c-169">Ve výchozím nastavení .NET Framework 4,7 a novější verze používá protokol určený ve <xref:System.Net.ServicePointManager.SecurityProtocol> vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-169">.NET Framework 4.7 and later versions by default uses the protocol specified in the <xref:System.Net.ServicePointManager.SecurityProtocol> property.</span></span> <span data-ttu-id="f0c4c-170">Pokud je [AppContextSwitch](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) `Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols` nastaveno na `true`, WCF zvolí nejlepší protokol až do TLS 1,0.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-170">When the [AppContextSwitch](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) `Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols` is set to `true`, WCF chooses the best protocol, up to TLS 1.0.</span></span>

## <a name="if-your-app-targets-a-net-framework-version-earlier-than-47"></a><span data-ttu-id="f0c4c-171">Pokud se vaše aplikace zaměřuje na verzi .NET Framework starší než 4,7</span><span class="sxs-lookup"><span data-stu-id="f0c4c-171">If your app targets a .NET Framework version earlier than 4.7</span></span>

<span data-ttu-id="f0c4c-172">Auditujte kód, abyste ověřili, že nenastavujete konkrétní verzi TLS nebo SSL, a to pomocí následujících částí:</span><span class="sxs-lookup"><span data-stu-id="f0c4c-172">Audit your code to verify you're not setting a specific TLS or SSL version using the following sections:</span></span>

### <a name="for-net-framework-46---462-and-not-wcf"></a><span data-ttu-id="f0c4c-173">Pro .NET Framework 4,6-4.6.2 a ne WCF</span><span class="sxs-lookup"><span data-stu-id="f0c4c-173">For .NET Framework 4.6 - 4.6.2 and not WCF</span></span>

<span data-ttu-id="f0c4c-174">Nastavte přepínač na`false`. `DontEnableSystemDefaultTlsVersions` `AppContext`</span><span class="sxs-lookup"><span data-stu-id="f0c4c-174">Set the `DontEnableSystemDefaultTlsVersions` `AppContext` switch to `false`.</span></span> <span data-ttu-id="f0c4c-175">Viz [Konfigurace zabezpečení prostřednictvím přepínačů AppContext](#configuring-security-via-appcontext-switches).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-175">See [Configuring security via AppContext switches](#configuring-security-via-appcontext-switches).</span></span>

### <a name="for-wcf-using-net-framework-46---462-using-tcp-transport-security-with-certificate-credentials"></a><span data-ttu-id="f0c4c-176">Pro WCF používající .NET Framework 4,6-4.6.2 pomocí zabezpečení přenosu protokolu TCP s přihlašovacími údaji certifikátu</span><span class="sxs-lookup"><span data-stu-id="f0c4c-176">For WCF using .NET Framework 4.6 - 4.6.2 using TCP transport security with Certificate Credentials</span></span>

<span data-ttu-id="f0c4c-177">Je nutné nainstalovat nejnovější opravy operačního systému.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-177">You must install the latest OS patches.</span></span> <span data-ttu-id="f0c4c-178">Viz [aktualizace zabezpečení](#security-updates).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-178">See [Security updates](#security-updates).</span></span>

<span data-ttu-id="f0c4c-179">Rozhraní WCF automaticky zvolí nejvyšší dostupný protokol až na TLS 1,2, pokud explicitně nenakonfigurujete verzi protokolu.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-179">The WCF framework automatically chooses the highest protocol available up to TLS 1.2 unless you explicitly configure a protocol version.</span></span> <span data-ttu-id="f0c4c-180">Další informace najdete v předchozí části [pro přenos WCF TCP pomocí zabezpečení přenosu s přihlašovacími údaji certifikátu](#wcf-tcp-cert).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-180">For more information, see the preceding section [For WCF TCP transport using transport security with certificate credentials](#wcf-tcp-cert).</span></span>

### <a name="for-net-framework-35---452-and-not-wcf"></a><span data-ttu-id="f0c4c-181">Pro .NET Framework 3,5 – 4.5.2 a nikoli WCF</span><span class="sxs-lookup"><span data-stu-id="f0c4c-181">For .NET Framework 3.5 - 4.5.2 and not WCF</span></span>

<span data-ttu-id="f0c4c-182">Doporučujeme, abyste aplikaci upgradovali na verzi .NET Framework 4,7 nebo novější.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-182">We recommend you upgrade your app to .NET Framework 4.7 or later versions.</span></span> <span data-ttu-id="f0c4c-183">Pokud nemůžete upgradovat, proveďte následující kroky.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-183">If you cannot upgrade, take the following steps.</span></span> <span data-ttu-id="f0c4c-184">V některých případech může aplikace selhat, dokud neprovedete upgrade na verzi .NET Framework 4,7 nebo novější.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-184">At some point in the future, your application may fail until you upgrade to .NET Framework 4.7 or later versions.</span></span>

<span data-ttu-id="f0c4c-185">Nastavte klíče registru [do schusestrongcrypto](#schusestrongcrypto) a [SystemDefaultTlsVersions](#systemdefaulttlsversions) na hodnotu 1.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-185">Set the [SchUseStrongCrypto](#schusestrongcrypto) and [SystemDefaultTlsVersions](#systemdefaulttlsversions) registry keys to 1.</span></span> <span data-ttu-id="f0c4c-186">Viz téma [Konfigurace zabezpečení pomocí registru systému Windows](#configuring-security-via-the-windows-registry).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-186">See [Configuring security via the Windows Registry](#configuring-security-via-the-windows-registry).</span></span> <span data-ttu-id="f0c4c-187">.NET Framework verze 3,5 podporuje příznak pouze `SchUseStrongCrypto` v případě, že je předána explicitní hodnota TLS.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-187">The .NET Framework version 3.5 supports the `SchUseStrongCrypto` flag only when an explicit TLS value is passed.</span></span>

<span data-ttu-id="f0c4c-188">Pokud používáte v .NET Framework 3,5, je nutné nainstalovat Hot patch, aby bylo možné určit protokol TLS 1,2 pro váš program:</span><span class="sxs-lookup"><span data-stu-id="f0c4c-188">If you are running on .NET Framework 3.5, you need to install a hot patch so that TLS 1.2 can be specified by your program:</span></span>

| [<span data-ttu-id="f0c4c-189">KB3154518</span><span class="sxs-lookup"><span data-stu-id="f0c4c-189">KB3154518</span></span>](https://support.microsoft.com/kb/3154518) | <span data-ttu-id="f0c4c-190">Kumulativní spolehlivost HR-1605-podpora systémových výchozích verzí TLS, které jsou součástí služby .NET Framework 3.5.1 v systému Windows 7 SP1 a Server 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="f0c4c-190">Reliability Rollup HR-1605 - Support for TLS System Default Versions included in the .NET Framework 3.5.1 on Windows 7 SP1 and Server 2008 R2 SP1</span></span> |
| --- | --- |
| [<span data-ttu-id="f0c4c-191">KB3154519</span><span class="sxs-lookup"><span data-stu-id="f0c4c-191">KB3154519</span></span>](https://support.microsoft.com/kb/3154519) | <span data-ttu-id="f0c4c-192">Kumulativní spolehlivost HR-1605-podpora systémových výchozích verzí TLS, které jsou součástí .NET Framework 3,5 na Windows Serveru 2012</span><span class="sxs-lookup"><span data-stu-id="f0c4c-192">Reliability Rollup HR-1605 - Support for TLS System Default Versions included in the .NET Framework 3.5 on Windows Server 2012</span></span> |
| [<span data-ttu-id="f0c4c-193">KB3154520</span><span class="sxs-lookup"><span data-stu-id="f0c4c-193">KB3154520</span></span>](https://support.microsoft.com/kb/3154520) | <span data-ttu-id="f0c4c-194">Kumulativní spolehlivost HR-1605-podpora systémových výchozích verzí TLS, které jsou součástí .NET Framework 3,5 v Windows 8.1 a Windows Serveru 2012 R2</span><span class="sxs-lookup"><span data-stu-id="f0c4c-194">Reliability Rollup HR-1605 -Support for TLS System Default Versions included in the .NET Framework 3.5 on Windows 8.1 and Windows Server 2012 R2</span></span> |
| [<span data-ttu-id="f0c4c-195">KB3156421</span><span class="sxs-lookup"><span data-stu-id="f0c4c-195">KB3156421</span></span>](https://support.microsoft.com/kb/3156421) | <span data-ttu-id="f0c4c-196">1605 kumulativní opravy hotfix 3154521 pro .NET Framework 4.5.2 a 4.5.1 ve Windows</span><span class="sxs-lookup"><span data-stu-id="f0c4c-196">1605 Hotfix rollup 3154521 for the .NET Framework 4.5.2 and 4.5.1 on Windows</span></span> |

### <a name="for-wcf-using-net-framework-35---452-using-tcp-transport-security-with-certificate-credentials"></a><span data-ttu-id="f0c4c-197">Pro WCF používající .NET Framework 3,5-4.5.2 pomocí protokolu TCP Transport Security s přihlašovacími údaji certifikátu</span><span class="sxs-lookup"><span data-stu-id="f0c4c-197">For WCF using .NET Framework 3.5 - 4.5.2 using TCP transport security with Certificate Credentials</span></span>

<span data-ttu-id="f0c4c-198">V těchto verzích rozhraní WCF se pevně zakódované použít hodnoty SSL 3,0 a TLS 1,0.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-198">These versions of the WCF framework are hardcoded to use values SSL 3.0 and TLS 1.0.</span></span> <span data-ttu-id="f0c4c-199">Tyto hodnoty nelze změnit.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-199">These values cannot be changed.</span></span> <span data-ttu-id="f0c4c-200">Aby bylo možné používat protokol TLS 1,1 a 1,2, je nutné aktualizovat a změnit cílení na verzi .NET Framework 4,6 nebo novější.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-200">You must update and retarget to NET Framework 4.6 or later versions to use TLS 1.1 and 1.2.</span></span>

## <a name="if-your-app-targets-net-framework-35"></a><span data-ttu-id="f0c4c-201">Pokud se vaše aplikace zaměřuje .NET Framework 3,5</span><span class="sxs-lookup"><span data-stu-id="f0c4c-201">If your app targets .NET Framework 3.5</span></span>

<span data-ttu-id="f0c4c-202">Pokud je nutné explicitně nastavit protokol zabezpečení a neumožnit rozhraní .NET Framework nebo operačnímu systému vybrat protokol zabezpečení, přidejte `SecurityProtocolTypeExtensions` a `SslProtocolsExtension` výčty do kódu.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-202">If you must explicitly set a security protocol instead of letting the .NET framework or the OS pick the security protocol, add `SecurityProtocolTypeExtensions` and `SslProtocolsExtension` enumerations to your code.</span></span> <span data-ttu-id="f0c4c-203">`SecurityProtocolTypeExtensions`a `SslProtocolsExtension` zahrnout hodnoty pro `Tls12`, `Tls11` ahodnotu.`SystemDefault`</span><span class="sxs-lookup"><span data-stu-id="f0c4c-203">`SecurityProtocolTypeExtensions` and `SslProtocolsExtension` include values for `Tls12`, `Tls11`, and the `SystemDefault` value.</span></span> <span data-ttu-id="f0c4c-204">Viz [Podpora systémových výchozích verzí TLS, které jsou součástí .NET Framework 3,5 v Windows 8.1 a Windows serveru 2012 R2](https://support.microsoft.com/help/3154520/support-for-tls-system-default-versions-included-in-the--net-framework).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-204">See [Support for TLS System Default Versions included in .NET Framework 3.5 on Windows 8.1 and Windows Server 2012 R2](https://support.microsoft.com/help/3154520/support-for-tls-system-default-versions-included-in-the--net-framework).</span></span>

<a name="configuring-security-via-appcontext-switches"></a>

## <a name="configuring-security-via-appcontext-switches-for-net-framework-46-or-later-versions"></a><span data-ttu-id="f0c4c-205">Konfigurace zabezpečení prostřednictvím přepínačů AppContext (pro .NET Framework 4,6 nebo novější verze)</span><span class="sxs-lookup"><span data-stu-id="f0c4c-205">Configuring security via AppContext switches (for .NET Framework 4.6 or later versions)</span></span>

<span data-ttu-id="f0c4c-206">Přepínače [AppContext](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) popsané v této části jsou relevantní, pokud je vaše aplikace cílena nebo běží na .NET Framework 4,6 nebo novějších verzích.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-206">The [AppContext](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) switches described in this section are relevant if your app targets, or runs on, .NET Framework 4.6 or later versions.</span></span> <span data-ttu-id="f0c4c-207">Bez ohledu na to, jestli je ve výchozím nastavení nebo explicitně nastavené `false` , by měly být přepínače, pokud je to možné.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-207">Whether by default, or by setting them explicitly, the switches should be `false` if possible.</span></span> <span data-ttu-id="f0c4c-208">Pokud chcete nakonfigurovat zabezpečení prostřednictvím jednoho nebo obou přepínačů, nezadávejte v kódu hodnotu protokolu zabezpečení. Tím by se přepsal přepínač (ES).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-208">If you want to configure security via one or both switches, then don't specify a security protocol value in your code; doing so would override the switch(es).</span></span>

<span data-ttu-id="f0c4c-209">Přepínače mají stejný účinek, ať už provádíte síť http (<xref:System.Net.ServicePointManager>) nebo TCP Sockets (<xref:System.Net.Security.SslStream>).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-209">The switches have the same effect whether you're doing HTTP networking (<xref:System.Net.ServicePointManager>) or TCP sockets networking (<xref:System.Net.Security.SslStream>).</span></span>

### <a name="switchsystemnetdontenableschusestrongcrypto"></a><span data-ttu-id="f0c4c-210">Switch.System.Net.DontEnableSchUseStrongCrypto</span><span class="sxs-lookup"><span data-stu-id="f0c4c-210">Switch.System.Net.DontEnableSchUseStrongCrypto</span></span>

<span data-ttu-id="f0c4c-211">Hodnota `false` pro`Switch.System.Net.DontEnableSchUseStrongCrypto` způsobí, že vaše aplikace bude používat silné šifrování.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-211">A value of `false` for `Switch.System.Net.DontEnableSchUseStrongCrypto` causes your app to use strong cryptography.</span></span> <span data-ttu-id="f0c4c-212">Hodnota `false` pro`DontEnableSchUseStrongCrypto` používá bezpečnější síťové protokoly (TLS 1,2, TLS 1,1 a TLS 1,0) a blokuje protokoly, které nejsou zabezpečené.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-212">A value of `false` for `DontEnableSchUseStrongCrypto` uses more secure network protocols (TLS 1.2, TLS 1.1, and TLS 1.0) and blocks protocols that are not secure.</span></span> <span data-ttu-id="f0c4c-213">Další informace najdete v tématu [příznak SCH_USE_STRONG_CRYPTO](#the-sch_use_strong_crypto-flag).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-213">For more info, see [The SCH_USE_STRONG_CRYPTO flag](#the-sch_use_strong_crypto-flag).</span></span> <span data-ttu-id="f0c4c-214">Hodnota `true` zakáže silné šifrování vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-214">A value of `true` disables strong cryptography for your app.</span></span>

<span data-ttu-id="f0c4c-215">Pokud se vaše aplikace zaměřuje .NET Framework 4,6 nebo novější verze, tento přepínač se `false`nastaví jako výchozí.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-215">If your app targets .NET Framework 4.6 or later versions, this switch defaults to `false`.</span></span> <span data-ttu-id="f0c4c-216">To je zabezpečené výchozí nastavení, které doporučujeme.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-216">That's a secure default, which we recommend.</span></span> <span data-ttu-id="f0c4c-217">Pokud je vaše aplikace spuštěná na .NET Framework 4,6, ale cílí na starší verzi, přepínač se `true`nastaví na výchozí hodnotu.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-217">If your app runs on .NET Framework 4.6, but targets an earlier version, the switch defaults to `true`.</span></span> <span data-ttu-id="f0c4c-218">V takovém případě byste ji měli explicitně nastavit na `false`.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-218">In that case, you should explicitly set it to `false`.</span></span>

<span data-ttu-id="f0c4c-219">`DontEnableSchUseStrongCrypto``true` Pokud se potřebujete připojit ke starším službám, které nepodporují silné šifrování a nelze je upgradovat, měla by mít pouze hodnotu.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-219">`DontEnableSchUseStrongCrypto` should only have a value of `true` if you need to connect to legacy services that don't support strong cryptography and can't be upgraded.</span></span>

### <a name="switchsystemnetdontenablesystemdefaulttlsversions"></a><span data-ttu-id="f0c4c-220">Switch.System.Net.DontEnableSystemDefaultTlsVersions</span><span class="sxs-lookup"><span data-stu-id="f0c4c-220">Switch.System.Net.DontEnableSystemDefaultTlsVersions</span></span>

<span data-ttu-id="f0c4c-221">Hodnota `false` pro`Switch.System.Net.DontEnableSystemDefaultTlsVersions` způsobí, že aplikace umožní operačnímu systému zvolit protokol.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-221">A value of `false` for `Switch.System.Net.DontEnableSystemDefaultTlsVersions` causes your app to allow the operating system to choose the protocol.</span></span> <span data-ttu-id="f0c4c-222">Hodnota `true` způsobí, že vaše aplikace bude používat protokoly vydané .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-222">A value of `true` causes your app to use protocols picked by the .NET Framework.</span></span>

<span data-ttu-id="f0c4c-223">Pokud se vaše aplikace zaměřuje .NET Framework 4,7 nebo novější verze, tento přepínač se `false`nastaví jako výchozí.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-223">If your app targets .NET Framework 4.7 or later versions, this switch defaults to `false`.</span></span> <span data-ttu-id="f0c4c-224">To je zabezpečené výchozí nastavení, které doporučujeme.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-224">That's a secure default that we recommend.</span></span> <span data-ttu-id="f0c4c-225">Pokud je vaše aplikace spuštěná na .NET Framework 4,7 nebo novějších verzích, ale cílí na starší verzi, přepínač `true`se nastaví na výchozí hodnotu.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-225">If your app runs on .NET Framework 4.7 or later versions, but targets an earlier version, the switch defaults to `true`.</span></span> <span data-ttu-id="f0c4c-226">V takovém případě byste ji měli explicitně nastavit na `false`.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-226">In that case, you should explicitly set it to `false`.</span></span>

### <a name="switchsystemservicemodeldisableusingservicepointmanagersecurityprotocols"></a><span data-ttu-id="f0c4c-227">Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols</span><span class="sxs-lookup"><span data-stu-id="f0c4c-227">Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols</span></span>

<span data-ttu-id="f0c4c-228">Hodnota `false` `ServicePointManager.SecurityProtocols` pro `Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols` způsobí, že aplikace použije hodnotu definovanou v pro zabezpečení zprávy pomocí pověření certifikátu.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-228">A value of `false` for `Switch.System.ServiceModel.DisableUsingServicePointManagerSecurityProtocols` causes your application to use the value defined in `ServicePointManager.SecurityProtocols` for message security using certificate credentials.</span></span> <span data-ttu-id="f0c4c-229">Hodnota `true` používá nejvyšší dostupný protokol, až do TLS 1.0.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-229">A value of `true` uses the highest protocol available, up to TLS1.0</span></span>

<span data-ttu-id="f0c4c-230">Pro aplikace cílené na .NET Framework 4,7 a novějších verzích je tato hodnota `false`standardně nastavena na.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-230">For applications targeting .NET Framework 4.7 and later versions, this value defaults to `false`.</span></span> <span data-ttu-id="f0c4c-231">Pro aplikace cílené .NET Framework 4.6.2 a dříve tato hodnota je výchozím nastavením `true`.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-231">For applications targeting .NET Framework 4.6.2 and earlier, this value defaults to `true`.</span></span>

### <a name="switchsystemservicemodeldontenablesystemdefaulttlsversions"></a><span data-ttu-id="f0c4c-232">Switch.System.ServiceModel.DontEnableSystemDefaultTlsVersions</span><span class="sxs-lookup"><span data-stu-id="f0c4c-232">Switch.System.ServiceModel.DontEnableSystemDefaultTlsVersions</span></span>

<span data-ttu-id="f0c4c-233">Hodnota `false` pro`Switch.System.ServiceModel.DontEnableSystemDefaultTlsVersions` nastaví výchozí konfiguraci tak, aby operační systém mohl zvolit protokol.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-233">A value of `false` for `Switch.System.ServiceModel.DontEnableSystemDefaultTlsVersions` sets the default configuration to allow the operating system to choose the protocol.</span></span> <span data-ttu-id="f0c4c-234">Hodnota `true` nastaví výchozí hodnotu nejvyššího dostupného protokolu, až do TLS 1.2.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-234">A value of `true` sets the default to the highest protocol available, up to TLS1.2.</span></span>

<span data-ttu-id="f0c4c-235">Pro aplikace cílené .NET Framework 4.7.1 a novějších verzí se tato hodnota nastaví `false`jako výchozí.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-235">For applications targeting .NET Framework 4.7.1 and later versions, this value defaults to `false`.</span></span> <span data-ttu-id="f0c4c-236">Pro aplikace cílené .NET Framework 4,7 a starších se tato hodnota nastaví jako `true`výchozí.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-236">For applications targeting .NET Framework 4.7 and earlier, this value defaults to `true`.</span></span>

<span data-ttu-id="f0c4c-237">Další informace o protokolech TLS najdete v [tématu zmírnění rizika: Protokoly](../migration-guide/mitigation-tls-protocols.md)TLS.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-237">For more information about TLS protocols, see [Mitigation: TLS Protocols](../migration-guide/mitigation-tls-protocols.md).</span></span> <span data-ttu-id="f0c4c-238">Další informace o `AppContext` přepínačích naleznete v [`<AppContextSwitchOverrides> Element`](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md)tématu.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-238">For more information about `AppContext` switches, see [`<AppContextSwitchOverrides> Element`](../configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md).</span></span>

## <a name="configuring-security-via-the-windows-registry"></a><span data-ttu-id="f0c4c-239">Konfigurace zabezpečení prostřednictvím registru Windows</span><span class="sxs-lookup"><span data-stu-id="f0c4c-239">Configuring security via the Windows Registry</span></span>

> [!WARNING]
> <span data-ttu-id="f0c4c-240">Nastavení klíčů registru má vliv na všechny aplikace v systému.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-240">Setting registry keys affects all applications on the system.</span></span> <span data-ttu-id="f0c4c-241">Tuto možnost použijte pouze v případě, že máte plnou kontrolu nad počítačem a můžete řídit změny v registru.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-241">Use this option only if you are in full control of the machine and can control changes to the registry.</span></span>

<span data-ttu-id="f0c4c-242">Pokud nastavení jednoho nebo obou `AppContext` přepínačů není možnost, můžete řídit protokoly zabezpečení, které vaše aplikace používá, s klíči registru Windows popsanými v této části.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-242">If setting one or both `AppContext` switches isn't an option, you can control the security protocols that your app uses with the Windows Registry keys described in this section.</span></span> <span data-ttu-id="f0c4c-243">Pokud vaše aplikace běží na .NET Framework 4.5.2 nebo starších verzích nebo `AppContext` Pokud konfigurační soubor nemůžete upravit, možná nebudete moct použít jeden nebo oba přepínače.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-243">You might not be able to use one or both the `AppContext` switches if your app runs on .NET Framework 4.5.2 or earlier versions, or if you can't edit the configuration file.</span></span> <span data-ttu-id="f0c4c-244">Pokud chcete nakonfigurovat zabezpečení pomocí registru, nezadávejte v kódu hodnotu protokolu zabezpečení. Tím se přepíše nastavení registru.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-244">If you want to configure security with the registry, don't specify a security protocol value in your code; doing so overrides the registry setting.</span></span>

<span data-ttu-id="f0c4c-245">Názvy klíčů registru se podobají názvům odpovídajících `AppContext` přepínačů, ale `DontEnable` bez předpony názvu.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-245">The names of the registry keys are similar to the names of the corresponding `AppContext` switches but without a `DontEnable` prepended to the name.</span></span> <span data-ttu-id="f0c4c-246">Například `AppContext` přepínač `DontEnableSchUseStrongCrypto` je klíč registru s názvem [do schusestrongcrypto](#schusestrongcrypto).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-246">For example, the `AppContext` switch `DontEnableSchUseStrongCrypto` is the registry key called [SchUseStrongCrypto](#schusestrongcrypto).</span></span>

<span data-ttu-id="f0c4c-247">Tyto klíče jsou k dispozici ve všech .NET Framework verzích, pro které je k dispozici nová oprava zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-247">These keys are available in all .NET Framework versions for which there's a recent security patch.</span></span> <span data-ttu-id="f0c4c-248">Viz [aktualizace zabezpečení](#security-updates).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-248">See [Security updates](#security-updates).</span></span>

<span data-ttu-id="f0c4c-249">Všechny klíče registru popsané níže mají stejný účinek, ať už provádíte síť http (<xref:System.Net.ServicePointManager>) nebo TCP Sockets (<xref:System.Net.Security.SslStream>).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-249">All of the registry keys described below have the same effect whether you're doing HTTP networking (<xref:System.Net.ServicePointManager>) or TCP sockets networking (<xref:System.Net.Security.SslStream>).</span></span>

### <a name="schusestrongcrypto"></a><span data-ttu-id="f0c4c-250">SchUseStrongCrypto</span><span class="sxs-lookup"><span data-stu-id="f0c4c-250">SchUseStrongCrypto</span></span>

<span data-ttu-id="f0c4c-251">Klíč `HKEY_LOCAL_MACHINE\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\<VERSION>: SchUseStrongCrypto` registru má hodnotu typu DWORD.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-251">The `HKEY_LOCAL_MACHINE\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\<VERSION>: SchUseStrongCrypto` registry key has a value of type DWORD.</span></span> <span data-ttu-id="f0c4c-252">Hodnota 1 způsobí, že aplikace bude používat silné šifrování.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-252">A value of 1 causes your app to use strong cryptography.</span></span> <span data-ttu-id="f0c4c-253">Silná kryptografie používá bezpečnější síťové protokoly (TLS 1,2, TLS 1,1 a TLS 1,0) a blokuje protokoly, které nejsou zabezpečené.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-253">The strong cryptography uses more secure network protocols (TLS 1.2, TLS 1.1, and TLS 1.0) and blocks protocols that are not secure.</span></span> <span data-ttu-id="f0c4c-254">Hodnota 0 zakáže silnou kryptografii.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-254">A value of 0 disables strong cryptography.</span></span> <span data-ttu-id="f0c4c-255">Další informace najdete v tématu [příznak SCH_USE_STRONG_CRYPTO](#the-sch_use_strong_crypto-flag).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-255">For more information, see [The SCH_USE_STRONG_CRYPTO flag](#the-sch_use_strong_crypto-flag).</span></span>

<span data-ttu-id="f0c4c-256">Pokud se vaše aplikace zaměřuje .NET Framework 4,6 nebo novější verze, tento klíč se nastaví na hodnotu 1.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-256">If your app targets .NET Framework 4.6 or later versions, this key defaults to a value of 1.</span></span> <span data-ttu-id="f0c4c-257">To je zabezpečené výchozí nastavení, které doporučujeme.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-257">That's a secure default that we recommend.</span></span> <span data-ttu-id="f0c4c-258">Pokud je vaše aplikace spuštěná na .NET Framework 4,6, ale zaměřuje se na starší verzi, pak se výchozí klíč nastaví na 0.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-258">If your app runs on .NET Framework 4.6, but targets an earlier version, then the key defaults to 0.</span></span> <span data-ttu-id="f0c4c-259">V takovém případě byste měli explicitně nastavit jeho hodnotu na 1.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-259">In that case, you should explicitly set its value to 1.</span></span>

<span data-ttu-id="f0c4c-260">Tento klíč by měl mít hodnotu 0, pokud se potřebujete připojit ke starším službám, které nepodporují silné šifrování a nelze je upgradovat.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-260">This key should only have a value of 0 if you need to connect to legacy services that don't support strong cryptography and can't be upgraded.</span></span>

### <a name="systemdefaulttlsversions"></a><span data-ttu-id="f0c4c-261">SystemDefaultTlsVersions</span><span class="sxs-lookup"><span data-stu-id="f0c4c-261">SystemDefaultTlsVersions</span></span>

<span data-ttu-id="f0c4c-262">Klíč `HKEY_LOCAL_MACHINE\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\<VERSION>: SystemDefaultTlsVersions` registru má hodnotu typu DWORD.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-262">The `HKEY_LOCAL_MACHINE\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\<VERSION>: SystemDefaultTlsVersions` registry key has a value of type DWORD.</span></span> <span data-ttu-id="f0c4c-263">Hodnota 1 způsobí, že aplikace umožní operačnímu systému zvolit protokol.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-263">A value of 1 causes your app to allow the operating system to choose the protocol.</span></span> <span data-ttu-id="f0c4c-264">Hodnota 0 způsobí, že vaše aplikace bude používat protokoly vydané .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-264">A value of 0 causes your app to use protocols picked by the .NET Framework.</span></span>

<span data-ttu-id="f0c4c-265">`<VERSION>`musí být v 4.0.30319 (pro .NET Framework 4 a vyšší) nebo v 2.0.50727 (pro .NET Framework 3,5).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-265">`<VERSION>` must be v4.0.30319 (for .NET Framework 4 and above) or v2.0.50727 (for .NET Framework 3.5).</span></span>

<span data-ttu-id="f0c4c-266">Pokud se vaše aplikace zaměřuje .NET Framework 4,7 nebo novější verze, tento klíč se nastaví na hodnotu 1.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-266">If your app targets .NET Framework 4.7 or later versions, this key defaults to a value of 1.</span></span> <span data-ttu-id="f0c4c-267">To je zabezpečené výchozí nastavení, které doporučujeme.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-267">That's a secure default that we recommend.</span></span> <span data-ttu-id="f0c4c-268">Pokud vaše aplikace běží na .NET Framework 4,7 nebo novějších verzích, ale cílí na starší verzi, klíč se nastaví na hodnotu 0.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-268">If your app runs on .NET Framework 4.7 or later versions, but targets an earlier version, the key defaults to 0.</span></span> <span data-ttu-id="f0c4c-269">V takovém případě byste měli explicitně nastavit jeho hodnotu na 1.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-269">In that case, you should explicitly set its value to 1.</span></span>

<span data-ttu-id="f0c4c-270">Další informace najdete v tématu [kumulativní aktualizace pro Windows 10 verze 1511 a Windows Server 2016 Technical Preview 4: 10. května 2016](https://support.microsoft.com/help/3156421/cumulative-update-for-windows-10-version-1511-and-windows-server-2016).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-270">For more info, see [Cumulative Update for Windows 10 Version 1511 and Windows Server 2016 Technical Preview 4: May 10, 2016](https://support.microsoft.com/help/3156421/cumulative-update-for-windows-10-version-1511-and-windows-server-2016).</span></span>

<span data-ttu-id="f0c4c-271">Další informace o rozhraní .NET Framework 3.5.1 najdete v tématu [Podpora výchozích verzí systému TLS, které jsou součástí služby .NET Framework 3.5.1 v systému Windows 7 SP1 a Server 2008 R2 SP1](https://support.microsoft.com/help/3154518/support-for-tls-system-default-versions-included-in-the--net-framework).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-271">For more information with .NET framework 3.5.1, see [Support for TLS System Default Versions included in .NET Framework 3.5.1 on Windows 7 SP1 and Server 2008 R2 SP1](https://support.microsoft.com/help/3154518/support-for-tls-system-default-versions-included-in-the--net-framework).</span></span>

<span data-ttu-id="f0c4c-272">Následující _. Soubor REG_ nastaví klíče registru a jejich varianty na jejich nejbezpečnější hodnoty:</span><span class="sxs-lookup"><span data-stu-id="f0c4c-272">The following _.REG_ file sets the registry keys and their variants to their most safe values:</span></span>

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\.NETFramework\v2.0.50727]
"SystemDefaultTlsVersions"=dword:00000001
"SchUseStrongCrypto"=dword:00000001

[HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\.NETFramework\v4.0.30319]
"SystemDefaultTlsVersions"=dword:00000001
"SchUseStrongCrypto"=dword:00000001

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\v2.0.50727]
"SystemDefaultTlsVersions"=dword:00000001
"SchUseStrongCrypto"=dword:00000001

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\v4.0.30319]
"SystemDefaultTlsVersions"=dword:00000001
"SchUseStrongCrypto"=dword:00000001
```

## <a name="configuring-schannel-protocols-in-the-windows-registry"></a><span data-ttu-id="f0c4c-273">Konfigurace protokolů Schannel v registru Windows</span><span class="sxs-lookup"><span data-stu-id="f0c4c-273">Configuring Schannel protocols in the Windows Registry</span></span>

<span data-ttu-id="f0c4c-274">Registr můžete použít pro jemně odstupňovanou kontrolu nad protokoly, které klient nebo server aplikace vyjednává.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-274">You can use the registry for fine-grained control over the protocols that your client and/or server app negotiates.</span></span> <span data-ttu-id="f0c4c-275">Sítě vaší aplikace přecházejí přes Schannel (což je jiný název [zabezpečeného kanálu](/windows/desktop/SecAuthN/secure-channel).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-275">Your app's networking goes through Schannel (which is another name for [Secure Channel](/windows/desktop/SecAuthN/secure-channel).</span></span> <span data-ttu-id="f0c4c-276">Konfigurací `Schannel`můžete nakonfigurovat chování vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-276">By configuring `Schannel`, you can configure your app's behavior.</span></span>

<span data-ttu-id="f0c4c-277">Začněte s `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols` klíčem registru.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-277">Start with the `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols` registry key.</span></span> <span data-ttu-id="f0c4c-278">V tomto klíči můžete vytvořit všechny podklíče v sadě `SSL 2.0`, `SSL 3.0`, `TLS 1.0` `TLS 1.1`, a `TLS 1.2`.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-278">Under that key you can create any subkeys in the set `SSL 2.0`, `SSL 3.0`, `TLS 1.0`, `TLS 1.1`, and `TLS 1.2`.</span></span> <span data-ttu-id="f0c4c-279">Pod každým z těchto podklíčů můžete vytvořit podklíče `Client` a/nebo `Server`.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-279">Under each of those subkeys, you can create subkeys `Client` and/or `Server`.</span></span> <span data-ttu-id="f0c4c-280">V `Client` části `Server`a můžete vytvořit hodnoty `DisabledByDefault` DWORD (0 nebo 1) a `Enabled` (0 nebo 0xFFFFFFFF).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-280">Under `Client` and `Server`, you can create DWORD values `DisabledByDefault` (0 or 1) and `Enabled` (0 or 0xFFFFFFFF).</span></span>

## <a name="the-sch_use_strong_crypto-flag"></a><span data-ttu-id="f0c4c-281">Příznak SCH_USE_STRONG_CRYPTO</span><span class="sxs-lookup"><span data-stu-id="f0c4c-281">The SCH_USE_STRONG_CRYPTO flag</span></span>

<span data-ttu-id="f0c4c-282">Pokud je povolená (ve výchozím nastavení je to `AppContext` přepínačem nebo v registru Windows), .NET Framework `SCH_USE_STRONG_CRYPTO` používá příznak, když vaše aplikace požaduje protokol zabezpečení TLS.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-282">When it's enabled (by default, by an `AppContext` switch, or by the Windows Registry), the .NET Framework uses the `SCH_USE_STRONG_CRYPTO` flag when your app requests a TLS security protocol.</span></span> <span data-ttu-id="f0c4c-283">Příznak může být povolen ve výchozím nastavení, `AppContext` s přepínačem nebo s registrem. `SCH_USE_STRONG_CRYPTO`</span><span class="sxs-lookup"><span data-stu-id="f0c4c-283">The `SCH_USE_STRONG_CRYPTO` flag can be enabled by default, with the `AppContext` switch, or with the Registry.</span></span> <span data-ttu-id="f0c4c-284">Operační systém předá příznak `Schannel`, aby vypnul známé slabé algoritmy, šifrovací sady a verze protokolů TLS/SSL, které mohou být jinak povoleny pro lepší interoperabilitu.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-284">The OS passes the flag to `Schannel`to instruct it to disable known weak cryptographic algorithms, cipher suites, and TLS/SSL protocol versions that may be otherwise enabled for better interoperability.</span></span> <span data-ttu-id="f0c4c-285">Další informace naleznete v tématu:</span><span class="sxs-lookup"><span data-stu-id="f0c4c-285">For more information, see:</span></span>

- [<span data-ttu-id="f0c4c-286">Zabezpečený kanál</span><span class="sxs-lookup"><span data-stu-id="f0c4c-286">Secure Channel</span></span>](/windows/desktop/SecAuthN/secure-channel)
- [<span data-ttu-id="f0c4c-287">Struktura SCHANNEL_CRED</span><span class="sxs-lookup"><span data-stu-id="f0c4c-287">SCHANNEL_CRED structure</span></span>](/windows/win32/api/schannel/ns-schannel-schannel_cred)

<span data-ttu-id="f0c4c-288">`Tls11` `Tls` `Tls12` <xref:System.Security.Authentication.SslProtocols> <xref:System.Net.SecurityProtocolType> Příznak je také `Schannel` předán, pokud explicitně použijete (TLS 1,0), nebo výčtové hodnoty nebo. `SCH_USE_STRONG_CRYPTO`</span><span class="sxs-lookup"><span data-stu-id="f0c4c-288">The `SCH_USE_STRONG_CRYPTO` flag is also passed to `Schannel` when you explicitly use the `Tls` (TLS 1.0), `Tls11`, or `Tls12` enumerated values of <xref:System.Net.SecurityProtocolType> or <xref:System.Security.Authentication.SslProtocols>.</span></span>

## <a name="security-updates"></a><span data-ttu-id="f0c4c-289">Aktualizace zabezpečení</span><span class="sxs-lookup"><span data-stu-id="f0c4c-289">Security updates</span></span>

<span data-ttu-id="f0c4c-290">Osvědčené postupy v tomto článku závisí na nedávno nainstalovaných aktualizacích zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-290">The best practices in this article depend on recent security updates being installed.</span></span> <span data-ttu-id="f0c4c-291">Tyto aktualizace zahrnují možnost používat pokročilé .NET Framework 4,7 a novější funkce.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-291">These updates include the ability to use advanced .NET Framework 4.7 and later features.</span></span> <span data-ttu-id="f0c4c-292">Nedávné aktualizace zabezpečení jsou důležité, pokud je vaše aplikace spuštěná na .NET Framework 4,7 a novějších verzích (i když cílí na starší verzi).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-292">Recent security updates are important if your app runs on .NET Framework 4.7 and later versions (even if it targets an earlier version).</span></span>

<span data-ttu-id="f0c4c-293">Chcete-li aktualizovat .NET Framework, aby operační systém mohl zvolit nejlepší verzi protokolu TLS, která se má použít, je nutné nainstalovat alespoň:</span><span class="sxs-lookup"><span data-stu-id="f0c4c-293">To update the .NET Framework to allow the operating system to choose the best version of TLS to use, you must install at least:</span></span>

- <span data-ttu-id="f0c4c-294">[.NET Framework srpna 2017 Preview k kumulativní kvalitě](https://devblogs.microsoft.com/dotnet/net-framework-august-2017-preview-of-quality-rollup/).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-294">The [.NET Framework August 2017 Preview of Quality Rollup](https://devblogs.microsoft.com/dotnet/net-framework-august-2017-preview-of-quality-rollup/).</span></span>
- <span data-ttu-id="f0c4c-295">**Nebo** [.NET Framework zabezpečení a kumulativní kvality od září 2017](https://devblogs.microsoft.com/dotnet/net-framework-september-2017-security-and-quality-rollup/).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-295">**Or** the [.NET Framework September 2017 Security and Quality Rollup](https://devblogs.microsoft.com/dotnet/net-framework-september-2017-security-and-quality-rollup/).</span></span>

<span data-ttu-id="f0c4c-296">Viz také:</span><span class="sxs-lookup"><span data-stu-id="f0c4c-296">See also:</span></span>

- [<span data-ttu-id="f0c4c-297">.NET Framework verze a závislosti</span><span class="sxs-lookup"><span data-stu-id="f0c4c-297">.NET Framework Versions and Dependencies</span></span>](../migration-guide/versions-and-dependencies.md)
- <span data-ttu-id="f0c4c-298">[Postupy: Určete, které verze .NET Framework jsou](../migration-guide/how-to-determine-which-versions-are-installed.md)nainstalovány.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-298">[How to: Determine Which .NET Framework Versions Are Installed](../migration-guide/how-to-determine-which-versions-are-installed.md).</span></span>

## <a name="support-for-tls-12"></a><span data-ttu-id="f0c4c-299">Podpora protokolu TLS 1.2</span><span class="sxs-lookup"><span data-stu-id="f0c4c-299">Support for TLS 1.2</span></span>

<span data-ttu-id="f0c4c-300">Aby mohla aplikace vyjednávat TLS 1,2, musí operační systém a .NET Framework verze podporovat protokol TLS 1,2.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-300">For your app to negotiate TLS 1.2, the OS and the .NET Framework version both need to support TLS 1.2.</span></span>

<span data-ttu-id="f0c4c-301">**Požadavky na operační systém pro podporu TLS 1,2**</span><span class="sxs-lookup"><span data-stu-id="f0c4c-301">**Operating system requirements to support TLS 1.2**</span></span>

<span data-ttu-id="f0c4c-302">Pokud chcete povolit nebo znovu povolit TLS 1,2 nebo TLS 1,1 v systému, který je podporuje, přečtěte si téma [nastavení registru TLS (Transport Layer Security)](/windows-server/security/tls/tls-registry-settings).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-302">To enable or re-enable TLS 1.2 and/or TLS 1.1 on a system that supports them, see [Transport Layer Security (TLS) registry settings](/windows-server/security/tls/tls-registry-settings).</span></span>

| <span data-ttu-id="f0c4c-303">**OS**</span><span class="sxs-lookup"><span data-stu-id="f0c4c-303">**OS**</span></span> | <span data-ttu-id="f0c4c-304">**Podpora TLS 1,2**</span><span class="sxs-lookup"><span data-stu-id="f0c4c-304">**TLS 1.2 support**</span></span> |
| --- | --- |
| <span data-ttu-id="f0c4c-305">Windows 10</span><span class="sxs-lookup"><span data-stu-id="f0c4c-305">Windows 10</span></span><br><span data-ttu-id="f0c4c-306">Windows Server 2016</span><span class="sxs-lookup"><span data-stu-id="f0c4c-306">Windows Server 2016</span></span> | <span data-ttu-id="f0c4c-307">Podporované a ve výchozím nastavení povolená.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-307">Supported, and enabled by default.</span></span> |
| <span data-ttu-id="f0c4c-308">Windows 8.1</span><span class="sxs-lookup"><span data-stu-id="f0c4c-308">Windows 8.1</span></span><br><span data-ttu-id="f0c4c-309">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="f0c4c-309">Windows Server 2012 R2</span></span> | <span data-ttu-id="f0c4c-310">Podporované a ve výchozím nastavení povolená.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-310">Supported, and enabled by default.</span></span> |
| <span data-ttu-id="f0c4c-311">Windows 8.0</span><span class="sxs-lookup"><span data-stu-id="f0c4c-311">Windows 8.0</span></span><br><span data-ttu-id="f0c4c-312">Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="f0c4c-312">Windows Server 2012</span></span> | <span data-ttu-id="f0c4c-313">Podporované a ve výchozím nastavení povolená.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-313">Supported, and enabled by default.</span></span> |
| <span data-ttu-id="f0c4c-314">Windows 7 SP1</span><span class="sxs-lookup"><span data-stu-id="f0c4c-314">Windows 7 SP1</span></span><br><span data-ttu-id="f0c4c-315">Windows Server 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="f0c4c-315">Windows Server 2008 R2 SP1</span></span> | <span data-ttu-id="f0c4c-316">Podporované, ale není ve výchozím nastavení povolená.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-316">Supported, but not enabled by default.</span></span> <span data-ttu-id="f0c4c-317">Podrobnosti o tom, jak povolit protokol TLS 1,2, najdete na webové stránce [nastavení registru TLS (Transport Layer Security)](/windows-server/security/tls/tls-registry-settings) .</span><span class="sxs-lookup"><span data-stu-id="f0c4c-317">See the [Transport Layer Security (TLS) registry settings](/windows-server/security/tls/tls-registry-settings) web page for details on how to enable TLS 1.2.</span></span> |
| <span data-ttu-id="f0c4c-318">Windows Server 2008</span><span class="sxs-lookup"><span data-stu-id="f0c4c-318">Windows Server 2008</span></span> | <span data-ttu-id="f0c4c-319">Podpora TLS 1,2 a TLS 1,1 vyžaduje aktualizaci.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-319">Support for TLS 1.2 and TLS 1.1 requires an update.</span></span> <span data-ttu-id="f0c4c-320">[V článku aktualizace můžete přidat podporu pro tls 1,1 a tls 1,2 ve Windows serveru 2008 SP2](https://support.microsoft.com/help/4019276/update-to-add-support-for-tls-1-1-and-tls-1-2-in-windows-server-2008-s).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-320">See [Update to add support for TLS 1.1 and TLS 1.2 in Windows Server 2008 SP2](https://support.microsoft.com/help/4019276/update-to-add-support-for-tls-1-1-and-tls-1-2-in-windows-server-2008-s).</span></span> |
| <span data-ttu-id="f0c4c-321">Windows Vista</span><span class="sxs-lookup"><span data-stu-id="f0c4c-321">Windows Vista</span></span> | <span data-ttu-id="f0c4c-322">Není podporováno.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-322">Not supported.</span></span> |

<span data-ttu-id="f0c4c-323">Informace o tom, které protokoly TLS/SSL jsou ve výchozím nastavení povolené v každé verzi Windows, najdete v tématu [protokoly TLS/SSL (Schannel SSP)](/windows/desktop/SecAuthN/protocols-in-tls-ssl--schannel-ssp-).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-323">For information about which TLS/SSL protocols are enabled by default on each version of Windows, see [Protocols in TLS/SSL (Schannel SSP)](/windows/desktop/SecAuthN/protocols-in-tls-ssl--schannel-ssp-).</span></span>

<span data-ttu-id="f0c4c-324">**Požadavky na podporu TLS 1,2 s .NET Framework 3,5**</span><span class="sxs-lookup"><span data-stu-id="f0c4c-324">**Requirements to support TLS 1.2 with .NET Framework 3.5**</span></span>

<span data-ttu-id="f0c4c-325">V této tabulce je uvedena aktualizace operačního systému, kterou budete potřebovat pro podporu TLS 1,2 s .NET Framework 3,5.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-325">This table shows the OS update you'll need to support TLS 1.2 with .NET Framework 3.5.</span></span> <span data-ttu-id="f0c4c-326">Doporučujeme použít všechny aktualizace operačního systému.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-326">We recommend you apply all OS updates.</span></span>

| <span data-ttu-id="f0c4c-327">**OS**</span><span class="sxs-lookup"><span data-stu-id="f0c4c-327">**OS**</span></span> | <span data-ttu-id="f0c4c-328">**Minimální aktualizace nutná pro podporu TLS 1,2 s .NET Framework 3,5**</span><span class="sxs-lookup"><span data-stu-id="f0c4c-328">**Minimum update needed to support TLS 1.2 with .NET Framework 3.5**</span></span> |
| --- | --- |
| <span data-ttu-id="f0c4c-329">Windows 10</span><span class="sxs-lookup"><span data-stu-id="f0c4c-329">Windows 10</span></span><br><span data-ttu-id="f0c4c-330">Windows Server 2016</span><span class="sxs-lookup"><span data-stu-id="f0c4c-330">Windows Server 2016</span></span> | [<span data-ttu-id="f0c4c-331">Kumulativní aktualizace pro Windows 10 verze 1511 a Windows Server 2016 Technical Preview 4: 10. května 2016</span><span class="sxs-lookup"><span data-stu-id="f0c4c-331">Cumulative Update for Windows 10 Version 1511 and Windows Server 2016 Technical Preview 4: May 10, 2016</span></span>](https://support.microsoft.com/help/3156421/cumulative-update-for-windows-10-version-1511-and-windows-server-2016) |
| <span data-ttu-id="f0c4c-332">Windows 8.1</span><span class="sxs-lookup"><span data-stu-id="f0c4c-332">Windows 8.1</span></span><br><span data-ttu-id="f0c4c-333">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="f0c4c-333">Windows Server 2012 R2</span></span> | [<span data-ttu-id="f0c4c-334">Podpora výchozích verzí systému TLS obsažených v .NET Framework 3,5 v Windows 8.1 a Windows Serveru 2012 R2</span><span class="sxs-lookup"><span data-stu-id="f0c4c-334">Support for TLS System Default Versions included in the .NET Framework 3.5 on Windows 8.1 and Windows Server 2012 R2</span></span>](https://support.microsoft.com/help/3154520/support-for-tls-system-default-versions-included-in-the--net-framework) |
| <span data-ttu-id="f0c4c-335">Windows 8.0</span><span class="sxs-lookup"><span data-stu-id="f0c4c-335">Windows 8.0</span></span><br><span data-ttu-id="f0c4c-336">Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="f0c4c-336">Windows Server 2012</span></span> | [<span data-ttu-id="f0c4c-337">Podpora výchozích verzí systému TLS obsažených v .NET Framework 3,5 ve Windows Serveru 2012</span><span class="sxs-lookup"><span data-stu-id="f0c4c-337">Support for TLS System Default Versions included in the .NET Framework 3.5 on Windows Server 2012</span></span>](https://support.microsoft.com/help/3154519/support-for-tls-system-default-versions-included-in-the--net-framework) |
| <span data-ttu-id="f0c4c-338">Windows 7 SP1</span><span class="sxs-lookup"><span data-stu-id="f0c4c-338">Windows 7 SP1</span></span><br><span data-ttu-id="f0c4c-339">Windows Server 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="f0c4c-339">Windows Server 2008 R2 SP1</span></span> | [<span data-ttu-id="f0c4c-340">Podpora výchozích verzí systému TLS obsažených ve službě .NET Framework 3.5.1 v systému Windows 7 SP1 a Server 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="f0c4c-340">Support for TLS System Default Versions included in the .NET Framework 3.5.1 on Windows 7 SP1 and Server 2008 R2 SP1</span></span>](https://support.microsoft.com/help/3154518/support-for-tls-system-default-versions-included-in-the--net-framework) |
| <span data-ttu-id="f0c4c-341">Windows Server 2008</span><span class="sxs-lookup"><span data-stu-id="f0c4c-341">Windows Server 2008</span></span> | [<span data-ttu-id="f0c4c-342">Podpora výchozích verzí systému TLS obsažených v .NET Framework 2,0 SP2 v systému Windows Vista SP2 a Server 2008 SP2</span><span class="sxs-lookup"><span data-stu-id="f0c4c-342">Support for TLS System Default Versions included in the .NET Framework 2.0 SP2 on Windows Vista SP2 and Server 2008 SP2</span></span>](https://support.microsoft.com/help/3154517/support-for-tls-system-default-versions-included-in-the--net-framework) |
| <span data-ttu-id="f0c4c-343">Windows Vista</span><span class="sxs-lookup"><span data-stu-id="f0c4c-343">Windows Vista</span></span> | <span data-ttu-id="f0c4c-344">Není podporováno</span><span class="sxs-lookup"><span data-stu-id="f0c4c-344">Not supported</span></span> |

## <a name="azure-cloud-services"></a><span data-ttu-id="f0c4c-345">Azure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="f0c4c-345">Azure Cloud Services</span></span>

<span data-ttu-id="f0c4c-346">Pokud používáte webové a pracovní role [Azure Cloud Services](https://azure.microsoft.com/services/cloud-services/) k hostování a spuštění vaší aplikace, existuje několik důležitých informací, které je potřeba vzít v úvahu při podpoře TLS 1,2.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-346">If you are using [Azure Cloud Services](https://azure.microsoft.com/services/cloud-services/) Web and Worker roles to host and run your application, there are some considerations that you need to take into account to support TLS 1.2.</span></span>

### <a name="net-framework-47-is-not-installed-on-azure-guest-os-by-default"></a><span data-ttu-id="f0c4c-347">Ve výchozím nastavení není v hostovaném operačním systému Azure nainstalovaná .NET Framework 4,7.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-347">.NET Framework 4.7 is not installed on Azure Guest OS by default</span></span>

<span data-ttu-id="f0c4c-348">Nejnovější verze nainstalovaná v nejnovější verzi služby hostovaného operačního systému Azure v řadě 5 (Windows Server 2016) je 4.6.2.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-348">The latest version installed in the latest Azure Guest OS Family 5 release (Windows Server 2016) is 4.6.2.</span></span> <span data-ttu-id="f0c4c-349">Pokud chcete zjistit, které verze .NET Framework jsou nainstalované na každém hostovaném operačním systému Azure, přečtěte si část vydaných verzí [hostovaného operačního systému Azure a kompatibility SDK](https://docs.microsoft.com/azure/cloud-services/cloud-services-guestos-update-matrix).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-349">To see which versions of .NET Framework are installed on each Azure Guest OS, see the [Azure Guest OS releases and SDK compatibility matrix](https://docs.microsoft.com/azure/cloud-services/cloud-services-guestos-update-matrix).</span></span>

<span data-ttu-id="f0c4c-350">Pokud se vaše aplikace zaměřuje na verzi .NET Framework, která není dostupná na verzi hostovaného operačního systému Azure, je potřeba ji nainstalovat sami.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-350">If your app targets a .NET Framework version that is not available on the Azure Guest OS version, then you need to install it yourself.</span></span> <span data-ttu-id="f0c4c-351">Viz [instalace rozhraní .NET do rolí cloudové služby Azure](https://docs.microsoft.com/azure/cloud-services/cloud-services-dotnet-install-dotnet).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-351">See [Install .NET on Azure Cloud Service Roles](https://docs.microsoft.com/azure/cloud-services/cloud-services-dotnet-install-dotnet).</span></span> <span data-ttu-id="f0c4c-352">Pokud instalace rozhraní vyžaduje restart, role služby se můžou taky restartovat před vstupem do stavu připraveno.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-352">If the framework installation requires a restart, the service roles might also restart before entering the Ready state.</span></span>

### <a name="azure-guest-os-registry-settings"></a><span data-ttu-id="f0c4c-353">Nastavení registru hostovaného operačního systému Azure</span><span class="sxs-lookup"><span data-stu-id="f0c4c-353">Azure Guest OS registry settings</span></span>

<span data-ttu-id="f0c4c-354">Image řady operačních systémů hosta Azure pro [Azure Cloud Services](https://azure.microsoft.com/services/cloud-services/) už má `SchUseStrongCrypto` klíč registru nastavený na hodnotu 1.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-354">The Azure Guest OS Family 5 image for [Azure Cloud Services](https://azure.microsoft.com/services/cloud-services/) already has the `SchUseStrongCrypto` registry key set to a value of 1.</span></span> <span data-ttu-id="f0c4c-355">Další informace najdete v tématu [do schusestrongcrypto](#schusestrongcrypto).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-355">For more information, see [SchUseStrongCrypto](#schusestrongcrypto).</span></span>

<span data-ttu-id="f0c4c-356">Nastavte klíč registru [SystemDefaultTlsVersions](#systemdefaulttlsversions) na hodnotu 1.</span><span class="sxs-lookup"><span data-stu-id="f0c4c-356">Set the [SystemDefaultTlsVersions](#systemdefaulttlsversions) registry key to 1.</span></span> <span data-ttu-id="f0c4c-357">Viz téma [Konfigurace zabezpečení pomocí registru systému Windows](#configuring-security-via-the-windows-registry).</span><span class="sxs-lookup"><span data-stu-id="f0c4c-357">See [Configuring security via the Windows Registry](#configuring-security-via-the-windows-registry).</span></span>
