---
title: Kódování znaků v rozhraní .NET
description: Další informace o znak kódování a dekódování v rozhraní .NET.
ms.date: 12/22/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- encoding, understanding
- encoding, choosing
- encoding, fallback strategy
ms.assetid: bf6d9823-4c2d-48af-b280-919c5af66ae9
author: rpetrusha
ms.author: ronpet
ms.custom: seodec18
ms.openlocfilehash: ac4de843b3a134b840fc37e3c1d8327fe0010d79
ms.sourcegitcommit: ffd7dd79468a81bbb0d6449f6d65513e050c04c4
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/21/2019
ms.locfileid: "65960331"
---
# <a name="character-encoding-in-net"></a><span data-ttu-id="a8ea0-103">Kódování znaků v rozhraní .NET</span><span class="sxs-lookup"><span data-stu-id="a8ea0-103">Character Encoding in .NET</span></span>
<span data-ttu-id="a8ea0-104">Znaky jsou abstraktní entity, které může být reprezentována mnoha různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-104">Characters are abstract entities that can be represented in many different ways.</span></span> <span data-ttu-id="a8ea0-105">Kódování znaků je systém, který páry každý znak v podporované znakové sady s některá z hodnot, který představuje daný znak.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-105">A character encoding is a system that pairs each character in a supported character set with some value that represents that character.</span></span> <span data-ttu-id="a8ea0-106">Například morseovkou je znak kódování této páry každý znak v latinku pomocí vzoru tečky a spojovníky, které jsou vhodné pro přenos přes telegrafní řádky.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-106">For example, Morse code is a character encoding that pairs each character in the Roman alphabet with a pattern of dots and dashes that are suitable for transmission over telegraph lines.</span></span> <span data-ttu-id="a8ea0-107">Znak kódování dvojice počítačů pro každý znak v podporované znakové sady s číselnou hodnotu, která představuje tento znak.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-107">A character encoding for computers pairs each character in a supported character set with a numeric value that represents that character.</span></span> <span data-ttu-id="a8ea0-108">Kódování znaků má dvě různé součásti:</span><span class="sxs-lookup"><span data-stu-id="a8ea0-108">A character encoding has two distinct components:</span></span>  
  
- <span data-ttu-id="a8ea0-109">Kodér, což znamená posloupnost znaků na sekvenci číselných hodnot (v bajtech).</span><span class="sxs-lookup"><span data-stu-id="a8ea0-109">An encoder, which translates a sequence of characters into a sequence of numeric values (bytes).</span></span>  
  
- <span data-ttu-id="a8ea0-110">Dekodér, což znamená posloupnost bajtů na sekvenci znaků.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-110">A decoder, which translates a sequence of bytes into a sequence of characters.</span></span>  
  
 <span data-ttu-id="a8ea0-111">Kódování znaků popisuje pravidla, podle kterých kodér a dekodér pracovat.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-111">Character encoding describes the rules by which an encoder and a decoder operate.</span></span> <span data-ttu-id="a8ea0-112">Například <xref:System.Text.UTF8Encoding> třída popisuje pravidla pro kódování a dekódování z formátu pro Unicode transformace 8 bitů (UTF-8), který používá jednu až čtyři bajty k zastupování jednoho znaku Unicode.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-112">For example, the <xref:System.Text.UTF8Encoding> class describes the rules for encoding to, and decoding from, 8-bit Unicode Transformation Format (UTF-8), which uses one to four bytes to represent a single Unicode character.</span></span> <span data-ttu-id="a8ea0-113">Kódování a dekódování můžete také zahrnout ověřování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-113">Encoding and decoding can also include validation.</span></span> <span data-ttu-id="a8ea0-114">Například <xref:System.Text.UnicodeEncoding> třída zkontroluje všechny náhrady, abyste měli jistotu, představují platný náhradní páry.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-114">For example, the <xref:System.Text.UnicodeEncoding> class checks all surrogates  to make sure they constitute valid surrogate pairs.</span></span> <span data-ttu-id="a8ea0-115">(Náhradní pár obsahuje znak s bodem kódu od U + D800 do U + DBFF následovaný znakem s bodem kódu od U + DC00 do U + DFFF.)  Nouzová strategie určuje způsob, jakým zpracovává kodéru neplatné znaky nebo způsob, jakým zpracovává dekodér neplatné bajty.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-115">(A surrogate pair consists of a character with a code point that ranges from U+D800 to U+DBFF followed by a character with a code point that ranges from U+DC00 to U+DFFF.)  A fallback strategy determines how an encoder handles invalid characters or how a decoder handles invalid bytes.</span></span>  
  
> [!WARNING]
>  <span data-ttu-id="a8ea0-116">Kódování třídy .NET poskytují způsob, jak ukládat a převádí znak data.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-116">.NET encoding classes provide a way to store and convert character data.</span></span> <span data-ttu-id="a8ea0-117">Nesmí se používají k ukládání binárních dat ve formátu řetězce.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-117">They should not be used to store binary data in string form.</span></span> <span data-ttu-id="a8ea0-118">V závislosti na kódování použité, převádění binární data na řetězec formátu pomocí tříd kódování můžete zavést neočekávané chování a produkovat nesprávné nebo poškozená data.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-118">Depending on the encoding used, converting binary data to string format with the encoding classes can introduce unexpected behavior and produce inaccurate or corrupted data.</span></span> <span data-ttu-id="a8ea0-119">Chcete-li binární data převést do formátu řetězce, použijte <xref:System.Convert.ToBase64String%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-119">To convert binary data to a string form, use the <xref:System.Convert.ToBase64String%2A?displayProperty=nameWithType> method.</span></span>  
  
 <span data-ttu-id="a8ea0-120">.NET používá kódování UTF-16 (představované <xref:System.Text.UnicodeEncoding> třídy) k reprezentaci znaků a řetězce.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-120">.NET uses the UTF-16 encoding (represented by the <xref:System.Text.UnicodeEncoding> class) to represent characters and strings.</span></span> <span data-ttu-id="a8ea0-121">Aplikace, které se zaměřují modul common language runtime používají kodérů pro mapování reprezentace znaku Unicode podporuje modul common language runtime na jiná schémata kódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-121">Applications that target the common language runtime use encoders to map Unicode character representations supported by the common language runtime to other encoding schemes.</span></span> <span data-ttu-id="a8ea0-122">Dekodérů používají k mapování znaků z kódování Unicode kódování na kódování Unicode.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-122">They use decoders to map characters from non-Unicode encodings to Unicode.</span></span>  
  
 <span data-ttu-id="a8ea0-123">Toto téma se skládá z následujících částí:</span><span class="sxs-lookup"><span data-stu-id="a8ea0-123">This topic consists of the following sections:</span></span>  
  
- [<span data-ttu-id="a8ea0-124">Kódování v .NET</span><span class="sxs-lookup"><span data-stu-id="a8ea0-124">Encodings in .NET</span></span>](../../../docs/standard/base-types/character-encoding.md#Encodings)  
  
- [<span data-ttu-id="a8ea0-125">Výběr kódování třídy</span><span class="sxs-lookup"><span data-stu-id="a8ea0-125">Selecting an Encoding Class</span></span>](../../../docs/standard/base-types/character-encoding.md#Selecting)  
  
- [<span data-ttu-id="a8ea0-126">Pomocí objektu kódování</span><span class="sxs-lookup"><span data-stu-id="a8ea0-126">Using an Encoding Object</span></span>](../../../docs/standard/base-types/character-encoding.md#Using)  
  
- [<span data-ttu-id="a8ea0-127">Výběr strategie použití náhradní lokality</span><span class="sxs-lookup"><span data-stu-id="a8ea0-127">Choosing a Fallback Strategy</span></span>](../../../docs/standard/base-types/character-encoding.md#FallbackStrategy)  
  
- [<span data-ttu-id="a8ea0-128">Implementace vlastního nouzová strategie</span><span class="sxs-lookup"><span data-stu-id="a8ea0-128">Implementing a Custom Fallback Strategy</span></span>](../../../docs/standard/base-types/character-encoding.md#Custom)  
  
<a name="Encodings"></a>   
## <a name="encodings-in-net"></a><span data-ttu-id="a8ea0-129">Kódování v .NET</span><span class="sxs-lookup"><span data-stu-id="a8ea0-129">Encodings in .NET</span></span>  
 <span data-ttu-id="a8ea0-130">Všechny znakové kódování třídy v rozhraní .NET dědí z <xref:System.Text.Encoding?displayProperty=nameWithType> třídu, která je abstraktní třída, která definuje funkce, které jsou společné pro všechny kódování znaků.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-130">All character encoding classes in .NET inherit from the <xref:System.Text.Encoding?displayProperty=nameWithType> class, which is an abstract class that defines the functionality common to all character encodings.</span></span> <span data-ttu-id="a8ea0-131">Pro přístup k jednotlivým kódování objekty implementováno v rozhraní .NET, postupujte takto:</span><span class="sxs-lookup"><span data-stu-id="a8ea0-131">To access the individual encoding objects implemented in .NET, do the following:</span></span>  
  
- <span data-ttu-id="a8ea0-132">Použití statických vlastností <xref:System.Text.Encoding> třídu, která vrátí objekty, které představují kódování standard znaků, která je k dispozici v rozhraní .NET (ASCII, UTF-7, UTF-8, UTF-16 a UTF-32).</span><span class="sxs-lookup"><span data-stu-id="a8ea0-132">Use the static properties of the <xref:System.Text.Encoding> class, which return objects that represent the standard character encodings available in .NET (ASCII, UTF-7, UTF-8, UTF-16, and UTF-32).</span></span> <span data-ttu-id="a8ea0-133">Například <xref:System.Text.Encoding.Unicode%2A?displayProperty=nameWithType> vrátí vlastnost <xref:System.Text.UnicodeEncoding> objektu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-133">For example, the <xref:System.Text.Encoding.Unicode%2A?displayProperty=nameWithType> property returns a <xref:System.Text.UnicodeEncoding> object.</span></span> <span data-ttu-id="a8ea0-134">Každý objekt používá nahrazení náhradní řetězce popisovače, které nelze dekódovat a počet bajtů, které nelze dekódovat.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-134">Each object uses replacement fallback to handle strings that it cannot encode and bytes that it cannot decode.</span></span> <span data-ttu-id="a8ea0-135">(Další informace najdete v tématu [nahrazení záložní](../../../docs/standard/base-types/character-encoding.md#Replacement) části.)</span><span class="sxs-lookup"><span data-stu-id="a8ea0-135">(For more information, see the [Replacement Fallback](../../../docs/standard/base-types/character-encoding.md#Replacement) section.)</span></span>  
  
- <span data-ttu-id="a8ea0-136">Volání konstruktoru třídy kódování společnosti.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-136">Call the encoding's class constructor.</span></span> <span data-ttu-id="a8ea0-137">Tímto způsobem můžete vytvořit instanci objektů pro ASCII, UTF-7, UTF-8, UTF-16 a UTF-32 kódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-137">Objects for the ASCII, UTF-7, UTF-8, UTF-16, and UTF-32 encodings can be instantiated in this way.</span></span> <span data-ttu-id="a8ea0-138">Ve výchozím nastavení každý objekt používá náhradní použití náhradní lokality pro zpracování řetězců, které nelze dekódovat a počet bajtů, které nelze dekódovat, ale můžete zadat, že místo toho by měl vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-138">By default, each object uses replacement fallback to handle strings that it cannot encode and bytes that it cannot decode, but you can specify that an exception should be thrown instead.</span></span> <span data-ttu-id="a8ea0-139">(Další informace najdete v tématu [nahrazení záložní](../../../docs/standard/base-types/character-encoding.md#Replacement) a [výjimka záložní](../../../docs/standard/base-types/character-encoding.md#Exception) oddíly.)</span><span class="sxs-lookup"><span data-stu-id="a8ea0-139">(For more information, see the [Replacement Fallback](../../../docs/standard/base-types/character-encoding.md#Replacement) and [Exception Fallback](../../../docs/standard/base-types/character-encoding.md#Exception) sections.)</span></span>  
  
- <span data-ttu-id="a8ea0-140">Volání <xref:System.Text.Encoding.%23ctor%28System.Int32%29?displayProperty=nameWithType> konstruktor a předejte jí celé číslo, které představuje kódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-140">Call the <xref:System.Text.Encoding.%23ctor%28System.Int32%29?displayProperty=nameWithType> constructor and pass it an integer that represents the encoding.</span></span> <span data-ttu-id="a8ea0-141">Standard kódování objekty pomocí záložní nahrazení a znakovou stránku a dvoubajtové znakové sady (DBCS) kódování objekty použití přizpůsobený nouzového řešení ověření pomocí popisovač řetězce, které nelze dekódovat a počet bajtů, které nelze dekódovat.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-141">Standard encoding objects use replacement fallback, and code page and double-byte character set (DBCS) encoding objects use best-fit fallback to handle strings that they cannot encode and bytes that they cannot decode.</span></span> <span data-ttu-id="a8ea0-142">(Další informace najdete v tématu [Best-Fit záložní](../../../docs/standard/base-types/character-encoding.md#BestFit) části.)</span><span class="sxs-lookup"><span data-stu-id="a8ea0-142">(For more information, see the [Best-Fit Fallback](../../../docs/standard/base-types/character-encoding.md#BestFit) section.)</span></span>  
  
- <span data-ttu-id="a8ea0-143">Volání <xref:System.Text.Encoding.GetEncoding%2A?displayProperty=nameWithType> metoda, která vrátí všechny standardní režim, znakovou stránku nebo DBCS kódování k dispozici v rozhraní .NET.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-143">Call the <xref:System.Text.Encoding.GetEncoding%2A?displayProperty=nameWithType> method, which returns any standard, code page, or DBCS encoding available in .NET.</span></span> <span data-ttu-id="a8ea0-144">Přetížení umožňují určit objekt pro použití náhradní lokality pro kodér a dekodér.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-144">Overloads let you specify a fallback object for both the encoder and the decoder.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a8ea0-145">Unicode Standard přiřadí bod kódu (číslo) a název každý znak v každé podporované skriptu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-145">The Unicode Standard assigns a code point (a number) and a name to each character in every supported script.</span></span> <span data-ttu-id="a8ea0-146">Například znak "A" představuje bod kódu U + 0041 a název "LATINKY velké písmeno A".</span><span class="sxs-lookup"><span data-stu-id="a8ea0-146">For example, the character "A" is represented by the code point U+0041 and the name "LATIN CAPITAL LETTER A".</span></span> <span data-ttu-id="a8ea0-147">Kódování formátu transformace Unicode (UTF) definovat způsoby, jak kódovat tohoto bodu kódu na sekvenci jednoho nebo více bajtů.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-147">The Unicode Transformation Format (UTF) encodings define ways to encode that code point into a sequence of one or more bytes.</span></span> <span data-ttu-id="a8ea0-148">Schéma kódování Unicode zjednodušuje vývoj světově připravených aplikací, protože umožňuje znaky z jakékoli znakovou sadu dat v jednom kódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-148">A Unicode encoding scheme simplifies world-ready application development because it allows characters from any character set to be represented in a single encoding.</span></span> <span data-ttu-id="a8ea0-149">Vývojáři aplikací se už nemusíte udržovat přehled o schéma kódování, která byla použita k vytvoření znaků pro konkrétní jazyk nebo zápis systému a dat je možné sdílet mezi systémy mezinárodně bez poškození.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-149">Application developers no longer have to keep track of the encoding scheme that was used to produce characters for a specific language or writing system, and data can be shared among systems internationally without being corrupted.</span></span>  
>   
>  <span data-ttu-id="a8ea0-150">.NET podporuje tři kódování definované ve standardu Unicode: UTF-8, UTF-16 a UTF-32.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-150">.NET supports three encodings defined by the Unicode standard: UTF-8, UTF-16, and UTF-32.</span></span> <span data-ttu-id="a8ea0-151">Další informace najdete v tématu ve standardu Unicode na [Unicode domovskou stránku](https://www.unicode.org/).</span><span class="sxs-lookup"><span data-stu-id="a8ea0-151">For more information, see The Unicode Standard at the [Unicode home page](https://www.unicode.org/).</span></span>  
  
 <span data-ttu-id="a8ea0-152">Informace o kódování k dispozici v rozhraní .NET můžete načíst pomocí volání <xref:System.Text.Encoding.GetEncodings%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-152">You can retrieve information about all the encodings available in .NET by calling the <xref:System.Text.Encoding.GetEncodings%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="a8ea0-153">.NET podporuje znak kódování systémů uvedených v následující tabulce.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-153">.NET supports the character encoding systems listed in the following table.</span></span>  
  
|<span data-ttu-id="a8ea0-154">Kódování</span><span class="sxs-lookup"><span data-stu-id="a8ea0-154">Encoding</span></span>|<span data-ttu-id="a8ea0-155">Třída</span><span class="sxs-lookup"><span data-stu-id="a8ea0-155">Class</span></span>|<span data-ttu-id="a8ea0-156">Popis</span><span class="sxs-lookup"><span data-stu-id="a8ea0-156">Description</span></span>|<span data-ttu-id="a8ea0-157">Výhody a nevýhody</span><span class="sxs-lookup"><span data-stu-id="a8ea0-157">Advantages/disadvantages</span></span>|  
|--------------|-----------|-----------------|-------------------------------|  
|<span data-ttu-id="a8ea0-158">ASCII</span><span class="sxs-lookup"><span data-stu-id="a8ea0-158">ASCII</span></span>|<xref:System.Text.ASCIIEncoding>|<span data-ttu-id="a8ea0-159">Zakóduje omezený rozsah znaků pomocí nižší sedm bitů na bajt.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-159">Encodes a limited range of characters by using the lower seven bits of a byte.</span></span>|<span data-ttu-id="a8ea0-160">Protože toto kódování podporuje pouze znakových hodnot z U + 0000 až U + 007F, ve většině případů je nedostatečná pro mezinárodní aplikace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-160">Because this encoding only supports character values from U+0000 through U+007F, in most cases it is inadequate for internationalized applications.</span></span>|  
|<span data-ttu-id="a8ea0-161">UTF-7</span><span class="sxs-lookup"><span data-stu-id="a8ea0-161">UTF-7</span></span>|<xref:System.Text.UTF7Encoding>|<span data-ttu-id="a8ea0-162">Reprezentuje znaků jako sekvence 7bitových znaků ASCII.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-162">Represents characters as sequences of 7-bit ASCII characters.</span></span> <span data-ttu-id="a8ea0-163">Ne-ASCII Unicode znaky jsou reprezentovány řídicí sekvence znaků ASCII.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-163">Non-ASCII Unicode characters are represented by an escape sequence of ASCII characters.</span></span>|<span data-ttu-id="a8ea0-164">Kódování UTF-7 podporuje diskusní skupiny protokoly a protokoly, například e-mailu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-164">UTF-7 supports protocols such as email and newsgroup protocols.</span></span> <span data-ttu-id="a8ea0-165">Ale UTF-7 není zejména zabezpečené a robustní.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-165">However, UTF-7 is not particularly secure or robust.</span></span> <span data-ttu-id="a8ea0-166">V některých případech se změna jeden bit může výrazně tak pozměnit výklad celý řetězec UTF-7.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-166">In some cases, changing one bit can radically alter the interpretation of an entire UTF-7 string.</span></span> <span data-ttu-id="a8ea0-167">V ostatních případech můžete kódovat různé řetězce UTF-7 stejný text.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-167">In other cases, different UTF-7 strings can encode the same text.</span></span> <span data-ttu-id="a8ea0-168">Pořadí, které zahrnují jiné znaky než ASCII UTF-7 vyžaduje více místa než UTF-8 a kódování/dekódování je pomalejší.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-168">For sequences that include non-ASCII characters, UTF-7 requires more space than UTF-8, and encoding/decoding is slower.</span></span> <span data-ttu-id="a8ea0-169">V důsledku toho používejte UTF-8 namísto UTF-7-li to možné.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-169">Consequently, you should use UTF-8 instead of UTF-7 if possible.</span></span>|  
|<span data-ttu-id="a8ea0-170">UTF-8</span><span class="sxs-lookup"><span data-stu-id="a8ea0-170">UTF-8</span></span>|<xref:System.Text.UTF8Encoding>|<span data-ttu-id="a8ea0-171">Jako posloupnost jednu až čtyři bajty představuje každý bod kódu Unicode.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-171">Represents each Unicode code point as a sequence of one to four bytes.</span></span>|<span data-ttu-id="a8ea0-172">UTF-8 podporuje velikosti 8 bitů dat a pracuje s mnoha existujících systémech.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-172">UTF-8 supports 8-bit data sizes and works well with many existing operating systems.</span></span> <span data-ttu-id="a8ea0-173">UTF-8 pro řadu znaků ASCII je stejné jako kódování ASCII a širší sadu znaků.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-173">For the ASCII range of characters, UTF-8 is identical to ASCII encoding and allows a broader set of characters.</span></span> <span data-ttu-id="a8ea0-174">Však pro skripty čínština – Japonština-Korejština (CJK), UTF-8 můžou vyžadovat třech bajtech pro každý znak a mohou způsobit větší velikosti dat než UTF-16.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-174">However, for Chinese-Japanese-Korean (CJK) scripts, UTF-8 can require three bytes for each character, and can potentially cause larger data sizes than UTF-16.</span></span> <span data-ttu-id="a8ea0-175">Všimněte si, že někdy množství data ve standardu ASCII, jako jsou například značky HTML, zarovná zvětšení velikosti pro rozsah CJK.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-175">Note that sometimes the amount of ASCII data, such as HTML tags, justifies the increased size for the CJK range.</span></span>|  
|<span data-ttu-id="a8ea0-176">UTF-16</span><span class="sxs-lookup"><span data-stu-id="a8ea0-176">UTF-16</span></span>|<xref:System.Text.UnicodeEncoding>|<span data-ttu-id="a8ea0-177">Představuje každý bod kódu Unicode jako posloupnost jednu nebo dvě 16bitová celá čísla.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-177">Represents each Unicode code point as a sequence of one or two 16-bit integers.</span></span> <span data-ttu-id="a8ea0-178">Nejběžnější znaky znakové sady Unicode vyžadují pouze jeden bod kódu UTF-16, i když doplňkové znaky znakové sady Unicode (U + 10000 nebo novější) vyžadují dva body kódu náhradní UTF-16.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-178">Most common Unicode characters require only one UTF-16 code point, although Unicode supplementary characters (U+10000 and greater) require two UTF-16 surrogate code points.</span></span> <span data-ttu-id="a8ea0-179">Podporují se obě pořadí bajtů ve formátu little endian a formát big-endian.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-179">Both little-endian and big-endian byte orders are supported.</span></span>|<span data-ttu-id="a8ea0-180">Kódování UTF-16 modul common language runtime se používá k reprezentování <xref:System.Char> a <xref:System.String> hodnoty a to se používá v operačním systému Windows k reprezentaci `WCHAR` hodnoty.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-180">UTF-16 encoding is used by the common language runtime to represent <xref:System.Char> and <xref:System.String> values, and it is used by the Windows operating system to represent `WCHAR` values.</span></span>|  
|<span data-ttu-id="a8ea0-181">UTF-32</span><span class="sxs-lookup"><span data-stu-id="a8ea0-181">UTF-32</span></span>|<xref:System.Text.UTF32Encoding>|<span data-ttu-id="a8ea0-182">Představuje každý bod kódu Unicode jako 32bitové celé číslo.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-182">Represents each Unicode code point as a 32-bit integer.</span></span> <span data-ttu-id="a8ea0-183">Podporují se obě pořadí bajtů ve formátu little endian a formát big-endian.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-183">Both little-endian and big-endian byte orders are supported.</span></span>|<span data-ttu-id="a8ea0-184">Kódování UTF-32 se používá při aplikace chcete vyhnout chování náhradní bod kódu kódování UTF-16 operačních systémech, pro které je příliš důležité kódovaného místa.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-184">UTF-32 encoding is used when applications want to avoid the surrogate code point behavior of UTF-16 encoding on operating systems for which encoded space is too important.</span></span> <span data-ttu-id="a8ea0-185">Jeden glyfy vykresleného v zobrazení může být zakódován stále s více než jeden znak kódování UTF-32.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-185">Single glyphs rendered on a display can still be encoded with more than one UTF-32 character.</span></span>|  
|<span data-ttu-id="a8ea0-186">Kódování ANSI/ISO</span><span class="sxs-lookup"><span data-stu-id="a8ea0-186">ANSI/ISO encodings</span></span>||<span data-ttu-id="a8ea0-187">Poskytuje podporu pro širokou škálu znakové stránky.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-187">Provides support for a variety of code pages.</span></span> <span data-ttu-id="a8ea0-188">V operačních systémech Windows znakové stránky slouží k podpoře konkrétní jazyk nebo skupinu jazyků.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-188">On Windows operating systems, code pages are used to support a specific language or group of languages.</span></span> <span data-ttu-id="a8ea0-189">Tabulka obsahující seznam znakových stránek podporovaných .NET, najdete v článku <xref:System.Text.Encoding> třídy.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-189">For a table that lists the code pages supported by .NET, see the <xref:System.Text.Encoding> class.</span></span> <span data-ttu-id="a8ea0-190">Objekt kódování pro konkrétní kódové stránky můžete načíst pomocí volání <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-190">You can retrieve an encoding object for a particular code page by calling the <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> method.</span></span>|<span data-ttu-id="a8ea0-191">Znaková stránka obsahuje 256 body kódu a je založený na nule.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-191">A code page contains 256 code points and is zero-based.</span></span> <span data-ttu-id="a8ea0-192">Ve většině znakových stránek body kódu 0 až 127 představují znaková sada ASCII a kódových bodů 128 až 255 se výrazně liší mezi znakové stránky.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-192">In most code pages, code points 0 through 127 represent the ASCII character set, and code points 128 through 255 differ significantly between code pages.</span></span> <span data-ttu-id="a8ea0-193">Například znaková stránka 1252 zajišťující znaky latinky písmových systémech, včetně angličtinu, němčinu a francouzštinu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-193">For example, code page 1252 provides the characters for Latin writing systems, including English, German, and French.</span></span> <span data-ttu-id="a8ea0-194">Poslední bod 128 kód v znaková stránka 1252 obsahovat znaky znaky s diakritikou.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-194">The last 128 code points in code page 1252 contain the accent characters.</span></span> <span data-ttu-id="a8ea0-195">Znaková stránka 1253 obsahuje kódy znaků, které jsou nutné v řecké písmo.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-195">Code page 1253 provides character codes that are required in the Greek writing system.</span></span> <span data-ttu-id="a8ea0-196">Poslední bod 128 kód v kódové stránce 1253 obsahovat znaků řecké abecedy.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-196">The last 128 code points in code page 1253 contain the Greek characters.</span></span> <span data-ttu-id="a8ea0-197">V důsledku toho aplikaci, která závisí na znakové stránky ANSI nelze uložit, řečtina a němčina ve stejném textového datového proudu pokud obsahuje identifikátor, který označuje odkazované znakovou stránku.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-197">As a result, an application that relies on ANSI code pages cannot store Greek and German in the same text stream unless it includes an identifier that indicates the referenced code page.</span></span>|  
|<span data-ttu-id="a8ea0-198">Dvoubajtové znakové sady (DBCS) kódování</span><span class="sxs-lookup"><span data-stu-id="a8ea0-198">Double-byte character set (DBCS) encodings</span></span>||<span data-ttu-id="a8ea0-199">Podporuje jazyky, jako je čínštiny, japonštiny a korejštiny, které obsahují více než 256 znaků.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-199">Supports languages, such as Chinese, Japanese, and Korean, that contain more than 256 characters.</span></span> <span data-ttu-id="a8ea0-200">V sadě DBCS pár nástroje kódových bodů (double byte) představuje každý znak.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-200">In a DBCS, a pair of code points (a double byte) represents each character.</span></span> <span data-ttu-id="a8ea0-201"><xref:System.Text.Encoding.IsSingleByte%2A?displayProperty=nameWithType> Vrátí vlastnost `false` pro znaky DBCS kódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-201">The <xref:System.Text.Encoding.IsSingleByte%2A?displayProperty=nameWithType> property returns `false` for DBCS encodings.</span></span> <span data-ttu-id="a8ea0-202">Kódování objektu můžete načíst pro konkrétní DBCS voláním <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-202">You can retrieve an encoding object for a particular DBCS by calling the <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> method.</span></span>|<span data-ttu-id="a8ea0-203">V sadě DBCS pár nástroje kódových bodů (double byte) představuje každý znak.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-203">In a DBCS, a pair of code points (a double byte) represents each character.</span></span> <span data-ttu-id="a8ea0-204">Když aplikace zpracovává DBCS data, první bajt znaku DBCS (vedoucí bajt) jsou zpracovávána v kombinaci s druhý bajt, který bezprostředně následuje.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-204">When an application handles DBCS data, the first byte of a DBCS character (the lead byte) is processed in combination with the trail byte that immediately follows it.</span></span> <span data-ttu-id="a8ea0-205">Vzhledem k tomu, že jeden pár dvoubajtových kódových bodů může představovat různých znaků v závislosti na znakovou stránku, toto schéma stále neumožňuje kombinací dva jazyků, jako je například japonštinu a čínštinu ve stejném datovém proudu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-205">Because a single pair of double-byte code points can represent different characters depending on the code page, this scheme still does not allow for the combination of two languages, such as Japanese and Chinese, in the same data stream.</span></span>|  
  
 <span data-ttu-id="a8ea0-206">Těchto kódováních umožňují pracovat se znaky Unicode, a také s kódování, které se běžně používají starší verzi aplikace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-206">These encodings enable you to work with Unicode characters as well as with encodings that are most commonly used in legacy applications.</span></span> <span data-ttu-id="a8ea0-207">Kromě toho můžete vytvořit vlastního kódování tak, že definujete třídu, která je odvozena z <xref:System.Text.Encoding> a přepsáním jejích členů.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-207">In addition, you can create a custom encoding by defining a class that derives from <xref:System.Text.Encoding> and overriding its members.</span></span>  
  
### <a name="platform-notes-net-core"></a><span data-ttu-id="a8ea0-208">Poznámky k platformě: .NET Core</span><span class="sxs-lookup"><span data-stu-id="a8ea0-208">Platform Notes: .NET Core</span></span>  
 <span data-ttu-id="a8ea0-209">Ve výchozím nastavení .NET Core Nedovolte, aby byly k dispozici žádné kódování znakových stránek než znaková stránka 28591 a kódování Unicode, jako je například UTF-8 a UTF-16.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-209">By default, .NET Core does not make available any code page encodings other than code page 28591 and the Unicode encodings, such as UTF-8 and UTF-16.</span></span> <span data-ttu-id="a8ea0-210">Můžete však přidat kódování znakových stránek, které jsou součástí standardní aplikace Windows, které se zaměřují .NET do vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-210">However, you can add the code page encodings found in standard Windows apps that target .NET to your app.</span></span> <span data-ttu-id="a8ea0-211">Podrobnější informace najdete v článku <xref:System.Text.CodePagesEncodingProvider> tématu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-211">For complete information, see the <xref:System.Text.CodePagesEncodingProvider> topic.</span></span>  
  
<a name="Selecting"></a>   
## <a name="selecting-an-encoding-class"></a><span data-ttu-id="a8ea0-212">Výběr kódování třídy</span><span class="sxs-lookup"><span data-stu-id="a8ea0-212">Selecting an Encoding Class</span></span>  
 <span data-ttu-id="a8ea0-213">Pokud budete mít možnost vybrat kódování používané aplikace, měli byste použít kódování Unicode, pokud možno buď <xref:System.Text.UTF8Encoding> nebo <xref:System.Text.UnicodeEncoding>.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-213">If you have the opportunity to choose the encoding to be used by your application, you should use a Unicode encoding, preferably either <xref:System.Text.UTF8Encoding> or <xref:System.Text.UnicodeEncoding>.</span></span> <span data-ttu-id="a8ea0-214">(.NET podporuje také třetí kódování Unicode, <xref:System.Text.UTF32Encoding>.)</span><span class="sxs-lookup"><span data-stu-id="a8ea0-214">(.NET also supports a third Unicode encoding, <xref:System.Text.UTF32Encoding>.)</span></span>  
  
 <span data-ttu-id="a8ea0-215">Pokud máte v úmyslu používat kódování ASCII (<xref:System.Text.ASCIIEncoding>), zvolte <xref:System.Text.UTF8Encoding> místo.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-215">If you are planning to use an ASCII encoding (<xref:System.Text.ASCIIEncoding>), choose <xref:System.Text.UTF8Encoding> instead.</span></span> <span data-ttu-id="a8ea0-216">Dvě kódování jsou stejná pro znaková sada ASCII, ale <xref:System.Text.UTF8Encoding> má následující výhody:</span><span class="sxs-lookup"><span data-stu-id="a8ea0-216">The two encodings are identical for the ASCII character set, but <xref:System.Text.UTF8Encoding> has the following advantages:</span></span>  
  
- <span data-ttu-id="a8ea0-217">Vzhledem k tomu může představovat každý znak Unicode <xref:System.Text.ASCIIEncoding> podporuje pouze hodnoty znaků Unicode mezi U + 0000 a U + 007F.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-217">It can represent every Unicode character, whereas <xref:System.Text.ASCIIEncoding> supports only the Unicode character values between U+0000 and U+007F.</span></span>  
  
- <span data-ttu-id="a8ea0-218">Poskytuje lepší zabezpečení a detekce chyb.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-218">It provides error detection and better security.</span></span>  
  
- <span data-ttu-id="a8ea0-219">Má se vyladěné tak, aby se co nejrychleji a mělo by být rychlejší než jiné kódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-219">It has been tuned to be as fast as possible and should be faster than any other encoding.</span></span> <span data-ttu-id="a8ea0-220">I pro obsah, který je zcela ASCII, provést operace s <xref:System.Text.UTF8Encoding> jsou rychlejší než operace prováděné s <xref:System.Text.ASCIIEncoding>.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-220">Even for content that is entirely ASCII, operations performed with <xref:System.Text.UTF8Encoding> are faster than operations performed with <xref:System.Text.ASCIIEncoding>.</span></span>  
  
 <span data-ttu-id="a8ea0-221">Měli byste zvážit použití <xref:System.Text.ASCIIEncoding> pouze pro starší verze aplikací.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-221">You should consider using <xref:System.Text.ASCIIEncoding> only for legacy applications.</span></span> <span data-ttu-id="a8ea0-222">Ale i pro starší verze aplikací, <xref:System.Text.UTF8Encoding> může být lepší volbou z následujících důvodů (za předpokladu, že výchozí nastavení):</span><span class="sxs-lookup"><span data-stu-id="a8ea0-222">However, even for legacy applications, <xref:System.Text.UTF8Encoding> might be a better choice for the following reasons (assuming default settings):</span></span>  
  
- <span data-ttu-id="a8ea0-223">Pokud aplikace obsahuje obsah, který není striktně ASCII a kóduje ho s <xref:System.Text.ASCIIEncoding>, zakóduje jednotlivé znaky nepocházející ze sady ASCII jako otazník (?).</span><span class="sxs-lookup"><span data-stu-id="a8ea0-223">If your application has content that is not strictly ASCII and encodes it with <xref:System.Text.ASCIIEncoding>, each non-ASCII character encodes as a question mark (?).</span></span> <span data-ttu-id="a8ea0-224">Aplikace pak dekóduje tato data, dojde ke ztrátě informací.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-224">If the application then decodes this data, the information is lost.</span></span>  
  
- <span data-ttu-id="a8ea0-225">Pokud aplikace obsahuje obsah, který není striktně ASCII a kóduje ho s <xref:System.Text.UTF8Encoding>, výsledek nesrozumitelný, pokud interpretován jako ASCII.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-225">If your application has content that is not strictly ASCII and encodes it with <xref:System.Text.UTF8Encoding>, the result seems unintelligible if interpreted as ASCII.</span></span> <span data-ttu-id="a8ea0-226">Nicméně pokud aplikace pak pomocí dekodér UTF-8 k dekódování dat, data provede odezvy úspěšně.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-226">However, if the application then uses a UTF-8 decoder to decode this data, the data performs a round trip successfully.</span></span>  
  
 <span data-ttu-id="a8ea0-227">Ve webové aplikaci by měly odrážet odeslat klientovi v reakci na webový požadavek, znaky kódování použité na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-227">In a web application, characters sent to the client in response to a web request should reflect the encoding used on the client.</span></span> <span data-ttu-id="a8ea0-228">Ve většině případů byste měli nastavit <xref:System.Web.HttpResponse.ContentEncoding%2A?displayProperty=nameWithType> vlastnost na hodnotu vrácenou <xref:System.Web.HttpRequest.ContentEncoding%2A?displayProperty=nameWithType> vlastnosti k zobrazení textu v kódování, které uživatel očekává.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-228">In most cases, you should set the <xref:System.Web.HttpResponse.ContentEncoding%2A?displayProperty=nameWithType> property to the value returned by the <xref:System.Web.HttpRequest.ContentEncoding%2A?displayProperty=nameWithType> property to display text in the encoding that the user expects.</span></span>  
  
<a name="Using"></a>   
## <a name="using-an-encoding-object"></a><span data-ttu-id="a8ea0-229">Pomocí objektu kódování</span><span class="sxs-lookup"><span data-stu-id="a8ea0-229">Using an Encoding Object</span></span>  
 <span data-ttu-id="a8ea0-230">Kodér převede řetězec znaků (nejčastěji, znaky Unicode) na jeho číselnou hodnotu (bajty) ekvivalentní.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-230">An encoder converts a string of characters (most commonly, Unicode characters) to its numeric (byte) equivalent.</span></span> <span data-ttu-id="a8ea0-231">Můžete například použít kodér ASCII převést na ASCII znaky znakové sady Unicode, tak, že je možné zobrazit v konzole.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-231">For example, you might use an ASCII encoder to convert Unicode characters to ASCII so that they can be displayed at the console.</span></span> <span data-ttu-id="a8ea0-232">K provedení převodu zavolat <xref:System.Text.Encoding.GetBytes%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-232">To perform the conversion, you call the <xref:System.Text.Encoding.GetBytes%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="a8ea0-233">Pokud chcete určit, kolik bajtů jsou potřeba k uložení kódovaných znaků, než se pustíte do kódování, můžete volat <xref:System.Text.Encoding.GetByteCount%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-233">If you want to determine how many bytes are needed to store the encoded characters before performing the encoding, you can call the <xref:System.Text.Encoding.GetByteCount%2A> method.</span></span>  
  
 <span data-ttu-id="a8ea0-234">Následující příklad používá jeden bajtové pole ke kódování řetězce v dvě samostatné operace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-234">The following example uses a single byte array to encode strings in two separate operations.</span></span> <span data-ttu-id="a8ea0-235">Udržuje index určující počáteční pozici v bajtové pole pro další sadu kódováním ASCII bajtů.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-235">It maintains an index that indicates the starting position in the byte array for the next set of ASCII-encoded bytes.</span></span> <span data-ttu-id="a8ea0-236">Volá <xref:System.Text.ASCIIEncoding.GetByteCount%28System.String%29?displayProperty=nameWithType> metodou, jak zajistit, že je příliš velká tak, aby vyhovovaly kódovaný řetězec bajtové pole.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-236">It calls the <xref:System.Text.ASCIIEncoding.GetByteCount%28System.String%29?displayProperty=nameWithType> method to ensure that the byte array is large enough to accommodate the encoded string.</span></span> <span data-ttu-id="a8ea0-237">Poté zavolá <xref:System.Text.ASCIIEncoding.GetBytes%28System.String%2CSystem.Int32%2CSystem.Int32%2CSystem.Byte%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> metoda ke kódování znaků v řetězci.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-237">It then calls the <xref:System.Text.ASCIIEncoding.GetBytes%28System.String%2CSystem.Int32%2CSystem.Int32%2CSystem.Byte%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> method to encode the characters in the string.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/getbytes1.cs#8)]
 [!code-vb[Conceptual.Encoding#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/getbytes1.vb#8)]  
  
 <span data-ttu-id="a8ea0-238">Dekodér převede bajtové pole, která odráží určitý znak kódování do sady znaků, pole znaků nebo v řetězci.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-238">A decoder converts a byte array that reflects a particular character encoding into a set of characters, either in a character array or in a string.</span></span> <span data-ttu-id="a8ea0-239">Chcete-li dekódovat bajtové pole na pole znaků, zavolejte <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-239">To decode a byte array into a character array, you call the <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="a8ea0-240">Chcete-li dekódovat bajtové pole na řetězec, zavolejte <xref:System.Text.Encoding.GetString%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-240">To decode a byte array into a string, you call the <xref:System.Text.Encoding.GetString%2A> method.</span></span> <span data-ttu-id="a8ea0-241">Pokud chcete určit, kolik znaků jsou potřeba k uložení dekódovaný bajtů před provedením dekódování, můžete volat <xref:System.Text.Encoding.GetCharCount%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-241">If you want to determine how many characters are needed to store the decoded bytes before performing the decoding, you can call the <xref:System.Text.Encoding.GetCharCount%2A> method.</span></span>  
  
 <span data-ttu-id="a8ea0-242">V následujícím příkladu tři řetězce kóduje a dekóduje je do jediného pole znaků.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-242">The following example encodes three strings and then decodes them into a single array of characters.</span></span> <span data-ttu-id="a8ea0-243">Udržuje index určující počáteční pozici pro další sadu dekódované znaky jako pole znaků.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-243">It maintains an index that indicates the starting position in the character array for the next set of decoded characters.</span></span> <span data-ttu-id="a8ea0-244">Volá <xref:System.Text.ASCIIEncoding.GetCharCount%2A> metodou, jak zajistit, že je příliš velká pro dekódované znaky pole znaků.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-244">It calls the <xref:System.Text.ASCIIEncoding.GetCharCount%2A> method to ensure that the character array is large enough to accommodate all the decoded characters.</span></span> <span data-ttu-id="a8ea0-245">Poté zavolá <xref:System.Text.ASCIIEncoding.GetChars%28System.Byte%5B%5D%2CSystem.Int32%2CSystem.Int32%2CSystem.Char%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> metoda dekódovat bajtové pole.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-245">It then calls the <xref:System.Text.ASCIIEncoding.GetChars%28System.Byte%5B%5D%2CSystem.Int32%2CSystem.Int32%2CSystem.Char%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> method to decode the byte array.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#9](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/getchars1.cs#9)]
 [!code-vb[Conceptual.Encoding#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/getchars1.vb#9)]  
  
 <span data-ttu-id="a8ea0-246">Kódování a dekódování metody dané třídy odvozené z <xref:System.Text.Encoding> jsou navrženy pro práci na kompletní sadu dat; to znamená, se v rámci jednoho volání metody pochází všechna data na kódován nebo dekódován.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-246">The encoding and decoding methods of a class derived from <xref:System.Text.Encoding> are designed to work on a complete set of data; that is, all the data to be encoded or decoded is supplied in a single method call.</span></span> <span data-ttu-id="a8ea0-247">V některých případech se ale data jsou k dispozici v datovém proudu a data, která mají být kódován nebo dekódován může být k dispozici pouze v samostatné operace čtení.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-247">However, in some cases, data is available in a stream, and the data to be encoded or decoded may be available only from separate read operations.</span></span> <span data-ttu-id="a8ea0-248">To vyžaduje kódování nebo dekódování operace pamatovat jakýkoliv uložený stav z jeho předchozí volání.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-248">This requires the encoding or decoding operation to remember any saved state from its previous invocation.</span></span> <span data-ttu-id="a8ea0-249">Metody třídy odvozené z <xref:System.Text.Encoder> a <xref:System.Text.Decoder> dokážou zpracovat kódování a dekódování operace napříč několika volání metody.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-249">Methods of classes derived from <xref:System.Text.Encoder> and <xref:System.Text.Decoder> are able to handle encoding and decoding operations that span multiple method calls.</span></span>  
  
 <span data-ttu-id="a8ea0-250"><xref:System.Text.Encoder> Objektu pro konkrétní kódování je k dispozici z kódování na <xref:System.Text.Encoding.GetEncoder%2A?displayProperty=nameWithType> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-250">An <xref:System.Text.Encoder> object for a particular encoding is available from that encoding's <xref:System.Text.Encoding.GetEncoder%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="a8ea0-251">A <xref:System.Text.Decoder> objektu pro konkrétní kódování je k dispozici z kódování na <xref:System.Text.Encoding.GetDecoder%2A?displayProperty=nameWithType> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-251">A <xref:System.Text.Decoder> object for a particular encoding is available from that encoding's <xref:System.Text.Encoding.GetDecoder%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="a8ea0-252">Dekódování operace, mějte na paměti, že třídy odvozené z <xref:System.Text.Decoder> zahrnout <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> metody, ale nemáte metodu, která odpovídá <xref:System.Text.Encoding.GetString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-252">For decoding operations, note that classes derived from <xref:System.Text.Decoder> include a <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> method, but they do not have a method that corresponds to <xref:System.Text.Encoding.GetString%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="a8ea0-253">Následující příklad ukazuje rozdíl mezi použitím nástrojů <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> a <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> metody dekódování pole bajtů kódování Unicode.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-253">The following example illustrates the difference between using the <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> and <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> methods for decoding a Unicode byte array.</span></span> <span data-ttu-id="a8ea0-254">V příkladu kóduje řetězec, který obsahuje některé znaky Unicode do souboru a potom použije dvě metody dekódování k dekódování deset bajtů v čase.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-254">The example encodes a string that contains some Unicode characters to a file, and then uses the two decoding methods to decode them ten bytes at a time.</span></span> <span data-ttu-id="a8ea0-255">Vzhledem k tomu, že dojde k náhradní pár v bajtech desátý a jedenáctý, je dekódováno v samostatné metodě volání.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-255">Because a surrogate pair occurs in the tenth and eleventh bytes, it is decoded in separate method calls.</span></span> <span data-ttu-id="a8ea0-256">Jak výstup znázorňuje, <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> metoda není schopen správně dekódování bajty a místo toho je nahradí U + FFFD (náhradní znak).</span><span class="sxs-lookup"><span data-stu-id="a8ea0-256">As the output shows, the <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> method is not able to correctly decode the bytes and instead replaces them with U+FFFD (REPLACEMENT CHARACTER).</span></span> <span data-ttu-id="a8ea0-257">Na druhé straně <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> metoda je úspěšně dekódovat bajtové pole pro získání původní řetězec.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-257">On the other hand, the <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> method is able to successfully decode the byte array to get the original string.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#10](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/stream1.cs#10)]
 [!code-vb[Conceptual.Encoding#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/stream1.vb#10)]  
  
<a name="FallbackStrategy"></a>   
## <a name="choosing-a-fallback-strategy"></a><span data-ttu-id="a8ea0-258">Výběr strategie použití náhradní lokality</span><span class="sxs-lookup"><span data-stu-id="a8ea0-258">Choosing a Fallback Strategy</span></span>  
 <span data-ttu-id="a8ea0-259">Pokud metoda se pokusí k zakódování nebo dekódování znak, ale neexistuje žádné mapování, musí implementovat nouzová strategie, která určuje způsob zpracování neúspěšných mapování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-259">When a method tries to encode or decode a character but no mapping exists, it must implement a fallback strategy that determines how the failed mapping should be handled.</span></span> <span data-ttu-id="a8ea0-260">Existují tři typy použití náhradní lokality strategií:</span><span class="sxs-lookup"><span data-stu-id="a8ea0-260">There are three types of fallback strategies:</span></span>  
  
- <span data-ttu-id="a8ea0-261">Přizpůsobený použití náhradní lokality</span><span class="sxs-lookup"><span data-stu-id="a8ea0-261">Best-fit fallback</span></span>  
  
- <span data-ttu-id="a8ea0-262">Náhradní použití náhradní lokality</span><span class="sxs-lookup"><span data-stu-id="a8ea0-262">Replacement fallback</span></span>  
  
- <span data-ttu-id="a8ea0-263">Výjimka použití náhradní lokality</span><span class="sxs-lookup"><span data-stu-id="a8ea0-263">Exception fallback</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="a8ea0-264">Nejběžnějších problémů v kódování operací dojít, když znak Unicode nelze mapovat na konkrétní kódové stránky kódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-264">The most common problems in encoding operations occur when a Unicode character cannot be mapped to a particular code page encoding.</span></span> <span data-ttu-id="a8ea0-265">Nejběžnějších problémů v dekódování operací dojít, když sekvence neplatný typ byte nelze přeložit na platné znaky Unicode.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-265">The most common problems in decoding operations occur when invalid byte sequences cannot be translated into valid Unicode characters.</span></span> <span data-ttu-id="a8ea0-266">Z těchto důvodů měli byste vědět záložní strategii, kterou používá určitý objekt kódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-266">For these reasons, you should know which fallback strategy a particular encoding object uses.</span></span> <span data-ttu-id="a8ea0-267">Kdykoli je to možné, měli byste určit nouzová strategie používá objekt kódování, když vytvoříte instanci objektu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-267">Whenever possible, you should specify the fallback strategy used by an encoding object when you instantiate the object.</span></span>  
  
<a name="BestFit"></a>   
### <a name="best-fit-fallback"></a><span data-ttu-id="a8ea0-268">Přizpůsobený použití náhradní lokality</span><span class="sxs-lookup"><span data-stu-id="a8ea0-268">Best-Fit Fallback</span></span>  
 <span data-ttu-id="a8ea0-269">Znak nemá přesnou shodu v kódování cílové verze, můžete zkusit kodér mapovat na podobně jako znak.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-269">When a character does not have an exact match in the target encoding, the encoder can try to map it to a similar character.</span></span> <span data-ttu-id="a8ea0-270">(Přizpůsobený element fallback je většinou kódování místo dekódování problém.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-270">(Best-fit fallback is mostly an encoding rather than a decoding issue.</span></span> <span data-ttu-id="a8ea0-271">Existují velmi málo znakových stránek, které obsahují znaky, které nelze úspěšně namapován na kódování Unicode). Přizpůsobený fallback je výchozí znaková stránka a dvoubajtové znakové sady kódování, které jsou načteny <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> a <xref:System.Text.Encoding.GetEncoding%28System.String%29?displayProperty=nameWithType> přetížení.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-271">There are very few code pages that contain characters that cannot be successfully mapped to Unicode.) Best-fit fallback is the default for code page and double-byte character set encodings that are retrieved by the <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> and <xref:System.Text.Encoding.GetEncoding%28System.String%29?displayProperty=nameWithType> overloads.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a8ea0-272">Teoreticky vzato kódování Unicode třídy zadaný v rozhraní .NET (<xref:System.Text.UTF8Encoding>, <xref:System.Text.UnicodeEncoding>, a <xref:System.Text.UTF32Encoding>) podporují každý znak v každé znakové sadě, takže je možné odstranit přizpůsobený záložní problémy.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-272">In theory, the Unicode encoding classes provided in .NET (<xref:System.Text.UTF8Encoding>, <xref:System.Text.UnicodeEncoding>, and <xref:System.Text.UTF32Encoding>) support every character in every character set, so they can be used to eliminate best-fit fallback issues.</span></span>  
  
 <span data-ttu-id="a8ea0-273">Přizpůsobený strategie lišit pro různé znakové stránky.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-273">Best-fit strategies vary for different code pages.</span></span> <span data-ttu-id="a8ea0-274">Například pro některé kódové stránky, znaky latinky s plnou šířkou mapu, aby běžné znaky latinky poloviční šířku.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-274">For example, for some code pages, full-width Latin characters map to the more common half-width Latin characters.</span></span> <span data-ttu-id="a8ea0-275">Toto mapování není provedeno pro jiné znakové stránky.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-275">For other code pages, this mapping is not made.</span></span> <span data-ttu-id="a8ea0-276">I v rámci agresivní strategie přizpůsobený neexistuje žádný vůbec vhodný pro některé znaky v některých kódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-276">Even under an aggressive best-fit strategy, there is no imaginable fit for some characters in some encodings.</span></span> <span data-ttu-id="a8ea0-277">Například čínský znak nemá žádné přiměřené mapování na znaková stránka 1252.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-277">For example, a Chinese ideograph has no reasonable mapping to code page 1252.</span></span> <span data-ttu-id="a8ea0-278">V takovém případě se používá řetězci pro nahrazení.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-278">In this case, a replacement string is used.</span></span> <span data-ttu-id="a8ea0-279">Ve výchozím nastavení tento řetězec představuje pouze jednu OTAZNÍK (U + 003F).</span><span class="sxs-lookup"><span data-stu-id="a8ea0-279">By default, this string is just a single QUESTION MARK (U+003F).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a8ea0-280">Přizpůsobený strategie nejsou podrobně zdokumentovány.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-280">Best-fit strategies are not documented in detail.</span></span> <span data-ttu-id="a8ea0-281">Ale několik znakové stránky jsou zdokumentované v [Unicode Consortium](https://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/) webu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-281">However, several code pages are documented at the [Unicode Consortium's](https://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/) website.</span></span> <span data-ttu-id="a8ea0-282">Podívejte se prosím **readme.txt** soubor v této složce popis toho, jak interpretovat mapování souborů.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-282">Please review the **readme.txt** file in that folder for a description of how to interpret the mapping files.</span></span>
  
 <span data-ttu-id="a8ea0-283">Následující příklad používá znakovou stránkou 1252 (znaková stránka Windows západní evropských jazyků) pro ilustraci nejlepšího mapování a jejích nevýhod.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-283">The following example uses code page 1252 (the Windows code page for Western European languages) to illustrate best-fit mapping and its drawbacks.</span></span> <span data-ttu-id="a8ea0-284"><xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> Metoda se používá k načtení objektu kódování pro znaková stránka 1252.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-284">The <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> method is used to retrieve an encoding object for code page 1252.</span></span> <span data-ttu-id="a8ea0-285">Ve výchozím nastavení použije přizpůsobený mapování znaků Unicode, které se nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-285">By default, it uses a best-fit mapping for Unicode characters that it does not support.</span></span> <span data-ttu-id="a8ea0-286">Tento příklad vytvoří řetězec, který obsahuje tři jiné znaky než ASCII - KRUHU S VELKÝM PÍSMENEM LATIN (U + 24C 8), horní index pěti (U + 2075) a NEKONEČNO (U + 221E) - oddělené mezerami.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-286">The example instantiates a string that contains three non-ASCII characters - CIRCLED LATIN CAPITAL LETTER S (U+24C8), SUPERSCRIPT FIVE (U+2075), and INFINITY (U+221E) - separated by spaces.</span></span> <span data-ttu-id="a8ea0-287">Jak výstup z příkladu ukazuje, kdy je zakódovaný řetězec, jsou tři původní znaky bez mezery nahrazené OTAZNÍK (U + 003F), PĚT ČÍSLIC (U + 0035) a OSMI ČÍSLICE (U + 0038).</span><span class="sxs-lookup"><span data-stu-id="a8ea0-287">As the output from the example shows, when the string is encoded, the three original non-space characters are replaced by QUESTION MARK (U+003F), DIGIT FIVE (U+0035), and DIGIT EIGHT (U+0038).</span></span> <span data-ttu-id="a8ea0-288">ČÍSLICE 8 je zvláště špatné nahrazení pro nepodporovaný znak NEKONEČNO a OTAZNÍK označuje, že nebylo k dispozici pro původní znakovou žádné mapování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-288">DIGIT EIGHT is a particularly poor replacement for the unsupported INFINITY character, and QUESTION MARK indicates that no mapping was available for the original character.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/bestfit1.cs#1)]
 [!code-vb[Conceptual.Encoding#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/bestfit1.vb#1)]  
  
 <span data-ttu-id="a8ea0-289">Nejlepšího mapování je výchozí chování <xref:System.Text.Encoding> objekt, který kóduje Unicode data data znakové stránky a starší verze aplikace, které jsou závislé na toto chování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-289">Best-fit mapping is the default behavior for an <xref:System.Text.Encoding> object that encodes Unicode data into code page data, and there are legacy applications that rely on this behavior.</span></span> <span data-ttu-id="a8ea0-290">Většina nových aplikací se ale měli vyhnout přizpůsobený chování z bezpečnostních důvodů.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-290">However, most new applications should avoid best-fit behavior for security reasons.</span></span> <span data-ttu-id="a8ea0-291">Aplikace by neměla například umístit názvu domény prostřednictvím nejvhodnější kódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-291">For example, applications should not put a domain name through a best-fit encoding.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a8ea0-292">Můžete také implementovat vlastní přizpůsobený záložní mapování pro kódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-292">You can also implement a custom best-fit fallback mapping for an encoding.</span></span> <span data-ttu-id="a8ea0-293">Další informace najdete v tématu [implementaci strategie použití náhradní lokality vlastní](../../../docs/standard/base-types/character-encoding.md#Custom) oddílu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-293">For more information, see the [Implementing a Custom Fallback Strategy](../../../docs/standard/base-types/character-encoding.md#Custom) section.</span></span>  
  
 <span data-ttu-id="a8ea0-294">Pokud přizpůsobený fallback je výchozí nastavení pro objekt kódování, můžete vybrat jiný nouzová strategie při načtení <xref:System.Text.Encoding> objektu voláním <xref:System.Text.Encoding.GetEncoding%28System.Int32%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> nebo <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> přetížení.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-294">If best-fit fallback is the default for an encoding object, you can choose another fallback strategy when you retrieve an <xref:System.Text.Encoding> object by calling the <xref:System.Text.Encoding.GetEncoding%28System.Int32%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> or <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> overload.</span></span> <span data-ttu-id="a8ea0-295">Následující části najdete příklad, který nahrazuje každý znak, který nelze mapovat na znakovou stránkou 1252 s hvězdičkou (\*).</span><span class="sxs-lookup"><span data-stu-id="a8ea0-295">The following section includes an example that replaces each character that cannot be mapped to code page 1252 with an asterisk (\*).</span></span>  
  
 [!code-csharp[Conceptual.Encoding#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/bestfit1a.cs#3)]
 [!code-vb[Conceptual.Encoding#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/bestfit1a.vb#3)]  
  
<a name="Replacement"></a>   
### <a name="replacement-fallback"></a><span data-ttu-id="a8ea0-296">Náhradní použití náhradní lokality</span><span class="sxs-lookup"><span data-stu-id="a8ea0-296">Replacement Fallback</span></span>  
 <span data-ttu-id="a8ea0-297">Když znak nemá přesnou shodu v cílové schéma, ale neexistuje žádná odpovídající znak, který je možné mapovat na, může aplikace určit náhradní znak nebo řetězec.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-297">When a character does not have an exact match in the target scheme, but there is no appropriate character that it can be mapped to, the application can specify a replacement character or string.</span></span> <span data-ttu-id="a8ea0-298">Toto je výchozí chování pro Unicode dekodér, která nahradí jakékoli dva bajty sekvenci, který nelze dekódovat REPLACEMENT_CHARACTER (U + FFFD).</span><span class="sxs-lookup"><span data-stu-id="a8ea0-298">This is the default behavior for the Unicode decoder, which replaces any two-byte sequence that it cannot decode with REPLACEMENT_CHARACTER (U+FFFD).</span></span> <span data-ttu-id="a8ea0-299">Je také výchozí chování <xref:System.Text.ASCIIEncoding> třídu, která nahrazuje každý znak, který nelze zakódování nebo dekódování otazníkem.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-299">It is also the default behavior of the <xref:System.Text.ASCIIEncoding> class, which replaces each character that it cannot encode or decode with a question mark.</span></span> <span data-ttu-id="a8ea0-300">Následující příklad ukazuje znak nahrazení pro řetězec znaků Unicode z předchozího příkladu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-300">The following example illustrates character replacement for the Unicode string from the previous example.</span></span> <span data-ttu-id="a8ea0-301">Jak ukazuje výstup, každý znak, který není možné dekódovat na hodnotu bajtu ASCII je nahrazena 0x3F, což je kód ASCII pro otazníkem.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-301">As the output shows, each character that cannot be decoded into an ASCII byte value is replaced by 0x3F, which is the ASCII code for a question mark.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/replacementascii.cs#2)]
 [!code-vb[Conceptual.Encoding#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/replacementascii.vb#2)]  
  
 <span data-ttu-id="a8ea0-302">Zahrnuje .NET <xref:System.Text.EncoderReplacementFallback> a <xref:System.Text.DecoderReplacementFallback> třídy, které nahrazení řetězci pro nahrazení, pokud znak není namapované přesně v kódování nebo dekódování operace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-302">.NET includes the <xref:System.Text.EncoderReplacementFallback> and <xref:System.Text.DecoderReplacementFallback> classes, which substitute a replacement string if a character does not map exactly in an encoding or decoding operation.</span></span> <span data-ttu-id="a8ea0-303">Ve výchozím nastavení je tento řetězec nahrazení otazník, ale můžete volat přetížení konstruktoru třídy zvolit jiný řetězec.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-303">By default, this replacement string is a question mark, but you can call a class constructor overload to choose a different string.</span></span> <span data-ttu-id="a8ea0-304">Obvykle řetězci pro nahrazení je jednoho znaku, i když to není povinné.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-304">Typically, the replacement string is a single character, although this is not a requirement.</span></span> <span data-ttu-id="a8ea0-305">Následující příklad změní chování nástroje stránkou 1252 kodér kódu po vytvoření instance <xref:System.Text.EncoderReplacementFallback> objekt, který používá hvězdičku (\*) jako řetězec nahrazení.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-305">The following example changes the behavior of the code page 1252 encoder by instantiating an <xref:System.Text.EncoderReplacementFallback> object that uses an asterisk (\*) as a replacement string.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/bestfit1a.cs#3)]
 [!code-vb[Conceptual.Encoding#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/bestfit1a.vb#3)]  
  
> [!NOTE]
>  <span data-ttu-id="a8ea0-306">Můžete také implementovat třídu nahrazení pro kódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-306">You can also implement a replacement class for an encoding.</span></span> <span data-ttu-id="a8ea0-307">Další informace najdete v tématu [implementaci strategie použití náhradní lokality vlastní](../../../docs/standard/base-types/character-encoding.md#Custom) oddílu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-307">For more information, see the [Implementing a Custom Fallback Strategy](../../../docs/standard/base-types/character-encoding.md#Custom) section.</span></span>  
  
 <span data-ttu-id="a8ea0-308">Kromě OTAZNÍK (U + 003F) náhradní znak Unicode (U + FFFD) běžně slouží jako řetězec nahrazení, zejména při dekódování sekvence bajtů, které nelze úspěšně přeložit na znaky znakové sady Unicode.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-308">In addition to QUESTION MARK (U+003F), the Unicode REPLACEMENT CHARACTER (U+FFFD) is commonly used as a replacement string, particularly when decoding byte sequences that cannot be successfully translated into Unicode characters.</span></span> <span data-ttu-id="a8ea0-309">Ale můžete libovolně vybrat libovolný řetězec nahrazení a může obsahovat více znaků.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-309">However, you are free to choose any replacement string, and it can contain multiple characters.</span></span>  
  
<a name="Exception"></a>   
### <a name="exception-fallback"></a><span data-ttu-id="a8ea0-310">Výjimka použití náhradní lokality</span><span class="sxs-lookup"><span data-stu-id="a8ea0-310">Exception Fallback</span></span>  
 <span data-ttu-id="a8ea0-311">Namísto zadávání přizpůsobený záložní nebo nahrazení řetězce, může vyvolat kodéru <xref:System.Text.EncoderFallbackException> Pokud nemůže zakódovat sady znaků a může vyvolat dekodér <xref:System.Text.DecoderFallbackException> Pokud nemůže dekódovat bajtové pole.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-311">Instead of providing a best-fit fallback or a replacement string, an encoder can throw an <xref:System.Text.EncoderFallbackException> if it is unable to encode a set of characters, and a decoder can throw a <xref:System.Text.DecoderFallbackException> if it is unable to decode a byte array.</span></span> <span data-ttu-id="a8ea0-312">Vyvolání výjimky v kódování a dekódování operace, můžete zadat <xref:System.Text.EncoderExceptionFallback> objektu a <xref:System.Text.DecoderExceptionFallback> objektu, respektive, na <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> – metoda.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-312">To throw an exception in encoding and decoding operations, you supply an <xref:System.Text.EncoderExceptionFallback> object and a <xref:System.Text.DecoderExceptionFallback> object, respectively, to the <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="a8ea0-313">Následující příklad ukazuje výjimka záložní s <xref:System.Text.ASCIIEncoding> třídy.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-313">The following example illustrates exception fallback with the <xref:System.Text.ASCIIEncoding> class.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/exceptionascii.cs#4)]
 [!code-vb[Conceptual.Encoding#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/exceptionascii.vb#4)]  
  
> [!NOTE]
>  <span data-ttu-id="a8ea0-314">Můžete také implementovat vlastní výjimka obslužné rutiny pro kódování operace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-314">You can also implement a custom exception handler for an encoding operation.</span></span> <span data-ttu-id="a8ea0-315">Další informace najdete v tématu [implementaci strategie použití náhradní lokality vlastní](../../../docs/standard/base-types/character-encoding.md#Custom) oddílu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-315">For more information, see the [Implementing a Custom Fallback Strategy](../../../docs/standard/base-types/character-encoding.md#Custom) section.</span></span>  
  
 <span data-ttu-id="a8ea0-316"><xref:System.Text.EncoderFallbackException> a <xref:System.Text.DecoderFallbackException> objekty zadejte následující informace o stavu, který způsobil výjimku:</span><span class="sxs-lookup"><span data-stu-id="a8ea0-316">The <xref:System.Text.EncoderFallbackException> and <xref:System.Text.DecoderFallbackException> objects provide the following information about the condition that caused the exception:</span></span>  
  
- <span data-ttu-id="a8ea0-317"><xref:System.Text.EncoderFallbackException> Objekt zahrnuje <xref:System.Text.EncoderFallbackException.IsUnknownSurrogate%2A> metodu, která označuje, zda znak nebo znaky, které nemůže být kódovaný představují Neznámý náhradní pár (v takovém případě vrátí metoda `true`) nebo Neznámý znak (v takovém, metoda vrátí `false`).</span><span class="sxs-lookup"><span data-stu-id="a8ea0-317">The <xref:System.Text.EncoderFallbackException> object includes an <xref:System.Text.EncoderFallbackException.IsUnknownSurrogate%2A> method, which indicates whether the character or characters that cannot be encoded represent an unknown surrogate pair (in which case, the method returns `true`) or an unknown single character (in which case, the method returns `false`).</span></span> <span data-ttu-id="a8ea0-318">Znaky v náhradní pár jsou k dispozici <xref:System.Text.EncoderFallbackException.CharUnknownHigh%2A?displayProperty=nameWithType> a <xref:System.Text.EncoderFallbackException.CharUnknownLow%2A?displayProperty=nameWithType> vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-318">The characters in the surrogate pair are available from the <xref:System.Text.EncoderFallbackException.CharUnknownHigh%2A?displayProperty=nameWithType> and <xref:System.Text.EncoderFallbackException.CharUnknownLow%2A?displayProperty=nameWithType> properties.</span></span> <span data-ttu-id="a8ea0-319">Neznámý znak je k dispozici <xref:System.Text.EncoderFallbackException.CharUnknown%2A?displayProperty=nameWithType> vlastnost.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-319">The unknown single character is available from the <xref:System.Text.EncoderFallbackException.CharUnknown%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="a8ea0-320"><xref:System.Text.EncoderFallbackException.Index%2A?displayProperty=nameWithType> Vlastnost označuje pozici v řetězci, ve kterém byl nalezen prvního znaku, který nemůže být zakódován.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-320">The <xref:System.Text.EncoderFallbackException.Index%2A?displayProperty=nameWithType> property indicates the position in the string at which the first character that could not be encoded was found.</span></span>  
  
- <span data-ttu-id="a8ea0-321"><xref:System.Text.DecoderFallbackException> Objekt zahrnuje <xref:System.Text.DecoderFallbackException.BytesUnknown%2A> vlastnost, která vrátí pole bajtů, které nelze dekódovat.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-321">The <xref:System.Text.DecoderFallbackException> object includes a <xref:System.Text.DecoderFallbackException.BytesUnknown%2A> property that returns an array of bytes that cannot be decoded.</span></span> <span data-ttu-id="a8ea0-322"><xref:System.Text.DecoderFallbackException.Index%2A?displayProperty=nameWithType> Vlastnost určuje počáteční pozici Neznámý bajtů.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-322">The <xref:System.Text.DecoderFallbackException.Index%2A?displayProperty=nameWithType> property indicates the starting position of the unknown bytes.</span></span>  
  
 <span data-ttu-id="a8ea0-323">I když <xref:System.Text.EncoderFallbackException> a <xref:System.Text.DecoderFallbackException> objekty poskytují odpovídající diagnostické informace o výjimce, se neposkytuje přístup ke kódování nebo dekódování vyrovnávací paměti.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-323">Although the <xref:System.Text.EncoderFallbackException> and <xref:System.Text.DecoderFallbackException> objects provide adequate diagnostic information about the exception, they do not provide access to the encoding or decoding buffer.</span></span> <span data-ttu-id="a8ea0-324">Proto se nepovolují neplatná data nahradit, nebo opraven v rámci metody kódování nebo dekódování.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-324">Therefore, they do not allow invalid data to be replaced or corrected within the encoding or decoding method.</span></span>  
  
<a name="Custom"></a>   
## <a name="implementing-a-custom-fallback-strategy"></a><span data-ttu-id="a8ea0-325">Implementace vlastního nouzová strategie</span><span class="sxs-lookup"><span data-stu-id="a8ea0-325">Implementing a Custom Fallback Strategy</span></span>  
 <span data-ttu-id="a8ea0-326">Kromě přizpůsobený mapování, která je implementována interně modulem znakových stránek, .NET obsahuje následující třídy pro implementaci strategii pro použití náhradní lokality:</span><span class="sxs-lookup"><span data-stu-id="a8ea0-326">In addition to the best-fit mapping that is implemented internally by code pages, .NET includes the following classes for implementing a fallback strategy:</span></span>  
  
- <span data-ttu-id="a8ea0-327">Použití <xref:System.Text.EncoderReplacementFallback> a <xref:System.Text.EncoderReplacementFallbackBuffer> nahradit znaky v kódování operace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-327">Use <xref:System.Text.EncoderReplacementFallback> and <xref:System.Text.EncoderReplacementFallbackBuffer> to replace characters in encoding operations.</span></span>  
  
- <span data-ttu-id="a8ea0-328">Použití <xref:System.Text.DecoderReplacementFallback> a <xref:System.Text.DecoderReplacementFallbackBuffer> k nahrazení znaků v dekódování operace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-328">Use <xref:System.Text.DecoderReplacementFallback> and <xref:System.Text.DecoderReplacementFallbackBuffer> to replace characters in decoding operations.</span></span>  
  
- <span data-ttu-id="a8ea0-329">Použití <xref:System.Text.EncoderExceptionFallback> a <xref:System.Text.EncoderExceptionFallbackBuffer> vyvolání <xref:System.Text.EncoderFallbackException> při nemůže být zakódován znak.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-329">Use <xref:System.Text.EncoderExceptionFallback> and <xref:System.Text.EncoderExceptionFallbackBuffer> to throw an <xref:System.Text.EncoderFallbackException> when a character cannot be encoded.</span></span>  
  
- <span data-ttu-id="a8ea0-330">Použití <xref:System.Text.DecoderExceptionFallback> a <xref:System.Text.DecoderExceptionFallbackBuffer> vyvolávat <xref:System.Text.DecoderFallbackException> když znak nelze dekódovat.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-330">Use <xref:System.Text.DecoderExceptionFallback> and <xref:System.Text.DecoderExceptionFallbackBuffer> to throw a <xref:System.Text.DecoderFallbackException> when a character cannot be decoded.</span></span>  
  
 <span data-ttu-id="a8ea0-331">Kromě toho můžete implementovat vlastní řešení, která používá přizpůsobený použití náhradní lokality, záložní nahrazení nebo záložní výjimky, pomocí následujících kroků:</span><span class="sxs-lookup"><span data-stu-id="a8ea0-331">In addition, you can implement a custom solution that uses best-fit fallback, replacement fallback, or exception fallback, by following these steps:</span></span>  
  
1. <span data-ttu-id="a8ea0-332">Odvodit třídu z <xref:System.Text.EncoderFallback> pro kódování operace a z <xref:System.Text.DecoderFallback> pro dekódování operace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-332">Derive a class from <xref:System.Text.EncoderFallback> for encoding operations, and from <xref:System.Text.DecoderFallback> for decoding operations.</span></span>  
  
2. <span data-ttu-id="a8ea0-333">Odvodit třídu z <xref:System.Text.EncoderFallbackBuffer> pro kódování operace a z <xref:System.Text.DecoderFallbackBuffer> pro dekódování operace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-333">Derive a class from <xref:System.Text.EncoderFallbackBuffer> for encoding operations, and from <xref:System.Text.DecoderFallbackBuffer> for decoding operations.</span></span>  
  
3. <span data-ttu-id="a8ea0-334">Pro použití náhradní lokality, pokud výjimka předdefinovaného <xref:System.Text.EncoderFallbackException> a <xref:System.Text.DecoderFallbackException> třídy nevyhovuje vašim potřebám, jako například odvodit třídu z objektu výjimky <xref:System.Exception> nebo <xref:System.ArgumentException>.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-334">For exception fallback, if the predefined <xref:System.Text.EncoderFallbackException> and <xref:System.Text.DecoderFallbackException> classes do not meet your needs, derive a class from an exception object such as <xref:System.Exception> or <xref:System.ArgumentException>.</span></span>  
  
### <a name="deriving-from-encoderfallback-or-decoderfallback"></a><span data-ttu-id="a8ea0-335">Odvozování z EncoderFallback nebo DecoderFallback</span><span class="sxs-lookup"><span data-stu-id="a8ea0-335">Deriving from EncoderFallback or DecoderFallback</span></span>  
 <span data-ttu-id="a8ea0-336">Chcete-li implementovat vlastní řešení pro použití náhradní lokality, musíte vytvořit třídu, která dědí z <xref:System.Text.EncoderFallback> pro kódování operace a z <xref:System.Text.DecoderFallback> pro dekódování operace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-336">To implement a custom fallback solution, you must create a class that inherits from <xref:System.Text.EncoderFallback> for encoding operations, and from <xref:System.Text.DecoderFallback> for decoding operations.</span></span> <span data-ttu-id="a8ea0-337">Instance těchto tříd jsou předány <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> metoda a slouží jako zprostředkovatel mezi kódování třídy a záložní implementace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-337">Instances of these classes are passed to the <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> method and serve as the intermediary between the encoding class and the fallback implementation.</span></span>  
  
 <span data-ttu-id="a8ea0-338">Když vytvoříte vlastní záložní řešení pro kodér nebo dekodér, musí implementovat následující členy:</span><span class="sxs-lookup"><span data-stu-id="a8ea0-338">When you create a custom fallback solution for an encoder or decoder, you must implement the following members:</span></span>  
  
- <span data-ttu-id="a8ea0-339"><xref:System.Text.EncoderFallback.MaxCharCount%2A?displayProperty=nameWithType> Nebo <xref:System.Text.DecoderFallback.MaxCharCount%2A?displayProperty=nameWithType> vlastnost, která vrátí maximální možný počet znaků, které může záložní přizpůsobený, nahrazení nebo výjimky vrácené nahradí jediný znak.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-339">The <xref:System.Text.EncoderFallback.MaxCharCount%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallback.MaxCharCount%2A?displayProperty=nameWithType> property, which returns the maximum possible number of characters that the best-fit, replacement, or exception fallback can return to replace a single character.</span></span> <span data-ttu-id="a8ea0-340">Pro použití náhradní lokality vlastní výjimka jeho hodnota je nula.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-340">For a custom exception fallback, its value is zero.</span></span>  
  
- <span data-ttu-id="a8ea0-341"><xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> Nebo <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> metody, které vrací vlastní <xref:System.Text.EncoderFallbackBuffer> nebo <xref:System.Text.DecoderFallbackBuffer> implementace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-341">The <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> method, which returns your custom <xref:System.Text.EncoderFallbackBuffer> or <xref:System.Text.DecoderFallbackBuffer> implementation.</span></span> <span data-ttu-id="a8ea0-342">Metoda se nazývá kodér, pokud se setká s první znak, který se nedokáže úspěšně kódování nebo dekodérem, pokud se setká s prvním bajtem, který se nedokáže úspěšně dekódovat.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-342">The method is called by the encoder when it encounters the first character that it is unable to successfully encode, or by the decoder when it encounters the first byte that it is unable to successfully decode.</span></span>  
  
### <a name="deriving-from-encoderfallbackbuffer-or-decoderfallbackbuffer"></a><span data-ttu-id="a8ea0-343">Odvozování z EncoderFallbackBuffer nebo DecoderFallbackBuffer</span><span class="sxs-lookup"><span data-stu-id="a8ea0-343">Deriving from EncoderFallbackBuffer or DecoderFallbackBuffer</span></span>  
 <span data-ttu-id="a8ea0-344">Chcete-li implementovat vlastní řešení pro použití náhradní lokality, musíte také vytvořit třídu, která dědí z <xref:System.Text.EncoderFallbackBuffer> pro kódování operace a z <xref:System.Text.DecoderFallbackBuffer> pro dekódování operace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-344">To implement a custom fallback solution, you must also create a class that inherits from <xref:System.Text.EncoderFallbackBuffer> for encoding operations, and from <xref:System.Text.DecoderFallbackBuffer> for decoding operations.</span></span> <span data-ttu-id="a8ea0-345">Instance těchto tříd jsou vráceny pomocí <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A> metodu <xref:System.Text.EncoderFallback> a <xref:System.Text.DecoderFallback> třídy.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-345">Instances of these classes are returned by the <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A> method  of the <xref:System.Text.EncoderFallback> and <xref:System.Text.DecoderFallback> classes.</span></span> <span data-ttu-id="a8ea0-346"><xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> Metoda je volána metodou kodér, pokud se setká s první znak, který není možné zakódovat, a <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> metoda je volána metodou dekodér, pokud se setká s jednoho nebo více bajtů, které není možné dekódovat.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-346">The <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> method is called by the encoder when it encounters the first character that it is not able to encode, and the <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> method is called by the decoder when it encounters one or more bytes that it is not able to decode.</span></span> <span data-ttu-id="a8ea0-347"><xref:System.Text.EncoderFallbackBuffer> a <xref:System.Text.DecoderFallbackBuffer> třídy poskytují záložní implementace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-347">The <xref:System.Text.EncoderFallbackBuffer> and <xref:System.Text.DecoderFallbackBuffer> classes provide the fallback implementation.</span></span> <span data-ttu-id="a8ea0-348">Každá instance představuje vyrovnávací paměť, která obsahuje náhradní znaky, které nahradí znak, který nemůže být kódovaný nebo sekvence bajtů, který nelze dekódovat.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-348">Each instance represents a buffer that contains the fallback characters that will replace the character that cannot be encoded or the byte sequence that cannot be decoded.</span></span>  
  
 <span data-ttu-id="a8ea0-349">Když vytvoříte vlastní záložní řešení pro kodér nebo dekodér, musí implementovat následující členy:</span><span class="sxs-lookup"><span data-stu-id="a8ea0-349">When you create a custom fallback solution for an encoder or decoder, you must implement the following members:</span></span>  
  
- <span data-ttu-id="a8ea0-350"><xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> Nebo <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-350">The <xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="a8ea0-351"><xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> je volán kodér vyrovnávací paměti pro použití náhradní lokality poskytnout informace o znak, který nelze dekódovat.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-351"><xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> is called by the encoder to provide the fallback buffer with information about the character that it cannot encode.</span></span> <span data-ttu-id="a8ea0-352">Protože znak, který má být zakódován může být náhradní pár, tato metoda je přetížen.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-352">Because the character to be encoded may be a surrogate pair, this method is overloaded.</span></span> <span data-ttu-id="a8ea0-353">Jedním přetížením je předán znak, který má být zakódován a jeho index v řetězci.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-353">One overload is passed the character to be encoded and its index in the string.</span></span> <span data-ttu-id="a8ea0-354">Druhé přetížení je předán vysoké a nízké náhradníků spolu s jejich indexu v řetězci.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-354">The second overload is passed the high and low surrogate along with its index in the string.</span></span> <span data-ttu-id="a8ea0-355"><xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> Metoda je volána metodou dekodér vyrovnávací paměti pro použití náhradní lokality poskytnout informace o bajtů, které nelze dekódovat.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-355">The <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> method is called by the decoder to provide the fallback buffer with information about the bytes that it cannot decode.</span></span> <span data-ttu-id="a8ea0-356">Této metodě se předává pole bajtů, které nelze dekódovat, spolu s index prvního bajtu.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-356">This method is passed an array of bytes that it cannot decode, along with the index of the first byte.</span></span> <span data-ttu-id="a8ea0-357">Náhradní metoda by měla vrátit `true` Pokud vyrovnávací paměti záložní verze můžete zadat přizpůsobený nebo náhradní znak nebo znaky; v opačném případě měla by vrátit `false`.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-357">The fallback method should return `true` if the fallback buffer can supply a best-fit or replacement character or characters; otherwise, it should return `false`.</span></span> <span data-ttu-id="a8ea0-358">Pro použití náhradní lokality výjimky by měl záložní metoda vyvolat výjimku.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-358">For an exception fallback, the fallback method should throw an exception.</span></span>  
  
- <span data-ttu-id="a8ea0-359"><xref:System.Text.EncoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> Nebo <xref:System.Text.DecoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> metody, které je voláno opakovaně kodér nebo dekodéru získání další znak z vyrovnávací paměti záložní verze.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-359">The <xref:System.Text.EncoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> method, which is called repeatedly by the encoder or decoder to get the next character from the fallback buffer.</span></span> <span data-ttu-id="a8ea0-360">Když byly vráceny všechny náhradní znaky, metoda by měla vrátit U + 0000.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-360">When all fallback characters have been returned, the method should return U+0000.</span></span>  
  
- <span data-ttu-id="a8ea0-361"><xref:System.Text.EncoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> Nebo <xref:System.Text.DecoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> vlastnost, která vrátí počet znaků zbývajících ve vyrovnávací paměti pro použití náhradní lokality.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-361">The <xref:System.Text.EncoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> property, which returns the number of characters remaining in the fallback buffer.</span></span>  
  
- <span data-ttu-id="a8ea0-362"><xref:System.Text.EncoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> Nebo <xref:System.Text.DecoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> metodu, která přesune aktuální pozice ve vyrovnávací paměti pro použití náhradní lokality předchozí znak.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-362">The <xref:System.Text.EncoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> method, which moves the current position in the fallback buffer to the previous character.</span></span>  
  
- <span data-ttu-id="a8ea0-363"><xref:System.Text.EncoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> Nebo <xref:System.Text.DecoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> metodu, která znovu inicializuje vyrovnávací paměti záložní verze.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-363">The <xref:System.Text.EncoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> method, which reinitializes the fallback buffer.</span></span>  
  
 <span data-ttu-id="a8ea0-364">Pokud je záložní implementace přizpůsobený záložní nebo záložní nahrazení, třídy odvozené z <xref:System.Text.EncoderFallbackBuffer> a <xref:System.Text.DecoderFallbackBuffer> také udržovat dvě instance privátní pole: přesný počet znaků ve vyrovnávací paměti; a index na další znak ve vyrovnávací paměti k vrácení.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-364">If the fallback implementation is a best-fit fallback or a replacement fallback, the classes derived from <xref:System.Text.EncoderFallbackBuffer> and <xref:System.Text.DecoderFallbackBuffer> also maintain two private instance fields: the exact number of characters in the buffer; and the index of the next character in the buffer to return.</span></span>  
  
### <a name="an-encoderfallback-example"></a><span data-ttu-id="a8ea0-365">Příklad EncoderFallback</span><span class="sxs-lookup"><span data-stu-id="a8ea0-365">An EncoderFallback Example</span></span>  
 <span data-ttu-id="a8ea0-366">Předchozí příklad náhradní použití náhradní lokality používá k nahrazení znaků Unicode, které neodpovídá znaky ASCII je hvězdička (\*).</span><span class="sxs-lookup"><span data-stu-id="a8ea0-366">An earlier example used replacement fallback to replace Unicode characters that did not correspond to ASCII characters with an asterisk (\*).</span></span> <span data-ttu-id="a8ea0-367">Následující příklad používá vlastní přizpůsobený záložní implementace místo toho k poskytují lepší mapování jiné znaky než ASCII.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-367">The following example uses a custom best-fit fallback implementation instead to provide a better mapping of non-ASCII characters.</span></span>  
  
 <span data-ttu-id="a8ea0-368">Následující kód definuje třídu s názvem `CustomMapper` , která je odvozena od <xref:System.Text.EncoderFallback> zpracování přizpůsobený mapování jiné znaky než ASCII.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-368">The following code defines a class named `CustomMapper` that is derived from <xref:System.Text.EncoderFallback> to handle the best-fit mapping of non-ASCII characters.</span></span> <span data-ttu-id="a8ea0-369">Jeho `CreateFallbackBuffer` metoda vrátí hodnotu `CustomMapperFallbackBuffer` objektu, který poskytuje <xref:System.Text.EncoderFallbackBuffer> implementace.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-369">Its `CreateFallbackBuffer` method returns a `CustomMapperFallbackBuffer` object, which provides the <xref:System.Text.EncoderFallbackBuffer> implementation.</span></span> <span data-ttu-id="a8ea0-370">`CustomMapper` Třídy používá <xref:System.Collections.Generic.Dictionary%602> objekt pro uložení mapování nepodporované znaky kódování Unicode (hodnota klíče) a jejich odpovídající znaky 8 bitů (které jsou uloženy ve dvou po sobě jdoucích bajtů v 64bitové celé číslo).</span><span class="sxs-lookup"><span data-stu-id="a8ea0-370">The `CustomMapper` class uses a <xref:System.Collections.Generic.Dictionary%602> object to store the mappings of unsupported Unicode characters (the key value) and their corresponding 8-bit characters (which are stored in two consecutive bytes in a 64-bit integer).</span></span> <span data-ttu-id="a8ea0-371">Zpřístupnění tato mapování do vyrovnávací paměti záložní verze `CustomMapper` instance je předán jako parametr, který se `CustomMapperFallbackBuffer` konstruktoru třídy.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-371">To make this mapping available to the fallback buffer, the `CustomMapper` instance is passed as a parameter to the `CustomMapperFallbackBuffer` class constructor.</span></span> <span data-ttu-id="a8ea0-372">Protože je řetězec "INF" pro znak Unicode U + 221E, nejdelší mapování `MaxCharCount` vlastnost vrací 3.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-372">Because the longest mapping is the string "INF" for the Unicode character U+221E, the `MaxCharCount` property returns 3.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/custom1.cs#5)]
 [!code-vb[Conceptual.Encoding#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/custom1.vb#5)]  
  
 <span data-ttu-id="a8ea0-373">Následující kód definuje `CustomMapperFallbackBuffer` třídu, která je odvozena od <xref:System.Text.EncoderFallbackBuffer>.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-373">The following code defines the `CustomMapperFallbackBuffer` class, which is derived from <xref:System.Text.EncoderFallbackBuffer>.</span></span> <span data-ttu-id="a8ea0-374">Slovník, který obsahuje nejlepšího mapování a která je definována v `CustomMapper` instance je k dispozici z konstruktoru třídy.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-374">The dictionary that contains best-fit mappings and that is defined in the `CustomMapper` instance is available from its class constructor.</span></span> <span data-ttu-id="a8ea0-375">Jeho `Fallback` vrátí metoda `true` Pokud některé znaky Unicode, které nelze kódování ASCII kodér jsou definovány ve slovníku mapování; v opačném případě vrátí `false`.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-375">Its `Fallback` method returns `true` if any of the Unicode characters that the ASCII encoder cannot encode are defined in the mapping dictionary; otherwise, it returns `false`.</span></span> <span data-ttu-id="a8ea0-376">Pro každý záložní, soukromého `count` proměnné označuje počet znaků, které zůstávají má být vrácen a privátní `index` proměnné označuje pozice ve vyrovnávací paměti pro řetězec `charsToReturn`, dalšího znaku vrátit.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-376">For each fallback, the private `count` variable indicates the number of characters that remain to be returned, and the private `index` variable indicates the position in the string buffer, `charsToReturn`, of the next character to return.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/custom1.cs#6)]
 [!code-vb[Conceptual.Encoding#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/custom1.vb#6)]  
  
 <span data-ttu-id="a8ea0-377">Následující kód poté vytvoří instanci `CustomMapper` objektu a předá instance tak, <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> – metoda.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-377">The following code then instantiates the `CustomMapper` object and passes an instance of it to the <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="a8ea0-378">Výstup označuje, že přizpůsobená záložní implementace úspěšně zpracuje tři znaky nepocházející ze sady ASCII v původním řetězci.</span><span class="sxs-lookup"><span data-stu-id="a8ea0-378">The output indicates that the best-fit fallback implementation successfully handles the three non-ASCII characters in the original string.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/custom1.cs#7)]
 [!code-vb[Conceptual.Encoding#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/custom1.vb#7)]  
  
## <a name="see-also"></a><span data-ttu-id="a8ea0-379">Viz také:</span><span class="sxs-lookup"><span data-stu-id="a8ea0-379">See also</span></span>

- <xref:System.Text.Encoder>
- <xref:System.Text.Decoder>
- <xref:System.Text.DecoderFallback>
- <xref:System.Text.Encoding>
- <xref:System.Text.EncoderFallback>
- [<span data-ttu-id="a8ea0-380">Globalizace a lokalizace</span><span class="sxs-lookup"><span data-stu-id="a8ea0-380">Globalization and Localization</span></span>](../../../docs/standard/globalization-localization/index.md)
