---
title: Stav a data v aplikacích Dockeru
description: Další informace k dispozici možnost pro uložení stavu v kontejnerizovaných aplikací.
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 11/23/2018
ms.openlocfilehash: 9d924f0fffca73b57626910bc3c3ca95b4478300
ms.sourcegitcommit: 30e2fe5cc4165aa6dde7218ec80a13def3255e98
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 02/13/2019
ms.locfileid: "56218746"
---
# <a name="state-and-data-in-docker-applications"></a><span data-ttu-id="6dc65-103">Stav a data v aplikacích Dockeru</span><span class="sxs-lookup"><span data-stu-id="6dc65-103">State and data in Docker applications</span></span>

<span data-ttu-id="6dc65-104">Primitivní kontejnerů je neměnnosti.</span><span class="sxs-lookup"><span data-stu-id="6dc65-104">A primitive of containers is immutability.</span></span> <span data-ttu-id="6dc65-105">Při porovnání k virtuálnímu počítači, není jako společného výskytu zmizí kontejnery.</span><span class="sxs-lookup"><span data-stu-id="6dc65-105">When compared to a VM, containers don't disappear as a common occurrence.</span></span> <span data-ttu-id="6dc65-106">Virtuální počítač se nemusí podařit v různých formách z dead procesy, přetížené procesoru nebo úplné nebo selhání disku.</span><span class="sxs-lookup"><span data-stu-id="6dc65-106">A VM might fail in various forms from dead processes, overloaded CPU, or a full or failed disk.</span></span> <span data-ttu-id="6dc65-107">Zatím Očekáváme, že virtuální počítač k dispozici a běžné, aby zajistil, že data udržovat selhání jednotky jsou jednotky RAID.</span><span class="sxs-lookup"><span data-stu-id="6dc65-107">Yet, we expect the VM to be available and RAID drives are commonplace to assure drive failures maintain data.</span></span>

<span data-ttu-id="6dc65-108">Ale kontejnerů jsou považované za instance procesů.</span><span class="sxs-lookup"><span data-stu-id="6dc65-108">However, containers are thought to be instances of processes.</span></span> <span data-ttu-id="6dc65-109">Proces nemá udržovat trvalého stavu.</span><span class="sxs-lookup"><span data-stu-id="6dc65-109">A process doesn't maintain durable state.</span></span> <span data-ttu-id="6dc65-110">I v případě, že kontejner může zapisovat do své místní úložiště, by ekvivalentní za předpokladu, že bude trvalé paměti jedné kopie za předpokladu, že instance bude po neomezeně dlouho.</span><span class="sxs-lookup"><span data-stu-id="6dc65-110">Even though a container can write to its local storage, assuming that the instance will be around indefinitely would be equivalent to assuming a single-copy memory will be durable.</span></span> <span data-ttu-id="6dc65-111">Byste měli předpokládat, že jsou kontejnery, jako jsou procesy, duplicitní, ukončeny, nebo když spravovaný pomocí orchestrátoru kontejneru, mohou být přesunuty.</span><span class="sxs-lookup"><span data-stu-id="6dc65-111">You should assume that containers, like processes, are duplicated, killed, or, when managed with a container orchestrator, they might be moved.</span></span>

<span data-ttu-id="6dc65-112">Docker používá funkci označovanou jako *překryv systému souborů* k implementaci procesu na kopírování zápisů, která ukládá všechny aktualizované informace o kořenové systému souborů kontejneru ve srovnání s původní bitové kopie, na které je založená.</span><span class="sxs-lookup"><span data-stu-id="6dc65-112">Docker uses a feature known as an *overlay file system* to implement a copy-on-write process that stores any updated information to the root file system of a container, compared to the original image on which it is based.</span></span> <span data-ttu-id="6dc65-113">Tyto změny budou ztraceny, pokud kontejner se pak odstraní ze systému.</span><span class="sxs-lookup"><span data-stu-id="6dc65-113">These changes are lost if the container is subsequently deleted from the system.</span></span> <span data-ttu-id="6dc65-114">Kontejner, proto nemá trvalého úložiště ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="6dc65-114">A container, therefore, does not have persistent storage by default.</span></span> <span data-ttu-id="6dc65-115">I když je možné uložit stav kontejneru, návrhu systému tomuto by konfliktu se zásadou architektury kontejneru.</span><span class="sxs-lookup"><span data-stu-id="6dc65-115">Although it's possible to save the state of a container, designing a system around this would be in conflict with the principle of container architecture.</span></span>

<span data-ttu-id="6dc65-116">Správa trvalých dat v aplikacích Dockeru, jsou běžná řešení:</span><span class="sxs-lookup"><span data-stu-id="6dc65-116">To manage persistent data in Docker applications, there are common solutions:</span></span>

-   <span data-ttu-id="6dc65-117">[**Datové svazky**](https://docs.docker.com/engine/tutorials/dockervolumes/) těchto připojení k hostiteli, jak je právě uvedeno.</span><span class="sxs-lookup"><span data-stu-id="6dc65-117">[**Data volumes**](https://docs.docker.com/engine/tutorials/dockervolumes/) These mount to the host, as just noted.</span></span>

-   <span data-ttu-id="6dc65-118">[**Kontejnery svazků data**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) poskytnout tyto sdílené úložiště napříč kontejnery pomocí externí kontejneru, který můžou cyklicky.</span><span class="sxs-lookup"><span data-stu-id="6dc65-118">[**Data volume containers**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) These provide shared storage across containers, using an external container that can cycle.</span></span>

-   <span data-ttu-id="6dc65-119">[**Moduly plug-in svazku**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) tyto připojit svazky do vzdáleného umístění, poskytování dlouhodobé trvalosti.</span><span class="sxs-lookup"><span data-stu-id="6dc65-119">[**Volume Plugins**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) These mount volumes to remote locations, providing long-term persistence.</span></span>

-   <span data-ttu-id="6dc65-120">**Vzdálené zdroje dat.** příklady zahrnují databáze SQL a ne SQL nebo službám, jako je Redis do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="6dc65-120">**Remote data sources** Examples include SQL and NO-SQL databases or cache services like Redis.</span></span>

-   <span data-ttu-id="6dc65-121">[**Azure Storage**](https://docs.microsoft.com/azure/storage/) to poskytuje platformu Distribuovatelný geograficky jako služba (PaaS) úložiště, poskytuje tak to nejlepší z kontejnerů jako dlouhodobé trvalosti.</span><span class="sxs-lookup"><span data-stu-id="6dc65-121">[**Azure Storage**](https://docs.microsoft.com/azure/storage/) This provides geo distributable platform as a service (PaaS) storage, providing the best of containers as long-term persistence.</span></span>

<span data-ttu-id="6dc65-122">Datové svazky jsou speciálně určené adresáře v rámci jednoho nebo více kontejnerů, které obcházejí [sjednocení systému souborů](https://docs.docker.com/glossary/?term=Union%20file%20system).</span><span class="sxs-lookup"><span data-stu-id="6dc65-122">Data volumes are specially designated directories within one or more containers that bypass the [Union File System](https://docs.docker.com/glossary/?term=Union%20file%20system).</span></span> <span data-ttu-id="6dc65-123">Datové svazky jsou navržené tak, zachovat data, nezávisle na kontejneru životního cyklu.</span><span class="sxs-lookup"><span data-stu-id="6dc65-123">Data volumes are designed to maintain data, independent of the container's life cycle.</span></span> <span data-ttu-id="6dc65-124">Docker proto nikdy automaticky odstraní svazky při odstranit kontejner, ani bude "uvolňování paměti shromažďovat" svazky, které jsou již neodkazuje kontejneru.</span><span class="sxs-lookup"><span data-stu-id="6dc65-124">Docker therefore never automatically deletes volumes when you remove a container, nor will it "garbage collect" volumes that are no longer referenced by a container.</span></span> <span data-ttu-id="6dc65-125">Hostitelský operační systém můžete procházet a upravovat data v žádné svazky volně, což je další důvod, proč použít datové svazky opatrně.</span><span class="sxs-lookup"><span data-stu-id="6dc65-125">The host operating system can browse and edit the data in any volume freely, which is just another reason to use data volumes sparingly.</span></span>

<span data-ttu-id="6dc65-126">A [datový kontejner svazků](https://docs.docker.com/glossary/?term=volume) je vylepšením oproti regulární datové svazky.</span><span class="sxs-lookup"><span data-stu-id="6dc65-126">A [data volume container](https://docs.docker.com/glossary/?term=volume) is an improvement over regular data volumes.</span></span> <span data-ttu-id="6dc65-127">Je v podstatě neaktivní kontejner, který má jeden nebo více datových svazků vytvořených v rámci jeho (jak je popsáno dříve).</span><span class="sxs-lookup"><span data-stu-id="6dc65-127">It is essentially a dormant container that has one or more data volumes created within it (as described earlier).</span></span> <span data-ttu-id="6dc65-128">Kontejner svazků dat z centrální přípojný bod poskytuje přístup k kontejnery.</span><span class="sxs-lookup"><span data-stu-id="6dc65-128">The data volume container provides access to containers from a central mount point.</span></span> <span data-ttu-id="6dc65-129">Výhodou této metody přístupu je, že abstrahuje umístění původní data provádění datový kontejner logické přípojného bodu.</span><span class="sxs-lookup"><span data-stu-id="6dc65-129">The benefit of this method of access is that it abstracts the location of the original data, making the data container a logical mount point.</span></span> <span data-ttu-id="6dc65-130">Umožňuje také přístup k datové svazky kontejneru na vytvořeno a zničeno při zachování dat trvalé v kontejneru vyhrazené kontejnery "aplikace".</span><span class="sxs-lookup"><span data-stu-id="6dc65-130">It also allows "application" containers accessing the data container volumes to be created and destroyed while keeping the data persistent in a dedicated container.</span></span>

<span data-ttu-id="6dc65-131">Obrázek 4 až 5 ukazuje regulárních svazky Dockeru, můžete umístit na úložiště mimo kontejnery sami, ale v rámci hranic fyzický server nebo virtuální počítač hostitele.</span><span class="sxs-lookup"><span data-stu-id="6dc65-131">Figure 4-5 shows that regular Docker volumes can be placed on storage out of the containers themselves but within the host server/VM physical boundaries.</span></span> <span data-ttu-id="6dc65-132">*Docker svazky nemají možnost používat jeden hostitelský server/VM svazku*.</span><span class="sxs-lookup"><span data-stu-id="6dc65-132">*Docker volumes don't have the ability to use a volume from one host server/VM to another*.</span></span>

![](./media/image5.png)

<span data-ttu-id="6dc65-133">Obrázek 4 – 5: Datové svazky a externích zdrojů dat pro kontejnery aplikací/kontejnery</span><span class="sxs-lookup"><span data-stu-id="6dc65-133">Figure 4-5: Data volumes and external data sources for containers apps/containers</span></span>

<span data-ttu-id="6dc65-134">Lokalizovat ke správě dat sdílet mezi kontejnery, které běží na samostatných fyzických hostitelů, doporučujeme je velmi riskantní používat svazky pro obchodní data není-li hostitele Docker pevnou hostitelů/virtuálních počítačů, protože při použití kontejneru Dockeru do orchestrator Očekává se, že kontejnery přesunout z jednoho do jiného hostitele, v závislosti na optimalizace, které se provádí clusteru.</span><span class="sxs-lookup"><span data-stu-id="6dc65-134">Due to the inability to manage data shared between containers that run on separate physical hosts, it is recommended that you not use volumes for business data unless the Docker host is a fixed host/VM, because when using Docker containers in an orchestrator, containers are expected to be moved from one to another host, depending on the optimizations to be performed by the cluster.</span></span>

<span data-ttu-id="6dc65-135">Proto pravidelně datové svazky jsou mechanismus dobrý postup při trasovací soubory, dočasné soubory nebo žádné podobné informace, které nebudou by ovlivnily konzistenci dat obchodní Pokud nebo při přesunutí kontejnerů napříč více hostiteli.</span><span class="sxs-lookup"><span data-stu-id="6dc65-135">Therefore, regular data volumes are a good mechanism to work with trace files, temporal files, or any similar concept that won't affect the business data consistency if or when your containers are moved across multiple hosts.</span></span>

<span data-ttu-id="6dc65-136">[Moduly plug-in svazku](https://docs.docker.com/engine/extend/plugins_volume/) poskytují data na všech hostitelích v clusteru.</span><span class="sxs-lookup"><span data-stu-id="6dc65-136">[Volume plug-ins](https://docs.docker.com/engine/extend/plugins_volume/) provide data across all hosts in a cluster.</span></span> <span data-ttu-id="6dc65-137">I když ne všechny moduly plug-in svazku se vytvoří stejnou měrou, moduly plug-in svazku obvykle poskytují externalized trvalé spolehlivé úložiště z neměnné kontejnerů.</span><span class="sxs-lookup"><span data-stu-id="6dc65-137">Although not all volume plug-ins are created equally, volume plug-ins typically provide externalized persistent reliable storage from the immutable containers.</span></span>

<span data-ttu-id="6dc65-138">Vzdálené zdroje dat. a mezipamětí, jako je SQL Database, DocumentDB nebo vzdálené mezipaměti, jako jsou Redis by být stejný jako vývoj bez kontejnery.</span><span class="sxs-lookup"><span data-stu-id="6dc65-138">Remote data sources and caches like SQL Database, DocumentDB, or a remote cache like Redis would be the same as developing without containers.</span></span> <span data-ttu-id="6dc65-139">Toto je jedním ze způsobů upřednostňovaný a prověřených, k ukládání dat obchodní aplikace.</span><span class="sxs-lookup"><span data-stu-id="6dc65-139">This is one of the preferred, and proven, ways to store business application data.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="6dc65-140">[Předchozí](monolithic-applications.md)
>[další](soa-applications.md)</span><span class="sxs-lookup"><span data-stu-id="6dc65-140">[Previous](monolithic-applications.md)
[Next](soa-applications.md)</span></span>