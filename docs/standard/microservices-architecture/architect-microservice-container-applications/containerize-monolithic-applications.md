---
title: Kontejnerizování monolitických aplikací
description: Kontejnerizování monolitických aplikací, i když není získáte všechny výhody z architektury mikroslužeb, je důležité nasazení výhod, které může doručit okamžitě.
ms.date: 09/20/2018
ms.openlocfilehash: 061afe86e0d38f058becde2b3afdb45b4428517a
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/15/2019
ms.locfileid: "65640819"
---
# <a name="containerizing-monolithic-applications"></a><span data-ttu-id="0f5e3-103">Kontejnerizování monolitických aplikací</span><span class="sxs-lookup"><span data-stu-id="0f5e3-103">Containerizing monolithic applications</span></span>

<span data-ttu-id="0f5e3-104">Můžete chtít sestavit jeden, monolithically nasazené webové aplikaci nebo službě a nasadit ho jako kontejner.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-104">You might want to build a single, monolithically deployed web application or service and deploy it as a container.</span></span> <span data-ttu-id="0f5e3-105">Samotná aplikace nemusí být interně monolitické, ale strukturované jako několik knihoven, komponenty nebo dokonce vrstvy (aplikační vrstva, vrstva domény, vrstvy přístupu k datům atd.).</span><span class="sxs-lookup"><span data-stu-id="0f5e3-105">The application itself might not be internally monolithic, but structured as several libraries, components, or even layers (application layer, domain layer, data-access layer, etc.).</span></span> <span data-ttu-id="0f5e3-106">Externě, je ale jedním kontejnerem – jeden proces, jednu webovou aplikaci nebo jedinou službou.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-106">Externally, however, it's a single container—a single process, a single web application, or a single service.</span></span>

<span data-ttu-id="0f5e3-107">Správa tohoto modelu, nasadíte jedním kontejnerem pro reprezentaci aplikace.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-107">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="0f5e3-108">Pokud chcete zvýšit kapacitu, horizontální navýšení kapacity, to znamená, stačí přidat více kopií s nástroji pro vyrovnávání zatížení v popředí.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-108">To increase capacity, you scale out, that is, just add more copies with a load balancer in front.</span></span> <span data-ttu-id="0f5e3-109">Jednoduchost pochází z jednoho nasazení ve virtuální počítač s jedním kontejnerem nebo Správa.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-109">The simplicity comes from managing a single deployment in a single container or VM.</span></span>

![Monolitické kontejnerizovanou aplikaci s nejvíce ze svých funkcí v rámci jednoho kontejneru s interní vrstvy nebo knihovny, a škáluje naklonováním kontejneru na víc serverech nebo virtuálních počítačích](./media/image1.png)

<span data-ttu-id="0f5e3-111">**Obrázek 4-1**.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-111">**Figure 4-1**.</span></span> <span data-ttu-id="0f5e3-112">Příklad architektury kontejnerizované monolitické aplikace</span><span class="sxs-lookup"><span data-stu-id="0f5e3-112">Example of the architecture of a containerized monolithic application</span></span>

<span data-ttu-id="0f5e3-113">V jednotlivých kontejnerech může obsahovat více komponent, knihovny nebo interní vrstvy, jak je znázorněno na obrázku 4-1.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-113">You can include multiple components, libraries, or internal layers in each container, as illustrated in Figure 4-1.</span></span> <span data-ttu-id="0f5e3-114">Však může tento model monolitické porušovat principu kontejneru "kontejner nemá jednou z věcí a dělá v jednom procesu", ale může být pro některé případy ok.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-114">However, this monolithic pattern might conflict with the container principle "a container does one thing, and does it in one process", but might be ok for some cases.</span></span>

<span data-ttu-id="0f5e3-115">Nevýhodou tento přístup bude zřejmé, pokud aplikace poroste, požadují škálování.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-115">The downside of this approach becomes evident if the application grows, requiring it to scale.</span></span> <span data-ttu-id="0f5e3-116">Pokud celou aplikaci je možné škálovat, není ve skutečnosti k problému.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-116">If the entire application can scale, it isn't really a problem.</span></span> <span data-ttu-id="0f5e3-117">Ve většině případů jsou několika částí aplikace body potlačení, že nutnosti škálování, zatímco ostatní součásti jsou použít menší.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-117">However, in most cases, just a few parts of the application are the choke points that requiring scaling, while other components are used less.</span></span>

<span data-ttu-id="0f5e3-118">Například v aplikaci elektronického obchodování typické je pravděpodobně muset škálovat subsystému informace o produktu, protože mnoho více zákazníkům procházet produktů, než je koupit.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-118">For example, in a typical e-commerce application, you likely need to scale the product information subsystem, because many more customers browse products than purchase them.</span></span> <span data-ttu-id="0f5e3-119">Větší počet zákazníků pomocí nákupního košíku, než použití kanálu platby.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-119">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="0f5e3-120">Méně zákazníky přidat komentáře nebo zobrazení jejich historie nákupů.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-120">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="0f5e3-121">A může mít pouze několik zaměstnanců, kteří potřebují spravovat obsah a marketingových kampaní.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-121">And you might have only a handful of employees, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="0f5e3-122">Pokud převedete monolitický návrh, je celý kód pro tyto různé úlohy nasadit více než jednou a škálovat na stejné úrovni.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-122">If you scale the monolithic design, all the code for these different tasks is deployed multiple times and scaled at the same grade.</span></span>

<span data-ttu-id="0f5e3-123">Existuje několik způsobů, jak škálovat duplikaci aplikace vodorovné rozdělení různých oblastí aplikace a dělení podobné obchodních konceptů nebo data.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-123">There are multiple ways to scale an application-horizontal duplication, splitting different areas of the application, and partitioning similar business concepts or data.</span></span> <span data-ttu-id="0f5e3-124">Ale kromě problém škálování všechny součásti, vyžadují změny jedné komponenty kompletní opakované celé aplikace a dokončení opětovné nasazení všech instancí.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-124">But, in addition to the problem of scaling all components, changes to a single component require complete retesting of the entire application, and a complete redeployment of all the instances.</span></span>

<span data-ttu-id="0f5e3-125">Ale monolitického přístupu dochází, protože vývoje aplikace je zpočátku snazší než u metod mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-125">However, the monolithic approach is common, because the development of the application is initially easier than for microservices approaches.</span></span> <span data-ttu-id="0f5e3-126">Mnoho organizací proto vývoj pomocí tento architektonický přístup umožňuje vytvářet.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-126">Thus, many organizations develop using this architectural approach.</span></span> <span data-ttu-id="0f5e3-127">Přestože některé organizace mají kvalitní měli dostatek výsledky, ostatní omezení výskytu.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-127">While some organizations have had good enough results, others are hitting limits.</span></span> <span data-ttu-id="0f5e3-128">Mnoho organizací určená svým aplikacím pomocí tohoto modelu, protože nástroje a infrastruktura pro změnit příliš obtížné umožňuje vytvářet architektury orientované na služby (SOA) před lety a nenalezli potřebu – dokud zvětšoval aplikace.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-128">Many organizations designed their applications using this model because tools and infrastructure made it too difficult to build service-oriented architectures (SOA) years ago, and they did not see the need-until the application grew.</span></span>

<span data-ttu-id="0f5e3-129">Každý server z hlediska infrastruktury, můžete spustit mnoho aplikací v rámci stejného hostitele a mají přijatelné poměr efektivitu využití prostředků, jak ukazuje obrázek 4-2.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-129">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in resources usage, as shown in Figure 4-2.</span></span>

![Hostitele můžete spustit několik monolitické aplikace, každý z nich na samostatný kontejner.](./media/image2.png)

<span data-ttu-id="0f5e3-131">**Obrázek 4-2**.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-131">**Figure 4-2**.</span></span> <span data-ttu-id="0f5e3-132">Monolitického přístupu: Hostiteli s více aplikacemi, každou aplikaci spuštěnou jako kontejner</span><span class="sxs-lookup"><span data-stu-id="0f5e3-132">Monolithic approach: Host running multiple apps, each app running as a container</span></span>

<span data-ttu-id="0f5e3-133">Monolitické aplikace v Microsoft Azure se dá nasadit pomocí vyhrazených virtuálních počítačů pro každou instanci.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-133">Monolithic applications in Microsoft Azure can be deployed using dedicated VMs for each instance.</span></span> <span data-ttu-id="0f5e3-134">Kromě toho používání [škálovací sady virtuálních počítačů Azure](https://azure.microsoft.com/documentation/services/virtual-machine-scale-sets/), je možné snadno škálovat virtuální počítače.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-134">Additionally, using [Azure virtual machine scale sets](https://azure.microsoft.com/documentation/services/virtual-machine-scale-sets/), you can easily scale the VMs.</span></span> <span data-ttu-id="0f5e3-135">[Azure App Service](https://azure.microsoft.com/services/app-service/) můžete také spustit monolitické aplikace a snadno škálovat instance, aniž by bylo potřeba spravovat virtuální počítače.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-135">[Azure App Service](https://azure.microsoft.com/services/app-service/) can also run monolithic applications and easily scale instances without requiring you to manage the VMs.</span></span> <span data-ttu-id="0f5e3-136">Od verze 2016 Azure App Services spuštění jedné instance kontejnerů Dockeru, zjednodušit nasazování.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-136">Since 2016, Azure App Services can run single instances of Docker containers as well, simplifying deployment.</span></span>

<span data-ttu-id="0f5e3-137">Jako prostředí QA nebo omezeném produkčním prostředí můžete nasadit hostitele Docker více virtuálních počítačů a vyvážit je pomocí Azure balancer, jak ukazuje obrázek 4-3.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-137">As a QA environment or a limited production environment, you can deploy multiple Docker host VMs and balance them using the Azure balancer, as shown in Figure 4-3.</span></span> <span data-ttu-id="0f5e3-138">To vám umožní spravovat škálování s hrubým intervalem přístup, protože se nachází v rámci jednoho kontejneru celou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-138">This lets you manage scaling with a coarse-grain approach, because the whole application lives within a single container.</span></span>

![Několik hostitelů, každý z nich spouštění kontejneru s monolitickými aplikacemi.](./media/image3.png)

<span data-ttu-id="0f5e3-140">**Obrázek 4-3**.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-140">**Figure 4-3**.</span></span> <span data-ttu-id="0f5e3-141">Příklad více hostitelů vertikálním navýšení kapacity aplikace jednoho kontejneru</span><span class="sxs-lookup"><span data-stu-id="0f5e3-141">Example of multiple hosts scaling up a single container application</span></span>

<span data-ttu-id="0f5e3-142">Nasazení do různých hostitelů lze spravovat pomocí nasazení tradiční techniky.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-142">Deployment to the various hosts can be managed with traditional deployment techniques.</span></span> <span data-ttu-id="0f5e3-143">Hostitele docker můžete spravovat pomocí příkazů, jako jsou `docker run` nebo `docker-compose` provést ručně nebo pomocí automatizace, jako jsou průběžné doručování (CD) kanálů.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-143">Docker hosts can be managed with commands like `docker run` or `docker-compose` performed manually, or through automation such as continuous delivery (CD) pipelines.</span></span>

## <a name="deploying-a-monolithic-application-as-a-container"></a><span data-ttu-id="0f5e3-144">Nasazení monolitické aplikace jako kontejner</span><span class="sxs-lookup"><span data-stu-id="0f5e3-144">Deploying a monolithic application as a container</span></span>

<span data-ttu-id="0f5e3-145">Existují výhody použití kontejnerů ke správě nasazení monolitických aplikací.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-145">There are benefits to using containers to manage monolithic application deployments.</span></span> <span data-ttu-id="0f5e3-146">Škálování instance kontejneru je mnohem jednodušší a rychlejší než nasazení dalších virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-146">Scaling container instances is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="0f5e3-147">I když používáte škálovací sady virtuálních počítačů, virtuálních počítačů trvat dobu spuštění.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-147">Even if you use virtual machine scale sets, VMs take time to start.</span></span> <span data-ttu-id="0f5e3-148">Po nasazení jako instance tradiční aplikace, aby místo kontejnery, nastavení aplikace se spravuje v rámci virtuálního počítače, což není ideální.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-148">When deployed as traditional application instances instead of containers, the configuration of the application is managed as part of the VM, which isn't ideal.</span></span>

<span data-ttu-id="0f5e3-149">Nasazení aktualizací, je mnohem rychlejší imagí Dockeru a efektivní sítě.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-149">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="0f5e3-150">Image dockeru obvykle spustí během několika sekund, což urychluje uvedení.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-150">Docker images typically start in seconds, which speeds rollouts.</span></span> <span data-ttu-id="0f5e3-151">Opětné instance image Dockeru je stejně jednoduché jako vydání `docker stop` příkazů a obvykle dokončí za kratší dobu než druhý.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-151">Tearing down a Docker image instance is as easy as issuing a `docker stop` command, and typically completes in less than a second.</span></span>

<span data-ttu-id="0f5e3-152">Vzhledem k tomu, že kontejnery jsou neměnné záměrné, potřebujete nikdy starat o poškozená virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-152">Because containers are immutable by design, you never need to worry about corrupted VMs.</span></span> <span data-ttu-id="0f5e3-153">Naproti tomu skripty pro aktualizaci pro virtuální počítač může být zapomenout pro některé konkrétní konfiguraci nebo soubor na disku.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-153">In contrast, update scripts for a VM might forget to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="0f5e3-154">Zatímco monolitických aplikací můžete využívat Docker, jsme už zasahuje pouze na výhody.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-154">While monolithic applications can benefit from Docker, we're touching only on the benefits.</span></span> <span data-ttu-id="0f5e3-155">Další výhody správy kontejnerů, pocházejí z nasazení s orchestrátory kontejnerů, které spravují různé instance a životního cyklu každou instanci kontejneru.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-155">Additional benefits of managing containers come from deploying with container orchestrators, which manage the various instances and lifecycle of each container instance.</span></span> <span data-ttu-id="0f5e3-156">Rozdělení monolitické aplikace do subsystémů, které můžete škálovat, vyvinuli a nasazují samostatně je vstupním bodem do sféry mikroslužeb.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-156">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

## <a name="publishing-a-single-container-based-application-to-azure-app-service"></a><span data-ttu-id="0f5e3-157">Publikování aplikace na základě jednoho kontejneru do služby Azure App Service</span><span class="sxs-lookup"><span data-stu-id="0f5e3-157">Publishing a single-container-based application to Azure App Service</span></span>

<span data-ttu-id="0f5e3-158">Jestli se má získat ověření kontejneru nasadit do Azure nebo když se aplikace nachází pouze jeden kontejner aplikace, služby Azure App Service nabízí skvělý způsob, jak poskytnout škálovatelných služeb na základě jednoho kontejneru.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-158">Whether you want to get validation of a container deployed to Azure or when an application is simply a single-container application, Azure App Service provides a great way to provide scalable single-container-based services.</span></span> <span data-ttu-id="0f5e3-159">Pomocí služby Azure App Service je jednoduché.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-159">Using Azure App Service is simple.</span></span> <span data-ttu-id="0f5e3-160">Poskytuje skvělé integrace s úložištěm Git, abyste usnadnili snadnou využít váš kód, sestavte ho v sadě Visual Studio a nasaďte ji přímo do Azure.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-160">It provides great integration with Git to make it easy to take your code, build it in Visual Studio, and deploy it directly to Azure.</span></span>

![Průvodce pro publikování aplikace jednoho kontejneru do služby Azure App Service ze sady Visual Studio](./media/image4.png)

<span data-ttu-id="0f5e3-162">**Obrázek 4-4**.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-162">**Figure 4-4**.</span></span> <span data-ttu-id="0f5e3-163">Publikování aplikace jeden kontejner do služby Azure App Service ze sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="0f5e3-163">Publishing a single-container application to Azure App Service from Visual Studio</span></span>

<span data-ttu-id="0f5e3-164">Bez Dockeru v případě potřeby další možnosti, rozhraní nebo závislosti, které nejsou podporované ve službě Azure App Service, jste měli počkat, až tým Azure aktualizovat tyto závislosti ve službě App Service.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-164">Without Docker, if you needed other capabilities, frameworks, or dependencies that aren't supported in Azure App Service, you had to wait until the Azure team updated those dependencies in App Service.</span></span> <span data-ttu-id="0f5e3-165">Nebo jste museli přepínat do jiných služeb, jako je Azure Service Fabric, Azure Cloud Services nebo dokonce i virtuální počítače, kde jste měli další ovládací prvek a můžete nainstalovat na požadovanou součást nebo architekturu pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-165">Or you had to switch to other services like Azure Service Fabric, Azure Cloud Services, or even VMs, where you had further control and you could install a required component or framework for your application.</span></span>

<span data-ttu-id="0f5e3-166">Podpora kontejnerů v sadě Visual Studio 2017 dává možnost zahrnout cokoliv, co chcete v prostředí pro vaše aplikace, jak ukazuje obrázek 4-4.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-166">Container support in Visual Studio 2017 gives you the ability to include whatever you want in your application environment, as shown in Figure 4-4.</span></span> <span data-ttu-id="0f5e3-167">Vzhledem k tomu, že ji používáte v kontejneru, pokud chcete přidat závislost pro vaši aplikaci, můžete zahrnout závislost image soubor Dockerfile nebo Dockeru.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-167">Since you're running it in a container, if you add a dependency to your application, you can include the dependency in your Dockerfile or Docker image.</span></span>

<span data-ttu-id="0f5e3-168">Jak jsou také uvedeny v obrázek 4-4 tok publikovat posune bitovou kopii prostřednictvím registru kontejneru.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-168">As also shown in Figure 4-4, the publish flow pushes an image through a container registry.</span></span> <span data-ttu-id="0f5e3-169">To může být služba Azure Container Registry (registr zavřít svá nasazení v Azure a zabezpečené pomocí skupin Azure Active Directory a účty) nebo jakékoli jiné registru Dockeru, jako je Docker Hubu nebo v místním registru.</span><span class="sxs-lookup"><span data-stu-id="0f5e3-169">This can be the Azure Container Registry (a registry close to your deployments in Azure and secured by Azure Active Directory groups and accounts), or any other Docker registry, like Docker Hub or an on-premises registry.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="0f5e3-170">[Předchozí](index.md)
>[další](docker-application-state-data.md)</span><span class="sxs-lookup"><span data-stu-id="0f5e3-170">[Previous](index.md)
[Next](docker-application-state-data.md)</span></span>
