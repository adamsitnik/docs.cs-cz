---
title: Aspekty architektury bez serveru – aplikace bez serveru
description: Vysvětlení obtíže spojené s aplikační architektura založená na aplikace bez serveru, správu stavu a trvalé úložiště, pokud chcete škálovat, protokolování, sledování a diagnostiky.
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: d1654375be1c815d1f46bd8983c38baf063eee04
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/15/2019
ms.locfileid: "65643587"
---
# <a name="serverless-architecture-considerations"></a><span data-ttu-id="64f6a-103">Důležité informace o bezserverové architektuře</span><span class="sxs-lookup"><span data-stu-id="64f6a-103">Serverless architecture considerations</span></span>

<span data-ttu-id="64f6a-104">Přijetí architektury bez serveru jsou dostupné určité problémy.</span><span class="sxs-lookup"><span data-stu-id="64f6a-104">Adopting a serverless architecture does come with certain challenges.</span></span> <span data-ttu-id="64f6a-105">Tato část popisuje některé z běžnějších požadavky je potřeba vědět.</span><span class="sxs-lookup"><span data-stu-id="64f6a-105">This section explores some of the more common considerations to be aware of.</span></span> <span data-ttu-id="64f6a-106">Všechny tyto výzvy mají řešení.</span><span class="sxs-lookup"><span data-stu-id="64f6a-106">All of these challenges have solutions.</span></span> <span data-ttu-id="64f6a-107">Stejně jako u všech možností architektur, je třeba rozhodnutí do prostředí bez serveru až po pečlivého zvážení výhody a nevýhody.</span><span class="sxs-lookup"><span data-stu-id="64f6a-107">As with all architecture choices, the decision to go serverless should be made only after carefully considering the pros and cons.</span></span> <span data-ttu-id="64f6a-108">V závislosti na potřebách vaší aplikace můžete rozhodnout, že bez serveru implementace není má to pravé řešení pro určité součásti.</span><span class="sxs-lookup"><span data-stu-id="64f6a-108">Depending on the needs of your application, you may decide a serverless implementation isn't the right solution for certain components.</span></span>

## <a name="managing-state"></a><span data-ttu-id="64f6a-109">Správa stavu</span><span class="sxs-lookup"><span data-stu-id="64f6a-109">Managing state</span></span>

<span data-ttu-id="64f6a-110">Funkce bez serveru, stejně jako u mikroslužby v obecné, jsou bezstavové ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="64f6a-110">Serverless functions, as with microservices in general, are stateless by default.</span></span> <span data-ttu-id="64f6a-111">Nejkonkrétnější – vyhněte stavu umožňuje bez serveru bude dočasné pro horizontální navýšení kapacity a zajistit odolnost proti chybám bez centrální bod selhání.</span><span class="sxs-lookup"><span data-stu-id="64f6a-111">Avoiding state enables serverless to be ephemeral, to scale out, and to provide resiliency without a central point of failure.</span></span> <span data-ttu-id="64f6a-112">V některých případech vyžadovat obchodních procesů stavu.</span><span class="sxs-lookup"><span data-stu-id="64f6a-112">In some circumstances, business processes require state.</span></span> <span data-ttu-id="64f6a-113">Pokud váš proces vyžaduje stav, máte dvě možnosti.</span><span class="sxs-lookup"><span data-stu-id="64f6a-113">If your process requires state, you have two options.</span></span> <span data-ttu-id="64f6a-114">Při přijetí modelu jiné než v případě bez serveru a práci s samostatná služba, která poskytuje stav.</span><span class="sxs-lookup"><span data-stu-id="64f6a-114">You can adopt a model other than serverless, or interact with a separate service that provides state.</span></span> <span data-ttu-id="64f6a-115">Přidání stavu může zkomplikovat řešení znesnadnit škálování a potenciálně vytvořit jediný bod selhání.</span><span class="sxs-lookup"><span data-stu-id="64f6a-115">Adding state can complicate the solution and make it harder to scale, and potentially create a single point of failure.</span></span> <span data-ttu-id="64f6a-116">Pečlivě zvažte, jestli vaše funkce požaduje naprosto stavu.</span><span class="sxs-lookup"><span data-stu-id="64f6a-116">Carefully consider whether your function absolutely requires state.</span></span> <span data-ttu-id="64f6a-117">Pokud odpověď je "Ano", určete, zda stále dává smysl pro implementaci s architekturou bez serveru.</span><span class="sxs-lookup"><span data-stu-id="64f6a-117">If the answer is "yes," determine whether it still makes sense to implement it with serverless.</span></span>

<span data-ttu-id="64f6a-118">Existuje několik řešení, která přijme stavu bez negativního vlivu výhod prostředí bez serveru.</span><span class="sxs-lookup"><span data-stu-id="64f6a-118">There are several solutions to adopt state without compromising the benefits of serverless.</span></span> <span data-ttu-id="64f6a-119">Mezi další oblíbená řešení, patří:</span><span class="sxs-lookup"><span data-stu-id="64f6a-119">Some of the more popular solutions include:</span></span>

* <span data-ttu-id="64f6a-120">Použijte dočasné úložiště dat nebo distribuované mezipaměti, jako jsou Redis</span><span class="sxs-lookup"><span data-stu-id="64f6a-120">Use a temporary data store or distributed cache, like Redis</span></span>
* <span data-ttu-id="64f6a-121">Store stavu v databázi, jako je SQL nebo cosmos DB</span><span class="sxs-lookup"><span data-stu-id="64f6a-121">Store state in a database, like SQL or CosmosDB</span></span>
* <span data-ttu-id="64f6a-122">Zpracování stavu prostřednictvím modulu pracovního postupu, jako je odolná služba functions</span><span class="sxs-lookup"><span data-stu-id="64f6a-122">Handle state through a workflow engine like durable functions</span></span>

<span data-ttu-id="64f6a-123">Dolní řádek je, že byste měli vědět o nutnosti jakékoli správy stavu v rámci procesy, které byste chtěli provádět s architekturou bez serveru.</span><span class="sxs-lookup"><span data-stu-id="64f6a-123">The bottom line is that you should be aware of the need for any state management within processes you're considering to implement with serverless.</span></span>

## <a name="long-running-processes"></a><span data-ttu-id="64f6a-124">Dlouho běžící procesy</span><span class="sxs-lookup"><span data-stu-id="64f6a-124">Long-running processes</span></span>

<span data-ttu-id="64f6a-125">Spolehněte se na procesy, které se dočasné řadu výhod prostředí bez serveru.</span><span class="sxs-lookup"><span data-stu-id="64f6a-125">Many benefits of serverless rely on the processes being ephemeral.</span></span> <span data-ttu-id="64f6a-126">Krátká doba spuštění usnadňují bez serveru zprostředkovatele tím se uvolní prostředky, jak funguje funkce end a sdílené složky v hostitelích.</span><span class="sxs-lookup"><span data-stu-id="64f6a-126">Short run times make it easier for the serverless provider to free up resources as functions end and share functions across hosts.</span></span> <span data-ttu-id="64f6a-127">Většina poskytovatelů cloudových služeb omezení celkové doby, kterou funkci můžete spustit na přibližně 10 minut.</span><span class="sxs-lookup"><span data-stu-id="64f6a-127">Most cloud providers limit the total time your function can run to around 10 minutes.</span></span> <span data-ttu-id="64f6a-128">Pokud váš proces může trvat delší dobu, můžete zvážit alternativní implementace.</span><span class="sxs-lookup"><span data-stu-id="64f6a-128">If your process may take longer, you might consider an alternative implementation.</span></span>

<span data-ttu-id="64f6a-129">Existuje pár výjimek a řešení.</span><span class="sxs-lookup"><span data-stu-id="64f6a-129">There are a few exceptions and solutions.</span></span> <span data-ttu-id="64f6a-130">Jedním řešením může být ke vstupu do menších komponent, které jednotlivě trvat kratší dobu pro spuštění procesu.</span><span class="sxs-lookup"><span data-stu-id="64f6a-130">One solution may be to break your process into smaller components that individually take less time to run.</span></span> <span data-ttu-id="64f6a-131">Pokud váš proces běží dlouho z důvodu závislosti, můžete také zvážit asynchronního pracovního postupu pomocí řešení, jako je odolná služba functions.</span><span class="sxs-lookup"><span data-stu-id="64f6a-131">If your process runs long because of dependencies, you can also consider an asynchronous workflow using a solution like durable functions.</span></span> <span data-ttu-id="64f6a-132">Odolná služba functions pozastavit a Udržovat stav procesu, zatímco čekáte na externí proces dokončete.</span><span class="sxs-lookup"><span data-stu-id="64f6a-132">Durable functions pause and maintain the state of your process while it's waiting on an external process to finish.</span></span> <span data-ttu-id="64f6a-133">Asynchronní zpracování snižuje čas, kdy se skutečný proces běží.</span><span class="sxs-lookup"><span data-stu-id="64f6a-133">Asynchronous handling reduces the time the actual process runs.</span></span>

## <a name="startup-time"></a><span data-ttu-id="64f6a-134">Čas spuštění</span><span class="sxs-lookup"><span data-stu-id="64f6a-134">Startup time</span></span>

<span data-ttu-id="64f6a-135">Jeden potenciální problém s implementacemi bez serveru je čas spuštění.</span><span class="sxs-lookup"><span data-stu-id="64f6a-135">One potential concern with serverless implementations is startup time.</span></span> <span data-ttu-id="64f6a-136">Pokud chcete ušetřit prostředky, vytvořit mnoho poskytovatelů bez serveru infrastruktury "na vyžádání."</span><span class="sxs-lookup"><span data-stu-id="64f6a-136">To conserve resources, many serverless providers create infrastructure "on demand."</span></span> <span data-ttu-id="64f6a-137">Když funkci bez serveru se aktivuje po určitou dobu, prostředky pro hostování funkce možná muset vytvořit ani restartovat.</span><span class="sxs-lookup"><span data-stu-id="64f6a-137">When a serverless function is triggered after a period of time, the resources to host the function may need to be created or restarted.</span></span> <span data-ttu-id="64f6a-138">V některých případech může způsobit zpoždění několik sekund souvisejícím s úplným spuštěním.</span><span class="sxs-lookup"><span data-stu-id="64f6a-138">In some situations, cold starts may result in delays of several seconds.</span></span> <span data-ttu-id="64f6a-139">Čas spuštění se liší od poskytovatelů a úrovně služeb.</span><span class="sxs-lookup"><span data-stu-id="64f6a-139">Startup time varies across providers and service levels.</span></span> <span data-ttu-id="64f6a-140">Pokud je důležité, abyste minimalizovali týkající se úspěšnosti aplikace nejsou několik přístupů na dobu spuštění adresu.</span><span class="sxs-lookup"><span data-stu-id="64f6a-140">There are a few approaches to address startup time if it's important to minimize for the success of the app.</span></span>

* <span data-ttu-id="64f6a-141">Někteří poskytovatelé umožňují uživatelům k úhradě úrovně služeb, které zaručuje, že je infrastruktura "always on".</span><span class="sxs-lookup"><span data-stu-id="64f6a-141">Some providers allow users to pay for service levels that guarantee infrastructure is "always on".</span></span>
* <span data-ttu-id="64f6a-142">Implementujte mechanismus zachování (ping koncový bod zachovat "vzhůru").</span><span class="sxs-lookup"><span data-stu-id="64f6a-142">Implement a keep-alive mechanism (ping the endpoint to keep it "awake").</span></span>
* <span data-ttu-id="64f6a-143">Orchestrace, jako je Kubernetes pomocí funkce kontejnerizovaných přístup (na hostiteli se používá už tedy velmi rychlý rozbíhání nové instance).</span><span class="sxs-lookup"><span data-stu-id="64f6a-143">Use orchestration like Kubernetes with a containerized function approach (the host is already running so spinning up new instances is extremely fast).</span></span>

## <a name="database-updates-and-migrations"></a><span data-ttu-id="64f6a-144">Aktualizace databáze a migrace</span><span class="sxs-lookup"><span data-stu-id="64f6a-144">Database updates and migrations</span></span>

<span data-ttu-id="64f6a-145">Výhodou kódu bez serveru je, že můžete uvolnit nové funkce bez nutnosti znovu nasadit celou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="64f6a-145">An advantage of serverless code is that you can release new functions without having to redeploy the entire application.</span></span> <span data-ttu-id="64f6a-146">Nevýhodou této výhody se můžou stát, když je zapojené relační databáze.</span><span class="sxs-lookup"><span data-stu-id="64f6a-146">This advantage can become a disadvantage when there's a relational database involved.</span></span> <span data-ttu-id="64f6a-147">Změny v databázových schématech je složité synchronizovat ho s aktualizacemi bez serveru.</span><span class="sxs-lookup"><span data-stu-id="64f6a-147">Changes to database schemas are difficult to synchronize with serverless updates.</span></span> <span data-ttu-id="64f6a-148">Další problémy se k hlasování, když se něco zvrtne a změny musí být vrácena zpět.</span><span class="sxs-lookup"><span data-stu-id="64f6a-148">Additional challenges are posed when things go wrong and the changes must be rolled back.</span></span> <span data-ttu-id="64f6a-149">Integritu dat je jedním z osvědčený postup pro mikroslužby a bezserverové funkce je, že vlastníte svá vlastní data.</span><span class="sxs-lookup"><span data-stu-id="64f6a-149">Data integrity is one reason that a best practice for microservices and serverless functions is that they own their own data.</span></span> <span data-ttu-id="64f6a-150">Je možné nasadit změny jako jednu jednotku výpočetních operací a data.</span><span class="sxs-lookup"><span data-stu-id="64f6a-150">It is possible to deploy changes as a single unit of compute and data.</span></span> <span data-ttu-id="64f6a-151">Je, že mnoho starší verze systémů funkce velké databáze back-end, který musí být sloučeny s architekturou bez serveru.</span><span class="sxs-lookup"><span data-stu-id="64f6a-151">The reality is that many legacy systems feature a large back-end database that must be reconciled with the serverless architecture.</span></span>

<span data-ttu-id="64f6a-152">Oblíbené přístupů k řešení správy verzí schématu je nikdy měnit existující vlastnosti a sloupce, ale místo toho přidejte nové informace.</span><span class="sxs-lookup"><span data-stu-id="64f6a-152">A popular approach to solve schema versioning is to never modify existing properties and columns, but instead add new information.</span></span> <span data-ttu-id="64f6a-153">Představte si třeba změny přesunout z typu Boolean "dokončeno" příznak pro seznam úkolů "dokončené datum".</span><span class="sxs-lookup"><span data-stu-id="64f6a-153">For example, consider a change to move from a Boolean "completed" flag for a todo list to a "completed date."</span></span> <span data-ttu-id="64f6a-154">Místo aby odebrala stará pole, změna databáze bude:</span><span class="sxs-lookup"><span data-stu-id="64f6a-154">Instead of removing the old field, the database change will:</span></span>

1. <span data-ttu-id="64f6a-155">Přidejte pole nové "Completed (dokončeno datum).</span><span class="sxs-lookup"><span data-stu-id="64f6a-155">Add a new "completed date" field.</span></span>
1. <span data-ttu-id="64f6a-156">Transformujte pole "dokončených" logická vypočítané funkci, která vyhodnotí, jestli je datum dokončení po aktuálním datu.</span><span class="sxs-lookup"><span data-stu-id="64f6a-156">Transform the "completed" Boolean field to a computed function that evaluates whether the completed date is after the current date.</span></span>
1. <span data-ttu-id="64f6a-157">Přidání triggeru pro nastavit datum dokončení na aktuální datum, pokud je dokončené logická hodnota nastavená na hodnotu true.</span><span class="sxs-lookup"><span data-stu-id="64f6a-157">Add a trigger to set the completed date to the current date when the completed Boolean is set to true.</span></span>

<span data-ttu-id="64f6a-158">Posloupnost změny zajišťuje, že starší verze kódu nadále běžel "tak jak jsou", zatímco novější funkce bez serveru můžete využít výhod nového pole.</span><span class="sxs-lookup"><span data-stu-id="64f6a-158">The sequence of changes ensures that legacy code continues to run "as is" while newer serverless functions can take advantage of the new field.</span></span>

<span data-ttu-id="64f6a-159">Další informace o datech v architektur bez serveru, naleznete v tématu [výzvy a řešení pro správu dat distribuovaných](../microservices-architecture/architect-microservice-container-applications/distributed-data-management.md).</span><span class="sxs-lookup"><span data-stu-id="64f6a-159">For more information about data in serverless architectures, see [Challenges and solutions for distributed data management](../microservices-architecture/architect-microservice-container-applications/distributed-data-management.md).</span></span>

## <a name="scaling"></a><span data-ttu-id="64f6a-160">Škálování</span><span class="sxs-lookup"><span data-stu-id="64f6a-160">Scaling</span></span>

<span data-ttu-id="64f6a-161">Je to Běžná mylná představa, že bez serveru znamená "žádný server".</span><span class="sxs-lookup"><span data-stu-id="64f6a-161">It's a common misconception that serverless means "no server."</span></span> <span data-ttu-id="64f6a-162">Je ve skutečnosti "méně server".</span><span class="sxs-lookup"><span data-stu-id="64f6a-162">It's in fact "less server."</span></span> <span data-ttu-id="64f6a-163">Skutečnost, že je, že je důležité pochopit, pokud jde o škálování základní infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="64f6a-163">The fact there is a backing infrastructure is important to understand when it comes to scaling.</span></span> <span data-ttu-id="64f6a-164">Většina bez serveru platformy poskytují sadu ovládacích prvků pro zpracování, jak by se měly škálovat infrastrukturu, když hustota událostí se zvyšuje.</span><span class="sxs-lookup"><span data-stu-id="64f6a-164">Most serverless platforms provide a set of controls to handle how the infrastructure should scale when event density increases.</span></span> <span data-ttu-id="64f6a-165">Můžete si vybrat z celé řady možností, ale vaše strategie může lišit v závislosti na funkci.</span><span class="sxs-lookup"><span data-stu-id="64f6a-165">You can choose from a variety of options, but your strategy may vary depending on the function.</span></span> <span data-ttu-id="64f6a-166">Kromě toho jsou funkce obvykle běží pod související hostitele tak, aby funkce na stejném hostiteli mají stejné možnosti škálování.</span><span class="sxs-lookup"><span data-stu-id="64f6a-166">Furthermore, functions are typically run under a related host, so that functions on the same host have the same scale options.</span></span> <span data-ttu-id="64f6a-167">Proto je nezbytné pro organizaci a určit, které funkce jsou hostované podle požadavků na škálování.</span><span class="sxs-lookup"><span data-stu-id="64f6a-167">Therefore it is necessary to organize and strategize which functions are hosted together based on scale requirements.</span></span>

<span data-ttu-id="64f6a-168">Pravidla často určit způsob vertikálně navýšit kapacitu (zvýšit prostředky hostitele) a horizontální navýšení kapacity (zvýšení počtu instancí hostitele) na základě různých parametrů.</span><span class="sxs-lookup"><span data-stu-id="64f6a-168">Rules often specify how to scale-up (increase the host resources) and scale-out (increase the number of host instances) based on varying parameters.</span></span> <span data-ttu-id="64f6a-169">Aktivační události pro škálování může zahrnovat plán, požadavků, využití procesoru a využití paměti.</span><span class="sxs-lookup"><span data-stu-id="64f6a-169">Triggers for scales may include schedule, request rates, CPU utilization, and memory usage.</span></span> <span data-ttu-id="64f6a-170">Často vyššího výkonu se dodává s větší náklady.</span><span class="sxs-lookup"><span data-stu-id="64f6a-170">Higher performance often comes at a greater cost.</span></span> <span data-ttu-id="64f6a-171">Přístupy levnější, založenou na skutečné spotřebě nemůže škálovat podle rychle při frekvence požadavků prudce zvyšuje.</span><span class="sxs-lookup"><span data-stu-id="64f6a-171">The less expensive, consumption-based approaches may not scale as quickly when the request rate suddenly increases.</span></span> <span data-ttu-id="64f6a-172">Je kompromis mezi platit až přední "pojištění" náklady a platit výhradně "při přechodu" a neohrozit pomalejší odpovědi z důvodu náhlé zvýšení poptávky.</span><span class="sxs-lookup"><span data-stu-id="64f6a-172">There is a trade-off between paying up front "insurance cost" versus paying strictly "as you go" and risking slower responses due to sudden increases in demand.</span></span>

## <a name="monitoring-tracing-and-logging"></a><span data-ttu-id="64f6a-173">Monitorování, trasování a protokolování</span><span class="sxs-lookup"><span data-stu-id="64f6a-173">Monitoring, tracing, and logging</span></span>

<span data-ttu-id="64f6a-174">Často přehlíženým aspekt DevOps je monitorování aplikací po nasazení.</span><span class="sxs-lookup"><span data-stu-id="64f6a-174">An often overlooked aspect of DevOps is monitoring applications once deployed.</span></span> <span data-ttu-id="64f6a-175">Je důležité mít strategii pro monitorování funkce bez serveru.</span><span class="sxs-lookup"><span data-stu-id="64f6a-175">It's important to have a strategy for monitoring serverless functions.</span></span> <span data-ttu-id="64f6a-176">Největším problémem je často korelace nebo uznání při volání více funkcí v rámci stejné interakce.</span><span class="sxs-lookup"><span data-stu-id="64f6a-176">The biggest challenge is often correlation, or recognizing when a user calls multiple functions as part of the same interaction.</span></span> <span data-ttu-id="64f6a-177">Většina bez serveru platformy umožní konzoly protokolování, které se dají importovat do nástrojů třetích stran.</span><span class="sxs-lookup"><span data-stu-id="64f6a-177">Most serverless platforms allow console logging that can be imported into third-party tools.</span></span> <span data-ttu-id="64f6a-178">Existují také Možnosti automatizace shromažďování telemetrických dat, generovat a sledovat ID korelace a monitorovat konkrétní akce, které poskytují podrobné přehledy.</span><span class="sxs-lookup"><span data-stu-id="64f6a-178">There are also options to automate collection of telemetry, generate and track correlation IDs, and monitor specific actions to provide detailed insights.</span></span> <span data-ttu-id="64f6a-179">Azure poskytuje pokročilé [platformy Application Insights](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) pro monitorování a analýzy.</span><span class="sxs-lookup"><span data-stu-id="64f6a-179">Azure provides the advanced [Application Insights platform](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) for monitoring and analytics.</span></span>

## <a name="inter-service-dependencies"></a><span data-ttu-id="64f6a-180">Komunikace mezi službami závislosti</span><span class="sxs-lookup"><span data-stu-id="64f6a-180">Inter-service dependencies</span></span>

<span data-ttu-id="64f6a-181">Využijte architekturu bez serveru může obsahovat funkce, které jsou závislé na dalších funkcí.</span><span class="sxs-lookup"><span data-stu-id="64f6a-181">A serverless architecture may include functions that rely on other functions.</span></span> <span data-ttu-id="64f6a-182">Ve skutečnosti není běžné ve architektury bez serveru má několik služeb, které volají navzájem jako součást distribuované transakce nebo interakci.</span><span class="sxs-lookup"><span data-stu-id="64f6a-182">In fact, it isn't uncommon in a serverless architecture to have multiple services call each other as part of an interaction or distributed transaction.</span></span> <span data-ttu-id="64f6a-183">Aby se zabránilo silné párování, doporučujeme, že služby není odkazovat na sebe navzájem přímo.</span><span class="sxs-lookup"><span data-stu-id="64f6a-183">To avoid strong coupling, it's recommended that services don't reference each other directly.</span></span> <span data-ttu-id="64f6a-184">Když se koncový bod pro službu musí změnit, přímé odkazy by mohlo způsobit hlavní refaktoring.</span><span class="sxs-lookup"><span data-stu-id="64f6a-184">When the endpoint for a service needs to change, direct references could result in major refactoring.</span></span> <span data-ttu-id="64f6a-185">Navrhované řešení je mechanismus pro zjišťování služby, jako je například registru, který obsahuje příslušný koncový bod pro typ požadavku.</span><span class="sxs-lookup"><span data-stu-id="64f6a-185">A suggested solution is to provide a service discovery mechanism, such as a registry, that provides the appropriate end point for a request type.</span></span> <span data-ttu-id="64f6a-186">Druhým řešením je využívat služby zasílání zpráv, například front nebo témat pro komunikaci mezi službami.</span><span class="sxs-lookup"><span data-stu-id="64f6a-186">Another solution is to leverage messaging services like queues or topics for communication between services.</span></span>

## <a name="managing-failure-and-providing-resiliency"></a><span data-ttu-id="64f6a-187">Správa selhání a zajištění odolnosti proti chybám</span><span class="sxs-lookup"><span data-stu-id="64f6a-187">Managing failure and providing resiliency</span></span>

<span data-ttu-id="64f6a-188">Je také důležité vzít v úvahu *vzoru circuit breaker*: Pokud z nějakého důvodu služba nadále selhávat, není vhodné opakovaně volání této služby.</span><span class="sxs-lookup"><span data-stu-id="64f6a-188">It's also important to consider the *circuit-breaker pattern*: If, for some reason, a service continues to fail, it isn't advisable to call that service repeatedly.</span></span> <span data-ttu-id="64f6a-189">Místo toho volat alternativní služby nebo zpráva vrácená dokud stavu ze závislých služeb je obnoveno.</span><span class="sxs-lookup"><span data-stu-id="64f6a-189">Instead, an alternative service is called or a message returned until the health of the dependent service is re-established.</span></span> <span data-ttu-id="64f6a-190">Architektura bez serveru je potřeba vzít v úvahu strategie pro řešení a správu komunikace mezi službami závislosti.</span><span class="sxs-lookup"><span data-stu-id="64f6a-190">The serverless architecture needs to take into account the strategy for resolving and managing inter-service dependencies.</span></span>

<span data-ttu-id="64f6a-191">Pokračujte vzoru circuit breaker musí být odolnost proti chybám a odolných služeb.</span><span class="sxs-lookup"><span data-stu-id="64f6a-191">To continue the circuit-breaker pattern, services need to be fault tolerant and resilient.</span></span> <span data-ttu-id="64f6a-192">Odolnost proti chybám odkazuje na schopnosti vaší aplikace, aby kontinuálně běžely, i po neočekávané výjimky nebo se zjistil neplatný stavy.</span><span class="sxs-lookup"><span data-stu-id="64f6a-192">Fault tolerance refers to the ability of your application to continue running even after unexpected exceptions or invalid states are encountered.</span></span> <span data-ttu-id="64f6a-193">Odolnost proti chybám je obvykle funkce samotného kódu a jak ho zapsala do zpracování výjimek.</span><span class="sxs-lookup"><span data-stu-id="64f6a-193">Fault tolerance is typically a function of the code itself and how it's written to handle exceptions.</span></span> <span data-ttu-id="64f6a-194">Odolnost proti chybám odkazuje na je aplikace jak podporující na obnovení v případě selhání.</span><span class="sxs-lookup"><span data-stu-id="64f6a-194">Resiliency refers to how capable the app is at recovering from failures.</span></span> <span data-ttu-id="64f6a-195">Odolnost proti chybám je často spravuje platforma bez serveru.</span><span class="sxs-lookup"><span data-stu-id="64f6a-195">Resiliency is often managed by the serverless platform.</span></span> <span data-ttu-id="64f6a-196">Abyste mohli spustit novou instanci funkce bez serveru při selhání stávající měl platformu.</span><span class="sxs-lookup"><span data-stu-id="64f6a-196">The platform should be able to spin up a new serverless function instance when the existing one fails.</span></span> <span data-ttu-id="64f6a-197">Platforma by měla být dostatečně inteligentní, zastaví rozbíhání nové instance, pokud selže každé nové instance.</span><span class="sxs-lookup"><span data-stu-id="64f6a-197">The platform should also be intelligent enough to stop spinning up new instances when every new instance fails.</span></span>

<span data-ttu-id="64f6a-198">Další informace najdete v tématu [implementace vzoru Circuit Breaker](../microservices-architecture/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="64f6a-198">For more information, see [Implementing the Circuit Breaker pattern](../microservices-architecture/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span></span>

## <a name="versioning-and-greenblue-deployments"></a><span data-ttu-id="64f6a-199">Nasazení správy verzí a zelená/modrá</span><span class="sxs-lookup"><span data-stu-id="64f6a-199">Versioning and green/blue deployments</span></span>

<span data-ttu-id="64f6a-200">Hlavní výhodou bez serveru je možný upgrade konkrétní funkce, aniž byste museli znovu nasadit celou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="64f6a-200">A major benefit of serverless is the ability to upgrade a specific function without having to redeploy the entire application.</span></span> <span data-ttu-id="64f6a-201">Pro upgrade proběhne úspěšně musí být funkce označené verzí tak, aby jejich volání služby jsou směrovány na správnou verzi kódu.</span><span class="sxs-lookup"><span data-stu-id="64f6a-201">For upgrades to be successful, functions must be versioned so that services calling them are routed to the correct version of code.</span></span> <span data-ttu-id="64f6a-202">Strategie pro zavedení nové verze je také důležité.</span><span class="sxs-lookup"><span data-stu-id="64f6a-202">A strategy for deploying new versions is also important.</span></span> <span data-ttu-id="64f6a-203">Běžným přístupem je použití "zelené a modré nasazení."</span><span class="sxs-lookup"><span data-stu-id="64f6a-203">A common approach is to use "green/blue deployments."</span></span> <span data-ttu-id="64f6a-204">Zeleného nasazení je aktuální funkce.</span><span class="sxs-lookup"><span data-stu-id="64f6a-204">The green deployment is the current function.</span></span> <span data-ttu-id="64f6a-205">Nová verze "blue" je nasazená do produkčního prostředí a testování.</span><span class="sxs-lookup"><span data-stu-id="64f6a-205">A new "blue" version is deployed to production and tested.</span></span> <span data-ttu-id="64f6a-206">Při testování PASS, zelené a modré verze jsou přehozeny tak novou verzi se dodává za provozu.</span><span class="sxs-lookup"><span data-stu-id="64f6a-206">When testing passes, the green and blue versions are swapped so the new version comes live.</span></span> <span data-ttu-id="64f6a-207">Pokud nedojde k žádné problémy, je možné Prohodit zpět.</span><span class="sxs-lookup"><span data-stu-id="64f6a-207">If any issues are encountered, they can be swapped back.</span></span> <span data-ttu-id="64f6a-208">Podpora správy verzí a nasazení zelené a modré vyžaduje kombinaci funkcí a vyřešit tak změny verze pro vytváření a práci s architekturou pro zpracování nasazení.</span><span class="sxs-lookup"><span data-stu-id="64f6a-208">Supporting versioning and green/blue deployments requires a combination of authoring the functions to accommodate version changes and working with the serverless platform to handle deployments.</span></span> <span data-ttu-id="64f6a-209">Jedním z možných způsobů je použít proxy servery, které jsou popsány v [platformy Azure bez serverů](azure-functions.md#proxies) kapitoly.</span><span class="sxs-lookup"><span data-stu-id="64f6a-209">One possible approach is to use proxies, which are described in the [Azure serverless platform](azure-functions.md#proxies) chapter.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="64f6a-210">[Předchozí](serverless-architecture.md)
>[další](serverless-design-examples.md)</span><span class="sxs-lookup"><span data-stu-id="64f6a-210">[Previous](serverless-architecture.md)
[Next](serverless-design-examples.md)</span></span>
