---
title: Vlákna a dělení na vlákna
ms.date: 11/08/2018
ms.technology: dotnet-standard
helpviewer_keywords:
- multiple threads
- threading [.NET]
- threading [.NET], multiple threads
ms.assetid: 5baac3aa-e603-4fa6-9f89-0f2c1084e6b1
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: efbca8177c74fdee635b52294944df23e5aca24f
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/15/2019
ms.locfileid: "65638781"
---
# <a name="threads-and-threading"></a><span data-ttu-id="a1d50-102">Vlákna a dělení na vlákna</span><span class="sxs-lookup"><span data-stu-id="a1d50-102">Threads and threading</span></span>

<span data-ttu-id="a1d50-103">Multithreading můžete zvýšit rychlost reakce aplikace a, pokud je aplikace spuštěná v systému s více procesory nebo s více jádry, zvýšit jeho propustnost.</span><span class="sxs-lookup"><span data-stu-id="a1d50-103">Multithreading allows you to increase the responsiveness of your application and, if your application runs on a multiprocessor or multi-core system, increase its throughput.</span></span>

## <a name="processes-and-threads"></a><span data-ttu-id="a1d50-104">Procesy a vlákna</span><span class="sxs-lookup"><span data-stu-id="a1d50-104">Processes and threads</span></span>

<span data-ttu-id="a1d50-105">A *procesu* je prováděnému programu.</span><span class="sxs-lookup"><span data-stu-id="a1d50-105">A *process* is an executing program.</span></span> <span data-ttu-id="a1d50-106">Operační systém používá procesy pro oddělení aplikací, které se spouští.</span><span class="sxs-lookup"><span data-stu-id="a1d50-106">An operating system uses processes to separate the applications that are being executed.</span></span> <span data-ttu-id="a1d50-107">A *vlákno* je základní jednotkou, ke kterému operační systém přiděluje čas procesoru.</span><span class="sxs-lookup"><span data-stu-id="a1d50-107">A *thread* is the basic unit to which an operating system allocates processor time.</span></span> <span data-ttu-id="a1d50-108">Každé vlákno má [Priorita plánování](scheduling-threads.md) a udržuje sadu struktury systému použije k uložení kontext vlákna při pozastavení provádění vlákna.</span><span class="sxs-lookup"><span data-stu-id="a1d50-108">Each thread has a [scheduling priority](scheduling-threads.md) and maintains a set of structures the system uses to save the thread context when the thread's execution is paused.</span></span> <span data-ttu-id="a1d50-109">Kontext vlákna obsahuje všechny informace, které vlákno je potřeba bez problémů pokračovat v provádění, včetně sady registrech procesoru a zásobníku vlákna.</span><span class="sxs-lookup"><span data-stu-id="a1d50-109">The thread context includes all the information the thread needs to seamlessly resume execution, including the thread's set of CPU registers and stack.</span></span> <span data-ttu-id="a1d50-110">V rámci procesu můžete spustit více vláken.</span><span class="sxs-lookup"><span data-stu-id="a1d50-110">Multiple threads can run in the context of a process.</span></span> <span data-ttu-id="a1d50-111">Všechna vlákna procesu sdílet jeho virtuální adresní prostor.</span><span class="sxs-lookup"><span data-stu-id="a1d50-111">All threads of a process share its virtual address space.</span></span> <span data-ttu-id="a1d50-112">Vlákno můžete provést kteroukoli část kódu programu, včetně částí aktuálně prováděné jiné vlákno.</span><span class="sxs-lookup"><span data-stu-id="a1d50-112">A thread can execute any part of the program code, including parts currently being executed by another thread.</span></span>

> [!NOTE]
> <span data-ttu-id="a1d50-113">Rozhraní .NET Framework poskytuje způsob, jak izolovat aplikace v rámci procesu s použitím *aplikačních doménách*.</span><span class="sxs-lookup"><span data-stu-id="a1d50-113">The .NET Framework provides a way to isolate applications within a process with the use of *application domains*.</span></span> <span data-ttu-id="a1d50-114">(Aplikační domény nejsou k dispozici v rozhraní .NET Core.) Další informace najdete v tématu [domény aplikace a vlákna](../../framework/app-domains/application-domains.md#application-domains-and-threads) část [aplikačních doménách](../../framework/app-domains/application-domains.md) článku.</span><span class="sxs-lookup"><span data-stu-id="a1d50-114">(Application domains are not available on .NET Core.) For more information, see the [Application domains and threads](../../framework/app-domains/application-domains.md#application-domains-and-threads) section of the [Application domains](../../framework/app-domains/application-domains.md) article.</span></span>

<span data-ttu-id="a1d50-115">Ve výchozím nastavení, spuštění aplikace .NET s jedním vláknem, často označované jako *primární* vlákna.</span><span class="sxs-lookup"><span data-stu-id="a1d50-115">By default, a .NET program is started with a single thread, often called the *primary* thread.</span></span> <span data-ttu-id="a1d50-116">To však můžete vytvořit další vlákna ke spouštění kódu vytvořeného paralelně nebo současně primárnímu vláknu.</span><span class="sxs-lookup"><span data-stu-id="a1d50-116">However, it can create additional threads to execute code in parallel or concurrently with the primary thread.</span></span> <span data-ttu-id="a1d50-117">Tato vlákna se často nazývají *pracovního procesu* vlákna.</span><span class="sxs-lookup"><span data-stu-id="a1d50-117">These threads are often called *worker* threads.</span></span>

## <a name="when-to-use-multiple-threads"></a><span data-ttu-id="a1d50-118">Použití více vláken</span><span class="sxs-lookup"><span data-stu-id="a1d50-118">When to use multiple threads</span></span>

<span data-ttu-id="a1d50-119">Zvýšit rychlost reakce aplikace a chcete využít výhod systému s více procesory nebo s více jádry chcete zvýšit propustnost aplikace, používejte více vláken.</span><span class="sxs-lookup"><span data-stu-id="a1d50-119">You use multiple threads to increase the responsiveness of your application and to take advantage of a multiprocessor or multi-core system to increase the application's throughput.</span></span>

<span data-ttu-id="a1d50-120">Vezměte v úvahu desktopová aplikace, ve kterém primární vlákno je zodpovědný za prvky uživatelského rozhraní a reaguje na akce uživatele.</span><span class="sxs-lookup"><span data-stu-id="a1d50-120">Consider a desktop application, in which the primary thread is responsible for user interface elements and responds to user actions.</span></span> <span data-ttu-id="a1d50-121">Použití pracovních vláken provádět časově náročná operace, které, v opačném případě by zabírat primární vlákno a ujistěte se, uživatelské rozhraní přestane reagovat.</span><span class="sxs-lookup"><span data-stu-id="a1d50-121">Use worker threads to perform time-consuming operations that, otherwise, would occupy the primary thread and make the user interface non-responsive.</span></span> <span data-ttu-id="a1d50-122">Také můžete použít jedno vyhrazené vlákno pro komunikace sítě nebo zařízení rychleji reagující na příchozí zprávy nebo události.</span><span class="sxs-lookup"><span data-stu-id="a1d50-122">You also can use a dedicated thread for network or device communication to be more responsive to incoming messages or events.</span></span>

<span data-ttu-id="a1d50-123">Pokud váš program provádí operace, které lze provést paralelně, celková doba spuštění lze snížit pomocí provádí tyto operace v oddělených vláknech a spuštění programu v systému s více procesory nebo s více jádry.</span><span class="sxs-lookup"><span data-stu-id="a1d50-123">If your program performs operations that can be done in parallel, the total execution time can be decreased by performing those operations in separate threads and running the program on a multiprocessor or multi-core system.</span></span> <span data-ttu-id="a1d50-124">V systému, použití více vláken může zvýšit propustnost spolu s vyšší rychlost odezvy.</span><span class="sxs-lookup"><span data-stu-id="a1d50-124">On such a system, use of multithreading might increase throughput along with the increased responsiveness.</span></span>

## <a name="how-to-use-multithreading-in-net"></a><span data-ttu-id="a1d50-125">Jak používat multithreading v .NET</span><span class="sxs-lookup"><span data-stu-id="a1d50-125">How to use multithreading in .NET</span></span>

<span data-ttu-id="a1d50-126">Od verze rozhraní .NET Framework 4, je doporučeným způsobem, jak používat multithreading používat [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md) a [paralelní LINQ (PLINQ)](../parallel-programming/parallel-linq-plinq.md).</span><span class="sxs-lookup"><span data-stu-id="a1d50-126">Starting with the .NET Framework 4, the recommended way to utilize multithreading is to use [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md) and [Parallel LINQ (PLINQ)](../parallel-programming/parallel-linq-plinq.md).</span></span> <span data-ttu-id="a1d50-127">Další informace najdete v tématu [paralelní programování](../parallel-programming/index.md).</span><span class="sxs-lookup"><span data-stu-id="a1d50-127">For more information, see [Parallel programming](../parallel-programming/index.md).</span></span>

<span data-ttu-id="a1d50-128">TPL a PLINQ využívají <xref:System.Threading.ThreadPool> vlákna.</span><span class="sxs-lookup"><span data-stu-id="a1d50-128">Both TPL and PLINQ rely on the <xref:System.Threading.ThreadPool> threads.</span></span> <span data-ttu-id="a1d50-129"><xref:System.Threading.ThreadPool?displayProperty=nameWithType> Třída poskytuje aplikace .NET pomocí fondu pracovních vláken.</span><span class="sxs-lookup"><span data-stu-id="a1d50-129">The <xref:System.Threading.ThreadPool?displayProperty=nameWithType> class provides a .NET application with a pool of worker threads.</span></span> <span data-ttu-id="a1d50-130">Můžete použít také vláken fondu vláken.</span><span class="sxs-lookup"><span data-stu-id="a1d50-130">You also can use thread pool threads.</span></span> <span data-ttu-id="a1d50-131">Další informace najdete v tématu [spravovaný fond vláken](the-managed-thread-pool.md).</span><span class="sxs-lookup"><span data-stu-id="a1d50-131">For more information, see [The managed thread pool](the-managed-thread-pool.md).</span></span>

<span data-ttu-id="a1d50-132">V poslední, můžete použít <xref:System.Threading.Thread?displayProperty=nameWithType> třídu, která představuje spravované vlákno.</span><span class="sxs-lookup"><span data-stu-id="a1d50-132">At last, you can use the <xref:System.Threading.Thread?displayProperty=nameWithType> class that represents a managed thread.</span></span> <span data-ttu-id="a1d50-133">Další informace najdete v tématu [použití vláken a dělení na vlákna](using-threads-and-threading.md).</span><span class="sxs-lookup"><span data-stu-id="a1d50-133">For more information, see [Using threads and threading](using-threads-and-threading.md).</span></span>

<span data-ttu-id="a1d50-134">Více vláken může být nutné pro přístup ke sdíleným prostředkům.</span><span class="sxs-lookup"><span data-stu-id="a1d50-134">Multiple threads might need to access a shared resource.</span></span> <span data-ttu-id="a1d50-135">Mějte nepoškozeným stavu prostředku a nedošlo ke konfliktům časování, musíte synchronizovat vlákno přístup k němu.</span><span class="sxs-lookup"><span data-stu-id="a1d50-135">To keep the resource in a uncorrupted state and avoid race conditions, you must synchronize the thread access to it.</span></span> <span data-ttu-id="a1d50-136">Můžete také chtít koordinovat interakce více vláken.</span><span class="sxs-lookup"><span data-stu-id="a1d50-136">You also might want to coordinate the interaction of multiple threads.</span></span> <span data-ttu-id="a1d50-137">.NET poskytuje celou řadu typů, které slouží k synchronizaci přístupu ke sdíleným prostředkům nebo koordinovat interakce vlákna.</span><span class="sxs-lookup"><span data-stu-id="a1d50-137">.NET provides a range of types that you can use to synchronize access to a shared resource or coordinate thread interaction.</span></span> <span data-ttu-id="a1d50-138">Další informace najdete v tématu [přehled primitiv synchronizace](overview-of-synchronization-primitives.md).</span><span class="sxs-lookup"><span data-stu-id="a1d50-138">For more information, see [Overview of synchronization primitives](overview-of-synchronization-primitives.md).</span></span>

<span data-ttu-id="a1d50-139">Zpracování výjimek ve vláknech.</span><span class="sxs-lookup"><span data-stu-id="a1d50-139">Do handle exceptions in threads.</span></span> <span data-ttu-id="a1d50-140">Neošetřené výjimky ve vláknech obecně ukončit proces.</span><span class="sxs-lookup"><span data-stu-id="a1d50-140">Unhandled exceptions in threads generally terminate the process.</span></span> <span data-ttu-id="a1d50-141">Další informace najdete v tématu [výjimky ve spravovaných vláknech](exceptions-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="a1d50-141">For more information, see [Exceptions in managed threads](exceptions-in-managed-threads.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="a1d50-142">Viz také:</span><span class="sxs-lookup"><span data-stu-id="a1d50-142">See also</span></span>

- [<span data-ttu-id="a1d50-143">Práce s vlákny funkce a objekty</span><span class="sxs-lookup"><span data-stu-id="a1d50-143">Threading objects and features</span></span>](threading-objects-and-features.md)
- [<span data-ttu-id="a1d50-144">Dělení na spravovaná vlákna osvědčené postupy</span><span class="sxs-lookup"><span data-stu-id="a1d50-144">Managed threading best practices</span></span>](managed-threading-best-practices.md)
- [<span data-ttu-id="a1d50-145">Paralelní zpracování, souběžnost a asynchronní programování v rozhraní .NET</span><span class="sxs-lookup"><span data-stu-id="a1d50-145">Parallel Processing, Concurrency, and Async Programming in .NET</span></span>](../parallel-processing-and-concurrency.md)
- [<span data-ttu-id="a1d50-146">Informace o procesech a vláknech</span><span class="sxs-lookup"><span data-stu-id="a1d50-146">About Processes and Threads</span></span>](/windows/desktop/procthread/about-processes-and-threads)
