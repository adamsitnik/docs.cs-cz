---
title: Návrhový vzor Pozorovatel
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- IObserver(Of T) interface
- IObservable<T> interface
- IObserver<T> interface
- IObservable(Of T) interface
- observer design pattern [.NET Framework]
ms.assetid: 3680171f-f522-453c-aa4a-54f755a78f88
ms.openlocfilehash: 817337cec604a431f9f7d4eacb04378ee0d3c227
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/30/2019
ms.locfileid: "73131578"
---
# <a name="observer-design-pattern"></a><span data-ttu-id="48b4d-102">Návrhový vzor Pozorovatel</span><span class="sxs-lookup"><span data-stu-id="48b4d-102">Observer Design Pattern</span></span>

<span data-ttu-id="48b4d-103">Návrhový vzor pozorovatele umožňuje předplatiteli zaregistrovat se a přijímat oznámení od poskytovatele.</span><span class="sxs-lookup"><span data-stu-id="48b4d-103">The observer design pattern enables a subscriber to register with and receive notifications from a provider.</span></span> <span data-ttu-id="48b4d-104">Je vhodný pro jakýkoli scénář, který vyžaduje oznámení na základě nabízených oznámení.</span><span class="sxs-lookup"><span data-stu-id="48b4d-104">It is suitable for any scenario that requires push-based notification.</span></span> <span data-ttu-id="48b4d-105">Vzor definuje *poskytovatele* (označovaného také jako *Předmět* nebo *pozorovatelný*) a nula, jedno nebo více *pozorovatelů*.</span><span class="sxs-lookup"><span data-stu-id="48b4d-105">The pattern defines a *provider* (also known as a *subject* or an *observable*) and zero, one, or more *observers*.</span></span> <span data-ttu-id="48b4d-106">Pozorovatelé se registrují u poskytovatele a pokaždé, když dojde ke změně předdefinované podmínky, události nebo stavu, poskytovatel automaticky upozorní všechny pozorovatele tím, že zavolá jednu z jejich metod.</span><span class="sxs-lookup"><span data-stu-id="48b4d-106">Observers register with the provider, and whenever a predefined condition, event, or state change occurs, the provider automatically notifies all observers by calling one of their methods.</span></span> <span data-ttu-id="48b4d-107">V rámci tohoto volání metody může poskytovatel také poskytnout informace o aktuálním stavu pozorovatelům.</span><span class="sxs-lookup"><span data-stu-id="48b4d-107">In this method call, the provider can also provide current state information to observers.</span></span> <span data-ttu-id="48b4d-108">V .NET Framework se vzor návrhu pozorovatele používá implementací obecných rozhraní <xref:System.IObservable%601?displayProperty=nameWithType> a <xref:System.IObserver%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="48b4d-108">In the .NET Framework, the observer design pattern is applied by implementing the generic <xref:System.IObservable%601?displayProperty=nameWithType> and <xref:System.IObserver%601?displayProperty=nameWithType> interfaces.</span></span> <span data-ttu-id="48b4d-109">Parametr obecného typu představuje typ, který poskytuje informace o oznámení.</span><span class="sxs-lookup"><span data-stu-id="48b4d-109">The generic type parameter represents the type that provides notification information.</span></span>

## <a name="applying-the-pattern"></a><span data-ttu-id="48b4d-110">Použití vzoru</span><span class="sxs-lookup"><span data-stu-id="48b4d-110">Applying the Pattern</span></span>

<span data-ttu-id="48b4d-111">Vzor návrhu pozorovatele je vhodný pro distribuované oznámení založené na nabízených oznámeních, protože podporuje čisté oddělení mezi dvěma různými komponentami nebo aplikačními vrstvami, jako je například vrstva zdroje dat (obchodní logika) a vrstva uživatelského rozhraní (zobrazení).</span><span class="sxs-lookup"><span data-stu-id="48b4d-111">The observer design pattern is suitable for distributed push-based notifications, because it supports a clean separation between two different components or application layers, such as a data source (business logic) layer and a user interface (display) layer.</span></span> <span data-ttu-id="48b4d-112">Vzor lze implementovat vždy, když poskytovatel používá zpětná volání k dodávání svých klientů k aktuálním informacím.</span><span class="sxs-lookup"><span data-stu-id="48b4d-112">The pattern can be implemented whenever a provider uses callbacks to supply its clients with current information.</span></span>

<span data-ttu-id="48b4d-113">Implementace vzoru vyžaduje, abyste zadali následující:</span><span class="sxs-lookup"><span data-stu-id="48b4d-113">Implementing the pattern requires that you provide the following:</span></span>

- <span data-ttu-id="48b4d-114">Poskytovatel nebo předmět, což je objekt, který odesílá oznámení pozorovatelům.</span><span class="sxs-lookup"><span data-stu-id="48b4d-114">A provider or subject, which is the object that sends notifications to observers.</span></span> <span data-ttu-id="48b4d-115">Zprostředkovatel je třída nebo struktura, která implementuje rozhraní <xref:System.IObservable%601>.</span><span class="sxs-lookup"><span data-stu-id="48b4d-115">A provider is a class or structure that implements the <xref:System.IObservable%601> interface.</span></span> <span data-ttu-id="48b4d-116">Poskytovatel musí implementovat jedinou metodu, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType>, která je volána pozorovateli, kteří chtějí dostávat oznámení od poskytovatele.</span><span class="sxs-lookup"><span data-stu-id="48b4d-116">The provider must implement a single method, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType>, which is called by observers that wish to receive notifications from the provider.</span></span>

- <span data-ttu-id="48b4d-117">Pozorovatel, což je objekt, který přijímá oznámení od poskytovatele.</span><span class="sxs-lookup"><span data-stu-id="48b4d-117">An observer, which is an object that receives notifications from a provider.</span></span> <span data-ttu-id="48b4d-118">Pozorovatel je třída nebo struktura, která implementuje rozhraní <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="48b4d-118">An observer is a class or structure that implements the <xref:System.IObserver%601> interface.</span></span> <span data-ttu-id="48b4d-119">Pozorovatel musí implementovat tři metody, které jsou volány zprostředkovatelem:</span><span class="sxs-lookup"><span data-stu-id="48b4d-119">The observer must implement three methods, all of which are called by the provider:</span></span>

  - <span data-ttu-id="48b4d-120"><xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType>, která pozorovatele dodá nové nebo aktuální informace.</span><span class="sxs-lookup"><span data-stu-id="48b4d-120"><xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType>, which supplies the observer with new or current information.</span></span>

  - <span data-ttu-id="48b4d-121"><xref:System.IObserver%601.OnError%2A?displayProperty=nameWithType>, který informuje pozorovatele, že došlo k chybě.</span><span class="sxs-lookup"><span data-stu-id="48b4d-121"><xref:System.IObserver%601.OnError%2A?displayProperty=nameWithType>, which informs the observer that an error has occurred.</span></span>

  - <span data-ttu-id="48b4d-122"><xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType>, což znamená, že poskytovatel dokončil odesílání oznámení.</span><span class="sxs-lookup"><span data-stu-id="48b4d-122"><xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType>, which indicates that the provider has finished sending notifications.</span></span>

- <span data-ttu-id="48b4d-123">Mechanismus, který umožňuje poskytovateli sledovat pozorovatele.</span><span class="sxs-lookup"><span data-stu-id="48b4d-123">A mechanism that allows the provider to keep track of observers.</span></span> <span data-ttu-id="48b4d-124">Poskytovatel obvykle používá objekt kontejneru, jako je <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> objekt, pro blokování odkazů na <xref:System.IObserver%601> implementace, které mají oznámení odebírané.</span><span class="sxs-lookup"><span data-stu-id="48b4d-124">Typically, the provider uses a container object, such as a <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> object, to hold references to the <xref:System.IObserver%601> implementations that have subscribed to notifications.</span></span> <span data-ttu-id="48b4d-125">Použití kontejneru úložiště pro tento účel umožňuje poskytovateli, aby zpracovával nulu na neomezený počet pozorovatelů.</span><span class="sxs-lookup"><span data-stu-id="48b4d-125">Using a storage container for this purpose enables the provider to handle zero to an unlimited number of observers.</span></span> <span data-ttu-id="48b4d-126">Pořadí, ve kterém pozorovatelé obdrží oznámení, nejsou definovány. Poskytovatel je bezplatný pro určení pořadí pomocí libovolné metody.</span><span class="sxs-lookup"><span data-stu-id="48b4d-126">The order in which observers receive notifications is not defined; the provider is free to use any method to determine the order.</span></span>

- <span data-ttu-id="48b4d-127"><xref:System.IDisposable> implementace, která umožňuje poskytovateli odebrat pozorovatele, když je oznámení dokončeno.</span><span class="sxs-lookup"><span data-stu-id="48b4d-127">An <xref:System.IDisposable> implementation that enables the provider to remove observers when notification is complete.</span></span> <span data-ttu-id="48b4d-128">Pozorovatelé obdrží odkaz na <xref:System.IDisposable> implementaci z metody <xref:System.IObservable%601.Subscribe%2A>, takže mohou také volat metodu <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> k odhlášení odběru předtím, než poskytovatel dokončí odesílání oznámení.</span><span class="sxs-lookup"><span data-stu-id="48b4d-128">Observers receive a reference to the <xref:System.IDisposable> implementation from the <xref:System.IObservable%601.Subscribe%2A> method, so they can also call the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method to unsubscribe before the provider has finished sending notifications.</span></span>

- <span data-ttu-id="48b4d-129">Objekt obsahující data, která poskytovatel pošle pozorovatelům.</span><span class="sxs-lookup"><span data-stu-id="48b4d-129">An object that contains the data that the provider sends to its observers.</span></span> <span data-ttu-id="48b4d-130">Typ tohoto objektu odpovídá parametru obecného typu <xref:System.IObservable%601> a <xref:System.IObserver%601> rozhraní.</span><span class="sxs-lookup"><span data-stu-id="48b4d-130">The type of this object corresponds to the generic type parameter of the <xref:System.IObservable%601> and <xref:System.IObserver%601> interfaces.</span></span> <span data-ttu-id="48b4d-131">I když tento objekt může být stejný jako implementace <xref:System.IObservable%601>, nejčastěji se jedná o samostatný typ.</span><span class="sxs-lookup"><span data-stu-id="48b4d-131">Although this object can be the same as the <xref:System.IObservable%601> implementation, most commonly it is a separate type.</span></span>

> [!NOTE]
> <span data-ttu-id="48b4d-132">Kromě implementace návrhového vzoru pozorovatele může být zajímání knihoven, které jsou sestaveny pomocí rozhraní <xref:System.IObservable%601> a <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="48b4d-132">In addition to implementing the observer design pattern, you may be interested in exploring libraries that are built using the <xref:System.IObservable%601> and <xref:System.IObserver%601> interfaces.</span></span> <span data-ttu-id="48b4d-133">Například [reaktivní rozšíření pro .NET (RX)](https://docs.microsoft.com/previous-versions/dotnet/reactive-extensions/hh242985(v=vs.103)) se skládají ze sady rozšiřujících metod a operátorů LINQ standard pro podporu asynchronního programování.</span><span class="sxs-lookup"><span data-stu-id="48b4d-133">For example, [Reactive Extensions for .NET (Rx)](https://docs.microsoft.com/previous-versions/dotnet/reactive-extensions/hh242985(v=vs.103)) consist of a set of extension methods and LINQ standard sequence operators to support asynchronous programming.</span></span>

## <a name="implementing-the-pattern"></a><span data-ttu-id="48b4d-134">Implementace vzoru</span><span class="sxs-lookup"><span data-stu-id="48b4d-134">Implementing the Pattern</span></span>

<span data-ttu-id="48b4d-135">V následujícím příkladu je použit vzor návrhu pozorovatele k implementaci systému informací o deklaraci zavazadel na letišti.</span><span class="sxs-lookup"><span data-stu-id="48b4d-135">The following example uses the observer design pattern to implement an airport baggage claim information system.</span></span> <span data-ttu-id="48b4d-136">`BaggageInfo` Třída poskytuje informace o přicházejících letů a karuselech, kde je možné vyzvednutí zavazadel z každého letu.</span><span class="sxs-lookup"><span data-stu-id="48b4d-136">A `BaggageInfo` class provides information about arriving flights and the carousels where baggage from each flight is available for pickup.</span></span> <span data-ttu-id="48b4d-137">Zobrazuje se v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="48b4d-137">It is shown in the following example.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#1)]
[!code-vb[Conceptual.ObserverDesignPattern#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#1)]

<span data-ttu-id="48b4d-138">`BaggageHandler` třída zodpovídá za příjem informací o přicházejících v letech a karuselech nároků na zavazadla.</span><span class="sxs-lookup"><span data-stu-id="48b4d-138">A `BaggageHandler` class is responsible for receiving information about arriving flights and baggage claim carousels.</span></span> <span data-ttu-id="48b4d-139">Interně udržuje dvě kolekce:</span><span class="sxs-lookup"><span data-stu-id="48b4d-139">Internally, it maintains two collections:</span></span>

- <span data-ttu-id="48b4d-140">`observers` – kolekce klientů, kteří získají aktualizované informace.</span><span class="sxs-lookup"><span data-stu-id="48b4d-140">`observers` - A collection of clients that will receive updated information.</span></span>

- <span data-ttu-id="48b4d-141">`flights` – kolekce letů a jejich přiřazené karusely.</span><span class="sxs-lookup"><span data-stu-id="48b4d-141">`flights` - A collection of flights and their assigned carousels.</span></span>

<span data-ttu-id="48b4d-142">Obě kolekce jsou reprezentovány obecnými <xref:System.Collections.Generic.List%601> objekty, které jsou vytvořeny v konstruktoru `BaggageHandler` třídy.</span><span class="sxs-lookup"><span data-stu-id="48b4d-142">Both collections are represented by generic <xref:System.Collections.Generic.List%601> objects that are instantiated in the `BaggageHandler` class constructor.</span></span> <span data-ttu-id="48b4d-143">V následujícím příkladu je uveden zdrojový kód pro třídu `BaggageHandler`.</span><span class="sxs-lookup"><span data-stu-id="48b4d-143">The source code for the `BaggageHandler` class is shown in the following example.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#2)]
[!code-vb[Conceptual.ObserverDesignPattern#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#2)]

<span data-ttu-id="48b4d-144">Klienti, kteří chtějí získávat aktualizované informace, volají metodu `BaggageHandler.Subscribe`.</span><span class="sxs-lookup"><span data-stu-id="48b4d-144">Clients that wish to receive updated information call the `BaggageHandler.Subscribe` method.</span></span> <span data-ttu-id="48b4d-145">Pokud se klient předtím, než se přihlásí k odběru oznámení, přidá do kolekce `observers` odkaz na implementaci <xref:System.IObserver%601> klienta.</span><span class="sxs-lookup"><span data-stu-id="48b4d-145">If the client has not previously subscribed to notifications, a reference to the client's <xref:System.IObserver%601> implementation is added to the `observers` collection.</span></span>

<span data-ttu-id="48b4d-146">Přetíženou metodu `BaggageHandler.BaggageStatus` lze volat k označení toho, že se zavazadlo z letu buď nenačítá, nebo se už neuvolní.</span><span class="sxs-lookup"><span data-stu-id="48b4d-146">The overloaded `BaggageHandler.BaggageStatus` method can be called to indicate that baggage from a flight either is being unloaded or is no longer being unloaded.</span></span> <span data-ttu-id="48b4d-147">V prvním případě se metodě předává letová čísla, letiště, ze kterého let pochází, a karusel, v němž je zavazadlo uvolněno.</span><span class="sxs-lookup"><span data-stu-id="48b4d-147">In the first case, the method is passed a flight number, the airport from which the flight originated, and the carousel where baggage is being unloaded.</span></span> <span data-ttu-id="48b4d-148">Ve druhém případě je metoda předána pouze letovému číslu.</span><span class="sxs-lookup"><span data-stu-id="48b4d-148">In the second case, the method is passed only a flight number.</span></span> <span data-ttu-id="48b4d-149">V případě, že dojde k uvolnění zavazadla, metoda ověří, zda `BaggageInfo` informace předané metodě existují v kolekci `flights`.</span><span class="sxs-lookup"><span data-stu-id="48b4d-149">For baggage that is being unloaded, the method checks whether the `BaggageInfo` information passed to the method exists in the `flights` collection.</span></span> <span data-ttu-id="48b4d-150">Pokud tomu tak není, metoda přidá tyto informace a zavolá metodu `OnNext` pro každého pozorovatele.</span><span class="sxs-lookup"><span data-stu-id="48b4d-150">If it does not, the method adds the information and calls each observer's `OnNext` method.</span></span> <span data-ttu-id="48b4d-151">Pro lety, jejichž zavazadlo se už nenačítá, metoda zkontroluje, jestli jsou informace o tomto letu uložené v kolekci `flights`.</span><span class="sxs-lookup"><span data-stu-id="48b4d-151">For flights whose baggage is no longer being unloaded, the method checks whether information on that flight is stored in the `flights` collection.</span></span> <span data-ttu-id="48b4d-152">Pokud je, volá metoda každou `OnNext` metodu pozorovatele a odebere objekt `BaggageInfo` z kolekce `flights`.</span><span class="sxs-lookup"><span data-stu-id="48b4d-152">If it is, the method calls each observer's `OnNext` method and removes the `BaggageInfo` object from the `flights` collection.</span></span>

<span data-ttu-id="48b4d-153">Po vykládce posledního letu dne a jeho zavazadla byla zavolána metoda `BaggageHandler.LastBaggageClaimed`.</span><span class="sxs-lookup"><span data-stu-id="48b4d-153">When the last flight of the day has landed and its baggage has been processed, the `BaggageHandler.LastBaggageClaimed` method is called.</span></span> <span data-ttu-id="48b4d-154">Tato metoda volá `OnCompleted` metodu každého pozorovatele, aby označovala, že všechna oznámení byla dokončena, a poté vymaže kolekci `observers`.</span><span class="sxs-lookup"><span data-stu-id="48b4d-154">This method calls each observer's `OnCompleted` method to indicate that all notifications have completed, and then clears the `observers` collection.</span></span>

<span data-ttu-id="48b4d-155">Metoda <xref:System.IObservable%601.Subscribe%2A> poskytovatele vrací implementaci <xref:System.IDisposable>, která umožňuje pozorovatelům zastavit příjem oznámení před zavoláním metody <xref:System.IObserver%601.OnCompleted%2A>.</span><span class="sxs-lookup"><span data-stu-id="48b4d-155">The provider's <xref:System.IObservable%601.Subscribe%2A> method returns an <xref:System.IDisposable> implementation that enables observers to stop receiving notifications before the <xref:System.IObserver%601.OnCompleted%2A> method is called.</span></span> <span data-ttu-id="48b4d-156">V následujícím příkladu je uveden zdrojový kód pro tuto třídu `Unsubscriber(Of BaggageInfo)`.</span><span class="sxs-lookup"><span data-stu-id="48b4d-156">The source code for this `Unsubscriber(Of BaggageInfo)` class is shown in the following example.</span></span> <span data-ttu-id="48b4d-157">Když je vytvořena instance třídy v metodě `BaggageHandler.Subscribe`, je předána odkaz na kolekci `observers` a odkaz na pozorovatele, který je přidán do kolekce.</span><span class="sxs-lookup"><span data-stu-id="48b4d-157">When the class is instantiated in the `BaggageHandler.Subscribe` method, it is passed a reference to the `observers` collection and a reference to the observer that is added to the collection.</span></span> <span data-ttu-id="48b4d-158">Tyto odkazy jsou přiřazeny k místním proměnným.</span><span class="sxs-lookup"><span data-stu-id="48b4d-158">These references are assigned to local variables.</span></span> <span data-ttu-id="48b4d-159">Když je volána metoda `Dispose` objektu, zkontroluje, zda pozorovatel stále existuje v kolekci `observers` a pokud ano, odebere pozorovatele.</span><span class="sxs-lookup"><span data-stu-id="48b4d-159">When the object's `Dispose` method is called, it checks whether the observer still exists in the `observers` collection, and, if it does, removes the observer.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#3)]
[!code-vb[Conceptual.ObserverDesignPattern#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#3)]

<span data-ttu-id="48b4d-160">Následující příklad poskytuje <xref:System.IObserver%601> implementaci s názvem `ArrivalsMonitor`, která je základní třídou, která zobrazuje informace o deklaraci zavazadel.</span><span class="sxs-lookup"><span data-stu-id="48b4d-160">The following example provides an <xref:System.IObserver%601> implementation named `ArrivalsMonitor`, which is a base class that displays baggage claim information.</span></span> <span data-ttu-id="48b4d-161">Informace se zobrazují abecedně podle názvu původního města.</span><span class="sxs-lookup"><span data-stu-id="48b4d-161">The information is displayed alphabetically, by the name of the originating city.</span></span> <span data-ttu-id="48b4d-162">Metody `ArrivalsMonitor` jsou označeny jako `overridable` (v Visual Basic) nebo `virtual` (in C#), takže je lze přepsat odvozenou třídou.</span><span class="sxs-lookup"><span data-stu-id="48b4d-162">The methods of `ArrivalsMonitor` are marked as `overridable` (in Visual Basic) or `virtual` (in C#), so they can all be overridden by a derived class.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/observer.cs#4)]
[!code-vb[Conceptual.ObserverDesignPattern#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/observer.vb#4)]

<span data-ttu-id="48b4d-163">Třída `ArrivalsMonitor` obsahuje metody `Subscribe` a `Unsubscribe`.</span><span class="sxs-lookup"><span data-stu-id="48b4d-163">The `ArrivalsMonitor` class includes the `Subscribe` and `Unsubscribe` methods.</span></span> <span data-ttu-id="48b4d-164">Metoda `Subscribe` umožňuje třídě ukládat implementaci <xref:System.IDisposable>, která byla vrácena voláním do <xref:System.IObservable%601.Subscribe%2A> privátní proměnné.</span><span class="sxs-lookup"><span data-stu-id="48b4d-164">The `Subscribe` method enables the class to save the <xref:System.IDisposable> implementation returned by the call to <xref:System.IObservable%601.Subscribe%2A> to a private variable.</span></span> <span data-ttu-id="48b4d-165">Metoda `Unsubscribe` umožňuje třídě odhlásit odběr oznámení voláním implementace <xref:System.IDisposable.Dispose%2A> zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="48b4d-165">The `Unsubscribe` method enables the class to unsubscribe from notifications by calling the provider's <xref:System.IDisposable.Dispose%2A> implementation.</span></span> <span data-ttu-id="48b4d-166">`ArrivalsMonitor` také poskytuje implementace metod <xref:System.IObserver%601.OnNext%2A>, <xref:System.IObserver%601.OnError%2A>a <xref:System.IObserver%601.OnCompleted%2A>.</span><span class="sxs-lookup"><span data-stu-id="48b4d-166">`ArrivalsMonitor` also provides implementations of the <xref:System.IObserver%601.OnNext%2A>, <xref:System.IObserver%601.OnError%2A>, and <xref:System.IObserver%601.OnCompleted%2A> methods.</span></span> <span data-ttu-id="48b4d-167">Pouze implementace <xref:System.IObserver%601.OnNext%2A> obsahuje značný objem kódu.</span><span class="sxs-lookup"><span data-stu-id="48b4d-167">Only the <xref:System.IObserver%601.OnNext%2A> implementation contains a significant amount of code.</span></span> <span data-ttu-id="48b4d-168">Metoda spolupracuje s privátním, řazeným a obecným objektem <xref:System.Collections.Generic.List%601>, který uchovává informace o letištích původu pro přicházející lety a karusely, na kterých je jejich zavazadlo k dispozici.</span><span class="sxs-lookup"><span data-stu-id="48b4d-168">The method works with a private, sorted, generic <xref:System.Collections.Generic.List%601> object that maintains information about the airports of origin for arriving flights and the carousels on which their baggage is available.</span></span> <span data-ttu-id="48b4d-169">Pokud `BaggageHandler` třída hlásí nové doručení letu, implementace metody <xref:System.IObserver%601.OnNext%2A> přidá do seznamu informace o tomto letu.</span><span class="sxs-lookup"><span data-stu-id="48b4d-169">If the `BaggageHandler` class reports a new flight arrival, the <xref:System.IObserver%601.OnNext%2A> method implementation adds information about that flight to the list.</span></span> <span data-ttu-id="48b4d-170">Pokud `BaggageHandler` třída hlásí, že se odstranilo zavazadlo letu, metoda <xref:System.IObserver%601.OnNext%2A> odstraní daný let ze seznamu.</span><span class="sxs-lookup"><span data-stu-id="48b4d-170">If the `BaggageHandler` class reports that the flight's baggage has been unloaded, the <xref:System.IObserver%601.OnNext%2A> method removes that flight from the list.</span></span> <span data-ttu-id="48b4d-171">Pokaždé, když je provedena změna, seznam se seřadí a zobrazí v konzole.</span><span class="sxs-lookup"><span data-stu-id="48b4d-171">Whenever a change is made, the list is sorted and displayed to the console.</span></span>

<span data-ttu-id="48b4d-172">Následující příklad obsahuje vstupní bod aplikace, který vytváří instanci `BaggageHandler` třídy, a také dvě instance třídy `ArrivalsMonitor` a používá metodu `BaggageHandler.BaggageStatus` k přidání a odebrání informací o přicházejících letů.</span><span class="sxs-lookup"><span data-stu-id="48b4d-172">The following example contains the application entry point that instantiates the `BaggageHandler` class as well as two instances of the `ArrivalsMonitor` class, and uses the `BaggageHandler.BaggageStatus` method to add and remove information about arriving flights.</span></span> <span data-ttu-id="48b4d-173">V každém případě pozorovatelé obdrží aktualizace a správně zobrazují informace o nárokech na zavazadlo.</span><span class="sxs-lookup"><span data-stu-id="48b4d-173">In each case, the observers receive updates and correctly display baggage claim information.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/program.cs#5)]
[!code-vb[Conceptual.ObserverDesignPattern#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/module1.vb#5)]

## <a name="related-topics"></a><span data-ttu-id="48b4d-174">Související témata</span><span class="sxs-lookup"><span data-stu-id="48b4d-174">Related Topics</span></span>

|<span data-ttu-id="48b4d-175">Název</span><span class="sxs-lookup"><span data-stu-id="48b4d-175">Title</span></span>|<span data-ttu-id="48b4d-176">Popis</span><span class="sxs-lookup"><span data-stu-id="48b4d-176">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="48b4d-177">Doporučené postupy pro návrhový vzor Pozorovatel</span><span class="sxs-lookup"><span data-stu-id="48b4d-177">Observer Design Pattern Best Practices</span></span>](../../../docs/standard/events/observer-design-pattern-best-practices.md)|<span data-ttu-id="48b4d-178">Popisuje osvědčené postupy, které je potřeba provést při vývoji aplikací, které implementují vzor návrhu pozorovatele.</span><span class="sxs-lookup"><span data-stu-id="48b4d-178">Describes best practices to adopt when developing applications that implement the observer design pattern.</span></span>|
|[<span data-ttu-id="48b4d-179">Postupy: Implementace poskytovatele</span><span class="sxs-lookup"><span data-stu-id="48b4d-179">How to: Implement a Provider</span></span>](../../../docs/standard/events/how-to-implement-a-provider.md)|<span data-ttu-id="48b4d-180">Poskytuje podrobnou implementaci zprostředkovatele pro aplikaci pro monitorování teploty.</span><span class="sxs-lookup"><span data-stu-id="48b4d-180">Provides a step-by-step implementation of a provider for a temperature monitoring application.</span></span>|
|[<span data-ttu-id="48b4d-181">Postupy: Implementace pozorovatele</span><span class="sxs-lookup"><span data-stu-id="48b4d-181">How to: Implement an Observer</span></span>](../../../docs/standard/events/how-to-implement-an-observer.md)|<span data-ttu-id="48b4d-182">Poskytuje podrobnou implementaci pozorovatele pro aplikaci pro monitorování teploty.</span><span class="sxs-lookup"><span data-stu-id="48b4d-182">Provides a step-by-step implementation of an observer for a temperature monitoring application.</span></span>|
