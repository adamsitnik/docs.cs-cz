---
title: 'Postupy: Vytváření časových pásem s pravidly úpravy'
ms.date: 04/10/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- time zones [.NET Framework], creating
- time zones [.NET Framework], and adjustment rules
- adjustment rule [.NET Framework]
ms.assetid: c52ef192-13a9-435f-8015-3b12eae8c47c
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 83905c97f37a0e49f6219da47e2f640ecfb8edfb
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/23/2019
ms.locfileid: "61901718"
---
# <a name="how-to-create-time-zones-with-adjustment-rules"></a><span data-ttu-id="5cdce-102">Postupy: Vytváření časových pásem s pravidly úpravy</span><span class="sxs-lookup"><span data-stu-id="5cdce-102">How to: Create time zones with adjustment rules</span></span>

<span data-ttu-id="5cdce-103">Informace přesné časové pásmo, který vyžaduje aplikace nemusí být k dispozici na konkrétní systém z několika důvodů:</span><span class="sxs-lookup"><span data-stu-id="5cdce-103">The precise time zone information that is required by an application may not be present on a particular system for several reasons:</span></span>

* <span data-ttu-id="5cdce-104">Časové pásmo je nikdy definována v registru místního systému.</span><span class="sxs-lookup"><span data-stu-id="5cdce-104">The time zone has never been defined in the local system's registry.</span></span>

* <span data-ttu-id="5cdce-105">Data o časovém pásmu, byla změněna nebo odebrána z registru.</span><span class="sxs-lookup"><span data-stu-id="5cdce-105">Data about the time zone has been modified or removed from the registry.</span></span>

* <span data-ttu-id="5cdce-106">Časové pásmo nemá žádné přesné informace o úpravách časové pásmo pro konkrétní období historické.</span><span class="sxs-lookup"><span data-stu-id="5cdce-106">The time zone does not have accurate information about time zone adjustments for a particular historic period.</span></span>

<span data-ttu-id="5cdce-107">V těchto případech můžete volat <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> metoda k definování časové pásmo požadovaná vaší aplikací.</span><span class="sxs-lookup"><span data-stu-id="5cdce-107">In these cases, you can call the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method to define the time zone required by your application.</span></span> <span data-ttu-id="5cdce-108">Přetížení této metody můžete použít k vytvoření časové pásmo s nebo bez pravidel úpravy.</span><span class="sxs-lookup"><span data-stu-id="5cdce-108">You can use the overloads of this method to create a time zone with or without adjustment rules.</span></span> <span data-ttu-id="5cdce-109">Podporuje-li časové pásmo letního času, můžete definovat úpravy pomocí pravidla buď pevnou nebo plovoucí úpravy.</span><span class="sxs-lookup"><span data-stu-id="5cdce-109">If the time zone supports daylight saving time, you can define adjustments with either fixed or floating adjustment rules.</span></span> <span data-ttu-id="5cdce-110">(Definice těchto pojmů najdete v části "Časové pásmo terminologie" v [Přehled časových pásem](../../../docs/standard/datetime/time-zone-overview.md).)</span><span class="sxs-lookup"><span data-stu-id="5cdce-110">(For definitions of these terms, see the "Time Zone Terminology" section in [Time zone overview](../../../docs/standard/datetime/time-zone-overview.md).)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="5cdce-111">Vlastní časové pásmo vytvořených voláním <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> metoda nejsou přidány do registru.</span><span class="sxs-lookup"><span data-stu-id="5cdce-111">Custom time zones created by calling the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method are not added to the registry.</span></span> <span data-ttu-id="5cdce-112">Místo toho jsou dostupné jenom prostřednictvím odkazu na objekt vrácený <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> volání metody.</span><span class="sxs-lookup"><span data-stu-id="5cdce-112">Instead, they can be accessed only through the object reference returned by the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method call.</span></span>

<span data-ttu-id="5cdce-113">Toto téma ukazuje, jak vytváření časových pásem s pravidly úpravy.</span><span class="sxs-lookup"><span data-stu-id="5cdce-113">This topic shows how to create a time zone with adjustment rules.</span></span> <span data-ttu-id="5cdce-114">Vytvoření časového pásma, která nepodporuje pravidly úpravy letního času, najdete v tématu [jak: Vytváření časových pásem bez pravidel úpravy](../../../docs/standard/datetime/create-time-zones-without-adjustment-rules.md).</span><span class="sxs-lookup"><span data-stu-id="5cdce-114">To create a time zone that does not support daylight saving time adjustment rules, see [How to: Create Time Zones Without Adjustment Rules](../../../docs/standard/datetime/create-time-zones-without-adjustment-rules.md).</span></span>

### <a name="to-create-a-time-zone-with-floating-adjustment-rules"></a><span data-ttu-id="5cdce-115">Chcete-li vytvořit časové pásmo s plovoucí pravidly úpravy</span><span class="sxs-lookup"><span data-stu-id="5cdce-115">To create a time zone with floating adjustment rules</span></span>

1. <span data-ttu-id="5cdce-116">Pro každou úpravu (který je pro každý přechod ze a zpět v konkrétním časovém intervalu (běžný čas)) postupujte takto:</span><span class="sxs-lookup"><span data-stu-id="5cdce-116">For each adjustment (that is, for each transition away from and back to standard time over a particular time interval), do the following:</span></span>

    1. <span data-ttu-id="5cdce-117">Definujte výchozí dobu přechodu pro úpravu časového pásma.</span><span class="sxs-lookup"><span data-stu-id="5cdce-117">Define the starting transition time for the time zone adjustment.</span></span>

       <span data-ttu-id="5cdce-118">Je nutné volat <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> – metoda a předejte jej <xref:System.DateTime> hodnotu, která definuje čas přechodu, celočíselnou hodnotu, která definuje měsíc přechodu, celočíselnou hodnotu, která definuje v týdnu, ve kterém má dojít k přechodu a <xref:System.DayOfWeek> hodnota, která definuje dne v týdnu, ve kterém dojde k přechodu.</span><span class="sxs-lookup"><span data-stu-id="5cdce-118">You must call the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> method and pass it a <xref:System.DateTime> value that defines the time of the transition, an integer value that defines the month of the transition, an integer value that defines the week on which the transition occurs, and a <xref:System.DayOfWeek> value that defines the day of the week on which the transition occurs.</span></span> <span data-ttu-id="5cdce-119">Vytvoří instanci volání této metody <xref:System.TimeZoneInfo.TransitionTime> objektu.</span><span class="sxs-lookup"><span data-stu-id="5cdce-119">This method call instantiates a <xref:System.TimeZoneInfo.TransitionTime> object.</span></span>

    2. <span data-ttu-id="5cdce-120">Definujte čas dokončení přechodu pro úpravu časového pásma.</span><span class="sxs-lookup"><span data-stu-id="5cdce-120">Define the ending transition time for the time zone adjustment.</span></span> <span data-ttu-id="5cdce-121">To vyžaduje další volání <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="5cdce-121">This requires another call to the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="5cdce-122">Toto volání metody vytváří sekundy <xref:System.TimeZoneInfo.TransitionTime> objektu.</span><span class="sxs-lookup"><span data-stu-id="5cdce-122">This method call instantiates a second <xref:System.TimeZoneInfo.TransitionTime> object.</span></span>

    3. <span data-ttu-id="5cdce-123">Volání <xref:System.TimeZoneInfo.AdjustmentRule.CreateAdjustmentRule%2A> metoda a předejte jí efektivní počáteční a koncové datum úpravy, <xref:System.TimeSpan> objekt, který definuje množství času v přechodu a dva <xref:System.TimeZoneInfo.TransitionTime> objekty, které definují při přechody do a z letní čas dojde k času.</span><span class="sxs-lookup"><span data-stu-id="5cdce-123">Call the <xref:System.TimeZoneInfo.AdjustmentRule.CreateAdjustmentRule%2A> method and pass it the effective start and end dates of the adjustment, a <xref:System.TimeSpan> object that defines the amount of time in the transition, and the two <xref:System.TimeZoneInfo.TransitionTime> objects that define when the transitions to and from daylight saving time occur.</span></span> <span data-ttu-id="5cdce-124">Vytvoří instanci volání této metody <xref:System.TimeZoneInfo.AdjustmentRule> objektu.</span><span class="sxs-lookup"><span data-stu-id="5cdce-124">This method call instantiates a <xref:System.TimeZoneInfo.AdjustmentRule> object.</span></span>

    4. <span data-ttu-id="5cdce-125">Přiřazení <xref:System.TimeZoneInfo.AdjustmentRule> objekt na pole <xref:System.TimeZoneInfo.AdjustmentRule> objekty.</span><span class="sxs-lookup"><span data-stu-id="5cdce-125">Assign the <xref:System.TimeZoneInfo.AdjustmentRule> object to an array of <xref:System.TimeZoneInfo.AdjustmentRule> objects.</span></span>

2. <span data-ttu-id="5cdce-126">Definujte časové pásmo zobrazovaný název.</span><span class="sxs-lookup"><span data-stu-id="5cdce-126">Define the time zone's display name.</span></span> <span data-ttu-id="5cdce-127">Zobrazovaný název následuje poměrně standardní formát, ve kterém časovém pásmu posun od koordinovaného světového času (UTC) není uzavřen v závorkách a následuje řetězec, který určí časové pásmo, jeden nebo více měst v časovém pásmu, nebo v jednom nebo více následujících cou oložky nebo oblasti v časovém pásmu.</span><span class="sxs-lookup"><span data-stu-id="5cdce-127">The display name follows a fairly standard format in which the time zone's offset from Coordinated Universal Time (UTC) is enclosed in parentheses and is followed by a string that identifies the time zone, one or more of the cities in the time zone, or one or more of the countries or regions in the time zone.</span></span>

3. <span data-ttu-id="5cdce-128">Definujte název časového pásma (běžný čas).</span><span class="sxs-lookup"><span data-stu-id="5cdce-128">Define the name of the time zone's standard time.</span></span> <span data-ttu-id="5cdce-129">Obvykle tento řetězec se také používá jako identifikátor časového pásma.</span><span class="sxs-lookup"><span data-stu-id="5cdce-129">Typically, this string is also used as the time zone's identifier.</span></span>

4. <span data-ttu-id="5cdce-130">Definujte název časového pásma letního času.</span><span class="sxs-lookup"><span data-stu-id="5cdce-130">Define the name of the time zone's daylight time.</span></span>

5. <span data-ttu-id="5cdce-131">Pokud chcete použít jiný identifikátor než název standardního časového pásma, definujte identifikátor časového pásma.</span><span class="sxs-lookup"><span data-stu-id="5cdce-131">If you want to use a different identifier than the time zone's standard name, define the time zone identifier.</span></span>

6. <span data-ttu-id="5cdce-132">Vytvořit instanci <xref:System.TimeSpan> objekt, který definuje posun časového pásma UTC.</span><span class="sxs-lookup"><span data-stu-id="5cdce-132">Instantiate a <xref:System.TimeSpan> object that defines the time zone's offset from UTC.</span></span> <span data-ttu-id="5cdce-133">Časových pásem s časem, které jsou novější než čas UTC mít kladný posun.</span><span class="sxs-lookup"><span data-stu-id="5cdce-133">Time zones with times that are later than UTC have a positive offset.</span></span> <span data-ttu-id="5cdce-134">Časových pásem s časem, které jsou starší než čas UTC, mají negativní posun.</span><span class="sxs-lookup"><span data-stu-id="5cdce-134">Time zones with times that are earlier than UTC have a negative offset.</span></span>

7. <span data-ttu-id="5cdce-135">Volání <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> metoda pro vytvoření instance nového časového pásma.</span><span class="sxs-lookup"><span data-stu-id="5cdce-135">Call the <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> method to instantiate the new time zone.</span></span>

## <a name="example"></a><span data-ttu-id="5cdce-136">Příklad</span><span class="sxs-lookup"><span data-stu-id="5cdce-136">Example</span></span>

<span data-ttu-id="5cdce-137">Následující příklad definuje střed standardní časové pásmo pro USA, který obsahuje pravidla úpravy pro širokou škálu časových intervalech od 1918 až po současnost.</span><span class="sxs-lookup"><span data-stu-id="5cdce-137">The following example defines a Central Standard Time zone for the United States that includes adjustment rules for a variety of time intervals from 1918 to the present.</span></span>

[!code-csharp[System.TimeZone2.CreateTimeZone#5](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#5)]
[!code-vb[System.TimeZone2.CreateTimeZone#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#5)]

<span data-ttu-id="5cdce-138">Časové pásmo vytvořené v tomto příkladu má víc úpravy pravidel.</span><span class="sxs-lookup"><span data-stu-id="5cdce-138">The time zone created in this example has multiple adjustment rules.</span></span> <span data-ttu-id="5cdce-139">Musí se dbát na to, že efektivní počáteční a koncové datum u libovolného pravidla úprav nepřekrývají s daty z jiné pravidlo úpravy.</span><span class="sxs-lookup"><span data-stu-id="5cdce-139">Care must be taken to ensure that the effective start and end dates of any adjustment rule do not overlap with the dates of another adjustment rule.</span></span> <span data-ttu-id="5cdce-140">Pokud dojde k překrytí <xref:System.InvalidTimeZoneException> je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="5cdce-140">If there is an overlap, an <xref:System.InvalidTimeZoneException> is thrown.</span></span>

<span data-ttu-id="5cdce-141">Pro plovoucí úpravy pravidel, je předána hodnota 5 `week` parametr <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> indikace, že dojde k přechodu na poslední týden v daném měsíci.</span><span class="sxs-lookup"><span data-stu-id="5cdce-141">For floating adjustment rules, the value 5 is passed to the `week` parameter of the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> method to indicate that the transition occurs on the last week of a particular month.</span></span>

<span data-ttu-id="5cdce-142">Při vytváření pole <xref:System.TimeZoneInfo.AdjustmentRule> objekty používané <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> volání metody, kód může inicializovat pole na velikost požadovanou podle počtu úpravy mají být vytvořeny pro časové pásmo.</span><span class="sxs-lookup"><span data-stu-id="5cdce-142">In creating the array of <xref:System.TimeZoneInfo.AdjustmentRule> objects to use in the <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> method call, the code could initialize the array to the size required by the number of adjustments to be created for the time zone.</span></span> <span data-ttu-id="5cdce-143">Místo toho tento příklad kódu volá <xref:System.Collections.Generic.List%601.Add%2A> způsob, jak přidat každého pravidla úpravy pro obecný <xref:System.Collections.Generic.List%601> kolekce <xref:System.TimeZoneInfo.AdjustmentRule> objekty.</span><span class="sxs-lookup"><span data-stu-id="5cdce-143">Instead, this code example calls the <xref:System.Collections.Generic.List%601.Add%2A> method to add each adjustment rule to a generic <xref:System.Collections.Generic.List%601> collection of <xref:System.TimeZoneInfo.AdjustmentRule> objects.</span></span> <span data-ttu-id="5cdce-144">Kód poté volá <xref:System.Collections.Generic.List%601.CopyTo%2A> metoda kopírování členy této kolekce do pole.</span><span class="sxs-lookup"><span data-stu-id="5cdce-144">The code then calls the <xref:System.Collections.Generic.List%601.CopyTo%2A> method to copy the members of this collection to the array.</span></span>

<span data-ttu-id="5cdce-145">V příkladu se také používá <xref:System.TimeZoneInfo.TransitionTime.CreateFixedDateRule%2A> metoda k definování úprav s pevným datem.</span><span class="sxs-lookup"><span data-stu-id="5cdce-145">The example also uses the <xref:System.TimeZoneInfo.TransitionTime.CreateFixedDateRule%2A> method to define fixed-date adjustments.</span></span> <span data-ttu-id="5cdce-146">Podobá se to volání <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> metody, s tím rozdílem, že se vyžaduje jenom čas, měsícem a dnem v parametrech přechod.</span><span class="sxs-lookup"><span data-stu-id="5cdce-146">This is similar to calling the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> method, except that it requires only the time, month, and day of the transition parameters.</span></span>

<span data-ttu-id="5cdce-147">V příkladu lze otestovat pomocí kódu, jako jsou následující:</span><span class="sxs-lookup"><span data-stu-id="5cdce-147">The example can be tested using code such as the following:</span></span>

[!code-csharp[System.TimeZone2.CreateTimeZone#7](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#7)]
[!code-vb[System.TimeZone2.CreateTimeZone#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#7)]

## <a name="compiling-the-code"></a><span data-ttu-id="5cdce-148">Kompilování kódu</span><span class="sxs-lookup"><span data-stu-id="5cdce-148">Compiling the code</span></span>

<span data-ttu-id="5cdce-149">Tento příklad vyžaduje:</span><span class="sxs-lookup"><span data-stu-id="5cdce-149">This example requires:</span></span>

* <span data-ttu-id="5cdce-150">Aby byl odkaz na System.Core.dll přidán do projektu.</span><span class="sxs-lookup"><span data-stu-id="5cdce-150">That a reference to System.Core.dll be added to the project.</span></span>

* <span data-ttu-id="5cdce-151">Aby byly importované následující obory názvů:</span><span class="sxs-lookup"><span data-stu-id="5cdce-151">That the following namespaces be imported:</span></span>

  [!code-csharp[System.TimeZone2.CreateTimeZone#6](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#6)]
  [!code-vb[System.TimeZone2.CreateTimeZone#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#6)]

## <a name="see-also"></a><span data-ttu-id="5cdce-152">Viz také:</span><span class="sxs-lookup"><span data-stu-id="5cdce-152">See also</span></span>

- [<span data-ttu-id="5cdce-153">Data, časy a časová pásma</span><span class="sxs-lookup"><span data-stu-id="5cdce-153">Dates, times, and time zones</span></span>](../../../docs/standard/datetime/index.md)
- [<span data-ttu-id="5cdce-154">Přehled časových pásem</span><span class="sxs-lookup"><span data-stu-id="5cdce-154">Time zone overview</span></span>](../../../docs/standard/datetime/time-zone-overview.md)
- [<span data-ttu-id="5cdce-155">Postupy: Vytváření časových pásem bez pravidel úpravy</span><span class="sxs-lookup"><span data-stu-id="5cdce-155">How to: Create time zones without adjustment rules</span></span>](../../../docs/standard/datetime/create-time-zones-without-adjustment-rules.md)
