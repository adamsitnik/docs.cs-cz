---
title: Vyvolané kolekce
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- garbage collection, forced
ms.assetid: 019008fe-4708-4e65-bebf-04fd9941e149
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 149597f0e34448d9c275a2cb8cd4ffc250bec619
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/23/2019
ms.locfileid: "54492117"
---
# <a name="induced-collections"></a><span data-ttu-id="ccaf0-102">Vyvolané kolekce</span><span class="sxs-lookup"><span data-stu-id="ccaf0-102">Induced Collections</span></span>
<span data-ttu-id="ccaf0-103">Ve většině případů může systém uvolňování paměti určit nejvhodnější čas k provedení uvolnění paměti, které byste pak měli nechat běžet nezávisle.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-103">In most cases, the garbage collector can determine the best time to perform a collection, and you should let it run independently.</span></span> <span data-ttu-id="ccaf0-104">Existují výjimečné situace, kdy může vynucená kolekce zlepšit výkon vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-104">There are rare situations when a forced collection might improve your application's performance.</span></span> <span data-ttu-id="ccaf0-105">V těchto případech můžete zahájit uvolnění pomocí <xref:System.GC.Collect%2A?displayProperty=nameWithType> metody pro vynucení uvolnění paměti.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-105">In these cases, you can induce garbage collection by using the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method to force a garbage collection.</span></span>  
  
 <span data-ttu-id="ccaf0-106">Použití <xref:System.GC.Collect%2A?displayProperty=nameWithType> metodu, když dojde k výraznému snížení množství paměti používané v konkrétním bodě v kódu vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-106">Use the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method when there is a significant reduction in the amount of memory being used at a specific point in your application's code.</span></span> <span data-ttu-id="ccaf0-107">Například pokud vaše aplikace používá komplexní dialogové okno, které obsahuje několik ovládacích prvků, volání <xref:System.GC.Collect%2A> při ukončení dialogu může zlepšit výkon, protože okamžitě uvolní paměť používanou v dialogovém okně.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-107">For example, if your application uses a complex dialog box that has several controls, calling <xref:System.GC.Collect%2A> when the dialog box is closed could improve performance by immediately reclaiming the memory used by the dialog box.</span></span> <span data-ttu-id="ccaf0-108">Ujistěte se, že aplikace nevyvolá uvolnění paměti příliš často, protože pokud systému uvolňování paměti pokouší uvolnit objekty v neoptimálních časech, které může snížit výkon.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-108">Be sure that your application is not inducing garbage collection too frequently, because that can decrease performance if the garbage collector is trying to reclaim objects at non-optimal times.</span></span> <span data-ttu-id="ccaf0-109">Můžete zadat <xref:System.GCCollectionMode.Optimized?displayProperty=nameWithType> hodnotu výčtu pro <xref:System.GC.Collect%2A> metoda shromažďovat pouze v případě, že kolekce by kolekce byla produktivní, jak je popsáno v další části.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-109">You can supply a <xref:System.GCCollectionMode.Optimized?displayProperty=nameWithType> enumeration value to the <xref:System.GC.Collect%2A> method to collect only when collection would be productive, as discussed in the next section.</span></span>  
  
## <a name="gc-collection-mode"></a><span data-ttu-id="ccaf0-110">Režim kolekce GC</span><span class="sxs-lookup"><span data-stu-id="ccaf0-110">GC collection mode</span></span>  
 <span data-ttu-id="ccaf0-111">Můžete použít jednu z <xref:System.GC.Collect%2A?displayProperty=nameWithType> přetížení metod, které zahrnuje <xref:System.GCCollectionMode> hodnota, která má specifikaci chování vynucené kolekce následujícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-111">You can use one of the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method overloads that includes a <xref:System.GCCollectionMode> value to specify the behavior for a forced collection as follows.</span></span>  
  
|<span data-ttu-id="ccaf0-112">`GCCollectionMode` Hodnota</span><span class="sxs-lookup"><span data-stu-id="ccaf0-112">`GCCollectionMode` value</span></span>|<span data-ttu-id="ccaf0-113">Popis</span><span class="sxs-lookup"><span data-stu-id="ccaf0-113">Description</span></span>|  
|------------------------------|-----------------|  
|<xref:System.GCCollectionMode.Default>|<span data-ttu-id="ccaf0-114">Použije výchozí nastavení kolekce uvolnění paměti pro spuštěnou verzi rozhraní .NET.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-114">Uses the default garbage collection setting for the running version of .NET.</span></span>|  
|<xref:System.GCCollectionMode.Forced>|<span data-ttu-id="ccaf0-115">Kolekce paměti vynutí okamžité.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-115">Forces garbage collection to occur immediately.</span></span> <span data-ttu-id="ccaf0-116">To je ekvivalentní volání <xref:System.GC.Collect?displayProperty=nameWithType> přetížení.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-116">This is equivalent to calling the <xref:System.GC.Collect?displayProperty=nameWithType> overload.</span></span> <span data-ttu-id="ccaf0-117">Výsledkem je blokování celé kolekce všech generací.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-117">It results in a full blocking collection of all generations.</span></span><br /><br /> <span data-ttu-id="ccaf0-118">Haldy velkých objektů můžete také zkomprimovat nastavením <xref:System.Runtime.GCSettings.LargeObjectHeapCompactionMode%2A?displayProperty=nameWithType> vlastnost <xref:System.Runtime.GCLargeObjectHeapCompactionMode.CompactOnce?displayProperty=nameWithType> před vynuceným okamžité úplné blokující uvolňování paměti kolekci.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-118">You can also compact the large object heap by setting the <xref:System.Runtime.GCSettings.LargeObjectHeapCompactionMode%2A?displayProperty=nameWithType> property to <xref:System.Runtime.GCLargeObjectHeapCompactionMode.CompactOnce?displayProperty=nameWithType> before forcing an immediate full blocking garbage collection.</span></span>|  
|<xref:System.GCCollectionMode.Optimized>|<span data-ttu-id="ccaf0-119">Umožňuje uvolňování paměti určit, zda je aktuální čas optimální pro uvolnění objektů.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-119">Enables the garbage collector to determine whether the current time is optimal to reclaim objects.</span></span><br /><br /> <span data-ttu-id="ccaf0-120">Uvolňování paměti může určit, že kolekce by nebyla dostatečně produktivní oprávněné, v takovém případě ji vrátí bez uvolní objektů.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-120">The garbage collector could determine that a collection would not be productive enough to be justified, in which case it will return without reclaiming objects.</span></span>|  
  
## <a name="background-or-blocking-collections"></a><span data-ttu-id="ccaf0-121">Pozadí nebo blokující kolekce</span><span class="sxs-lookup"><span data-stu-id="ccaf0-121">Background or blocking collections</span></span>  
 <span data-ttu-id="ccaf0-122">Můžete volat <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29?displayProperty=nameWithType> přetížení metody k určení, zda je blokována indukovaná kolekce blokování nebo ne.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-122">You can call the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29?displayProperty=nameWithType> method overload to specify whether an induced collection is blocking or not.</span></span> <span data-ttu-id="ccaf0-123">Provedený typ kolekce závisí na kombinaci metody `mode` a `blocking` parametry.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-123">The type of collection performed depends on a combination of the method's `mode` and `blocking` parameters.</span></span> <span data-ttu-id="ccaf0-124">`mode` je členem skupiny <xref:System.GCCollectionMode> výčtu, a `blocking` je <xref:System.Boolean> hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-124">`mode` is a member of the <xref:System.GCCollectionMode> enumeration, and `blocking` is a <xref:System.Boolean> value.</span></span> <span data-ttu-id="ccaf0-125">Následující tabulka shrnuje působení `mode` a `blocking` argumenty.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-125">The following table summarizes the interaction of the `mode` and `blocking` arguments.</span></span>  
  
|`mode`|`blocking` = `true`|`blocking` = `false`|  
|------------|--------------------------|---------------------------|  
|<span data-ttu-id="ccaf0-126"><xref:System.GCCollectionMode.Forced> Nebo <xref:System.GCCollectionMode.Default></span><span class="sxs-lookup"><span data-stu-id="ccaf0-126"><xref:System.GCCollectionMode.Forced> or <xref:System.GCCollectionMode.Default></span></span>|<span data-ttu-id="ccaf0-127">Blokující kolekce se provádí co nejdříve.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-127">A blocking collection is performed as soon as possible.</span></span> <span data-ttu-id="ccaf0-128">Pokud probíhá shromažďování pozadí a generování je 0 nebo 1, <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> metoda okamžitě spustí z blokující kolekce a vrátí po dokončení kolekce.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-128">If a background collection is in progress and generation is 0 or 1, the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> method immediately triggers a blocking collection and returns when the collection is finished.</span></span> <span data-ttu-id="ccaf0-129">Pokud probíhá shromažďování pozadí a `generation` parametr bude 2, metoda čeká na pozadí je dokončená, spustí blokující generaci 2 kolekce a vrátí.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-129">If a background collection is in progress and the `generation` parameter is 2, the method waits until the background collection is finished, triggers a blocking generation 2 collection, and then returns.</span></span>|<span data-ttu-id="ccaf0-130">Kolekce se provádí co nejdříve.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-130">A collection is performed as soon as possible.</span></span> <span data-ttu-id="ccaf0-131"><xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> Metoda požaduje kolekci v pozadí, ale to není zaručeno, v závislosti na okolnostech mohou stále prováděny blokující kolekce.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-131">The <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> method requests a background collection, but this is not guaranteed; depending on the circumstances, a blocking collection may still be performed.</span></span> <span data-ttu-id="ccaf0-132">Pokud kolekce pozadí již probíhá, metoda vrátí hodnotu okamžitě.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-132">If a background collection is already in progress, the method returns immediately.</span></span>|  
|<xref:System.GCCollectionMode.Optimized>|<span data-ttu-id="ccaf0-133">Blokující kolekce mohou být provedeny v závislosti na stavu systému uvolňování paměti a `generation` parametru.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-133">A blocking collection may be performed, depending on the state of the garbage collector and the `generation` parameter.</span></span> <span data-ttu-id="ccaf0-134">Uvolňování paměti se snaží poskytovat optimální výkon.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-134">The garbage collector tries to provide optimal performance.</span></span>|<span data-ttu-id="ccaf0-135">Kolekce mohou být provedeny v závislosti na stavu systému uvolňování paměti.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-135">A collection may be performed, depending on the state of the garbage collector.</span></span> <span data-ttu-id="ccaf0-136"><xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> Metoda požaduje kolekci v pozadí, ale to není zaručeno, v závislosti na okolnostech mohou stále prováděny blokující kolekce.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-136">The <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> method requests a background collection, but this is not guaranteed; depending on the circumstances, a blocking collection may still be performed.</span></span> <span data-ttu-id="ccaf0-137">Uvolňování paměti se snaží poskytovat optimální výkon.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-137">The garbage collector tries to provide optimal performance.</span></span> <span data-ttu-id="ccaf0-138">Pokud kolekce pozadí již probíhá, metoda vrátí hodnotu okamžitě.</span><span class="sxs-lookup"><span data-stu-id="ccaf0-138">If a background collection is already in progress, the method returns immediately.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="ccaf0-139">Viz také:</span><span class="sxs-lookup"><span data-stu-id="ccaf0-139">See also</span></span>

- [<span data-ttu-id="ccaf0-140">Latentní režimy</span><span class="sxs-lookup"><span data-stu-id="ccaf0-140">Latency Modes</span></span>](../../../docs/standard/garbage-collection/latency.md)
- [<span data-ttu-id="ccaf0-141">Uvolňování paměti</span><span class="sxs-lookup"><span data-stu-id="ccaf0-141">Garbage Collection</span></span>](../../../docs/standard/garbage-collection/index.md)
