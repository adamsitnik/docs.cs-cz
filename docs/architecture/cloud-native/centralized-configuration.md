---
title: Centralizovaná konfigurace
description: Centralizovaná konfigurace pomocí Azure Key Vault může zjednodušit správu nativních aplikací cloudu.
ms.date: 06/30/2019
ms.openlocfilehash: f4f495591550abccf2c64ef24cbe7620b039d8ca
ms.sourcegitcommit: 55f438d4d00a34b9aca9eedaac3f85590bb11565
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/23/2019
ms.locfileid: "71183516"
---
# <a name="centralized-configuration"></a><span data-ttu-id="9bd3a-103">Centralizovaná konfigurace</span><span class="sxs-lookup"><span data-stu-id="9bd3a-103">Centralized configuration</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="9bd3a-104">Nativní aplikace v cloudu zahrnují mnohem více spuštěných služeb než tradiční aplikace monolitické s jednou instancí.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-104">Cloud-native applications involve many more running services than traditional single-instance monolithic apps.</span></span> <span data-ttu-id="9bd3a-105">Správa nastavení konfigurace pro desítky vzájemně závislých služeb může být náročná. to znamená, že centralizované úložiště konfigurace se často implementují pro distribuované aplikace.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-105">Managing configuration settings for dozens of interdependent services can be challenging, which is why centralized configuration stores are often implemented for distributed applications.</span></span>

<span data-ttu-id="9bd3a-106">Jak je popsáno v [kapitole 1](introduction.md), doporučení pro dvanácti s aplikacemi vyžadují striktní oddělení mezi kódem a konfigurací.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-106">As discussed in [Chapter 1](introduction.md), the Twelve-Factor App recommendations require strict separation between code and configuration.</span></span> <span data-ttu-id="9bd3a-107">To znamená, že ukládání nastavení konfigurace jako konstanty nebo hodnoty literálů v kódu je porušení.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-107">This means storing configuration settings as constants or literal values in code is a violation.</span></span> <span data-ttu-id="9bd3a-108">Toto doporučení existuje, protože stejný kód by měl být použit ve více prostředích, včetně vývoje, testování, přípravy a výroby.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-108">This recommendation exists because the same code should be used across multiple environments, including development, testing, staging, and production.</span></span> <span data-ttu-id="9bd3a-109">Konfigurační hodnoty se ale budou nejspíš měnit mezi jednotlivými prostředími.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-109">However, configuration values are likely to vary between each of these environments.</span></span> <span data-ttu-id="9bd3a-110">Konfigurační hodnoty by tedy měly být uloženy v samotném prostředí, jinak by toto prostředí mělo ukládat do centralizovaného úložiště konfigurace.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-110">So, configuration values should be stored in the environment itself, or the environment should store the credentials to a centralized configuration store.</span></span>

<span data-ttu-id="9bd3a-111">Aplikace eShopOnContainers zahrnuje místní soubory nastavení aplikace s každou mikroslužbou.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-111">The eShopOnContainers application includes local application settings files with each microservice.</span></span> <span data-ttu-id="9bd3a-112">Tyto soubory jsou zkontrolovány do správy zdrojového kódu, ale nezahrnují provozní tajemství, jako jsou připojovací řetězce nebo klíče rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-112">These files are checked into source control but don't include production secrets such as connection strings or API keys.</span></span> <span data-ttu-id="9bd3a-113">V produkčním prostředí může být individuální nastavení přepsáno pomocí proměnných prostředí pro jednotlivé služby.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-113">In production, individual settings may be overwritten with per-service environment variables.</span></span> <span data-ttu-id="9bd3a-114">To je běžný postup pro hostované aplikace, ale neposkytuje centrální úložiště konfigurace.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-114">This is a common practice for hosted applications, but doesn't provide a central configuration store.</span></span> <span data-ttu-id="9bd3a-115">V rámci podpory centralizované správy nastavení konfigurace každá mikroslužba obsahuje nastavení, které se přepíná mezi použitím místních nastavení nebo nastavení Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-115">To support centralized management of configuration settings, each microservice includes a setting to toggle between its use of local settings or Azure Key Vault settings.</span></span>

## <a name="azure-key-vault"></a><span data-ttu-id="9bd3a-116">Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="9bd3a-116">Azure Key Vault</span></span>

<span data-ttu-id="9bd3a-117">Azure Key Vault poskytuje zabezpečené úložiště tokenů, hesel, certifikátů, klíčů rozhraní API a dalších citlivých tajných klíčů.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-117">Azure Key Vault provides secure storage of tokens, passwords, certificates, API keys, and other sensitive secrets.</span></span> <span data-ttu-id="9bd3a-118">Přístup k Key Vault vyžaduje správné ověření volajícího a autorizaci, které v případě mikroslužeb eShopOnContainers označuje použití kombinace ClientId/ClientSecret.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-118">Access to Key Vault requires proper caller authentication and authorization, which in the case of the eShopOnContainers microservices means the use of a ClientId/ClientSecret combination.</span></span> <span data-ttu-id="9bd3a-119">Nezadávejte tyto přihlašovací údaje do správy zdrojových kódů, ale místo toho je nastavte v prostředí aplikace.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-119">Don't check in these credentials into source control, but instead set in the application's environment.</span></span> <span data-ttu-id="9bd3a-120">Přímý přístup k Key Vault z AKS lze dosáhnout pomocí [Key Vault FlexVolume](https://github.com/Azure/kubernetes-keyvault-flexvol).</span><span class="sxs-lookup"><span data-stu-id="9bd3a-120">Direct access to Key Vault from AKS can be achieved using [Key Vault FlexVolume](https://github.com/Azure/kubernetes-keyvault-flexvol).</span></span>

<span data-ttu-id="9bd3a-121">S centralizovanou konfigurací lze nastavení, která platí pro celou aplikaci, jako je například centralizovaný koncový bod protokolování, nastavit jednou a používat v každé části distribuované aplikace.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-121">With centralized configuration, settings that apply to the entire application, such as the centralized logging endpoint, can be set once and used by every part of the distributed application.</span></span> <span data-ttu-id="9bd3a-122">I když by mikroslužby měly být nezávisle na sobě, obvykle se jedná o některé sdílené závislosti, jejichž podrobnosti konfigurace můžou být z centralizovaného úložiště konfigurace přínosné.</span><span class="sxs-lookup"><span data-stu-id="9bd3a-122">Although microservices should be independent of one another, there will typically still be some shared dependencies whose configuration details can benefit from a centralized configuration store.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="9bd3a-123">[Předchozí](deploy-eshoponcontainers-azure.md)
>[Další](scale-applications.md)</span><span class="sxs-lookup"><span data-stu-id="9bd3a-123">[Previous](deploy-eshoponcontainers-azure.md)
[Next](scale-applications.md)</span></span> <!-- Next Chapter -->
