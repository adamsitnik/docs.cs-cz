---
title: Upgradovat rozhraní API s atributy pro definování očekávání null
description: Tento článek vysvětluje podněty a techniky pro přidání popisných atributů k popisu nulového stavu argumentů a vrácených hodnot z rozhraní API.
ms.date: 07/31/2019
ms.openlocfilehash: f8ff2063a3859954a5ccab006cd21c6a29dbc6b1
ms.sourcegitcommit: eb9ff6f364cde6f11322e03800d8f5ce302f3c73
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/01/2019
ms.locfileid: "68710931"
---
# <a name="update-libraries-to-use-nullable-reference-types-and-communicate-nullable-rules-to-callers"></a><span data-ttu-id="7f1cf-103">Aktualizace knihoven pro použití typů odkazů s možnou hodnotou null a sdělování pravidel s možnou hodnotou null volajícím</span><span class="sxs-lookup"><span data-stu-id="7f1cf-103">Update libraries to use nullable reference types and communicate nullable rules to callers.</span></span>

<span data-ttu-id="7f1cf-104">Přidání odkazových [typů s možnou hodnotou null](nullable-references.md) znamená, že můžete deklarovat `null` , zda je nebo není hodnota pro každou proměnnou povolena nebo očekávána.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-104">The addition of [nullable reference types](nullable-references.md) means you can declare whether or not a `null` value is allowed or expected for every variable.</span></span> <span data-ttu-id="7f1cf-105">Poskytuje skvělé prostředí při psaní kódu.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-105">That provides a great experience as you write code.</span></span> <span data-ttu-id="7f1cf-106">Zobrazí se upozornění, pokud může být proměnná bez hodnoty null nastavena na `null`.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-106">You get warnings if a non-nullable variable might be set to `null`.</span></span> <span data-ttu-id="7f1cf-107">Zobrazí se upozornění, pokud u proměnné s možnou hodnotou null není zkontrolována hodnota null před tím, než ji zrušíte.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-107">You get warnings if a nullable variable isn't null-checked before you dereference it.</span></span> <span data-ttu-id="7f1cf-108">Aktualizace knihoven může chvíli trvat, ale výnosy je.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-108">Updating your libraries can take time, but the payoffs are worth it.</span></span> <span data-ttu-id="7f1cf-109">Další informace, které pro kompilátor poskytnete, *Pokud* `null` je hodnota povolená nebo zakázaná, budou se vám lépe zobrazovat uživatelé vašeho rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-109">The more information you provide to the compiler about *when* a `null` value is allowed or prohibited, the better warnings users of your API will get.</span></span> <span data-ttu-id="7f1cf-110">Pojďme začít se známým příkladem.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-110">Let's start with a familiar example.</span></span> <span data-ttu-id="7f1cf-111">Představte si, že knihovna má následující rozhraní API k načtení řetězce prostředků:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-111">Imagine your library has the following API to retrieve a resource string:</span></span>

```csharp
bool TryGetMessage(string key, out string message)
```

<span data-ttu-id="7f1cf-112">Předchozí příklad se řídí známým `Try*` vzorem v rozhraní .NET.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-112">The preceding example follows the familiar `Try*` pattern in .NET.</span></span> <span data-ttu-id="7f1cf-113">Pro toto rozhraní API existují dva argumenty odkazů: `key` `message` a parametr.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-113">There are two reference arguments for this API: the `key` and the `message` parameter.</span></span> <span data-ttu-id="7f1cf-114">Toto rozhraní API má následující pravidla týkající se hodnoty null těchto argumentů:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-114">This API has the following rules relating to the nullness of these arguments:</span></span>

- <span data-ttu-id="7f1cf-115">Volající by neměli předat `null` jako argument pro. `key`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-115">Callers shouldn't pass `null` as the argument for `key`.</span></span>
- <span data-ttu-id="7f1cf-116">Volající mohou předat proměnnou, jejíž hodnota je `null` jako argument pro. `message`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-116">Callers can pass a variable whose value is `null` as the argument for `message`.</span></span>
- <span data-ttu-id="7f1cf-117">Pokud metoda vrátí `true`hodnotu, hodnota `message` není null. `TryGetMessage`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-117">If the `TryGetMessage` method returns `true`, the value of `message` isn't null.</span></span> <span data-ttu-id="7f1cf-118">Pokud je návratovou hodnotou `false,` `message` hodnota (a její stav null), má hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-118">If the return value is `false,` the value of `message` (and its null state) is null.</span></span>

<span data-ttu-id="7f1cf-119">Pravidlo pro `key` může být zcela vyjádřeno typem proměnné: `key` typ odkazu, který neumožňuje hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-119">The rule for `key` can be completely expressed by the variable type: `key` should be a non-nullable reference type.</span></span> <span data-ttu-id="7f1cf-120">`message` Parametr je složitější.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-120">The `message` parameter is more complex.</span></span> <span data-ttu-id="7f1cf-121">To umožňuje `null` jako argument, ale zaručuje, že po úspěšném dokončení tento `out` argument nemá hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-121">It allows `null` as the argument, but guarantees that, on success, that `out` argument isn't null.</span></span> <span data-ttu-id="7f1cf-122">V těchto scénářích potřebujete podrobnější slovník, který popisuje očekávání.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-122">For these scenarios, you need a richer vocabulary to describe the expectations.</span></span>

<span data-ttu-id="7f1cf-123">Aktualizace knihovny pro odkazy s možnou hodnotou null vyžaduje více `?` než automatické automatických zadávání u některých proměnných a názvů typů.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-123">Updating your library for nullable references requires more than sprinkling `?` on some of the variables and type names.</span></span> <span data-ttu-id="7f1cf-124">Předchozí příklad ukazuje, že je nutné projít vaše rozhraní API a vzít v úvahu vaše očekávání pro každý vstupní argument.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-124">The preceding example shows that you need to examine your APIs and consider your expectations for each input argument.</span></span> <span data-ttu-id="7f1cf-125">Vezměte v úvahu záruky pro vrácenou hodnotu a jakékoli `out` argumenty `ref` nebo argumentů, které vrátí metoda.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-125">Consider the guarantees for the return value, and any `out` or `ref` arguments upon the method's return.</span></span> <span data-ttu-id="7f1cf-126">Potom tyto pravidla sdělí kompilátoru a kompilátor poskytne upozornění, pokud se volajícím tyto pravidla neřídí.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-126">Then communicate those rules to the compiler, and the compiler will provide warnings when callers don't abide by those rules.</span></span>

<span data-ttu-id="7f1cf-127">Tato práce trvá určitou dobu.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-127">This work takes time.</span></span> <span data-ttu-id="7f1cf-128">Pojďme začít s strategiemi, které vaší knihovně nebo aplikaci zohledňují hodnoty null, zatímco se vyrovnávají další požadavky a dodávky.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-128">Let's start with strategies to make your library or application nullable-aware, while balancing other requirements and deliverables.</span></span> <span data-ttu-id="7f1cf-129">Uvidíte, jak vyrovnávat průběžný vývoj a povolit typy odkazů s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-129">You'll see how to balance ongoing development enabling nullable reference types.</span></span> <span data-ttu-id="7f1cf-130">Seznámíte se s problémy s definicemi obecného typu.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-130">You'll learn challenges for generic type definitions.</span></span> <span data-ttu-id="7f1cf-131">Dozvíte se, jak použít atributy k popisu před a po jednotlivých podmínkách rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-131">You'll learn to apply attributes to describe pre- and post-conditions on individual APIs.</span></span>

## <a name="choose-a-nullable-strategy"></a><span data-ttu-id="7f1cf-132">Výběr strategie s možnou hodnotou null</span><span class="sxs-lookup"><span data-stu-id="7f1cf-132">Choose a nullable strategy</span></span>

<span data-ttu-id="7f1cf-133">První volbou je, že ve výchozím nastavení by se měly zapnout nebo vypnout typy odkazů s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-133">The first choice is whether nullable reference types should be on or off by default.</span></span> <span data-ttu-id="7f1cf-134">Máte dvě strategie:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-134">You have two strategies:</span></span>

- <span data-ttu-id="7f1cf-135">Povolte typy odkazů s možnou hodnotou null pro celý projekt a zakažte ho v kódu, který není připravený.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-135">Enable nullable reference types for the entire project, and disable it in code that's not ready.</span></span>
- <span data-ttu-id="7f1cf-136">Povolit pouze typy odkazů s možnou hodnotou null pro kód, který je opatřen poznámkou pro typy s možnou hodnotou null</span><span class="sxs-lookup"><span data-stu-id="7f1cf-136">Only enable nullable reference types for code that's been annotated for nullable reference types.</span></span>

<span data-ttu-id="7f1cf-137">První strategie funguje nejlépe při přidávání dalších funkcí do knihovny při jejich aktualizaci na typy odkazů s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-137">The first strategy works best when you're adding other features to the library as you update it for nullable reference types.</span></span> <span data-ttu-id="7f1cf-138">Veškerý nový vývoj má na paměti s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-138">All new development is nullable aware.</span></span> <span data-ttu-id="7f1cf-139">Při aktualizaci existujícího kódu povolíte v těchto třídách typy odkazů s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-139">As you update existing code, you enable nullable reference types in those classes.</span></span>

<span data-ttu-id="7f1cf-140">Po této první strategii provedete následující:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-140">Following this first strategy, you do the following:</span></span>

1. <span data-ttu-id="7f1cf-141">Povolit typy s možnou hodnotou null pro celý projekt `<Nullable>enable</Nullable>` přidáním elementu do souborů *csproj* .</span><span class="sxs-lookup"><span data-stu-id="7f1cf-141">Enable nullable types for the entire project by adding the `<Nullable>enable</Nullable>` element to your *csproj* files.</span></span> 
1. <span data-ttu-id="7f1cf-142">`#nullable disable` Přidejte direktivu pragma do každého zdrojového souboru v projektu.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-142">Add the `#nullable disable` pragma to every source file in your project.</span></span> 
1. <span data-ttu-id="7f1cf-143">Při práci na jednotlivých souborech odeberte direktivu pragma a vyřešte všechna upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-143">As you work on each file, remove the pragma and address any warnings.</span></span>

<span data-ttu-id="7f1cf-144">Tato první strategie obsahuje více než více práce pro přidání direktivy pragma do každého souboru.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-144">This first strategy has more up-front work to add the pragma to every file.</span></span> <span data-ttu-id="7f1cf-145">Výhodou je, že každý nový soubor kódu přidaný do projektu bude mít povolenou hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-145">The advantage is that every new code file added to the project will be nullable enabled.</span></span> <span data-ttu-id="7f1cf-146">Jakékoli nové práce budou mít na paměti nabývat hodnoty null; je nutné aktualizovat pouze existující kód.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-146">Any new work will be nullable aware; only existing code must be updated.</span></span>

<span data-ttu-id="7f1cf-147">Druhá strategie funguje lépe, pokud je knihovna obecně stabilní a hlavní fokus vývoje je přijmout typy odkazů s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-147">The second strategy works better if the library is generally stable, and the main focus of the development is to adopt nullable reference types.</span></span> <span data-ttu-id="7f1cf-148">Při přidávání poznámek k rozhraním API můžete zapnout typy odkazů s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-148">You turn on nullable reference types as you annotate APIs.</span></span> <span data-ttu-id="7f1cf-149">Až budete hotovi, povolte v celém projektu typy odkazů s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-149">When you've finished, you enable nullable reference types for the entire project.</span></span>

<span data-ttu-id="7f1cf-150">Po této druhé strategii provedete následující:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-150">Following this second strategy you do the following:</span></span>

1. <span data-ttu-id="7f1cf-151">`#nullable enable` Přidejte direktivu pragma do souboru, pro který chcete nastavit nepovolenou hodnotu s podporou.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-151">Add the `#nullable enable` pragma to the file you want to make nullable aware.</span></span>
1. <span data-ttu-id="7f1cf-152">Vyřešte všechna upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-152">Address any warnings.</span></span>
1. <span data-ttu-id="7f1cf-153">Pokračujte v těchto prvních dvou krocích, dokud nebudete mít k celou knihovnu s podporou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-153">Continue these first two steps until you've made the entire library nullable aware.</span></span>
1. <span data-ttu-id="7f1cf-154">Povolit typy s možnou hodnotou null pro celý projekt `<Nullable>enable</Nullable>` přidáním elementu do souborů *csproj* .</span><span class="sxs-lookup"><span data-stu-id="7f1cf-154">Enable nullable types for the entire project by adding the `<Nullable>enable</Nullable>` element to your *csproj* files.</span></span> 
1. <span data-ttu-id="7f1cf-155">`#nullable enable` Odeberte direktivy pragma, protože už nejsou potřeba.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-155">Remove the `#nullable enable` pragmas, as they're no longer needed.</span></span>

<span data-ttu-id="7f1cf-156">Tato druhá strategie má méně práce předem.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-156">This second strategy has less work up-front.</span></span> <span data-ttu-id="7f1cf-157">Kompromisy je, že první úkol při vytváření nového souboru je přidání direktivy pragma a zpřístupnění hodnoty null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-157">The tradeoff is that the first task when you create a new file is to add the pragma and make it nullable aware.</span></span> <span data-ttu-id="7f1cf-158">Pokud se některý z vývojářů v týmu zapomene, je nový kód v nedokončené práci, aby se zajistilo, že bude mít veškerý kód na hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-158">If any developers on your team forget, that new code is now in the backlog of work to make all code nullable aware.</span></span>

<span data-ttu-id="7f1cf-159">Které z těchto strategií vybíráte, závisí na tom, kolik aktivního vývoje se v projektu provádí.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-159">Which of these strategies you pick depends on how much active development is taking place in your project.</span></span> <span data-ttu-id="7f1cf-160">Tím se zlepší a stabilnější váš projekt, tím lepší je druhá strategie.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-160">The more mature and stable your project, the better the second strategy.</span></span> <span data-ttu-id="7f1cf-161">Vyvíjejí se další funkce, což je lepší první strategie.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-161">The more features being developed, the better the first strategy.</span></span>

## <a name="should-nullable-warnings-introduce-breaking-changes"></a><span data-ttu-id="7f1cf-162">Má upozornění na hodnotu null zavést průlomové změny?</span><span class="sxs-lookup"><span data-stu-id="7f1cf-162">Should nullable warnings introduce breaking changes?</span></span>

<span data-ttu-id="7f1cf-163">Než povolíte typy odkazů s možnou hodnotou null, jsou proměnné považovány za *Nullable oblivious*.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-163">Before you enable nullable reference types, variables are considered *nullable oblivious*.</span></span> <span data-ttu-id="7f1cf-164">Jakmile povolíte typy odkazů s možnou hodnotou null, všechny tyto proměnné nebudou *mít hodnotu null*.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-164">Once you enable nullable reference types, all those variables are *non-nullable*.</span></span> <span data-ttu-id="7f1cf-165">Kompilátor bude vydávat upozornění, pokud tyto proměnné nejsou inicializovány na hodnoty, které nejsou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-165">The compiler will issue warnings if those variables aren't initialized to non-null values.</span></span>

<span data-ttu-id="7f1cf-166">Dalším pravděpodobným zdrojem upozornění je vrácení hodnot, pokud hodnota nebyla inicializována.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-166">Another likely source of warnings is return values when the value hasn't been initialized.</span></span>

<span data-ttu-id="7f1cf-167">Prvním krokem při adresování upozornění kompilátoru je použití `?` poznámek na parametrech a návratových typech k označení, že argumenty nebo návratové hodnoty mohou být null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-167">The first step in addressing the compiler warnings is to use `?` annotations on parameter and return types to indicate when arguments or return values may be null.</span></span> <span data-ttu-id="7f1cf-168">Pokud referenční proměnné nesmí mít hodnotu null, je původní deklarace správná.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-168">When reference variables must not be null, the original declaration is correct.</span></span> <span data-ttu-id="7f1cf-169">V takovém případě váš cíl nestačí jenom opravit upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-169">As you do this, your goal isn't just to fix warnings.</span></span> <span data-ttu-id="7f1cf-170">Důležitější je, že kompilátor porozuměl vašemu záměru pro potenciální hodnoty null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-170">The more important goal is to make the compiler understand your intent for potential null values.</span></span> <span data-ttu-id="7f1cf-171">Při kontrole upozornění se dostanete k vašemu dalšímu hlavnímu rozhodnutí o vaší knihovně.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-171">As you examine the warnings, you reach your next major decision for your library.</span></span> <span data-ttu-id="7f1cf-172">Chcete zvážit úpravu signatur rozhraní API, abyste mohli snadněji sdělit záměr návrhu?</span><span class="sxs-lookup"><span data-stu-id="7f1cf-172">Do you want to consider modifying API signatures to more clearly communicate your design intent?</span></span> <span data-ttu-id="7f1cf-173">Lepší signatura rozhraní API pro `TryGetMessage` dříve zkoumané metody může být:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-173">A better API signature for the `TryGetMessage` method examined earlier could be:</span></span>


```csharp
string? TryGetMessage(string key);
```

<span data-ttu-id="7f1cf-174">Vrácená hodnota označuje úspěch nebo neúspěch a přenese hodnotu, pokud byla hodnota nalezena.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-174">The return value indicates success or failure, and carries the value if the value was found.</span></span> <span data-ttu-id="7f1cf-175">V mnoha případech může změna signatur rozhraní API zlepšit způsob, jakým komunikuje hodnoty null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-175">In many cases, changing API signatures can improve how they communicate null values.</span></span>

<span data-ttu-id="7f1cf-176">Pro veřejné knihovny nebo knihovny s velkými základy uživatelů ale můžete raději nezavádět změny signatur rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-176">However, for public libraries, or libraries with large user bases, you may prefer not introducing any API signature changes.</span></span> <span data-ttu-id="7f1cf-177">Pro tyto případy a další běžné vzory můžete použít atributy pro přesnější definování v případě, že argument nebo návratová hodnota může být `null`.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-177">For those cases, and other common patterns, you can apply attributes to more clearly define when an argument or return value may be `null`.</span></span> <span data-ttu-id="7f1cf-178">Bez ohledu na to, zda zvažte změnu povrchu rozhraní API, pravděpodobně zjistíte, že tyto anotace typu nejsou dostačující pro `null` popis hodnot argumentů nebo vrácených hodnot.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-178">Whether or not you consider changing the surface of your API, you'll likely find that type annotations alone aren't sufficient for describing `null` values for arguments or return values.</span></span> <span data-ttu-id="7f1cf-179">V těchto případech můžete použít atributy pro přehlednější Popis rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-179">In those instances, you can apply attributes to more clearly describe an API.</span></span> 

## <a name="attributes-extend-type-annotations"></a><span data-ttu-id="7f1cf-180">Atributy rozšiřuje anotace typu</span><span class="sxs-lookup"><span data-stu-id="7f1cf-180">Attributes extend type annotations</span></span>

<span data-ttu-id="7f1cf-181">Bylo přidáno několik atributů pro vyjádření dalších informací o stavu hodnoty null proměnných.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-181">Several attributes have been added to express additional information about the null state of variables.</span></span> <span data-ttu-id="7f1cf-182">Veškerý kód, který jste C# napsali před 8 představenými typy odkazů s možnou hodnotou null, byl *null oblivious*</span><span class="sxs-lookup"><span data-stu-id="7f1cf-182">All code you wrote before C# 8 introduced nullable reference types was *null oblivious*.</span></span> <span data-ttu-id="7f1cf-183">To znamená, že jakákoli proměnná typu odkazu může mít hodnotu null, ale kontroly hodnoty null nejsou požadovány.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-183">That means any reference type variable may be null, but null checks aren't required.</span></span> <span data-ttu-id="7f1cf-184">Jakmile kód bude *mít na paměti hodnotu s možnou hodnotou null*, změní se tato pravidla.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-184">Once your code is *nullable aware*, those rules change.</span></span> <span data-ttu-id="7f1cf-185">Odkazové typy by nikdy neměly `null` být hodnotou a pro typy odkazů s možnou hodnotou `null` null musí být před zpětným odkazem zkontrolovány.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-185">Reference types should never be the `null` value, and nullable reference types must be checked against `null` before being dereferenced.</span></span>

<span data-ttu-id="7f1cf-186">Pravidla pro vaše rozhraní API jsou pravděpodobně složitější, jak jste viděli `TryGetValue` ve scénáři rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-186">The rules for your APIs are likely more complicated, as you saw with the `TryGetValue` API scenario.</span></span> <span data-ttu-id="7f1cf-187">Mnohé z vašich rozhraní API mají složitější pravidla, kdy proměnné můžou nebo nemůžou `null`být.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-187">Many of your APIs have more complex rules for when variables can or can't be `null`.</span></span> <span data-ttu-id="7f1cf-188">V těchto případech použijete jeden z následujících atributů pro vyjádření těchto pravidel:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-188">In these cases, you'll use one of the following attributes to express those rules:</span></span>

- <span data-ttu-id="7f1cf-189">[AllowNull má](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Vstupní argument, který nemůže mít hodnotu null, může mít hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-189">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="7f1cf-190">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): Vstupní argument s možnou hodnotou null by nikdy neměl mít hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-190">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>
- <span data-ttu-id="7f1cf-191">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Návratová hodnota, která není null, může mít hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-191">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="7f1cf-192">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): Návratová hodnota s možnou hodnotou null nikdy nebude null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-192">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>
- <span data-ttu-id="7f1cf-193">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Pokud vrácená hodnota splňuje podmínku `ref` , může být hodnota null neboargumentunull.`out`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-193">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable `out` or `ref` argument may be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="7f1cf-194">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Pokud vrácená hodnota `ref` splňuje podmínku, nemůže být hodnota null neboargumentunull.`out`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-194">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable `out` or `ref` argument may not be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="7f1cf-195">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): hodnota návratového řetězce není null, pokud argument vstupního řetězce není null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-195">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): a string return value isn't null when the input string argument isn't null.</span></span>

<span data-ttu-id="7f1cf-196">Předchozí popisy představují rychlý odkaz na to, co každý atribut dělá.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-196">The preceding descriptions are a quick reference to what each attribute does.</span></span> <span data-ttu-id="7f1cf-197">Každá z následujících částí popisuje chování a lepší význam.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-197">Each following section describes the behavior and meaning more thoroughly.</span></span>

<span data-ttu-id="7f1cf-198">Přidáním těchto atributů poskytne kompilátor více informací o pravidlech pro vaše rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-198">Adding these attributes gives the compiler more information about the rules for your API.</span></span> <span data-ttu-id="7f1cf-199">Při volání kódu v kontextu s povolenou hodnotou null, kompilátor upozorní volající, když porušují tato pravidla.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-199">When calling code is compiled in a nullable enabled context, the compiler will warn callers when they violate those rules.</span></span> <span data-ttu-id="7f1cf-200">Tyto atributy neumožňují u implementace další kontroly.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-200">These attributes don't enable additional checks on your implementation.</span></span>

## <a name="specify-preconditions-allownull-and-disallownull"></a><span data-ttu-id="7f1cf-201">Zadat předběžné podmínky: `AllowNull` a`DisallowNull`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-201">Specify preconditions: `AllowNull` and `DisallowNull`</span></span>

<span data-ttu-id="7f1cf-202">Zvažte vlastnost pro čtení a zápis, která se `null` nikdy nevrátí, protože má rozumnou výchozí hodnotu.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-202">Consider a read/write property that never returns `null` because it has a reasonable default value.</span></span> <span data-ttu-id="7f1cf-203">Volající přecházejí `null` do přístupového objektu set při jeho nastavení na tuto výchozí hodnotu.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-203">Callers pass `null` to the set accessor when setting it to that default value.</span></span> <span data-ttu-id="7f1cf-204">Představte si třeba systém zasílání zpráv, který se zeptá na název obrazovky v chatovací místnosti.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-204">For example, consider a messaging system that asks for a screen name in a chat room.</span></span> <span data-ttu-id="7f1cf-205">Pokud není k dispozici žádný, systém vygeneruje náhodný název:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-205">If none is provided, the system generates a random name:</span></span>

```csharp
public string ScreenName
{
   get => screenName;
   set => screenName = value ?? GenerateRandomScreenName();
}
private string screenName;
```

<span data-ttu-id="7f1cf-206">Pokud kompilujete předchozí kód v oblivious kontextu s možnou hodnotou null, vše je dobré.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-206">When you compile the preceding code in a nullable oblivious context, everything is fine.</span></span> <span data-ttu-id="7f1cf-207">Po povolení typů `ScreenName` odkazů s možnou hodnotou null se vlastnost zobrazí jako odkaz bez hodnoty null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-207">Once you enable nullable reference types, the `ScreenName` property becomes a non-nullable reference.</span></span> <span data-ttu-id="7f1cf-208">To je správné pro `get` přistupující objekt: nikdy se nevrátí. `null`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-208">That's correct for the `get` accessor: it never returns `null`.</span></span> <span data-ttu-id="7f1cf-209">Volající nepotřebují kontrolovat vrácenou vlastnost pro `null`.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-209">Callers don't need to check the returned property for `null`.</span></span> <span data-ttu-id="7f1cf-210">Ale teď vlastnost nastavíme tak `null` , aby vygenerovala upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-210">But now setting the property to `null` generates a warning.</span></span> <span data-ttu-id="7f1cf-211">Aby bylo možné pokračovat v podpoře tohoto typu kódu, přidejte <xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute?displayProperty=nameWithType> atribut do vlastnosti, jak je znázorněno v následujícím kódu:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-211">In order to continue to support this type of code, you add the <xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute?displayProperty=nameWithType> attribute to the property, as shown in the following code:</span></span> 

```csharp
[AllowNull]
public string ScreenName
{
   get => screenName;
   set => screenName = value ?? GenerateRandomScreenName();
}
private string screenName = GenerateRandomScreenName();
```

<span data-ttu-id="7f1cf-212">`using` Pro<xref:System.Diagnostics.CodeAnalysis> použití tohoto a dalších atributů, které jsou popsány v tomto článku, bude pravděpodobně nutné přidat direktivu.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-212">You may need to add a `using` directive for <xref:System.Diagnostics.CodeAnalysis> to use this and other attributes discussed in this article.</span></span> <span data-ttu-id="7f1cf-213">Atribut se aplikuje na vlastnost, nikoli na `set` přistupující objekt.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-213">The attribute is applied to the property, not the `set` accessor.</span></span> <span data-ttu-id="7f1cf-214">Atribut určuje *předběžné podmínky*a vztahuje se pouze na vstupy. `AllowNull`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-214">The `AllowNull` attribute specifies *pre-conditions*, and only applies to inputs.</span></span> <span data-ttu-id="7f1cf-215">`get` Přistupující objekt má návratovou hodnotu, ale žádné vstupní argumenty.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-215">The `get` accessor has a return value, but no input arguments.</span></span> <span data-ttu-id="7f1cf-216">Proto se `set` atribut vztahuje pouze na přístup. `AllowNull`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-216">Therefore, the `AllowNull` attribute only applies to the `set` accessor.</span></span>

<span data-ttu-id="7f1cf-217">Předchozí příklad ukazuje, co je třeba najít při přidávání `AllowNull` atributu v argumentu:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-217">The preceding example demonstrates what to look for when adding the `AllowNull` attribute on an argument:</span></span>

1. <span data-ttu-id="7f1cf-218">Obecnou smlouvou pro tuto proměnnou je, že by `null`neměla být, takže chcete typ odkazu, který nepovoluje hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-218">The general contract for that variable is that it shouldn't be `null`, so you want a non-nullable reference type.</span></span>
1. <span data-ttu-id="7f1cf-219">Existují scénáře, které mají být `null`vstupní proměnné, i když nejsou nejběžnějším využitím.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-219">There are scenarios for the input variable to be `null`, though they aren't the most common usage.</span></span>

<span data-ttu-id="7f1cf-220">Nejčastěji budete potřebovat tento atribut pro vlastnosti, nebo `in` `out`a `ref` argumenty.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-220">Most often you'll need this attribute for properties, or `in`, `out`, and `ref` arguments.</span></span> <span data-ttu-id="7f1cf-221">Atribut je nejlepší volbou v případě, že proměnná obvykle není null, ale je nutné `null` ji použít jako předběžnou podmínku. `AllowNull`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-221">The `AllowNull` attribute is the best choice when a variable is typically non-null, but you need to allow `null` as a precondition.</span></span>

<span data-ttu-id="7f1cf-222">Na rozdíl od scénářů použití `DisallowNull`: Pomocí tohoto atributu určíte, že vstupní proměnná typu s možnou hodnotou null by `null`neměla být.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-222">Contrast that with scenarios for using `DisallowNull`: You use this attribute to specify that an input variable of a nullable type shouldn't be `null`.</span></span> <span data-ttu-id="7f1cf-223">Vezměte v úvahu vlastnost `null` , kde je výchozí hodnota, ale klienti ji můžou nastavit jenom na jinou hodnotu než null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-223">Consider a property where `null` is the default value, but clients can only set it to a non-null value.</span></span> <span data-ttu-id="7f1cf-224">Vezměte v úvahu následující kód:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-224">Consider the following code:</span></span>

```csharp
public string ReviewComment
{
    get => _comment;
    set => _comment = value ?? throw new ArgumentNullException(nameof(value), "Cannot set to null");
}
string _comment;
```

<span data-ttu-id="7f1cf-225">Předchozí kód je nejlepším způsobem, jak vyjádřit návrh, který `ReviewComment` může být `null`, ale nelze jej nastavit na `null`.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-225">The preceding code is the best way to express your design that the `ReviewComment` could be `null`, but can't be set to `null`.</span></span> <span data-ttu-id="7f1cf-226">Jakmile tento kód bude mít na paměti hodnotu s možnou hodnotou null, můžete tento koncept srozumitelně <xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute?displayProperty=nameWithType>vyjádřit volajícím pomocí:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-226">Once this code is nullable aware, you can express this concept more clearly to callers using the <xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute?displayProperty=nameWithType>:</span></span>

```csharp
[DisallowNull] 
public string? ReviewComment
{
    get => _comment;
    set => _comment = value ?? throw new ArgumentNullException(nameof(value), "Cannot set to null");
}
string? _comment;
```

<span data-ttu-id="7f1cf-227">V kontextu `ReviewComment` `null`s možnou hodnotou null může přístupovýobjektvrátitvýchozíhodnotu.`get`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-227">In a nullable context, the `ReviewComment` `get` accessor could return the default value of `null`.</span></span> <span data-ttu-id="7f1cf-228">Kompilátor upozorní, že před přístupem musí být zkontrolován.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-228">The compiler warns that it must be checked before access.</span></span> <span data-ttu-id="7f1cf-229">Kromě toho upozorňuje volající, že i když to může být `null`, volající by se neměli explicitně nastavit na. `null`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-229">Furthermore, it warns callers that, even though it could be `null`, callers shouldn't explicitly set it to `null`.</span></span> <span data-ttu-id="7f1cf-230">Atribut také určuje předběžnou *podmínku*, nemá vliv na `get` přistupující objekt. `DisallowNull`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-230">The `DisallowNull` attribute also specifies a *pre-condition*, it does not affect the `get` accessor.</span></span> <span data-ttu-id="7f1cf-231">Tento `DisallowNull` atribut byste měli použít, pokud máte pozor na tyto charakteristiky:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-231">You should choose to use the `DisallowNull` attribute when you observe these characteristics about:</span></span>

1. <span data-ttu-id="7f1cf-232">Tato proměnná může být `null` v základních scénářích, často při první instanci.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-232">The variable could be `null` in core scenarios, often when first instantiated.</span></span>
1. <span data-ttu-id="7f1cf-233">Proměnná by neměla být explicitně nastavena na `null`.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-233">The variable shouldn't be explicitly set to `null`.</span></span>

<span data-ttu-id="7f1cf-234">Tyto situace jsou běžné v kódu, který byl původně *null oblivious*.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-234">These situations are common in code that was originally *null oblivious*.</span></span> <span data-ttu-id="7f1cf-235">Je možné, že vlastnosti objektu jsou nastaveny ve dvou různých inicializačních operacích.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-235">It may be that object properties are set in two distinct initialization operations.</span></span> <span data-ttu-id="7f1cf-236">Je možné, že některé vlastnosti jsou nastaveny až po dokončení některé asynchronní práce.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-236">It may be that some properties are set only after some asynchronous work has completed.</span></span>

<span data-ttu-id="7f1cf-237">Atributy `AllowNull` a`DisallowNull` umožňují určit, že představy pro proměnné nemusí odpovídat na tyto proměnné anotace s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-237">The `AllowNull` and `DisallowNull` attributes enable you to specify that preconditions on variables may not match the nullable annotations on those variables.</span></span> <span data-ttu-id="7f1cf-238">Poskytují podrobnější informace o vlastnostech vašeho rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-238">These provide more detail about the characteristics of your API.</span></span> <span data-ttu-id="7f1cf-239">Tyto další informace pomáhají volajícímu používat rozhraní API správně.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-239">This additional information helps callers use your API correctly.</span></span> <span data-ttu-id="7f1cf-240">Nezapomeňte zadat předpoklady pomocí následujících atributů:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-240">Remember you specify preconditions using the following attributes:</span></span>

- <span data-ttu-id="7f1cf-241">[AllowNull má](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Vstupní argument, který nemůže mít hodnotu null, může mít hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-241">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="7f1cf-242">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): Vstupní argument s možnou hodnotou null by nikdy neměl mít hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-242">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>

## <a name="specify-post-conditions-maybenull-and-notnull"></a><span data-ttu-id="7f1cf-243">Zadat podmínky odeslání: `MaybeNull` a`NotNull`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-243">Specify post-conditions: `MaybeNull` and `NotNull`</span></span>

<span data-ttu-id="7f1cf-244">Předpokládejme, že máte metodu s následujícím podpisem:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-244">Suppose you have a method with the following signature:</span></span>

```csharp
public Customer FindCustomer(string lastName, string firstName)
```

<span data-ttu-id="7f1cf-245">Pravděpodobně jste napsali metodu, která by měla vrátit `null` , když se hledané jméno nenašlo.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-245">You've likely written a method like this to return `null` when the name sought wasn't found.</span></span> <span data-ttu-id="7f1cf-246">`null` Jasně indikuje, že se záznam nenašel.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-246">The `null` clearly indicates that the record wasn't found.</span></span> <span data-ttu-id="7f1cf-247">V tomto příkladu jste pravděpodobně změnili návratový typ z `Customer` na. `Customer?`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-247">In this example, you'd likely change the return type from `Customer` to `Customer?`.</span></span> <span data-ttu-id="7f1cf-248">Deklarace návratové hodnoty jako typ odkazu s možnou hodnotou null určuje záměr tohoto rozhraní API jasně.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-248">Declaring the return value as a nullable reference type specifies the intent of this API clearly.</span></span> 

<span data-ttu-id="7f1cf-249">Z důvodů uvedených v rámci [obecných definic a možností použití hodnoty null](#generic-definitions-and-nullability) , které technika nepracuje s obecnými metodami.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-249">For reasons covered under [Generic definitions and nullability](#generic-definitions-and-nullability) that technique does not work with generic methods.</span></span> <span data-ttu-id="7f1cf-250">Je možné, že budete mít obecnou metodu, která následuje podobný vzor:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-250">You may have a generic method that follows a similar pattern:</span></span>

```csharp
public T Find<T>(IEnumerable<T> sequence, Func<T, bool> match)
```

<span data-ttu-id="7f1cf-251">Nemůžete určit, že návratová `T?`hodnota je.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-251">You can't specify that the return value is `T?`.</span></span> <span data-ttu-id="7f1cf-252">Metoda vrátí `null` , když není nalezena požadovaná položka.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-252">The method returns `null` when the sought item isn't found.</span></span> <span data-ttu-id="7f1cf-253">Vzhledem k tomu, že `T?` nelze deklarovat návratový typ, `MaybeNull` přidejte anotaci do metody Return:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-253">Since you can't declare a `T?` return type, you add the `MaybeNull` annotation to the method return:</span></span>

```csharp
[return: MaybeNull]
public T Find<T>(IEnumerable<T> sequence, Func<T, bool> match)
```

<span data-ttu-id="7f1cf-254">Předchozí kód informuje volající, že kontrakt implikuje typ, který nemůže mít hodnotu null, ale vrácená hodnota *může* být null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-254">The preceding code informs callers that the contract implies a non-nullable type, but the return value *may* actually be null.</span></span>  <span data-ttu-id="7f1cf-255">Použijte atribut, pokud by vaše rozhraní API mělo být typu, který nemůže mít hodnotu null, obvykle parametr obecného typu, ale mohou nastat `null` instance, kde by bylo vráceno. `MaybeNull`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-255">Use the `MaybeNull` attribute when your API should be a non-nullable type, typically a generic type parameter, but there may be instances where `null` would be returned.</span></span>

<span data-ttu-id="7f1cf-256">Můžete také určit, že návratová hodnota nebo `out` argument nebo `ref` nemá hodnotu null, přestože typ je typ s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-256">You can also specify that a return value or an `out` or `ref` argument isn't null even though the type is a nullable type.</span></span> <span data-ttu-id="7f1cf-257">Vezměte v úvahu metodu, která zajistí, že je pole dostatečně velké pro udržení počtu prvků.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-257">Consider a method that ensures an array is large enough to hold a number of elements.</span></span> <span data-ttu-id="7f1cf-258">Pokud vstupní argument nemá kapacitu, rutina přidělí nové pole a zkopíruje do něj všechny existující prvky.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-258">If the input argument doesn't have capacity, the routine would allocate a new array and copy all the existing elements into it.</span></span> <span data-ttu-id="7f1cf-259">Pokud je `null`vstupním argumentem, rutina přidělí nové úložiště.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-259">If the input argument is `null`, the routine would allocate new storage.</span></span> <span data-ttu-id="7f1cf-260">Pokud existuje dostatečná kapacita, rutina neprovede nic:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-260">If there's sufficient capacity, the routine does nothing:</span></span>

```csharp
public void EnsureCapacity<T>(ref T[] storage, int size)
```

<span data-ttu-id="7f1cf-261">Tuto rutinu můžete zavolat následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-261">You could call this routine as follows:</span></span>

```csharp
// messages has the default value (null) when EnsureCapacity is called:
EnsureCapacity<string>(ref messages, 10);
// messages is not null.
EnsureCapacity<string>(messages, 50);
```

<span data-ttu-id="7f1cf-262">Po povolení typů odkazů s hodnotou null Chcete zajistit, aby předchozí kód byl zkompilován bez upozornění.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-262">After enabling null reference types, you want to ensure that the preceding code compiles without warnings.</span></span> <span data-ttu-id="7f1cf-263">Když metoda vrátí hodnotu, `storage` argument by neměl mít hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-263">When the method returns, the `storage` argument is guaranteed to be not null.</span></span> <span data-ttu-id="7f1cf-264">Je však přijatelné volat `EnsureCapacity` s odkazem s hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-264">However, it's acceptable to call `EnsureCapacity` with a null reference.</span></span> <span data-ttu-id="7f1cf-265">Můžete vytvořit `storage` typ odkazu s možnou hodnotou null a `NotNull` přidat podmínku post-Condition do deklarace parametru:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-265">You can make `storage` a nullable reference type, and add the `NotNull` post-condition to the parameter declaration:</span></span>

```csharp
public void EnsureCapacity<T>([NotNull]ref T[]? storage, int size)
```

<span data-ttu-id="7f1cf-266">Předchozí kód jednoznačně vyjadřuje stávající kontrakt: Volající mohou předat proměnnou s `null` hodnotou, ale návratovou hodnotou je zaručeno, že nikdy nebude mít hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-266">The preceding code expresses the existing contract very clearly: Callers can pass a variable with the `null` value, but the return value is guaranteed to never be null.</span></span> <span data-ttu-id="7f1cf-267">Atribut je nejužitečnější pro `ref` argumenty `out` a, `null` které mohou být předány jako argument, ale u tohoto argumentu je zaručeno, že není null, pokud se metoda vrátí. `NotNull`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-267">The `NotNull` attribute is most useful for `ref` and `out` arguments where `null` may be passed as an argument, but that argument is guaranteed to be not null when the method returns.</span></span>

<span data-ttu-id="7f1cf-268">Nepodmíněné následné podmínky se zadává pomocí následujících atributů:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-268">You specify unconditional postconditions using the following attributes:</span></span>

- <span data-ttu-id="7f1cf-269">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Návratová hodnota, která není null, může mít hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-269">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="7f1cf-270">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): Návratová hodnota s možnou hodnotou null nikdy nebude null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-270">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>

## <a name="specify-conditional-post-conditions-notnullwhen-and-maybenullwhen"></a><span data-ttu-id="7f1cf-271">Zadejte podmíněné podmínky odeslání: `NotNullWhen` a`MaybeNullWhen`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-271">Specify conditional post-conditions: `NotNullWhen` and `MaybeNullWhen`</span></span>

<span data-ttu-id="7f1cf-272">Pravděpodobně jste obeznámeni s `string` metodou. <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="7f1cf-272">You're likely familiar with the `string` method <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType>.</span></span> <span data-ttu-id="7f1cf-273">Tato metoda vrátí `true` , když argument není null, a ne prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-273">This method returns `true` when the argument isn't null, and not the empty string.</span></span> <span data-ttu-id="7f1cf-274">Jedná se o podobu kontroly hodnoty null: Volající nemusí mít hodnotu null – Pokud se metoda vrátí `false`, zaškrtnete argument.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-274">It is a form of null-check: Callers don't need to null-check the argument if the method returns `false`.</span></span> <span data-ttu-id="7f1cf-275">Chcete-li vytvořit metodu, jako je tato vlastnost s možnou hodnotou null, nastavte argument na typ s možnou hodnotou null a přidejte `NotNullWhen` atribut:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-275">To make a method like this nullable aware, you'd set the argument to a nullable type, and add the `NotNullWhen` attribute:</span></span>

```csharp
bool IsNullOrEmpty([NotNullWhen(false)]string? value);
```

<span data-ttu-id="7f1cf-276">To informuje kompilátor, že jakýkoliv kód, ve kterém není `false` vrácená hodnota, nesmí být zkontrolován hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-276">That informs the compiler that any code where the return value is `false` need not be null-checked.</span></span> <span data-ttu-id="7f1cf-277">Přidání atributu informuje o statické analýze kompilátoru, která `IsNullOrEmpty` provede nezbytnou kontrolu null: když se vrátí `false`, vstupní argument `null`není.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-277">The addition of the attribute informs the compiler's static analysis that `IsNullOrEmpty` performs the necessary null check: when it returns `false`, the input argument is not `null`.</span></span>

```csharp
string? userInput = GetUserInput();
if (!(string.IsNullOrEmpty(userInput))
{
   int messageLength = userInput.Length; // no null check needed.
}
// null check needed on userInput here.
```

<span data-ttu-id="7f1cf-278"><xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType> Metoda bude opatřena poznámkami, jak je uvedeno výše pro .NET Core 3,0.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-278">The <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType> method will be annotated as shown above for .NET Core 3.0.</span></span> <span data-ttu-id="7f1cf-279">Můžete mít podobné metody v základu kódu, které kontrolují stav objektů pro hodnoty null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-279">You may have similar methods in your codebase that check the state of objects for null values.</span></span> <span data-ttu-id="7f1cf-280">Kompilátor nerozpozná vlastní metody kontroly null a bude nutné poznámky přidat sami.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-280">The compiler won't recognize custom null check methods, and you'll need to add the annotations yourself.</span></span> <span data-ttu-id="7f1cf-281">Když přidáte atribut, statická analýza kompilátoru zná, když byla testovaná proměnná vrácena na hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-281">When you add the attribute, the compiler's static analysis knows when the tested variable has been null checked.</span></span>

<span data-ttu-id="7f1cf-282">Jiné použití pro tyto atributy je `Try*` vzor.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-282">Another use for these attributes is the `Try*` pattern.</span></span> <span data-ttu-id="7f1cf-283">Následné podmínky pro `ref` proměnné a `out` jsou přenášeny prostřednictvím návratové hodnoty.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-283">The postconditions for `ref` and `out` variables are communicated through the return value.</span></span> <span data-ttu-id="7f1cf-284">Zvažte tuto metodu popsanou výše:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-284">Consider this method shown earlier:</span></span>

```csharp
bool TryGetMessage(string key, out string message)
```

<span data-ttu-id="7f1cf-285">Předchozí metoda dodržuje typické rozhraní .NET idiom: vrácená hodnota označuje, zda `message` byla nastavena na nalezenou hodnotu, nebo pokud není nalezena žádná zpráva, na výchozí hodnotu.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-285">The preceding method follows a typical .NET idiom: the return value indicates if `message` was set to the found value or, if no message is found, to the default value.</span></span> <span data-ttu-id="7f1cf-286">Pokud metoda vrátí `true` `message` hodnotu, hodnota není null; v opačném případě je metoda nastavena `message` na hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-286">If the method returns `true`, the value of `message` isn't null; otherwise, the method sets `message` to null.</span></span>

<span data-ttu-id="7f1cf-287">Pomocí `NotNullWhen` atributu můžete komunikovat s tímto idiom.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-287">You can communicate that idiom using the `NotNullWhen` attribute.</span></span> <span data-ttu-id="7f1cf-288">Když aktualizujete podpis pro typy odkazů s možnou hodnotou `message` null `string?` , udělejte a přidejte atribut:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-288">When you update the signature for nullable reference types, make `message` a `string?` and add an attribute:</span></span>

```csharp
bool TryGetMessage(string key, [NotNullWhen(true)] out string? message)
```

<span data-ttu-id="7f1cf-289">V předchozím příkladu `message` je hodnota při `TryGetMessage` návratu `true`známa, že není null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-289">In the preceding example, the value of `message` is known to be not null when `TryGetMessage` returns `true`.</span></span> <span data-ttu-id="7f1cf-290">Stejné metody v základu kódu byste měli opatřit poznámkami stejným způsobem: argumenty mohou být `null`a při návratu `true`metody se označují jako nenulové.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-290">You should annotate similar methods in your codebase in the same way: the arguments could be `null`, and are known to be not null when the method returns `true`.</span></span>

<span data-ttu-id="7f1cf-291">Je možné, že budete potřebovat i jeden konečný atribut.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-291">There's one final attribute you may also need.</span></span> <span data-ttu-id="7f1cf-292">V některých případech je nulový stav návratové hodnoty závislý na nulovém stavu jednoho nebo více vstupních argumentů.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-292">Sometimes the null state of a return value depends on the null state of one or more input arguments.</span></span> <span data-ttu-id="7f1cf-293">Tyto metody vrátí hodnotu, která není null vždy, když některé vstupní argumenty `null`nejsou.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-293">These methods will return a non-null value whenever certain input arguments aren't `null`.</span></span> <span data-ttu-id="7f1cf-294">Chcete-li tyto metody správně opatřit poznámkami, `NotNullIfNotNull` použijte atribut.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-294">To correctly annotate these methods, you use the `NotNullIfNotNull` attribute.</span></span> <span data-ttu-id="7f1cf-295">Vezměte v úvahu následující metodu:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-295">Consider the following method:</span></span>

```csharp
string GetTopLevelDomainFromFullUrl(string url);
```

<span data-ttu-id="7f1cf-296">Pokud argument není null, výstup není `null`. `url`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-296">If the `url` argument isn't null, the output isn't `null`.</span></span> <span data-ttu-id="7f1cf-297">Jakmile jsou povoleny odkazy s hodnotou null, tento podpis funguje správně, pokud rozhraní API nikdy nepřijímá vstup s hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-297">Once nullable references are enabled, that signature works correctly, provided your API never accepts a null input.</span></span> <span data-ttu-id="7f1cf-298">Pokud ale může mít vstup hodnotu null, může být návratová hodnota také null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-298">However, if the input could be null, then return value could also be null.</span></span> <span data-ttu-id="7f1cf-299">Proto můžete změnit signaturu na následující kód:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-299">Therefore, you could change the signature to the following code:</span></span>

```csharp
string? GetTopLevelDomainFromFullUrl(string? url);
```

<span data-ttu-id="7f1cf-300">To funguje i v případě, že bude často vynutit, aby `null` volající implementovali další kontroly.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-300">That also works, but will often force callers to implement extra `null` checks.</span></span> <span data-ttu-id="7f1cf-301">Kontraktem je, že návratová hodnota by `null` byla pouze v případě, `url` že `null`je vstupní argument.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-301">The contract is that the return value would be `null` only when the input argument `url` is `null`.</span></span> <span data-ttu-id="7f1cf-302">Pro vyjádření této smlouvy byste si tuto metodu měli opatřit poznámkami, jak je znázorněno v následujícím kódu:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-302">To express that contract, you would annotate this method as shown in the following code:</span></span>

```csharp
[return: NotNullIfNotNull("url")]
string? GetTopLevelDomainFromFullUrl(string? url);
```

<span data-ttu-id="7f1cf-303">U návratové hodnoty a argumentu byly oba poznámy s `?` označením, že by `null`mohlo být jedna z nich.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-303">The return value and the argument have both been annotated with the `?` indicating that either could be `null`.</span></span> <span data-ttu-id="7f1cf-304">Atribut dále upřesňuje, že návratová hodnota nebude mít hodnotu null, `url` Pokud argument `null`není.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-304">The attribute further clarifies that the return value won't be null when the `url` argument isn't `null`.</span></span>

<span data-ttu-id="7f1cf-305">Podmíněný následné podmínky můžete zadat pomocí těchto atributů:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-305">You specify conditional postconditions using these attributes:</span></span>

- <span data-ttu-id="7f1cf-306">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Pokud vrácená hodnota splňuje podmínku `ref` , může být hodnota null neboargumentunull.`out`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-306">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable `out` or `ref` argument may be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="7f1cf-307">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Pokud vrácená hodnota `ref` splňuje podmínku, nemůže být hodnota null neboargumentunull.`out`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-307">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable `out` or `ref` argument may not be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="7f1cf-308">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Návratová hodnota není null, pokud vstupní argument pro zadaný parametr není null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-308">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>

## <a name="generic-definitions-and-nullability"></a><span data-ttu-id="7f1cf-309">Obecné definice a možnost použití hodnoty null</span><span class="sxs-lookup"><span data-stu-id="7f1cf-309">Generic definitions and nullability</span></span>

<span data-ttu-id="7f1cf-310">Správně komunikující stav null obecných typů a obecné metody vyžadují zvláštní péči.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-310">Correctly communicating the null state of generic types and generic methods requires special care.</span></span> <span data-ttu-id="7f1cf-311">To je fakt, že typ hodnoty s možnou hodnotou null a typ odkazu s možnou hodnotou null jsou zásadním rozdílem.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-311">This stems from the fact that a nullable value type and a nullable reference type are fundamentally different.</span></span> <span data-ttu-id="7f1cf-312">Je synonymum pro `Nullable<int>`, zatímco `string?` je `string` atributem přidaným kompilátorem. `int?`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-312">An `int?` is a synonym for `Nullable<int>`, whereas `string?` is `string` with an attribute added by the compiler.</span></span> <span data-ttu-id="7f1cf-313">Výsledkem je, že kompilátor nemůže generovat správný `T?` kód bez vědomí, zda `T` je `class` nebo `struct`.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-313">The result is that the compiler can't generate correct code for `T?` without knowing if `T` is a `class` or a `struct`.</span></span> 

<span data-ttu-id="7f1cf-314">To neznamená, že nemůžete použít typ s povolenou hodnotou null (buď typ hodnoty, nebo odkazový typ) jako argument typu pro uzavřený obecný typ.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-314">This doesn't mean you can't use a nullable type (either value type or reference type) as the type argument for a closed generic type.</span></span> <span data-ttu-id="7f1cf-315">`List<string?>` A`List<int?>`jsouplatné instance .`List<T>`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-315">Both `List<string?>` and `List<int?>` are valid instantiations of `List<T>`.</span></span> 

<span data-ttu-id="7f1cf-316">To znamená, že nemůžete použít `T?` v deklaraci obecné třídy nebo metody bez omezení.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-316">What it does mean is that you can't use `T?` in a generic class or method declaration without constraints.</span></span> <span data-ttu-id="7f1cf-317">Například se nemění, <xref:System.Linq.Enumerable.FirstOrDefault%60%601(System.Collections.Generic.IEnumerable%7B%60%600%7D)?displayProperty=nameWithType> aby vracel. `T?`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-317">For example, <xref:System.Linq.Enumerable.FirstOrDefault%60%601(System.Collections.Generic.IEnumerable%7B%60%600%7D)?displayProperty=nameWithType> won't be changed to return `T?`.</span></span> <span data-ttu-id="7f1cf-318">Toto omezení můžete překonat přidáním `struct` omezení nebo. `class`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-318">You can overcome this limitation by adding either the `struct` or `class` constraint.</span></span> <span data-ttu-id="7f1cf-319">U některého z těchto omezení kompilátor ví, jak generovat kód pro i `T`. `T?`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-319">With either of those constraints, the compiler knows how to generate code for both `T` and `T?`.</span></span>

<span data-ttu-id="7f1cf-320">Můžete chtít omezit typy používané pro argument obecného typu, aby byly typy bez hodnoty null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-320">You may want to restrict the types used for a generic type argument to be non-nullable types.</span></span> <span data-ttu-id="7f1cf-321">To lze provést přidáním `notnull` omezení na tento argument typu.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-321">You can do that by adding the `notnull` constraint on that type argument.</span></span> <span data-ttu-id="7f1cf-322">Při použití tohoto omezení nesmí argument type být typ s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-322">When that constraint is applied, the type argument must not be a nullable type.</span></span>

## <a name="conclusions"></a><span data-ttu-id="7f1cf-323">Závěry</span><span class="sxs-lookup"><span data-stu-id="7f1cf-323">Conclusions</span></span>

<span data-ttu-id="7f1cf-324">Přidání typů odkazů s možnou hodnotou null poskytuje počáteční slovní přehled pro popis očekávání vašich rozhraní API pro `null`proměnné, které by mohly být.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-324">Adding nullable reference types provides an initial vocabulary to describe your APIs expectations for variables that could be `null`.</span></span> <span data-ttu-id="7f1cf-325">Další atributy poskytují bohatší slovník popisující stav null proměnných jako předpoklady a následné podmínky.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-325">The additional attributes provide a richer vocabulary to describe the null state of variables as preconditions and postconditions.</span></span> <span data-ttu-id="7f1cf-326">Tyto atributy podrobněji popisují vaše očekávání a poskytují lepší prostředí pro vývojáře pomocí vašich rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-326">These attributes more clearly describe your expectations and provide a better experience for the developers using your APIs.</span></span>

<span data-ttu-id="7f1cf-327">Když aktualizujete knihovny pro kontext s možnou hodnotou null, přidejte tyto atributy, aby uživatelé vašich rozhraní API měli k správné využití.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-327">As you update libraries for a nullable context, add these attributes to guide users of your APIs to the correct usage.</span></span> <span data-ttu-id="7f1cf-328">Tyto atributy vám pomůžou plně popsat stav hodnoty null vstupních argumentů a vrácených hodnot:</span><span class="sxs-lookup"><span data-stu-id="7f1cf-328">These attributes help you fully describe the null-state of input arguments and return values:</span></span>

- <span data-ttu-id="7f1cf-329">[AllowNull má](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Vstupní argument, který nemůže mít hodnotu null, může mít hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-329">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="7f1cf-330">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): Vstupní argument s možnou hodnotou null by nikdy neměl mít hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-330">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>
- <span data-ttu-id="7f1cf-331">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Návratová hodnota, která není null, může mít hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-331">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="7f1cf-332">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): Návratová hodnota s možnou hodnotou null nikdy nebude null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-332">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>
- <span data-ttu-id="7f1cf-333">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Pokud vrácená hodnota splňuje podmínku `ref` , může být hodnota null neboargumentunull.`out`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-333">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable `out` or `ref` argument may be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="7f1cf-334">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Pokud vrácená hodnota `ref` splňuje podmínku, nemůže být hodnota null neboargumentunull.`out`</span><span class="sxs-lookup"><span data-stu-id="7f1cf-334">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable `out` or `ref` argument may not be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="7f1cf-335">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Návratová hodnota není null, pokud vstupní argument pro zadaný parametr není null.</span><span class="sxs-lookup"><span data-stu-id="7f1cf-335">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>
