---
title: Statické konstruktory - C# Průvodce programováním
ms.custom: seodec18
ms.date: 07/20/2015
helpviewer_keywords:
- static constructors [C#]
- constructors [C#], static
ms.assetid: 151ec95e-3c4d-4ed7-885d-95b7a3be2e7d
ms.openlocfilehash: 9cf977be84a4d3098e009d5a58d0c12ad2000e92
ms.sourcegitcommit: ced0cccf15adfd492f8196cb739f01dde52c9252
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/14/2019
ms.locfileid: "67135649"
---
# <a name="static-constructors-c-programming-guide"></a><span data-ttu-id="65b06-102">Statické konstruktory (Průvodce programováním v C#)</span><span class="sxs-lookup"><span data-stu-id="65b06-102">Static Constructors (C# Programming Guide)</span></span>
<span data-ttu-id="65b06-103">Statický konstruktor slouží k inicializaci žádný [statické](../../../csharp/language-reference/keywords/static.md) data, nebo k provedení konkrétní akce, kterou je potřeba provést pouze jednou.</span><span class="sxs-lookup"><span data-stu-id="65b06-103">A static constructor is used to initialize any [static](../../../csharp/language-reference/keywords/static.md) data, or to perform a particular action that needs to be performed once only.</span></span> <span data-ttu-id="65b06-104">Je volána automaticky před první instance je vytvořena nebo jsou odkazovány jakékoli statické členy.</span><span class="sxs-lookup"><span data-stu-id="65b06-104">It is called automatically before the first instance is created or any static members are referenced.</span></span>  
  
 [!code-csharp[csProgGuideObjects#14](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideObjects/CS/Objects.cs#14)]  
 
## <a name="remarks"></a><span data-ttu-id="65b06-105">Poznámky</span><span class="sxs-lookup"><span data-stu-id="65b06-105">Remarks</span></span>
<span data-ttu-id="65b06-106">Statické konstruktory mají následující vlastnosti:</span><span class="sxs-lookup"><span data-stu-id="65b06-106">Static constructors have the following properties:</span></span>  
  
- <span data-ttu-id="65b06-107">Statický konstruktor není trvat modifikátory přístupu nebo mít parametry.</span><span class="sxs-lookup"><span data-stu-id="65b06-107">A static constructor does not take access modifiers or have parameters.</span></span>  

- <span data-ttu-id="65b06-108">Třídy nebo struktury může mít pouze jeden statický konstruktor.</span><span class="sxs-lookup"><span data-stu-id="65b06-108">A class or struct can only have one static constructor.</span></span>

- <span data-ttu-id="65b06-109">Statické konstruktory nelze zděděné nebo přetížené.</span><span class="sxs-lookup"><span data-stu-id="65b06-109">Static constructors cannot be inherited or overloaded.</span></span>

- <span data-ttu-id="65b06-110">Statický konstruktor nelze volat přímo a je určená jenom k volání modulem common language runtime (CLR).</span><span class="sxs-lookup"><span data-stu-id="65b06-110">A static constructor cannot be called directly and is only meant to be called by the common language runtime (CLR).</span></span> <span data-ttu-id="65b06-111">Vyvolá se automaticky.</span><span class="sxs-lookup"><span data-stu-id="65b06-111">It is invoked automatically.</span></span>

- <span data-ttu-id="65b06-112">Uživatel nemá žádnou kontrolu na při spouštění statický konstruktor se v programu.</span><span class="sxs-lookup"><span data-stu-id="65b06-112">The user has no control on when the static constructor is executed in the program.</span></span>
  
- <span data-ttu-id="65b06-113">Statický konstruktor je automaticky volána k inicializaci [třídy](../../../csharp/language-reference/keywords/class.md) před první instance je vytvořena nebo jsou odkazovány jakékoli statické členy.</span><span class="sxs-lookup"><span data-stu-id="65b06-113">A static constructor is called automatically to initialize the [class](../../../csharp/language-reference/keywords/class.md) before the first instance is created or any static members are referenced.</span></span> <span data-ttu-id="65b06-114">Statický konstruktor se spustit před spuštěním konstruktoru instance.</span><span class="sxs-lookup"><span data-stu-id="65b06-114">A static constructor will run before an instance constructor.</span></span> <span data-ttu-id="65b06-115">Všimněte si, že když uživatel vyvolá statickou metodu přiřazená události nebo delegáta, a ne v případě, že je přiřazen název statického konstruktoru typu.</span><span class="sxs-lookup"><span data-stu-id="65b06-115">Note that a type's static constructor is called when a static method assigned to an event or a delegate is invoked and not when it is assigned.</span></span> <span data-ttu-id="65b06-116">Pokud je proměnná inicializátory statické pole v třídě statický konstruktor, budou provedeny v textové pořadí, v jakém jsou uvedeny v deklaraci třídy bezprostředně před provedením statický konstruktor.</span><span class="sxs-lookup"><span data-stu-id="65b06-116">If static field variable initializers are present in the class of the static constructor, they will be executed in the textual order in which they appear in the class declaration immediately prior to the execution of the static constructor.</span></span>

- <span data-ttu-id="65b06-117">Pokud statický konstruktor k inicializaci statických polí nezadáte, všechny statické pole jsou inicializovány na výchozí hodnoty, jak je uvedeno v [tabulka výchozích hodnot](../../../csharp/language-reference/keywords/default-values-table.md).</span><span class="sxs-lookup"><span data-stu-id="65b06-117">If you don't provide a static constructor to initialize static fields, all static fields are initialized to their default value as listed in the [Default Values Table](../../../csharp/language-reference/keywords/default-values-table.md).</span></span> 
  
- <span data-ttu-id="65b06-118">Pokud statický konstruktor vyvolá výjimku, modul runtime nebude volat podruhé a typ zůstanou neinicializované po dobu životnosti domény aplikace, ve kterém je spuštěna aplikace.</span><span class="sxs-lookup"><span data-stu-id="65b06-118">If a static constructor throws an exception, the runtime will not invoke it a second time, and the type will remain uninitialized for the lifetime of the application domain in which your program is running.</span></span> <span data-ttu-id="65b06-119">Nejčastěji <xref:System.TypeInitializationException> je vyvolána výjimka, pokud statický konstruktor nemůže vytvořit instanci typu, nebo ke kterým dochází neošetřené výjimce v rámci statický konstruktor.</span><span class="sxs-lookup"><span data-stu-id="65b06-119">Most commonly, a <xref:System.TypeInitializationException> exception is thrown when a static constructor is unable to instantiate a type or for an unhandled exception occuring within a static constructor.</span></span> <span data-ttu-id="65b06-120">Implicitní statické konstruktory, které nejsou explicitně definovány ve zdrojovém kódu řešení problémů může vyžadovat, aby kontroly kódu (IL intermediate language).</span><span class="sxs-lookup"><span data-stu-id="65b06-120">For implicit static constructors that are not explicitly defined in source code, troubleshooting may require inspection of the intermediate language (IL) code.</span></span>

- <span data-ttu-id="65b06-121">Zabrání přidání přítomnost statického konstruktoru <xref:System.Reflection.TypeAttributes.BeforeFieldInit> atribut type.</span><span class="sxs-lookup"><span data-stu-id="65b06-121">The presence of a static constructor prevents the addition of the the <xref:System.Reflection.TypeAttributes.BeforeFieldInit> type attribute.</span></span> <span data-ttu-id="65b06-122">To omezuje optimalizace běhu programu.</span><span class="sxs-lookup"><span data-stu-id="65b06-122">This limits runtime optimization.</span></span>

- <span data-ttu-id="65b06-123">Pole deklarované jako `static readonly` se dá přiřadit jenom jako součást její deklarace nebo ve statickém konstruktoru.</span><span class="sxs-lookup"><span data-stu-id="65b06-123">A field declared as `static readonly` may only be assigned as part of its declaration or in a static constructor.</span></span> <span data-ttu-id="65b06-124">Když explicitní statický konstruktor není vyžadována, inicializujte statické pole na deklarace, nikoli statický konstruktor pro lepší optimalizace běhu programu.</span><span class="sxs-lookup"><span data-stu-id="65b06-124">When an explicit static constructor is not required, initialize static fields at declaration, rather than through a static constructor for better runtime optimization.</span></span>

> [!Note]
> <span data-ttu-id="65b06-125">I když není přímo přístupný, musí být zdokumentována přítomnost explicitní statický konstruktor pro účely pomoci s řešení potíží s výjimkami inicializace.</span><span class="sxs-lookup"><span data-stu-id="65b06-125">Though not directly accessible, the presence of an explicit static constructor should be documented to assist with troubleshooting initialization exceptions.</span></span>

### <a name="usage"></a><span data-ttu-id="65b06-126">Použití</span><span class="sxs-lookup"><span data-stu-id="65b06-126">Usage</span></span>

- <span data-ttu-id="65b06-127">Typické použití statických konstruktorů je při třídu používá soubor protokolu a konstruktor se používá k zápisu položky do tohoto souboru.</span><span class="sxs-lookup"><span data-stu-id="65b06-127">A typical use of static constructors is when the class is using a log file and the constructor is used to write entries to this file.</span></span>  
- <span data-ttu-id="65b06-128">Statické konstruktory jsou také užitečné při vytváření obálkových tříd pro nespravovaný kód, konstruktor může volat `LoadLibrary` metody.</span><span class="sxs-lookup"><span data-stu-id="65b06-128">Static constructors are also useful when creating wrapper classes for unmanaged code, when the constructor can call the `LoadLibrary` method.</span></span>  

- <span data-ttu-id="65b06-129">Statické konstruktory jsou také vhodné místo pro vynutit kontroly za běhu na parametr typu, který nelze zaregistrovat v době kompilace prostřednictvím omezení (omezení parametru typu).</span><span class="sxs-lookup"><span data-stu-id="65b06-129">Static constructors are also a convenient place to enforce run-time checks on the type parameter that cannot be checked at compile-time via constraints (Type parameter constraints).</span></span>

## <a name="example"></a><span data-ttu-id="65b06-130">Příklad</span><span class="sxs-lookup"><span data-stu-id="65b06-130">Example</span></span>
 <span data-ttu-id="65b06-131">V tomto příkladu třída `Bus` má statický konstruktor.</span><span class="sxs-lookup"><span data-stu-id="65b06-131">In this example, class `Bus` has a static constructor.</span></span> <span data-ttu-id="65b06-132">Při první instance `Bus` je vytvořen (`bus1`), je vyvolána statický konstruktor k inicializaci třídy.</span><span class="sxs-lookup"><span data-stu-id="65b06-132">When the first instance of `Bus` is created (`bus1`), the static constructor is invoked to initialize the class.</span></span> <span data-ttu-id="65b06-133">Ukázkový výstup ověřuje, že statický konstruktor spouští jenom jednou, i když dvě instance `Bus` jsou vytvořeny, a že běží před spuštěním konstruktoru instance.</span><span class="sxs-lookup"><span data-stu-id="65b06-133">The sample output verifies that the static constructor runs only one time, even though two instances of `Bus` are created, and that it runs before the instance constructor runs.</span></span>  
  
 [!code-csharp[csProgGuideObjects#15](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideObjects/CS/Objects.cs#15)]
 
## <a name="c-language-specification"></a><span data-ttu-id="65b06-134">specifikace jazyka C#</span><span class="sxs-lookup"><span data-stu-id="65b06-134">C# language specification</span></span>
<span data-ttu-id="65b06-135">Další informace najdete v tématu [statické konstruktory](~/_csharplang/spec/classes.md#static-constructors) část [ C# specifikace jazyka](~/_csharplang/spec/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="65b06-135">For more information, see the [Static constructors](~/_csharplang/spec/classes.md#static-constructors) section of the [C# language specification](~/_csharplang/spec/introduction.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="65b06-136">Viz také:</span><span class="sxs-lookup"><span data-stu-id="65b06-136">See also</span></span>

- [<span data-ttu-id="65b06-137">Průvodce programováním v jazyce C#</span><span class="sxs-lookup"><span data-stu-id="65b06-137">C# Programming Guide</span></span>](../../../csharp/programming-guide/index.md)
- [<span data-ttu-id="65b06-138">Třídy a struktury</span><span class="sxs-lookup"><span data-stu-id="65b06-138">Classes and Structs</span></span>](../../../csharp/programming-guide/classes-and-structs/index.md)
- [<span data-ttu-id="65b06-139">Konstruktory</span><span class="sxs-lookup"><span data-stu-id="65b06-139">Constructors</span></span>](../../../csharp/programming-guide/classes-and-structs/constructors.md)
- [<span data-ttu-id="65b06-140">Statické třídy a jejich členové</span><span class="sxs-lookup"><span data-stu-id="65b06-140">Static Classes and Static Class Members</span></span>](../../../csharp/programming-guide/classes-and-structs/static-classes-and-static-class-members.md)
- [<span data-ttu-id="65b06-141">Finalizační metody</span><span class="sxs-lookup"><span data-stu-id="65b06-141">Finalizers</span></span>](../../../csharp/programming-guide/classes-and-structs/destructors.md)
- [<span data-ttu-id="65b06-142">Pokyny pro návrh konstruktoru</span><span class="sxs-lookup"><span data-stu-id="65b06-142">Constructor Design Guidelines</span></span>](../../../docs/standard/design-guidelines/constructor.md#type-constructor-guidelines)
- [<span data-ttu-id="65b06-143">Upozornění zabezpečení – CA2121: Statické konstruktory by měly být privátní</span><span class="sxs-lookup"><span data-stu-id="65b06-143">Security Warning - CA2121: Static constructors should be private</span></span>](https://docs.microsoft.com/en-us/visualstudio/code-quality/ca2121-static-constructors-should-be-private)
