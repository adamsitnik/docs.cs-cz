---
title: Použití delegátů - C# Průvodce programováním
ms.custom: seodec18
ms.date: 07/20/2015
helpviewer_keywords:
- delegates [C#], how to use
ms.assetid: 99a2fc27-a32e-4a34-921c-e65497520eec
ms.openlocfilehash: eb5721d1c04ad761821bcdae03159f290a802ec0
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/23/2019
ms.locfileid: "61711158"
---
# <a name="using-delegates-c-programming-guide"></a><span data-ttu-id="c2aab-102">Použití delegátů (Průvodce programováním v C#)</span><span class="sxs-lookup"><span data-stu-id="c2aab-102">Using Delegates (C# Programming Guide)</span></span>
<span data-ttu-id="c2aab-103">A [delegovat](../../../csharp/language-reference/keywords/delegate.md) je typ, který zapouzdřuje bezpečně metodu, podobně jako ukazatel na funkci v jazyce C a C++.</span><span class="sxs-lookup"><span data-stu-id="c2aab-103">A [delegate](../../../csharp/language-reference/keywords/delegate.md) is a type that safely encapsulates a method, similar to a function pointer in C and C++.</span></span> <span data-ttu-id="c2aab-104">Na rozdíl od ukazatelů na funkce jazyka C Delegáti jsou objektově orientované, zadejte bezpečným a zabezpečeným.</span><span class="sxs-lookup"><span data-stu-id="c2aab-104">Unlike C function pointers, delegates are object-oriented, type safe, and secure.</span></span> <span data-ttu-id="c2aab-105">Podle názvu delegáta je definován typ delegátu.</span><span class="sxs-lookup"><span data-stu-id="c2aab-105">The type of a delegate is defined by the name of the delegate.</span></span> <span data-ttu-id="c2aab-106">Následující příklad deklaruje delegáta s názvem `Del` , který může zapouzdřit metodu, která přijímá [řetězec](../../../csharp/language-reference/keywords/string.md) jako argument a vrátí [void](../../../csharp/language-reference/keywords/void.md):</span><span class="sxs-lookup"><span data-stu-id="c2aab-106">The following example declares a delegate named `Del` that can encapsulate a method that takes a [string](../../../csharp/language-reference/keywords/string.md) as an argument and returns [void](../../../csharp/language-reference/keywords/void.md):</span></span>  
  
 [!code-csharp[csProgGuideDelegates#21](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#21)]  
  
 <span data-ttu-id="c2aab-107">Objekt delegáta je obvykle vytvářený poskytující název metody delegáta pro obtékání, nebo se [anonymní metoda](../../../csharp/programming-guide/statements-expressions-operators/anonymous-methods.md).</span><span class="sxs-lookup"><span data-stu-id="c2aab-107">A delegate object is normally constructed by providing the name of the method the delegate will wrap, or with an [anonymous Method](../../../csharp/programming-guide/statements-expressions-operators/anonymous-methods.md).</span></span> <span data-ttu-id="c2aab-108">Jakmile je vytvořena instance delegáta, metoda volání delegáta se předá podle delegáta k této metodě.</span><span class="sxs-lookup"><span data-stu-id="c2aab-108">Once a delegate is instantiated, a method call made to the delegate will be passed by the delegate to that method.</span></span> <span data-ttu-id="c2aab-109">Parametry předané do delegáta volajícím jsou předány do metody a návratovou hodnotu, pokud existuje, metoda je vrátit zpět volajícímu delegátem.</span><span class="sxs-lookup"><span data-stu-id="c2aab-109">The parameters passed to the delegate by the caller are passed to the method, and the return value, if any, from the method is returned to the caller by the delegate.</span></span> <span data-ttu-id="c2aab-110">To se označuje jako vyvolání delegáta.</span><span class="sxs-lookup"><span data-stu-id="c2aab-110">This is known as invoking the delegate.</span></span> <span data-ttu-id="c2aab-111">Instance delegát lze vyvolat, jako by šlo zabalené metoda sama.</span><span class="sxs-lookup"><span data-stu-id="c2aab-111">An instantiated delegate can be invoked as if it were the wrapped method itself.</span></span> <span data-ttu-id="c2aab-112">Příklad:</span><span class="sxs-lookup"><span data-stu-id="c2aab-112">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#22](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#22)]  
  
 [!code-csharp[csProgGuideDelegates#23](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#23)]  
  
 <span data-ttu-id="c2aab-113">Typy delegátů jsou odvozeny z <xref:System.Delegate> třídy v rozhraní .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="c2aab-113">Delegate types are derived from the <xref:System.Delegate> class in the .NET Framework.</span></span> <span data-ttu-id="c2aab-114">Typy delegátů jsou [zapečetěné](../../../csharp/language-reference/keywords/sealed.md)– nemůže být odvozen od – a není možné vlastní odvozovat z <xref:System.Delegate>.</span><span class="sxs-lookup"><span data-stu-id="c2aab-114">Delegate types are [sealed](../../../csharp/language-reference/keywords/sealed.md)—they cannot be derived from— and it is not possible to derive custom classes from <xref:System.Delegate>.</span></span> <span data-ttu-id="c2aab-115">Protože instance delegáta je objekt, může být předán jako parametr, nebo přidruženo k vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="c2aab-115">Because the instantiated delegate is an object, it can be passed as a parameter, or assigned to a property.</span></span> <span data-ttu-id="c2aab-116">Díky tomu metoda přijmout delegáta jako parametr a volání delegáta později.</span><span class="sxs-lookup"><span data-stu-id="c2aab-116">This allows a method to accept a delegate as a parameter, and call the delegate at some later time.</span></span> <span data-ttu-id="c2aab-117">To se označuje jako asynchronního zpětného volání a se o běžnou metodu oznámit volajícím po dokončení dlouho procesu.</span><span class="sxs-lookup"><span data-stu-id="c2aab-117">This is known as an asynchronous callback, and is a common method of notifying a caller when a long process has completed.</span></span> <span data-ttu-id="c2aab-118">Při použití delegáta tímto způsobem kódu pomocí delegáta není nutné žádnou znalost implementace metody se používají.</span><span class="sxs-lookup"><span data-stu-id="c2aab-118">When a delegate is used in this fashion, the code using the delegate does not need any knowledge of the implementation of the method being used.</span></span> <span data-ttu-id="c2aab-119">Funkce je podobný zapouzdření poskytované rozhraní.</span><span class="sxs-lookup"><span data-stu-id="c2aab-119">The functionality is similar to the encapsulation interfaces provide.</span></span>  
  
 <span data-ttu-id="c2aab-120">Dalším běžným způsobem použití zpětných volání je definování vlastní porovnávací metody a předáním delegátu metoda řazení.</span><span class="sxs-lookup"><span data-stu-id="c2aab-120">Another common use of callbacks is defining a custom comparison method and passing that delegate to a sort method.</span></span> <span data-ttu-id="c2aab-121">To umožňuje volajícího kódu se stanou součástí algoritmu řazení.</span><span class="sxs-lookup"><span data-stu-id="c2aab-121">It allows the caller's code to become part of the sort algorithm.</span></span> <span data-ttu-id="c2aab-122">Metoda následující příklad používá `Del` typ jako parametr:</span><span class="sxs-lookup"><span data-stu-id="c2aab-122">The following example method uses the `Del` type as a parameter:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#24](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#24)]  
  
 <span data-ttu-id="c2aab-123">Můžete předat delegáta k této metodě vytvořili výše:</span><span class="sxs-lookup"><span data-stu-id="c2aab-123">You can then pass the delegate created above to that method:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#25](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#25)]  
  
 <span data-ttu-id="c2aab-124">a zobrazí následující výstup do konzoly:</span><span class="sxs-lookup"><span data-stu-id="c2aab-124">and receive the following output to the console:</span></span>  
  
 `The number is: 3`  
  
 <span data-ttu-id="c2aab-125">Pomocí delegáta jako o abstrakci `MethodWithCallback` není potřeba přímo volat konzole – není nutné navrhovat pomocí konzoly v úvahu.</span><span class="sxs-lookup"><span data-stu-id="c2aab-125">Using the delegate as an abstraction, `MethodWithCallback` does not need to call the console directly—it does not have to be designed with a console in mind.</span></span> <span data-ttu-id="c2aab-126">Co `MethodWithCallback` nemá je jednoduše Příprava řetězce a předat řetězec na jinou metodu.</span><span class="sxs-lookup"><span data-stu-id="c2aab-126">What `MethodWithCallback` does is simply prepare a string and pass the string to another method.</span></span> <span data-ttu-id="c2aab-127">To je zvláště efektivní, protože delegované metodu můžete použít libovolný počet parametrů.</span><span class="sxs-lookup"><span data-stu-id="c2aab-127">This is especially powerful since a delegated method can use any number of parameters.</span></span>  
  
 <span data-ttu-id="c2aab-128">Při delegáta je vytvořen při zabalení metodu instance, odkazuje na instanci a metody delegáta.</span><span class="sxs-lookup"><span data-stu-id="c2aab-128">When a delegate is constructed to wrap an instance method, the delegate references both the instance and the method.</span></span> <span data-ttu-id="c2aab-129">Delegát nezná žádný typ instance kromě metody, který ho zalamoval, tak delegát mohou odkazovat na libovolný typ objektu, za předpokladu, metoda je k tomuto objektu, který odpovídá signatuře delegátu.</span><span class="sxs-lookup"><span data-stu-id="c2aab-129">A delegate has no knowledge of the instance type aside from the method it wraps, so a delegate can refer to any type of object as long as there is a method on that object that matches the delegate signature.</span></span> <span data-ttu-id="c2aab-130">Když se zabalit statické metody delegáta, pouze odkazuje na metodu.</span><span class="sxs-lookup"><span data-stu-id="c2aab-130">When a delegate is constructed to wrap a static method, it only references the method.</span></span> <span data-ttu-id="c2aab-131">Vezměte v úvahu následující deklarace:</span><span class="sxs-lookup"><span data-stu-id="c2aab-131">Consider the following declarations:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#26](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#26)]  
  
 <span data-ttu-id="c2aab-132">Spolu s statické `DelegateMethod` uvedenému výše, teď máme tři metody, které mohou být zabaleny třídou `Del` instance.</span><span class="sxs-lookup"><span data-stu-id="c2aab-132">Along with the static `DelegateMethod` shown previously, we now have three methods that can be wrapped by a `Del` instance.</span></span>  
  
 <span data-ttu-id="c2aab-133">Delegát může volat více než jednu metodu při vyvolání.</span><span class="sxs-lookup"><span data-stu-id="c2aab-133">A delegate can call more than one method when invoked.</span></span> <span data-ttu-id="c2aab-134">To se označuje jako vícesměrové vysílání.</span><span class="sxs-lookup"><span data-stu-id="c2aab-134">This is referred to as multicasting.</span></span> <span data-ttu-id="c2aab-135">Přidat další metodu do seznamu delegáta z metody – v seznamu vyvolání – jednoduše vyžaduje přidání dvou delegátů pomocí přidání ani operátory přiřazení sčítání ('+' nebo '+').</span><span class="sxs-lookup"><span data-stu-id="c2aab-135">To add an extra method to the delegate's list of methods—the invocation list—simply requires adding two delegates using the addition or addition assignment operators ('+' or '+=').</span></span> <span data-ttu-id="c2aab-136">Příklad:</span><span class="sxs-lookup"><span data-stu-id="c2aab-136">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#27](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#27)]  
  
 <span data-ttu-id="c2aab-137">V tomto okamžiku `allMethodsDelegate` obsahuje tři metody v jeho vyvolávacím seznamu –`Method1`, `Method2`, a `DelegateMethod`.</span><span class="sxs-lookup"><span data-stu-id="c2aab-137">At this point `allMethodsDelegate` contains three methods in its invocation list—`Method1`, `Method2`, and `DelegateMethod`.</span></span> <span data-ttu-id="c2aab-138">Původní tři delegáty `d1`, `d2`, a `d3`, zůstanou beze změny.</span><span class="sxs-lookup"><span data-stu-id="c2aab-138">The original three delegates, `d1`, `d2`, and `d3`, remain unchanged.</span></span> <span data-ttu-id="c2aab-139">Když `allMethodsDelegate` je vyvolána, všechny tři metody jsou volány v pořadí.</span><span class="sxs-lookup"><span data-stu-id="c2aab-139">When `allMethodsDelegate` is invoked, all three methods are called in order.</span></span> <span data-ttu-id="c2aab-140">Pokud delegát používá parametry odkazů, odkaz je předán postupně pro každý ze tří metod zase a jsou viditelné pro další metoda změny pomocí metod.</span><span class="sxs-lookup"><span data-stu-id="c2aab-140">If the delegate uses reference parameters, the reference is passed sequentially to each of the three methods in turn, and any changes by one method are visible to the next method.</span></span> <span data-ttu-id="c2aab-141">Pokud některou z metod vyvolá výjimku, která není zachycena v metodě, že výjimka je předán volajícímu metody delegáta a žádné další metody v seznamu vyvolání jsou volány.</span><span class="sxs-lookup"><span data-stu-id="c2aab-141">When any of the methods throws an exception that is not caught within the method, that exception is passed to the caller of the delegate and no subsequent methods in the invocation list are called.</span></span> <span data-ttu-id="c2aab-142">Pokud delegát má návratovou hodnotu a/nebo výstupní parametry, vrátí se návratová hodnota a parametry poslední metody, vyvolala.</span><span class="sxs-lookup"><span data-stu-id="c2aab-142">If the delegate has a return value and/or out parameters, it returns the return value and parameters of the last method invoked.</span></span> <span data-ttu-id="c2aab-143">Pokud chcete odebrat ze seznamu vyvolání metody, použijte snížení nebo snížení operátor přiřazení ("-" nebo "-=.).</span><span class="sxs-lookup"><span data-stu-id="c2aab-143">To remove a method from the invocation list, use the decrement or decrement assignment operator ('-' or '-=').</span></span> <span data-ttu-id="c2aab-144">Příklad:</span><span class="sxs-lookup"><span data-stu-id="c2aab-144">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#28](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#28)]  
  
 <span data-ttu-id="c2aab-145">Protože typy delegátů jsou odvozeny z `System.Delegate`, metody a vlastnosti určené třídy lze volat delegátu.</span><span class="sxs-lookup"><span data-stu-id="c2aab-145">Because delegate types are derived from `System.Delegate`, the methods and properties defined by that class can be called on the delegate.</span></span> <span data-ttu-id="c2aab-146">Například pokud chcete zjistit počet metod v seznamu vyvolání tohoto delegáta, můžete zadat:</span><span class="sxs-lookup"><span data-stu-id="c2aab-146">For example, to find the number of methods in a delegate's invocation list, you may write:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#29](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#29)]  
  
 <span data-ttu-id="c2aab-147">Delegáti s více než jednu metodu do svého seznamu vyvolání odvozovat <xref:System.MulticastDelegate>, která je podtřídou třídy `System.Delegate`.</span><span class="sxs-lookup"><span data-stu-id="c2aab-147">Delegates with more than one method in their invocation list derive from <xref:System.MulticastDelegate>, which is a subclass of `System.Delegate`.</span></span> <span data-ttu-id="c2aab-148">Výše uvedený kód funguje v obou případech, protože obě třídy podporují `GetInvocationList`.</span><span class="sxs-lookup"><span data-stu-id="c2aab-148">The above code works in either case because both classes support `GetInvocationList`.</span></span>  
  
 <span data-ttu-id="c2aab-149">Delegáti jsou často používány při zpracování událostí.</span><span class="sxs-lookup"><span data-stu-id="c2aab-149">Multicast delegates are used extensively in event handling.</span></span> <span data-ttu-id="c2aab-150">Objekty zdroje událostí odesílání oznámení o událostech příjemce objekty, které jste zaregistrováni k odběru příslušné události.</span><span class="sxs-lookup"><span data-stu-id="c2aab-150">Event source objects send event notifications to recipient objects that have registered to receive that event.</span></span> <span data-ttu-id="c2aab-151">K registraci na událost, příjemce vytvoří metodu určený ke zpracování událostí, pak vytvoří delegáta pro danou metodu a předává delegáta zdroji události.</span><span class="sxs-lookup"><span data-stu-id="c2aab-151">To register for an event, the recipient creates a method designed to handle the event, then creates a delegate for that method and passes the delegate to the event source.</span></span> <span data-ttu-id="c2aab-152">Zdroj volání delegáta při výskytu události.</span><span class="sxs-lookup"><span data-stu-id="c2aab-152">The source calls the delegate when the event occurs.</span></span> <span data-ttu-id="c2aab-153">Delegát pak zavolá metodu na straně příjemce, poskytování dat událostí zpracování událostí.</span><span class="sxs-lookup"><span data-stu-id="c2aab-153">The delegate then calls the event handling method on the recipient, delivering the event data.</span></span> <span data-ttu-id="c2aab-154">Typ delegáta pro danou událost je definován ve zdroji události.</span><span class="sxs-lookup"><span data-stu-id="c2aab-154">The delegate type for a given event is defined by the event source.</span></span> <span data-ttu-id="c2aab-155">Další informace najdete v tématu [události](../../../csharp/programming-guide/events/index.md).</span><span class="sxs-lookup"><span data-stu-id="c2aab-155">For more, see [Events](../../../csharp/programming-guide/events/index.md).</span></span>  
  
 <span data-ttu-id="c2aab-156">Porovnání delegáti dva různé typy, které jsou přiřazeny v době kompilace způsobí chybu kompilace.</span><span class="sxs-lookup"><span data-stu-id="c2aab-156">Comparing delegates of two different types assigned at compile-time will result in a compilation error.</span></span> <span data-ttu-id="c2aab-157">Pokud instance delegátů jsou staticky typu `System.Delegate`, pak je povolené porovnání, spustí se však návratovou hodnotu false v čase.</span><span class="sxs-lookup"><span data-stu-id="c2aab-157">If the delegate instances are statically of the type `System.Delegate`, then the comparison is allowed, but will return false at run time.</span></span> <span data-ttu-id="c2aab-158">Příklad:</span><span class="sxs-lookup"><span data-stu-id="c2aab-158">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#30](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#30)]  
  
## <a name="see-also"></a><span data-ttu-id="c2aab-159">Viz také:</span><span class="sxs-lookup"><span data-stu-id="c2aab-159">See also</span></span>

- [<span data-ttu-id="c2aab-160">Průvodce programováním v jazyce C#</span><span class="sxs-lookup"><span data-stu-id="c2aab-160">C# Programming Guide</span></span>](../../../csharp/programming-guide/index.md)
- [<span data-ttu-id="c2aab-161">Delegáti</span><span class="sxs-lookup"><span data-stu-id="c2aab-161">Delegates</span></span>](../../../csharp/programming-guide/delegates/index.md)
- [<span data-ttu-id="c2aab-162">Použití odchylek v delegátech</span><span class="sxs-lookup"><span data-stu-id="c2aab-162">Using Variance in Delegates</span></span>](../../../csharp/programming-guide/concepts/covariance-contravariance/using-variance-in-delegates.md)
- [<span data-ttu-id="c2aab-163">Odchylky v delegátech</span><span class="sxs-lookup"><span data-stu-id="c2aab-163">Variance in Delegates</span></span>](../../../csharp/programming-guide/concepts/covariance-contravariance/variance-in-delegates.md)
- [<span data-ttu-id="c2aab-164">Použití odchylek pro obecné delegáty Func a Action</span><span class="sxs-lookup"><span data-stu-id="c2aab-164">Using Variance for Func and Action Generic Delegates</span></span>](../../../csharp/programming-guide/concepts/covariance-contravariance/using-variance-for-func-and-action-generic-delegates.md)
- [<span data-ttu-id="c2aab-165">Události</span><span class="sxs-lookup"><span data-stu-id="c2aab-165">Events</span></span>](../../../csharp/programming-guide/events/index.md)
