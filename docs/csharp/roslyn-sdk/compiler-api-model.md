---
title: Koncepce sady SDK platformy kompilátoru .NET a objektový model
description: V tomto přehledu najdete na pozadí, které potřebujete k práci efektivně pomocí kompilátoru .NET SDK. Naučíte se vrstvy rozhraní API, hlavní typy používané a celkové objektový model.
ms.date: 10/10/2017
ms.custom: mvc
ms.openlocfilehash: ee8f902bf1df8b63e229fd518e7a0c592fcd47ca
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/23/2019
ms.locfileid: "61706681"
---
# <a name="understand-the-net-compiler-platform-sdk-model"></a><span data-ttu-id="89e1f-104">Pochopení modelu sada SDK platformy kompilátoru .NET</span><span class="sxs-lookup"><span data-stu-id="89e1f-104">Understand the .NET Compiler Platform SDK model</span></span>

<span data-ttu-id="89e1f-105">Zpracování kódu, který napíšete následující strukturovaných pravidla, které často se liší od lidí způsob, jak číst a pochopení kódu.</span><span class="sxs-lookup"><span data-stu-id="89e1f-105">Compilers process the code you write following structured rules that often differ from the way humans read and understand code.</span></span> <span data-ttu-id="89e1f-106">Základní znalosti o model používaný kompilátory je zásadní pro pochopení rozhraní API používat při sestavení založené na platformě Roslyn nástroje.</span><span class="sxs-lookup"><span data-stu-id="89e1f-106">A basic understanding of the model used by compilers is essential to understanding the APIs you use when building Roslyn-based tools.</span></span> 

## <a name="compiler-pipeline-functional-areas"></a><span data-ttu-id="89e1f-107">Kompilátor kanálu funkčních oblastí</span><span class="sxs-lookup"><span data-stu-id="89e1f-107">Compiler pipeline functional areas</span></span>

<span data-ttu-id="89e1f-108">Sada SDK platformy kompilátoru .NET poskytuje C# a kompilátory jazyka Visual Basic code analýzy vám jako spotřebitel poskytuje úroveň rozhraní API, která odráží tradiční kompilátoru kanálu.</span><span class="sxs-lookup"><span data-stu-id="89e1f-108">The .NET Compiler Platform SDK exposes the C# and Visual Basic compilers' code analysis to you as a consumer by providing an API layer that mirrors a traditional compiler pipeline.</span></span>

![kroky zpracování zdrojový kód a kód objektu kompilátoru kanálu](media/compiler-api-model/compiler-pipeline.png)

<span data-ttu-id="89e1f-110">Jednotlivé fáze tohoto kanálu je samostatná komponenta.</span><span class="sxs-lookup"><span data-stu-id="89e1f-110">Each phase of this pipeline is a separate component.</span></span> <span data-ttu-id="89e1f-111">Nejprve fáze analýzy tokenizes a analyzuje zdrojový text do syntaxe, která následuje jazyk gramatiky.</span><span class="sxs-lookup"><span data-stu-id="89e1f-111">First, the parse phase tokenizes and parses source text into syntax that follows the language grammar.</span></span> <span data-ttu-id="89e1f-112">Za druhé fáze deklarace analyzuje zdroje a importovaná metadata do formuláře s názvem symboly.</span><span class="sxs-lookup"><span data-stu-id="89e1f-112">Second, the declaration phase analyzes source and imported metadata to form named symbols.</span></span> <span data-ttu-id="89e1f-113">V dalším kroku fáze vazby odpovídá identifikátory v kódu na symboly.</span><span class="sxs-lookup"><span data-stu-id="89e1f-113">Next, the bind phase matches identifiers in the code to symbols.</span></span> <span data-ttu-id="89e1f-114">A konečně fáze vygeneruje vysílá sestavení všechny informace, které jsou vytvářeny pomocí kompilátoru.</span><span class="sxs-lookup"><span data-stu-id="89e1f-114">Finally, the emit phase emits an assembly with all the information built up by the compiler.</span></span>

![Kompilátor kanálu rozhraní api poskytuje přístup k každého kroku, který je součástí kompilátoru kanálu](media/compiler-api-model/compiler-pipeline-api.png)

<span data-ttu-id="89e1f-116">Odpovídající každé z těchto fází, sada SDK platformy kompilátoru .NET poskytuje objektový model, který umožňuje přístup k informacím v této fázi.</span><span class="sxs-lookup"><span data-stu-id="89e1f-116">Corresponding to each of those phases, the .NET Compiler Platform SDK exposes an object model that allows access to the information at that phase.</span></span> <span data-ttu-id="89e1f-117">Parsování fáze zpřístupňuje stromu syntaxe, fáze deklaraci vystavuje tabulky hierarchické symbolů, fáze vazby zpřístupňuje výsledek sémantické analýzy kompilátoru a vygeneruje fáze je rozhraní API, který generuje kódy bajtů IL.</span><span class="sxs-lookup"><span data-stu-id="89e1f-117">The parsing phase exposes a syntax tree, the declaration phase exposes a hierarchical symbol table, the binding phase exposes the result of the compiler’s semantic analysis, and the emit phase is an API that produces IL byte codes.</span></span>

![k dispozici z kompilátoru jazykových služeb rozhraní api v každém kroku kompilátoru kanálu](media/compiler-api-model/compiler-pipeline-lang-svc.png)

<span data-ttu-id="89e1f-119">Každý kompilátor kombinuje tyto součásti společně jako jeden celek začátku do konce.</span><span class="sxs-lookup"><span data-stu-id="89e1f-119">Each compiler combines these components together as a single end-to-end whole.</span></span>

<span data-ttu-id="89e1f-120">Tato rozhraní API jsou stejné ty, které používá sada Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="89e1f-120">These APIs are the same ones used by Visual Studio.</span></span> <span data-ttu-id="89e1f-121">Například použití kódu, sbalování a formátování funkce stromu syntaxe, prohlížeče objektů a navigace funkce používají tabulky symbolů, refaktoring a přejít k definici použití sémantického modelu a všechny z nich, včetně rozhraní API pro generování využívá funkce upravit a pokračovat.</span><span class="sxs-lookup"><span data-stu-id="89e1f-121">For instance, the code outlining and formatting features use the syntax trees, the Object Browser and navigation features use the symbol table, refactorings and Go to Definition use the semantic model, and Edit and Continue uses all of these, including the Emit API.</span></span> 

## <a name="api-layers"></a><span data-ttu-id="89e1f-122">Rozhraní API vrstvy</span><span class="sxs-lookup"><span data-stu-id="89e1f-122">API layers</span></span>

<span data-ttu-id="89e1f-123">Kompilátor .NET SDK se skládá ze dvou vrstev hlavní rozhraní API: kompilátoru rozhraní API a pracovním prostorům rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="89e1f-123">The .NET compiler SDK consists of two main layers of APIs: compiler APIs and workspaces APIs.</span></span>

![rozhraní api vrstvy reprezentována kompilátor kanálu rozhraní API](media/compiler-api-model/api-layers.png)

### <a name="compiler-apis"></a><span data-ttu-id="89e1f-125">Rozhraní API kompilátoru</span><span class="sxs-lookup"><span data-stu-id="89e1f-125">Compiler APIs</span></span>

<span data-ttu-id="89e1f-126">Kompilátor vrstva obsahuje objektové modely, které odpovídají informace, které jsou zveřejněné v jednotlivých fázích kanálu kompilátor syntaktický a sémantický.</span><span class="sxs-lookup"><span data-stu-id="89e1f-126">The compiler layer contains the object models that correspond to information exposed at each phase of the compiler pipeline, both syntactic and semantic.</span></span> <span data-ttu-id="89e1f-127">Vrstva kompilátoru také obsahuje neměnné snímek na jediné vyvolání kompilátoru, včetně odkazů na sestavení, možnosti kompilátoru a soubory zdrojového kódu.</span><span class="sxs-lookup"><span data-stu-id="89e1f-127">The compiler layer also contains an immutable snapshot of a single invocation of a compiler, including assembly references, compiler options, and source code files.</span></span> <span data-ttu-id="89e1f-128">Existují dvě různá rozhraní API, které představují C# jazyka a jazyk Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="89e1f-128">There are two distinct APIs that represent the C# language and the Visual Basic language.</span></span> <span data-ttu-id="89e1f-129">Tato dvě rozhraní API jsou podobné jako u obrazce ale navržených pro vysokou věrností pro každý jednotlivých jazyků.</span><span class="sxs-lookup"><span data-stu-id="89e1f-129">These two APIs are similar in shape but tailored for high-fidelity to each individual language.</span></span> <span data-ttu-id="89e1f-130">Tato vrstva nemá žádné závislosti na součásti sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="89e1f-130">This layer has no dependencies on Visual Studio components.</span></span>

### <a name="diagnostic-apis"></a><span data-ttu-id="89e1f-131">Diagnostických rozhraní API</span><span class="sxs-lookup"><span data-stu-id="89e1f-131">Diagnostic APIs</span></span>

<span data-ttu-id="89e1f-132">Jako součást své analýzy kompilátor může vytvořit sadu diagnostiky, které pokrývají vše od syntaxe sémantické a chyby jednoznačného přiřazení do různých upozornění a informativní diagnostiky.</span><span class="sxs-lookup"><span data-stu-id="89e1f-132">As part of its analysis the compiler may produce a set of diagnostics covering everything from syntax, semantic, and definite assignment errors to various warnings and informational diagnostics.</span></span> <span data-ttu-id="89e1f-133">Vrstvu rozhraní API služby kompilátoru zpřístupňuje diagnostiky prostřednictvím rozšiřitelné rozhraní API, která umožňuje uživatelem definované analyzátory zapojené do kompilace.</span><span class="sxs-lookup"><span data-stu-id="89e1f-133">The Compiler API layer exposes diagnostics through an extensible API that allows user-defined analyzers to be plugged into the compilation process.</span></span> <span data-ttu-id="89e1f-134">To umožňuje diagnostiky definovaný uživatelem, například vytvořené metodou nástrojů, jako je StyleCop nebo FxCop, bude vytvořen spolu s definované kompilátorem diagnostiky.</span><span class="sxs-lookup"><span data-stu-id="89e1f-134">It allows user-defined diagnostics, such as those produced by tools like StyleCop or FxCop, to be produced alongside compiler-defined diagnostics.</span></span> <span data-ttu-id="89e1f-135">Vytváření diagnostiky tímto způsobem má výhodu přirozeně integrace pomocí nástrojů, jako je MSBuild a sadě Visual Studio, který je závislý na diagnostiky pro prostředí, jako je zastavení sestavení na základě zásad a zobrazují živé podtržení vlnovkou v editoru a navrhněte kódu opravy.</span><span class="sxs-lookup"><span data-stu-id="89e1f-135">Producing diagnostics in this way has the benefit of integrating naturally with tools such as MSBuild and Visual Studio which depend on diagnostics for experiences such as halting a build based on policy and showing live squiggles in the editor and suggesting code fixes.</span></span>

### <a name="scripting-apis"></a><span data-ttu-id="89e1f-136">Skriptovací rozhraní API</span><span class="sxs-lookup"><span data-stu-id="89e1f-136">Scripting APIs</span></span>

<span data-ttu-id="89e1f-137">Hostování a skriptovací rozhraní API jsou součástí kompilátoru vrstvy.</span><span class="sxs-lookup"><span data-stu-id="89e1f-137">Hosting and scripting APIs are part of the compiler layer.</span></span> <span data-ttu-id="89e1f-138">Můžete využít pro provádění kódu a shromažďování kontextu spuštění modulu runtime.</span><span class="sxs-lookup"><span data-stu-id="89e1f-138">You can use them for executing code snippets and accumulating a runtime execution context.</span></span>
<span data-ttu-id="89e1f-139">C# Interaktivní okno REPL (čtení-vyhodnocení-Print smyčky) používá tato rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="89e1f-139">The C# interactive REPL (Read-Evaluate-Print Loop) uses these APIs.</span></span> <span data-ttu-id="89e1f-140">REPL umožňuje používat C# jako skriptovací jazyk, spouští kód interaktivně při psaní.</span><span class="sxs-lookup"><span data-stu-id="89e1f-140">The REPL enables you to use C# as a scripting language, executing the code interactively as you write it.</span></span>

### <a name="workspaces-apis"></a><span data-ttu-id="89e1f-141">Rozhraní API pro pracovní prostory</span><span class="sxs-lookup"><span data-stu-id="89e1f-141">Workspaces APIs</span></span>

<span data-ttu-id="89e1f-142">Pracovní prostory vrstva obsahuje rozhraní API pracovní prostor, který je výchozím bodem pro provedení analýzy kódu a refaktoring přes celé řešení.</span><span class="sxs-lookup"><span data-stu-id="89e1f-142">The Workspaces layer contains the Workspace API, which is the starting point for doing code analysis and refactoring over entire solutions.</span></span> <span data-ttu-id="89e1f-143">Slouží k uspořádání všechny informace o projekty v řešení do jediného objektu modelu, nabízející přímý přístup k modelů kompilátoru vrstvy objektu bez nutnosti analyzovat soubory, nakonfigurujte možnosti, nebo spravovat závislosti projektu na projekt .</span><span class="sxs-lookup"><span data-stu-id="89e1f-143">It assists you in organizing all the information about the projects in a solution into single object model, offering you direct access to the compiler layer object models without needing to parse files, configure options, or manage project-to-project dependencies.</span></span>

<span data-ttu-id="89e1f-144">Kromě toho v pracovních prostorech vrstvy povrchy sadu rozhraní API používá při provádění analýzu kódu a refaktoring nástroje, které fungují v rámci hostitelského prostředí, jako je integrované vývojové prostředí sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="89e1f-144">In addition, the Workspaces layer surfaces a set of APIs used when implementing code analysis and refactoring tools that function within a host environment like the Visual Studio IDE.</span></span> <span data-ttu-id="89e1f-145">Mezi příklady patří najít všechny odkazy, formátování a rozhraní API pro generování kódu.</span><span class="sxs-lookup"><span data-stu-id="89e1f-145">Examples include the Find All References, Formatting, and Code Generation APIs.</span></span>

<span data-ttu-id="89e1f-146">Tato vrstva nemá žádné závislosti na součásti sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="89e1f-146">This layer has no dependencies on Visual Studio components.</span></span>
