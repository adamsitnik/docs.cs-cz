---
title: Návrh s použitím typů odkazů s možnou hodnotou null
description: Tento rozšířený kurz poskytuje Úvod k odkazům s možnou hodnotou null. Naučíte se vyjádřit svůj návrh na to, kdy mohou být referenční hodnoty null, a nechat vynutit kompilátor, pokud nesmí mít hodnotu null.
ms.date: 02/19/2019
ms.custom: mvc
ms.openlocfilehash: 357ebd13ca4c610f1c65009621ee628a90c70b15
ms.sourcegitcommit: 6f28b709592503d27077b16fff2e2eacca569992
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/28/2019
ms.locfileid: "70105765"
---
# <a name="tutorial-migrate-existing-code-with-nullable-reference-types"></a><span data-ttu-id="ce071-104">Kurz: Migrovat existující kód s odkazy s možnou hodnotou null</span><span class="sxs-lookup"><span data-stu-id="ce071-104">Tutorial: Migrate existing code with nullable reference types</span></span>

<span data-ttu-id="ce071-105">C#8 zavádí **typy odkazů s možnou hodnotou null**, které připlňují odkazové typy stejným způsobem jako typy hodnot s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-105">C# 8 introduces **nullable reference types**, which complement reference types the same way nullable value types complement value types.</span></span> <span data-ttu-id="ce071-106">Deklarujete proměnnou, která bude představovat **typ odkazu s možnou hodnotou null** připojením `?` k typu.</span><span class="sxs-lookup"><span data-stu-id="ce071-106">You declare a variable to be a **nullable reference type** by appending a `?` to the type.</span></span> <span data-ttu-id="ce071-107">Například `string?` představuje možnou hodnotu null `string`.</span><span class="sxs-lookup"><span data-stu-id="ce071-107">For example, `string?` represents a nullable `string`.</span></span> <span data-ttu-id="ce071-108">Tyto nové typy můžete použít k přehlednějšímu vyjádření záměru návrhu: některé proměnné *musí mít vždy hodnotu*, jiné *mohou chybět hodnoty*.</span><span class="sxs-lookup"><span data-stu-id="ce071-108">You can use these new types to more clearly express your design intent: some variables *must always have a value*, others *may be missing a value*.</span></span> <span data-ttu-id="ce071-109">Všechny existující proměnné typu odkazu by byly interpretovány jako typ odkazu, který není null.</span><span class="sxs-lookup"><span data-stu-id="ce071-109">Any existing variables of a reference type would be interpreted as a non-nullable reference type.</span></span> 

<span data-ttu-id="ce071-110">V tomto kurzu se naučíte:</span><span class="sxs-lookup"><span data-stu-id="ce071-110">In this tutorial, you'll learn how to:</span></span>

> [!div class="checklist"]
> - <span data-ttu-id="ce071-111">Při práci s kódem povolit kontroly pro prázdné odkazy</span><span class="sxs-lookup"><span data-stu-id="ce071-111">Enable null reference checks as you work with code.</span></span>
> - <span data-ttu-id="ce071-112">Diagnostikujte a opravte různá upozornění související s hodnotami null.</span><span class="sxs-lookup"><span data-stu-id="ce071-112">Diagnose and correct different warnings related to null values.</span></span>
> - <span data-ttu-id="ce071-113">Spravujte rozhraní mezi povolenými povolenými a zakázanými kontexty s povolenou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-113">Manage the interface between nullable enabled and nullable disabled contexts.</span></span>
> - <span data-ttu-id="ce071-114">Ovládá kontexty anotace s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-114">Control nullable annotation contexts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ce071-115">Požadavky</span><span class="sxs-lookup"><span data-stu-id="ce071-115">Prerequisites</span></span>

<span data-ttu-id="ce071-116">Musíte nastavit počítač tak, aby běžel .NET Core, včetně kompilátoru C# 8,0 beta.</span><span class="sxs-lookup"><span data-stu-id="ce071-116">You'll need to set up your machine to run .NET Core, including the C# 8.0 beta compiler.</span></span> <span data-ttu-id="ce071-117">Kompilátor C# 8 beta je k dispozici v [aplikaci Visual Studio 2019](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019)nebo nejnovější verzi [.NET Core 3,0 Preview](https://dotnet.microsoft.com/download/dotnet-core/3.0).</span><span class="sxs-lookup"><span data-stu-id="ce071-117">The C# 8 beta compiler is available with [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019), or the latest [.NET Core 3.0 preview](https://dotnet.microsoft.com/download/dotnet-core/3.0).</span></span>

<span data-ttu-id="ce071-118">V tomto kurzu se předpokládá, že C# máte zkušenosti s platformou a .NET, včetně sady Visual Studio nebo .NET Core CLI.</span><span class="sxs-lookup"><span data-stu-id="ce071-118">This tutorial assumes you're familiar with C# and .NET, including either Visual Studio or the .NET Core CLI.</span></span>

## <a name="explore-the-sample-application"></a><span data-ttu-id="ce071-119">Prozkoumejte ukázkovou aplikaci</span><span class="sxs-lookup"><span data-stu-id="ce071-119">Explore the sample application</span></span>

<span data-ttu-id="ce071-120">Ukázková aplikace, kterou migrujete, je webová aplikace čtečky informačního kanálu RSS.</span><span class="sxs-lookup"><span data-stu-id="ce071-120">The sample application that you'll migrate is an RSS feed reader web app.</span></span> <span data-ttu-id="ce071-121">Čte z jednoho informačního kanálu RSS a zobrazuje souhrny pro nejnovější články.</span><span class="sxs-lookup"><span data-stu-id="ce071-121">It reads from a single RSS feed and displays summaries for the most recent articles.</span></span> <span data-ttu-id="ce071-122">Můžete kliknout na některý z článků a navštívit web.</span><span class="sxs-lookup"><span data-stu-id="ce071-122">You can click on any of the articles to visit the site.</span></span> <span data-ttu-id="ce071-123">Aplikace je relativně nová, ale byla zapsána před přístupným odkazem s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-123">The application is relatively new but was written before nullable reference types were available.</span></span> <span data-ttu-id="ce071-124">Rozhodnutí o návrhu aplikace představují zásady zvuku, ale nevyužívají tuto důležitou funkci jazyka.</span><span class="sxs-lookup"><span data-stu-id="ce071-124">The design decisions for the application represented sound principles, but don't take advantage of this important language feature.</span></span>

<span data-ttu-id="ce071-125">Ukázková aplikace obsahuje knihovnu testů jednotek, která ověřuje hlavní funkčnost aplikace.</span><span class="sxs-lookup"><span data-stu-id="ce071-125">The sample application includes a unit test library that validates the major functionality of the app.</span></span> <span data-ttu-id="ce071-126">Tento projekt usnadňuje upgrade bezpečně, pokud změníte jakoukoli implementaci na základě vygenerovaných upozornění.</span><span class="sxs-lookup"><span data-stu-id="ce071-126">That project will make it easier to upgrade safely, if you change any of the implementation based on the warnings generated.</span></span> <span data-ttu-id="ce071-127">Počáteční kód si můžete stáhnout z úložiště [dotnet/Samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/start) GitHub.</span><span class="sxs-lookup"><span data-stu-id="ce071-127">You can download the starter code from the [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/start) GitHub repository.</span></span>

<span data-ttu-id="ce071-128">Váš cíl migrace projektu by měl být využívat nové funkce jazyka, aby bylo jasné vyjádřit záměr na hodnotu null proměnných, a tak učinit tak, že kompilátor negeneruje upozornění, když máte kontext anotace s možnou hodnotou null a nastaven výstražný kontext s `enabled`možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-128">Your goal migrating a project should be to leverage the new language features so that you clearly express your intent on the nullability of variables, and do so in such a way that the compiler doesn't generate warnings when you have the nullable annotation context and nullable warning context set to `enabled`.</span></span>

## <a name="upgrade-the-projects-to-c-8"></a><span data-ttu-id="ce071-129">Upgradovat projekty na C# 8</span><span class="sxs-lookup"><span data-stu-id="ce071-129">Upgrade the projects to C# 8</span></span>

<span data-ttu-id="ce071-130">Dobrým prvním krokem je určit rozsah úlohy migrace.</span><span class="sxs-lookup"><span data-stu-id="ce071-130">A good first step is to determine the scope of the migration task.</span></span> <span data-ttu-id="ce071-131">Začněte upgradem projektu na C# 8,0 (nebo novější).</span><span class="sxs-lookup"><span data-stu-id="ce071-131">Start by upgrading the project to C# 8.0 (or newer).</span></span> <span data-ttu-id="ce071-132">`LangVersion` Přidejte element do obou souborů csproj pro webový projekt a projekt testování částí:</span><span class="sxs-lookup"><span data-stu-id="ce071-132">Add the `LangVersion` element to both csproj files for the web project and the unit test project:</span></span>

```xml
<LangVersion>8.0</LangVersion>
```

<span data-ttu-id="ce071-133">Upgrade jazykové verze vybere C# 8,0, ale nepovoluje kontext anotace s možnou hodnotou null nebo kontext s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-133">Upgrading the language version selects C# 8.0, but does not enable the nullable annotation context or the nullable warning context.</span></span> <span data-ttu-id="ce071-134">Znovu sestavte projekt, aby se zajistilo, že bude sestaven bez upozornění.</span><span class="sxs-lookup"><span data-stu-id="ce071-134">Rebuild the project to ensure that it builds without warnings.</span></span>

<span data-ttu-id="ce071-135">Dobrým dalším krokem je zapnout kontext anotace s možnou hodnotou null a zjistit, kolik upozornění se vygenerovalo.</span><span class="sxs-lookup"><span data-stu-id="ce071-135">A good next step is to turn on the nullable annotation context and see how many warnings are generated.</span></span> <span data-ttu-id="ce071-136">Přidejte následující element do obou souborů csproj v řešení přímo pod `LangVersion` prvkem:</span><span class="sxs-lookup"><span data-stu-id="ce071-136">Add the following element to both csproj files in the solution, directly under the `LangVersion` element:</span></span>

```xml
<Nullable>enable</Nullable>
```

> [!IMPORTANT]
> <span data-ttu-id="ce071-137">Element se dřív jmenoval `NullableContextOptions`. `Nullable`</span><span class="sxs-lookup"><span data-stu-id="ce071-137">The `Nullable` element was previously named `NullableContextOptions`.</span></span> <span data-ttu-id="ce071-138">Přejmenování se dodává se sadou Visual Studio 2019, 16,2-P1.</span><span class="sxs-lookup"><span data-stu-id="ce071-138">The rename ships with Visual Studio 2019, 16.2-p1.</span></span> <span data-ttu-id="ce071-139">Tato změna nemá .NET Core SDK 3.0.100-preview5-011568.</span><span class="sxs-lookup"><span data-stu-id="ce071-139">The .NET Core SDK 3.0.100-preview5-011568 does not have this change.</span></span> <span data-ttu-id="ce071-140">Pokud používáte .NET Core CLI, budete ho muset použít `NullableContextOptions` , až bude k dispozici další verze Preview.</span><span class="sxs-lookup"><span data-stu-id="ce071-140">If you are using the .NET Core CLI, you'll need to use `NullableContextOptions` until the next preview is available.</span></span>

<span data-ttu-id="ce071-141">Proveďte testovací sestavení a Všimněte si seznamu upozornění.</span><span class="sxs-lookup"><span data-stu-id="ce071-141">Do a test build, and notice the warning list.</span></span> <span data-ttu-id="ce071-142">V této malé aplikaci kompilátor vygeneruje pět upozornění, takže je pravděpodobně nutné povolit kontext poznámky s možnou hodnotou null a zahájit opravy upozornění pro celý projekt.</span><span class="sxs-lookup"><span data-stu-id="ce071-142">In this small application, the compiler generates five warnings, so it's likely you'd leave the nullable annotation context enabled and start fixing warnings for the entire project.</span></span>

<span data-ttu-id="ce071-143">Tato strategie funguje jenom pro menší projekty.</span><span class="sxs-lookup"><span data-stu-id="ce071-143">That strategy works only for smaller projects.</span></span> <span data-ttu-id="ce071-144">U všech větších projektů je počet upozornění vygenerovaných povolením kontextu anotace s možnou hodnotou null pro celý základ kódu obtížnější opravit upozornění systematicky.</span><span class="sxs-lookup"><span data-stu-id="ce071-144">For any larger projects, the number of warnings generated by enabling the nullable annotation context for the entire codebase makes it harder to fix the warnings systematically.</span></span> <span data-ttu-id="ce071-145">U větších podnikových projektů často budete chtít najednou migrovat projekt.</span><span class="sxs-lookup"><span data-stu-id="ce071-145">For larger enterprise projects, you'll often want to migrate one project at a time.</span></span> <span data-ttu-id="ce071-146">V každém projektu migrujte jednu třídu nebo soubor v jednom okamžiku.</span><span class="sxs-lookup"><span data-stu-id="ce071-146">In each project, migrate one class or file at a time.</span></span>

## <a name="warnings-help-discover-original-design-intent"></a><span data-ttu-id="ce071-147">Upozornění, která vám pomůžou zjistit původní záměr návrhu</span><span class="sxs-lookup"><span data-stu-id="ce071-147">Warnings help discover original design intent</span></span>

<span data-ttu-id="ce071-148">K dispozici jsou dvě třídy, které generují více upozornění.</span><span class="sxs-lookup"><span data-stu-id="ce071-148">There are two classes that generate multiple warnings.</span></span> <span data-ttu-id="ce071-149">`NewsStoryViewModel` Začněte třídou.</span><span class="sxs-lookup"><span data-stu-id="ce071-149">Start with the `NewsStoryViewModel` class.</span></span> <span data-ttu-id="ce071-150">`Nullable` Odeberte prvek z obou souborů csproj, abyste mohli omezit rozsah upozornění na oddíly kódu, se kterými pracujete.</span><span class="sxs-lookup"><span data-stu-id="ce071-150">Remove the `Nullable` element from both csproj files so that you can limit the scope of warnings to the sections of code you're working with.</span></span> <span data-ttu-id="ce071-151">Otevřete soubor *NewsStoryViewModel.cs* a přidejte následující direktivy, abyste povolili kontext anotace s možnou hodnotou null pro `NewsStoryViewModel` a obnovili následující definici třídy:</span><span class="sxs-lookup"><span data-stu-id="ce071-151">Open the *NewsStoryViewModel.cs* file and add the following directives to enable the nullable annotation context for the `NewsStoryViewModel` and restore it following that class definition:</span></span>

```csharp
#nullable enable
public class NewsStoryViewModel
{
    public DateTimeOffset Published { get; set; }
    public string Title { get; set; }
    public string Uri { get; set; }
}
#nullable restore
```

<span data-ttu-id="ce071-152">Tyto dvě direktivy vám pomůžou zaměřit se na vaše úsilí při migraci.</span><span class="sxs-lookup"><span data-stu-id="ce071-152">These two directives help you focus your migration efforts.</span></span> <span data-ttu-id="ce071-153">Pro oblast kódu, na které aktivně pracujete, jsou vygenerována upozornění s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-153">The nullable warnings are generated for the area of code you're actively working on.</span></span> <span data-ttu-id="ce071-154">Můžete je nechat zapnuté, dokud nebudete připraveni zapnout upozornění pro celý projekt.</span><span class="sxs-lookup"><span data-stu-id="ce071-154">You'll leave them on until you're ready to turn on the warnings for the entire project.</span></span> <span data-ttu-id="ce071-155">`restore` Místo toho byste měli použít hodnotu `disable` spíše než, abyste omylem neaktivovali kontext později, když jste zapnuli anotace s možnou hodnotou null pro celý projekt.</span><span class="sxs-lookup"><span data-stu-id="ce071-155">You should use the `restore` rather than `disable` value so that you don't accidentally disable the context later when you've turned on nullable annotations for the entire project.</span></span> <span data-ttu-id="ce071-156">Jakmile zapnete kontext anotace s možnou hodnotou null pro celý projekt, můžete odebrat všechny `#nullable` direktivy pragma z tohoto projektu.</span><span class="sxs-lookup"><span data-stu-id="ce071-156">Once you've turned on the nullable annotation context for the entire project, you can remove all the `#nullable` pragmas from that project.</span></span>

<span data-ttu-id="ce071-157">`NewsStoryViewModel` Třída je objekt pro přenos dat (DTO) a dvě vlastnosti jsou řetězce pro čtení a zápis:</span><span class="sxs-lookup"><span data-stu-id="ce071-157">The `NewsStoryViewModel` class is a data transfer object (DTO) and two of the properties are read/write strings:</span></span>

[!code-csharp[InitialViewModel](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/ViewModels/NewsStoryViewModel.cs#StarterViewModel)]

<span data-ttu-id="ce071-158">Příčinou `CS8618`těchto dvou vlastností je neinicializovaná vlastnost "nepovolená hodnota null".</span><span class="sxs-lookup"><span data-stu-id="ce071-158">These two properties cause `CS8618`, "Non-nullable property is uninitialized".</span></span> <span data-ttu-id="ce071-159">Je dostatečně jasné: obě `string` vlastnosti mají výchozí `null` hodnotu při vytvoření `NewsStoryViewModel` konstrukce.</span><span class="sxs-lookup"><span data-stu-id="ce071-159">That's clear enough: both `string` properties have the default value of `null` when a `NewsStoryViewModel` is constructed.</span></span> <span data-ttu-id="ce071-160">To, co je důležité pro zjišťování `NewsStoryViewModel` , je způsob konstrukce objektů.</span><span class="sxs-lookup"><span data-stu-id="ce071-160">What's important to discover is how `NewsStoryViewModel` objects are constructed.</span></span> <span data-ttu-id="ce071-161">Při prohlížení této třídy nemůžete zjistit, zda `null` je hodnota součástí návrhu, nebo pokud jsou tyto objekty nastaveny na hodnoty, které nejsou null vždy při vytvoření jedné z nich.</span><span class="sxs-lookup"><span data-stu-id="ce071-161">Looking at this class, you can't tell if the `null` value is part of the design, or if these objects are set to non-null values whenever one is created.</span></span> <span data-ttu-id="ce071-162">Novinové články jsou vytvořeny v `GetNews` metodě `NewsService` třídy:</span><span class="sxs-lookup"><span data-stu-id="ce071-162">The news stories are created in the `GetNews` method of the `NewsService` class:</span></span>

[!code-csharp[StarterCreateNewsItem](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Services/NewsService.cs#CreateNewsItem)]

<span data-ttu-id="ce071-163">V předchozím bloku kódu se už trochu přechází.</span><span class="sxs-lookup"><span data-stu-id="ce071-163">There's quite a bit going on in the preceding block of code.</span></span> <span data-ttu-id="ce071-164">Tato aplikace používá balíček [](https://automapper.org/) NuGet automapper k vytvoření položky zpráv z `ISyndicationItem`.</span><span class="sxs-lookup"><span data-stu-id="ce071-164">This application uses the [AutoMapper](https://automapper.org/) NuGet package to construct a news item from an `ISyndicationItem`.</span></span> <span data-ttu-id="ce071-165">Zjistili jste, že položky novinového článku jsou vytvořeny a vlastnosti jsou nastaveny v daném příkazu.</span><span class="sxs-lookup"><span data-stu-id="ce071-165">You've discovered that the news story items are constructed and the properties are set in that one statement.</span></span> <span data-ttu-id="ce071-166">To znamená, že v návrhu `NewsStoryViewModel` pro je tato vlastnost nikdy `null` mít hodnotu.</span><span class="sxs-lookup"><span data-stu-id="ce071-166">That means the design for the `NewsStoryViewModel` indicates that these properties should never have the `null` value.</span></span> <span data-ttu-id="ce071-167">Tyto vlastnosti by neměly být **typy odkazů**, které nejsou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-167">These properties should be **nonnullable reference types**.</span></span> <span data-ttu-id="ce071-168">Který nejlépe vyjadřuje původní záměr návrhu.</span><span class="sxs-lookup"><span data-stu-id="ce071-168">That best expresses the original design intent.</span></span> <span data-ttu-id="ce071-169">Ve skutečnosti *jsou* všechny `NewsStoryViewModel` správně vytvořeny instance s hodnotami, které nejsou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-169">In fact, any `NewsStoryViewModel` *is* correctly instantiated with non-null values.</span></span> <span data-ttu-id="ce071-170">Díky tomu následující inicializační kód provede platnou opravu:</span><span class="sxs-lookup"><span data-stu-id="ce071-170">That makes the following initialization code a valid fix:</span></span>

```csharp
public class NewsStoryViewModel
{
    public DateTimeOffset Published { get; set; }
    public string Title { get; set; } = default!;
    public string Uri { get; set; } = default!;
}
```

<span data-ttu-id="ce071-171">Přiřazení `Title` `Uri` `default` typu a, `null` na které je pro typ, nemění chování programu za běhu. `string`</span><span class="sxs-lookup"><span data-stu-id="ce071-171">The assignment of `Title` and `Uri` to `default` which is `null` for the `string` type doesn't change the runtime behavior of the program.</span></span> <span data-ttu-id="ce071-172">`NewsStoryViewModel` Je stále vytvořen s hodnotami null, ale nyní kompilátor hlásí žádná upozornění.</span><span class="sxs-lookup"><span data-stu-id="ce071-172">The `NewsStoryViewModel` is still constructed with null values, but now the compiler reports no warnings.</span></span> <span data-ttu-id="ce071-173">**Operátor null-striktní**, `!` znak následující po `default` výrazu instruuje kompilátor, že předchozí výraz není null.</span><span class="sxs-lookup"><span data-stu-id="ce071-173">The **null-forgiving operator**, the `!` character following the `default` expression tells the compiler that the preceding expression is not null.</span></span> <span data-ttu-id="ce071-174">Tato technika může být účelná, pokud jiné změny vynutí mnohem větší změny základu kódu, ale v této aplikaci je poměrně rychlé a lepší řešení: `NewsStoryViewModel` Nastavte neměnný typ, kde jsou všechny vlastnosti nastaveny v konstruktoru.</span><span class="sxs-lookup"><span data-stu-id="ce071-174">This technique may be expedient when other changes force much larger changes to a code base, but in this application there is a relatively quick and better solution: Make the `NewsStoryViewModel` an immutable type where all the properties are set in the constructor.</span></span> <span data-ttu-id="ce071-175">Proveďte následující změny `NewsStoryViewModel`:</span><span class="sxs-lookup"><span data-stu-id="ce071-175">Make the following changes to the `NewsStoryViewModel`:</span></span>

[!code-csharp[FinishedViewModel](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/ViewModels/NewsStoryViewModel.cs#FinishedViewModel)]

<span data-ttu-id="ce071-176">Až to uděláte, musíte aktualizovat kód, který konfiguruje automapper, aby místo nastavení vlastností používal konstruktor.</span><span class="sxs-lookup"><span data-stu-id="ce071-176">Once that's done, you need to update the code that configures the AutoMapper so that it uses the constructor rather than setting properties.</span></span> <span data-ttu-id="ce071-177">V `NewsService.cs` dolní části souboru otevřete a vyhledejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="ce071-177">Open `NewsService.cs` and look for the following code at the bottom of the file:</span></span>

[!code-csharp[StarterAutoMapper](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Services/NewsService.cs#ConfigureAutoMapper)]

<span data-ttu-id="ce071-178">Tento kód mapuje vlastnosti `ISyndicationItem` objektu `NewsStoryViewModel` na vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="ce071-178">That code maps properties of the `ISyndicationItem` object to the `NewsStoryViewModel` properties.</span></span> <span data-ttu-id="ce071-179">Chcete, aby automapper místo toho poskytovala mapování pomocí konstruktoru.</span><span class="sxs-lookup"><span data-stu-id="ce071-179">You want the AutoMapper to provide the mapping using a constructor instead.</span></span> <span data-ttu-id="ce071-180">Výše uvedený kód nahraďte následující konfigurací automapper:</span><span class="sxs-lookup"><span data-stu-id="ce071-180">Replace the above code with the following automapper configuration:</span></span>

[!code-csharp[FinishedViewModel](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#ConfigureAutoMapper)]

<span data-ttu-id="ce071-181">Všimněte si, že vzhledem k tomu, že je tato třída malá a že jste pečlivě prozkoumali, měli byste zapnout `#nullable enable` direktivu nad touto deklarací třídy.</span><span class="sxs-lookup"><span data-stu-id="ce071-181">Notice that because this class is small, and you've examined carefully, you should turn on the `#nullable enable` directive above this class declaration.</span></span> <span data-ttu-id="ce071-182">Změna konstruktoru mohla způsobit poškození, takže je vhodné spustit všechny testy a otestovat aplikaci před přechodem na.</span><span class="sxs-lookup"><span data-stu-id="ce071-182">The change to the constructor could have broken something, so it's worthwhile to run all the tests and test the application before moving on.</span></span>

<span data-ttu-id="ce071-183">První sada změn ukázala, jak zjistit, kdy původní návrh uvedl, že proměnné by neměly být nastaveny na `null`.</span><span class="sxs-lookup"><span data-stu-id="ce071-183">The first set of changes showed you how to discover when the original design indicated that variables shouldn't be set to `null`.</span></span> <span data-ttu-id="ce071-184">Technika je označována jako **správná konstrukcí**.</span><span class="sxs-lookup"><span data-stu-id="ce071-184">The technique is referred to as **correct by construction**.</span></span> <span data-ttu-id="ce071-185">Deklarujete, že objekt a jeho vlastnosti nemohou být `null` při sestavení.</span><span class="sxs-lookup"><span data-stu-id="ce071-185">You declare that an object and its properties cannot be `null` when it's constructed.</span></span> <span data-ttu-id="ce071-186">Analýza toku kompilátoru poskytuje záruku, že tyto vlastnosti nejsou nastaveny `null` po konstrukci.</span><span class="sxs-lookup"><span data-stu-id="ce071-186">The compiler's flow analysis provides assurance that those properties aren't set to `null` after construction.</span></span> <span data-ttu-id="ce071-187">Všimněte si, že tento konstruktor je volán externím kódem a tento kód je **oblivious s možnou hodnotou null**.</span><span class="sxs-lookup"><span data-stu-id="ce071-187">Note that this constructor is called by external code, and that code is **nullable oblivious**.</span></span> <span data-ttu-id="ce071-188">Nová syntaxe neposkytuje kontrolu za běhu.</span><span class="sxs-lookup"><span data-stu-id="ce071-188">The new syntax doesn't provide runtime checking.</span></span> <span data-ttu-id="ce071-189">Externí kód může obejít analýzu toku kompilátoru.</span><span class="sxs-lookup"><span data-stu-id="ce071-189">External code might circumvent the compiler's flow analysis.</span></span> 

<span data-ttu-id="ce071-190">Jindy, struktura třídy poskytuje různé změny záměru.</span><span class="sxs-lookup"><span data-stu-id="ce071-190">Other times, the structure of a class provides different clues to the intent.</span></span> <span data-ttu-id="ce071-191">Otevřete soubor *Error.cshtml.cs* ve složce *stránky* .</span><span class="sxs-lookup"><span data-stu-id="ce071-191">Open the *Error.cshtml.cs* file in the *Pages* folder.</span></span> <span data-ttu-id="ce071-192">`ErrorViewModel` Obsahuje následující kód:</span><span class="sxs-lookup"><span data-stu-id="ce071-192">The `ErrorViewModel` contains the following code:</span></span>

[!code-csharp[StarterErrorModel](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Pages/Error.cshtml.cs#StartErrorModel)]

<span data-ttu-id="ce071-193">Přidejte direktivu před deklaraci třídy `#nullable restore` a direktivu po ní. `#nullable enable`</span><span class="sxs-lookup"><span data-stu-id="ce071-193">Add the `#nullable enable` directive before the class declaration, and a `#nullable restore` directive after it.</span></span> <span data-ttu-id="ce071-194">Zobrazí se jedno upozornění, které `RequestId` není inicializováno.</span><span class="sxs-lookup"><span data-stu-id="ce071-194">You'll get one warning that `RequestId` is not initialized.</span></span> <span data-ttu-id="ce071-195">Pohledem na třídu byste měli rozhodnout, že `RequestId` v některých případech by vlastnost měla mít hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="ce071-195">By looking at the class, you should decide that the `RequestId` property should be null in some cases.</span></span> <span data-ttu-id="ce071-196">Existence `ShowRequestId` vlastnosti označuje, že chybějící hodnoty jsou možné.</span><span class="sxs-lookup"><span data-stu-id="ce071-196">The existence of the `ShowRequestId` property indicates that missing values are possible.</span></span> <span data-ttu-id="ce071-197">Vzhledem `null` k tomu, že je `?` platný, `string` přidejte na typ, `RequestId` který určuje, že vlastnost je *typ odkazu s možnou hodnotou null*.</span><span class="sxs-lookup"><span data-stu-id="ce071-197">Because `null` is valid, add the `?` on the `string` type to indicate the `RequestId` property is a *nullable reference type*.</span></span> <span data-ttu-id="ce071-198">Konečná třída vypadá jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="ce071-198">The final class looks like the following example:</span></span>

[!code-csharp[FinishedErrorModel](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Error.cshtml.cs#ErrorModel)]

<span data-ttu-id="ce071-199">Zkontrolujte použití vlastnosti a uvidíte, že na přidružené stránce je vlastnost před vykreslením v kódu zkontrolována na hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="ce071-199">Check for the uses of the property, and you see that in the associated page, the property is checked for null before rendering it in markup.</span></span> <span data-ttu-id="ce071-200">To je bezpečné použití typu odkazu s možnou hodnotou null, takže jste s touto třídou hotovi.</span><span class="sxs-lookup"><span data-stu-id="ce071-200">That's a safe use of a nullable reference type, so you're done with this class.</span></span>

## <a name="fixing-nulls-causes-change"></a><span data-ttu-id="ce071-201">Oprava hodnot null způsobí změnu.</span><span class="sxs-lookup"><span data-stu-id="ce071-201">Fixing nulls causes change</span></span>

<span data-ttu-id="ce071-202">Oprava pro jednu sadu upozornění často vytvoří nová upozornění v souvisejícím kódu.</span><span class="sxs-lookup"><span data-stu-id="ce071-202">Frequently, the fix for one set of warnings creates new warnings in related code.</span></span> <span data-ttu-id="ce071-203">Pojďme se podívat na upozornění v akci `index.cshtml.cs` opravou třídy.</span><span class="sxs-lookup"><span data-stu-id="ce071-203">Let's see the warnings in action by fixing the `index.cshtml.cs` class.</span></span> <span data-ttu-id="ce071-204">`index.cshtml.cs` Otevřete soubor a Projděte si kód.</span><span class="sxs-lookup"><span data-stu-id="ce071-204">Open the `index.cshtml.cs` file and examine the code.</span></span> <span data-ttu-id="ce071-205">Tento soubor obsahuje kód za stránkou indexu:</span><span class="sxs-lookup"><span data-stu-id="ce071-205">This file contains the code behind for the index page:</span></span>

[!code-csharp[StarterIndexModel](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Pages/Index.cshtml.cs#IndexModelStart)]

<span data-ttu-id="ce071-206">`#nullable enable` Přidejte direktivu a uvidíte dvě upozornění.</span><span class="sxs-lookup"><span data-stu-id="ce071-206">Add the `#nullable enable` directive and you'll see two warnings.</span></span> <span data-ttu-id="ce071-207">Není inicializována `NewsItems`vlastnostanivlastnost `ErrorText` .</span><span class="sxs-lookup"><span data-stu-id="ce071-207">Neither the `ErrorText` property nor the `NewsItems` property is initialized.</span></span> <span data-ttu-id="ce071-208">Přezkoumání této třídy by vedlo k názoru, že obě vlastnosti by měly být odkazy s možnou hodnotou null: Oba mají privátní metody setter.</span><span class="sxs-lookup"><span data-stu-id="ce071-208">An examination of this class would lead you to believe that both properties should be nullable reference types: Both have private setters.</span></span> <span data-ttu-id="ce071-209">V `OnGet` metodě je přiřazena právě jedna.</span><span class="sxs-lookup"><span data-stu-id="ce071-209">Exactly one is assigned in the `OnGet` method.</span></span> <span data-ttu-id="ce071-210">Před provedením změn se podívejte na uživatele obou vlastností.</span><span class="sxs-lookup"><span data-stu-id="ce071-210">Before making changes, look at the consumers of both properties.</span></span> <span data-ttu-id="ce071-211">Na samotné stránce je před generováním značek pro všechny chyby zkontrolováno na `ErrorText` hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="ce071-211">In the page itself, the `ErrorText` is checked against null before generating markup for any errors.</span></span> <span data-ttu-id="ce071-212">Kolekce je porovnána s a zkontrolována ,abybylozajištěno,žekolekceobsahujepoložky.`null` `NewsItems`</span><span class="sxs-lookup"><span data-stu-id="ce071-212">The `NewsItems` collection is checked against `null`, and checked to ensure the collection has items.</span></span> <span data-ttu-id="ce071-213">Rychlá oprava by představovala vlastnosti odkazu s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-213">A quick fix would be to make both properties nullable reference types.</span></span> <span data-ttu-id="ce071-214">Lepším řešením je vytvořit kolekci odkazový typ, který není null, a při načítání zpráv přidat položky do existující kolekce.</span><span class="sxs-lookup"><span data-stu-id="ce071-214">A better fix would be to make the collection a nonnullable reference type, and add items to the existing collection when retrieving news.</span></span> <span data-ttu-id="ce071-215">První oprava je přidat `?` `string` do typu pro `ErrorText`:</span><span class="sxs-lookup"><span data-stu-id="ce071-215">The first fix is to add the `?` to the `string` type for the `ErrorText`:</span></span>

[!code-csharp[UpdateErrorText](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#UpdateErrorText)]

<span data-ttu-id="ce071-216">Tato změna se neprojeví na základě jiného kódu, protože jakýkoliv `ErrorText` přístup k této vlastnosti byl již chráněn pomocí kontroly hodnoty null.</span><span class="sxs-lookup"><span data-stu-id="ce071-216">That change won't ripple through other code, because any access to the `ErrorText` property was already guarded by null checks.</span></span> <span data-ttu-id="ce071-217">Dále inicializujte `NewsItems` seznam a odeberte metodu setter vlastnosti a vytvořte ji jako vlastnost jen pro čtení:</span><span class="sxs-lookup"><span data-stu-id="ce071-217">Next, initialize the `NewsItems` list and remove the property setter, making it a readonly property:</span></span>

[!code-csharp[InitializeNewsItems](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#InitializeNewsItems)]

<span data-ttu-id="ce071-218">Opravili jsme upozornění, ale zavedli chybu.</span><span class="sxs-lookup"><span data-stu-id="ce071-218">That fixed the warning but introduced an error.</span></span> <span data-ttu-id="ce071-219">Seznam je nyní **správný konstrukcí**, ale kód, který nastaví v `OnGet` seznamu, musí být změněn tak, aby odpovídal novému rozhraní API. `NewsItems`</span><span class="sxs-lookup"><span data-stu-id="ce071-219">The `NewsItems` list is now **correct by construction**, but the code that sets the list in `OnGet` must change to match the new API.</span></span> <span data-ttu-id="ce071-220">Místo přiřazení volejte volání `AddRange` pro přidání položek zpráv do existujícího seznamu:</span><span class="sxs-lookup"><span data-stu-id="ce071-220">Instead of an assignment, call `AddRange` to add the news items to the existing list:</span></span>

[!code-csharp[AddRange](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#AddRange)]

<span data-ttu-id="ce071-221">Použití `AddRange` namísto přiřazení znamená `GetNews` , že metoda může `List`vracet `IEnumerable` namísto.</span><span class="sxs-lookup"><span data-stu-id="ce071-221">Using `AddRange` instead of an assignment means that the `GetNews` method can return an `IEnumerable` instead of a `List`.</span></span> <span data-ttu-id="ce071-222">Který ukládá jedno přidělení.</span><span class="sxs-lookup"><span data-stu-id="ce071-222">That saves one allocation.</span></span> <span data-ttu-id="ce071-223">Změňte signaturu metody a odeberte `ToList` volání, jak je znázorněno v následujícím příkladu kódu:</span><span class="sxs-lookup"><span data-stu-id="ce071-223">Change the signature of the method, and remove the `ToList` call, as shown in the following code sample:</span></span>

[!code-csharp[GetNews](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#GetNewsFinished)]

<span data-ttu-id="ce071-224">Změna signatury také zruší jeden z testů.</span><span class="sxs-lookup"><span data-stu-id="ce071-224">Changing the signature breaks one of tests as well.</span></span> <span data-ttu-id="ce071-225">`NewsServiceTests.cs` Otevřete soubor`Services` ve složce`SimpleFeedReader.Tests` projektu.</span><span class="sxs-lookup"><span data-stu-id="ce071-225">Open the `NewsServiceTests.cs` file in the `Services` folder of the `SimpleFeedReader.Tests` project.</span></span> <span data-ttu-id="ce071-226">Přejděte na `Returns_News_Stories_Given_Valid_Uri` test a změňte typ `result` proměnné na `IEnumerable<NewsItem>`.</span><span class="sxs-lookup"><span data-stu-id="ce071-226">Navigate to the `Returns_News_Stories_Given_Valid_Uri` test and change the type of the `result` variable to `IEnumerable<NewsItem>`.</span></span> <span data-ttu-id="ce071-227">Změna typu znamená, že `Count` vlastnost již není k dispozici, takže `Count` nahraďte vlastnost `Assert` voláním metody `Any()`:</span><span class="sxs-lookup"><span data-stu-id="ce071-227">Changing the type means the `Count` property is no longer available, so replace the `Count` property in the `Assert` with a call to `Any()`:</span></span>

[!code-csharp[FixTests](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader.Tests/Services/NewsServiceTests.cs#FixTestSignature)]

<span data-ttu-id="ce071-228">Je nutné přidat `using System.Linq` příkaz na začátek souboru.</span><span class="sxs-lookup"><span data-stu-id="ce071-228">You'll need to add a `using System.Linq` statement to the beginning of the file as well.</span></span>

<span data-ttu-id="ce071-229">Tato sada změn zvýrazňuje zvláštní pozornost při aktualizaci kódu, který obsahuje obecné vytváření instancí.</span><span class="sxs-lookup"><span data-stu-id="ce071-229">This set of changes highlights special consideration when updating code that includes generic instantiations.</span></span> <span data-ttu-id="ce071-230">Seznam i elementy v seznamu typů bez hodnoty null.</span><span class="sxs-lookup"><span data-stu-id="ce071-230">Both the list and the elements in the list of non-nullable types.</span></span> <span data-ttu-id="ce071-231">V obou případech mohou být typy s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-231">Either or both could be nullable types.</span></span> <span data-ttu-id="ce071-232">Jsou povoleny všechny následující deklarace:</span><span class="sxs-lookup"><span data-stu-id="ce071-232">All the following declarations are allowed:</span></span>

- <span data-ttu-id="ce071-233">`List<NewsStoryViewModel>`: neprázdný seznam modelů zobrazení s hodnotou null</span><span class="sxs-lookup"><span data-stu-id="ce071-233">`List<NewsStoryViewModel>`: nonnullable list of nonullable view models.</span></span>
- <span data-ttu-id="ce071-234">`List<NewsStoryViewModel?>`: neprázdný seznam modelů zobrazení s možnou hodnotou null</span><span class="sxs-lookup"><span data-stu-id="ce071-234">`List<NewsStoryViewModel?>`: nonnullable list of nullable view models.</span></span>
- <span data-ttu-id="ce071-235">`List<NewsStoryViewModel>?`: seznam s možnou hodnotou null v neprázdných modelech zobrazení.</span><span class="sxs-lookup"><span data-stu-id="ce071-235">`List<NewsStoryViewModel>?`: nullable list of nonnullable view models.</span></span>
- <span data-ttu-id="ce071-236">`List<NewsStoryViewModel?>?`: nepovolený seznam modelů zobrazení s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-236">`List<NewsStoryViewModel?>?`: nullable list of nullable view models.</span></span>

## <a name="interfaces-with-external-code"></a><span data-ttu-id="ce071-237">Rozhraní s externím kódem</span><span class="sxs-lookup"><span data-stu-id="ce071-237">Interfaces with external code</span></span>

<span data-ttu-id="ce071-238">Provedli jste změny `NewsService` třídy, takže zapnete `#nullable enable` anotaci pro tuto třídu.</span><span class="sxs-lookup"><span data-stu-id="ce071-238">You've made changes to the `NewsService` class, so turn on the `#nullable enable` annotation for that class.</span></span> <span data-ttu-id="ce071-239">To negeneruje žádná nová upozornění.</span><span class="sxs-lookup"><span data-stu-id="ce071-239">This won't generate any new warnings.</span></span> <span data-ttu-id="ce071-240">Pečlivé zkoumání třídy však pomáhá ilustrovat některá omezení analýzy toku kompilátoru.</span><span class="sxs-lookup"><span data-stu-id="ce071-240">However, careful examination of the class helps to illustrate some of the limitations of the compiler's flow analysis.</span></span> <span data-ttu-id="ce071-241">Prověřte konstruktor:</span><span class="sxs-lookup"><span data-stu-id="ce071-241">Examine the constructor:</span></span>

[!code-csharp[ServiceConstructor](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#ServiceConstructor)]

<span data-ttu-id="ce071-242">`IMapper` Parametr je zadán jako neprázdný odkaz.</span><span class="sxs-lookup"><span data-stu-id="ce071-242">The `IMapper` parameter is typed as a nonnullable reference.</span></span> <span data-ttu-id="ce071-243">Je volána ASP.NET Core kódem infrastruktury, takže kompilátor ve skutečnosti neví, že `IMapper` nikdy nebude null.</span><span class="sxs-lookup"><span data-stu-id="ce071-243">It's called by ASP.NET Core infrastructure code, so the compiler doesn't really know that the `IMapper` will never be null.</span></span> <span data-ttu-id="ce071-244">Výchozí kontejner pro vkládání závislostí (DI) ASP.NET Core vyvolá výjimku, pokud nemůže vyřešit nezbytnou službu, takže kód je správný.</span><span class="sxs-lookup"><span data-stu-id="ce071-244">The default ASP.NET Core dependency injection (DI) container throws an exception if it can't resolve a necessary service, so the code is correct.</span></span> <span data-ttu-id="ce071-245">Kompilátor nemůže ověřit všechna volání vašich veřejných rozhraní API, a to i v případě, že je váš kód zkompilován s povolenými kontexty anotace s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-245">The compiler can't validate all calls to your public APIs, even if your code is compiled with nullable annotation contexts enabled.</span></span> <span data-ttu-id="ce071-246">Kromě toho mohou být knihovny spotřebovány projekty, které ještě nebyly přihlášeny k použití typů odkazů s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-246">Furthermore, your libraries may be consumed by projects that have not yet opted into using nullable reference types.</span></span> <span data-ttu-id="ce071-247">Ověřte vstupy do veřejných rozhraní API, i když je deklarujete jako nehodnotné typy.</span><span class="sxs-lookup"><span data-stu-id="ce071-247">Validate inputs to public APIs even though you've declared them as nonnullable types.</span></span>

## <a name="get-the-code"></a><span data-ttu-id="ce071-248">Získat kód</span><span class="sxs-lookup"><span data-stu-id="ce071-248">Get the code</span></span>

<span data-ttu-id="ce071-249">Opravili jste upozornění, která jste identifikovali při počáteční kompilaci testů, takže teď můžete zapnout kontext anotace s možnou hodnotou null pro oba projekty.</span><span class="sxs-lookup"><span data-stu-id="ce071-249">You've fixed the warnings you identified in the initial test compile, so now you can turn on the nullable annotation context for both projects.</span></span> <span data-ttu-id="ce071-250">Znovu sestavte projekty; Kompilátor ohlásí žádná upozornění.</span><span class="sxs-lookup"><span data-stu-id="ce071-250">Rebuild the projects; the compiler reports no warnings.</span></span> <span data-ttu-id="ce071-251">V úložišti GitHub [/Samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/finished) můžete získat kód dokončeného projektu.</span><span class="sxs-lookup"><span data-stu-id="ce071-251">You can get the code for the finished project in the [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/finished) GitHub repository.</span></span>

<span data-ttu-id="ce071-252">Nové funkce, které podporují typy odkazů s možnou hodnotou null, vám pomůžou najít a opravit `null` potenciální chyby ve vašem kódu.</span><span class="sxs-lookup"><span data-stu-id="ce071-252">The new features that support nullable reference types help you find and fix potential errors in how you handle `null` values in your code.</span></span> <span data-ttu-id="ce071-253">Povolení kontextu anotace s možnou hodnotou null umožňuje vyjádřit svůj záměr návrhu: některé proměnné by nikdy neměly mít hodnotu null, jiné proměnné mohou obsahovat hodnoty null.</span><span class="sxs-lookup"><span data-stu-id="ce071-253">Enabling the nullable annotation context allows you to express your design intent: some variables should never be null, other variables may contain null values.</span></span> <span data-ttu-id="ce071-254">Tyto funkce usnadňují deklaraci záměru návrhu.</span><span class="sxs-lookup"><span data-stu-id="ce071-254">These features make it easier for you to declare your design intent.</span></span> <span data-ttu-id="ce071-255">Podobně kontext varování s možnou hodnotou null instruuje kompilátor, aby vydával upozornění v případě porušení tohoto záměru.</span><span class="sxs-lookup"><span data-stu-id="ce071-255">Similarly, the nullable warning context instructs the compiler to issue warnings when you have violated that intent.</span></span> <span data-ttu-id="ce071-256">Tato upozornění vás provedou, abyste provedli aktualizace, které by váš kód lépe odolný `NullReferenceException` a méně pravděpodobně vyvolali během provádění.</span><span class="sxs-lookup"><span data-stu-id="ce071-256">Those warnings guide you to make updates that make your code more resilient and less likely to throw a `NullReferenceException` during execution.</span></span> <span data-ttu-id="ce071-257">Rozsah těchto kontextů můžete řídit tak, abyste se mohli soustředit na místní oblasti kódu, které se mají migrovat, zatímco zbývající základ kódu se nedotkne.</span><span class="sxs-lookup"><span data-stu-id="ce071-257">You can control the scope of these contexts so that you can focus on local areas of code to migrate while the remaining codebase is untouched.</span></span> <span data-ttu-id="ce071-258">V praxi můžete tuto úlohu migrace provést jako součást běžné údržby tříd.</span><span class="sxs-lookup"><span data-stu-id="ce071-258">In practice, you can make this migration task a part of regular maintenance to your classes.</span></span> <span data-ttu-id="ce071-259">V tomto kurzu se ukázal proces migrace aplikace na použití typů odkazů s možnou hodnotou null.</span><span class="sxs-lookup"><span data-stu-id="ce071-259">This tutorial demonstrated the process to migrate an application to use nullable reference types.</span></span> <span data-ttu-id="ce071-260">Můžete prozkoumat větší reálný příklad tohoto procesu prozkoumáním žádosti o přijetí změn (PR [Jan Skeet](https://github.com/jskeet) ), která umožňuje zahrnutí typů odkazů s možnou hodnotou null do [NodaTime](https://github.com/nodatime/nodatime/pull/1240/commits).</span><span class="sxs-lookup"><span data-stu-id="ce071-260">You can explore a larger real-world example of this process by examining the PR [Jon Skeet](https://github.com/jskeet) made to incorporate nullable reference types into [NodaTime](https://github.com/nodatime/nodatime/pull/1240/commits).</span></span>
